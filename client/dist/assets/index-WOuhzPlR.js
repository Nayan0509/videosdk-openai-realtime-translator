(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const h of document.querySelectorAll('link[rel="modulepreload"]'))a(h);new MutationObserver(h=>{for(const y of h)if(y.type==="childList")for(const j of y.addedNodes)j.tagName==="LINK"&&j.rel==="modulepreload"&&a(j)}).observe(document,{childList:!0,subtree:!0});function r(h){const y={};return h.integrity&&(y.integrity=h.integrity),h.referrerPolicy&&(y.referrerPolicy=h.referrerPolicy),h.crossOrigin==="use-credentials"?y.credentials="include":h.crossOrigin==="anonymous"?y.credentials="omit":y.credentials="same-origin",y}function a(h){if(h.ep)return;h.ep=!0;const y=r(h);fetch(h.href,y)}})();function zp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var mm={exports:{}},Ju={},gm={exports:{}},Or={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gl=Symbol.for("react.element"),c_=Symbol.for("react.portal"),l_=Symbol.for("react.fragment"),u_=Symbol.for("react.strict_mode"),d_=Symbol.for("react.profiler"),p_=Symbol.for("react.provider"),h_=Symbol.for("react.context"),f_=Symbol.for("react.forward_ref"),m_=Symbol.for("react.suspense"),g_=Symbol.for("react.memo"),v_=Symbol.for("react.lazy"),qh=Symbol.iterator;function __(e){return e===null||typeof e!="object"?null:(e=qh&&e[qh]||e["@@iterator"],typeof e=="function"?e:null)}var vm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_m=Object.assign,ym={};function nc(e,t,r){this.props=e,this.context=t,this.refs=ym,this.updater=r||vm}nc.prototype.isReactComponent={};nc.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};nc.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function bm(){}bm.prototype=nc.prototype;function Vp(e,t,r){this.props=e,this.context=t,this.refs=ym,this.updater=r||vm}var $p=Vp.prototype=new bm;$p.constructor=Vp;_m($p,nc.prototype);$p.isPureReactComponent=!0;var Kh=Array.isArray,wm=Object.prototype.hasOwnProperty,Gp={current:null},Sm={key:!0,ref:!0,__self:!0,__source:!0};function Rm(e,t,r){var a,h={},y=null,j=null;if(t!=null)for(a in t.ref!==void 0&&(j=t.ref),t.key!==void 0&&(y=""+t.key),t)wm.call(t,a)&&!Sm.hasOwnProperty(a)&&(h[a]=t[a]);var L=arguments.length-2;if(L===1)h.children=r;else if(1<L){for(var b=Array(L),u=0;u<L;u++)b[u]=arguments[u+2];h.children=b}if(e&&e.defaultProps)for(a in L=e.defaultProps,L)h[a]===void 0&&(h[a]=L[a]);return{$$typeof:gl,type:e,key:y,ref:j,props:h,_owner:Gp.current}}function y_(e,t){return{$$typeof:gl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Zp(e){return typeof e=="object"&&e!==null&&e.$$typeof===gl}function b_(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Qh=/\/+/g;function wd(e,t){return typeof e=="object"&&e!==null&&e.key!=null?b_(""+e.key):t.toString(36)}function pu(e,t,r,a,h){var y=typeof e;(y==="undefined"||y==="boolean")&&(e=null);var j=!1;if(e===null)j=!0;else switch(y){case"string":case"number":j=!0;break;case"object":switch(e.$$typeof){case gl:case c_:j=!0}}if(j)return j=e,h=h(j),e=a===""?"."+wd(j,0):a,Kh(h)?(r="",e!=null&&(r=e.replace(Qh,"$&/")+"/"),pu(h,t,r,"",function(u){return u})):h!=null&&(Zp(h)&&(h=y_(h,r+(!h.key||j&&j.key===h.key?"":(""+h.key).replace(Qh,"$&/")+"/")+e)),t.push(h)),1;if(j=0,a=a===""?".":a+":",Kh(e))for(var L=0;L<e.length;L++){y=e[L];var b=a+wd(y,L);j+=pu(y,t,r,b,h)}else if(b=__(e),typeof b=="function")for(e=b.call(e),L=0;!(y=e.next()).done;)y=y.value,b=a+wd(y,L++),j+=pu(y,t,r,b,h);else if(y==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return j}function ql(e,t,r){if(e==null)return e;var a=[],h=0;return pu(e,a,"","",function(y){return t.call(r,y,h++)}),a}function w_(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Da={current:null},hu={transition:null},S_={ReactCurrentDispatcher:Da,ReactCurrentBatchConfig:hu,ReactCurrentOwner:Gp};function Em(){throw Error("act(...) is not supported in production builds of React.")}Or.Children={map:ql,forEach:function(e,t,r){ql(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return ql(e,function(){t++}),t},toArray:function(e){return ql(e,function(t){return t})||[]},only:function(e){if(!Zp(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Or.Component=nc;Or.Fragment=l_;Or.Profiler=d_;Or.PureComponent=Vp;Or.StrictMode=u_;Or.Suspense=m_;Or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=S_;Or.act=Em;Or.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=_m({},e.props),h=e.key,y=e.ref,j=e._owner;if(t!=null){if(t.ref!==void 0&&(y=t.ref,j=Gp.current),t.key!==void 0&&(h=""+t.key),e.type&&e.type.defaultProps)var L=e.type.defaultProps;for(b in t)wm.call(t,b)&&!Sm.hasOwnProperty(b)&&(a[b]=t[b]===void 0&&L!==void 0?L[b]:t[b])}var b=arguments.length-2;if(b===1)a.children=r;else if(1<b){L=Array(b);for(var u=0;u<b;u++)L[u]=arguments[u+2];a.children=L}return{$$typeof:gl,type:e.type,key:h,ref:y,props:a,_owner:j}};Or.createContext=function(e){return e={$$typeof:h_,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:p_,_context:e},e.Consumer=e};Or.createElement=Rm;Or.createFactory=function(e){var t=Rm.bind(null,e);return t.type=e,t};Or.createRef=function(){return{current:null}};Or.forwardRef=function(e){return{$$typeof:f_,render:e}};Or.isValidElement=Zp;Or.lazy=function(e){return{$$typeof:v_,_payload:{_status:-1,_result:e},_init:w_}};Or.memo=function(e,t){return{$$typeof:g_,type:e,compare:t===void 0?null:t}};Or.startTransition=function(e){var t=hu.transition;hu.transition={};try{e()}finally{hu.transition=t}};Or.unstable_act=Em;Or.useCallback=function(e,t){return Da.current.useCallback(e,t)};Or.useContext=function(e){return Da.current.useContext(e)};Or.useDebugValue=function(){};Or.useDeferredValue=function(e){return Da.current.useDeferredValue(e)};Or.useEffect=function(e,t){return Da.current.useEffect(e,t)};Or.useId=function(){return Da.current.useId()};Or.useImperativeHandle=function(e,t,r){return Da.current.useImperativeHandle(e,t,r)};Or.useInsertionEffect=function(e,t){return Da.current.useInsertionEffect(e,t)};Or.useLayoutEffect=function(e,t){return Da.current.useLayoutEffect(e,t)};Or.useMemo=function(e,t){return Da.current.useMemo(e,t)};Or.useReducer=function(e,t,r){return Da.current.useReducer(e,t,r)};Or.useRef=function(e){return Da.current.useRef(e)};Or.useState=function(e){return Da.current.useState(e)};Or.useSyncExternalStore=function(e,t,r){return Da.current.useSyncExternalStore(e,t,r)};Or.useTransition=function(){return Da.current.useTransition()};Or.version="18.3.1";gm.exports=Or;var ct=gm.exports;const na=zp(ct);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R_=ct,E_=Symbol.for("react.element"),k_=Symbol.for("react.fragment"),C_=Object.prototype.hasOwnProperty,T_=R_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,P_={key:!0,ref:!0,__self:!0,__source:!0};function km(e,t,r){var a,h={},y=null,j=null;r!==void 0&&(y=""+r),t.key!==void 0&&(y=""+t.key),t.ref!==void 0&&(j=t.ref);for(a in t)C_.call(t,a)&&!P_.hasOwnProperty(a)&&(h[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps,t)h[a]===void 0&&(h[a]=t[a]);return{$$typeof:E_,type:e,key:y,ref:j,props:h,_owner:T_.current}}Ju.Fragment=k_;Ju.jsx=km;Ju.jsxs=km;mm.exports=Ju;var nt=mm.exports,Cm={exports:{}},Za={},Tm={exports:{}},Pm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(x,N){var z=x.length;x.push(N);e:for(;0<z;){var V=z-1>>>1,J=x[V];if(0<h(J,N))x[V]=N,x[z]=J,z=V;else break e}}function r(x){return x.length===0?null:x[0]}function a(x){if(x.length===0)return null;var N=x[0],z=x.pop();if(z!==N){x[0]=z;e:for(var V=0,J=x.length,ne=J>>>1;V<ne;){var ee=2*(V+1)-1,Q=x[ee],oe=ee+1,he=x[oe];if(0>h(Q,z))oe<J&&0>h(he,Q)?(x[V]=he,x[oe]=z,V=oe):(x[V]=Q,x[ee]=z,V=ee);else if(oe<J&&0>h(he,z))x[V]=he,x[oe]=z,V=oe;else break e}}return N}function h(x,N){var z=x.sortIndex-N.sortIndex;return z!==0?z:x.id-N.id}if(typeof performance=="object"&&typeof performance.now=="function"){var y=performance;e.unstable_now=function(){return y.now()}}else{var j=Date,L=j.now();e.unstable_now=function(){return j.now()-L}}var b=[],u=[],P=1,E=null,c=3,_=!1,w=!1,d=!1,g=typeof setTimeout=="function"?setTimeout:null,n=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(x){for(var N=r(u);N!==null;){if(N.callback===null)a(u);else if(N.startTime<=x)a(u),N.sortIndex=N.expirationTime,t(b,N);else break;N=r(u)}}function R(x){if(d=!1,v(x),!w)if(r(b)!==null)w=!0,O(k);else{var N=r(u);N!==null&&F(R,N.startTime-x)}}function k(x,N){w=!1,d&&(d=!1,n(C),C=-1),_=!0;var z=c;try{for(v(N),E=r(b);E!==null&&(!(E.expirationTime>N)||x&&!p());){var V=E.callback;if(typeof V=="function"){E.callback=null,c=E.priorityLevel;var J=V(E.expirationTime<=N);N=e.unstable_now(),typeof J=="function"?E.callback=J:E===r(b)&&a(b),v(N)}else a(b);E=r(b)}if(E!==null)var ne=!0;else{var ee=r(u);ee!==null&&F(R,ee.startTime-N),ne=!1}return ne}finally{E=null,c=z,_=!1}}var T=!1,S=null,C=-1,I=5,o=-1;function p(){return!(e.unstable_now()-o<I)}function i(){if(S!==null){var x=e.unstable_now();o=x;var N=!0;try{N=S(!0,x)}finally{N?s():(T=!1,S=null)}}else T=!1}var s;if(typeof m=="function")s=function(){m(i)};else if(typeof MessageChannel<"u"){var l=new MessageChannel,f=l.port2;l.port1.onmessage=i,s=function(){f.postMessage(null)}}else s=function(){g(i,0)};function O(x){S=x,T||(T=!0,s())}function F(x,N){C=g(function(){x(e.unstable_now())},N)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(x){x.callback=null},e.unstable_continueExecution=function(){w||_||(w=!0,O(k))},e.unstable_forceFrameRate=function(x){0>x||125<x?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<x?Math.floor(1e3/x):5},e.unstable_getCurrentPriorityLevel=function(){return c},e.unstable_getFirstCallbackNode=function(){return r(b)},e.unstable_next=function(x){switch(c){case 1:case 2:case 3:var N=3;break;default:N=c}var z=c;c=N;try{return x()}finally{c=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(x,N){switch(x){case 1:case 2:case 3:case 4:case 5:break;default:x=3}var z=c;c=x;try{return N()}finally{c=z}},e.unstable_scheduleCallback=function(x,N,z){var V=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?V+z:V):z=V,x){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=z+J,x={id:P++,callback:N,priorityLevel:x,startTime:z,expirationTime:J,sortIndex:-1},z>V?(x.sortIndex=z,t(u,x),r(b)===null&&x===r(u)&&(d?(n(C),C=-1):d=!0,F(R,z-V))):(x.sortIndex=J,t(b,x),w||_||(w=!0,O(k))),x},e.unstable_shouldYield=p,e.unstable_wrapCallback=function(x){var N=c;return function(){var z=c;c=N;try{return x.apply(this,arguments)}finally{c=z}}}})(Pm);Tm.exports=Pm;var x_=Tm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O_=ct,Ga=x_;function tt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xm=new Set,Xc={};function po(e,t){Ko(e,t),Ko(e+"Capture",t)}function Ko(e,t){for(Xc[e]=t,e=0;e<t.length;e++)xm.add(t[e])}var Hi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qd=Object.prototype.hasOwnProperty,D_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jh={},Yh={};function I_(e){return qd.call(Yh,e)?!0:qd.call(Jh,e)?!1:D_.test(e)?Yh[e]=!0:(Jh[e]=!0,!1)}function M_(e,t,r,a){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return a?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function L_(e,t,r,a){if(t===null||typeof t>"u"||M_(e,t,r,a))return!0;if(a)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ia(e,t,r,a,h,y,j){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=a,this.attributeNamespace=h,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=y,this.removeEmptyString=j}var va={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){va[e]=new Ia(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];va[t]=new Ia(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){va[e]=new Ia(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){va[e]=new Ia(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){va[e]=new Ia(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){va[e]=new Ia(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){va[e]=new Ia(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){va[e]=new Ia(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){va[e]=new Ia(e,5,!1,e.toLowerCase(),null,!1,!1)});var qp=/[\-:]([a-z])/g;function Kp(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(qp,Kp);va[t]=new Ia(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(qp,Kp);va[t]=new Ia(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(qp,Kp);va[t]=new Ia(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){va[e]=new Ia(e,1,!1,e.toLowerCase(),null,!1,!1)});va.xlinkHref=new Ia("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){va[e]=new Ia(e,1,!1,e.toLowerCase(),null,!0,!0)});function Qp(e,t,r,a){var h=va.hasOwnProperty(t)?va[t]:null;(h!==null?h.type!==0:a||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(L_(t,r,h,a)&&(r=null),a||h===null?I_(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):h.mustUseProperty?e[h.propertyName]=r===null?h.type===3?!1:"":r:(t=h.attributeName,a=h.attributeNamespace,r===null?e.removeAttribute(t):(h=h.type,r=h===3||h===4&&r===!0?"":""+r,a?e.setAttributeNS(a,t,r):e.setAttribute(t,r))))}var Zi=O_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Kl=Symbol.for("react.element"),Oo=Symbol.for("react.portal"),Do=Symbol.for("react.fragment"),Jp=Symbol.for("react.strict_mode"),Kd=Symbol.for("react.profiler"),Om=Symbol.for("react.provider"),Dm=Symbol.for("react.context"),Yp=Symbol.for("react.forward_ref"),Qd=Symbol.for("react.suspense"),Jd=Symbol.for("react.suspense_list"),Xp=Symbol.for("react.memo"),_s=Symbol.for("react.lazy"),Im=Symbol.for("react.offscreen"),Xh=Symbol.iterator;function Dc(e){return e===null||typeof e!="object"?null:(e=Xh&&e[Xh]||e["@@iterator"],typeof e=="function"?e:null)}var Rn=Object.assign,Sd;function Bc(e){if(Sd===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Sd=t&&t[1]||""}return`
`+Sd+e}var Rd=!1;function Ed(e,t){if(!e||Rd)return"";Rd=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var a=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){a=u}e.call(t.prototype)}else{try{throw Error()}catch(u){a=u}e()}}catch(u){if(u&&a&&typeof u.stack=="string"){for(var h=u.stack.split(`
`),y=a.stack.split(`
`),j=h.length-1,L=y.length-1;1<=j&&0<=L&&h[j]!==y[L];)L--;for(;1<=j&&0<=L;j--,L--)if(h[j]!==y[L]){if(j!==1||L!==1)do if(j--,L--,0>L||h[j]!==y[L]){var b=`
`+h[j].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=j&&0<=L);break}}}finally{Rd=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Bc(e):""}function N_(e){switch(e.tag){case 5:return Bc(e.type);case 16:return Bc("Lazy");case 13:return Bc("Suspense");case 19:return Bc("SuspenseList");case 0:case 2:case 15:return e=Ed(e.type,!1),e;case 11:return e=Ed(e.type.render,!1),e;case 1:return e=Ed(e.type,!0),e;default:return""}}function Yd(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Do:return"Fragment";case Oo:return"Portal";case Kd:return"Profiler";case Jp:return"StrictMode";case Qd:return"Suspense";case Jd:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Dm:return(e.displayName||"Context")+".Consumer";case Om:return(e._context.displayName||"Context")+".Provider";case Yp:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Xp:return t=e.displayName||null,t!==null?t:Yd(e.type)||"Memo";case _s:t=e._payload,e=e._init;try{return Yd(e(t))}catch{}}return null}function A_(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Yd(t);case 8:return t===Jp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ms(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Mm(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function j_(e){var t=Mm(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var h=r.get,y=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return h.call(this)},set:function(j){a=""+j,y.call(this,j)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(j){a=""+j},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ql(e){e._valueTracker||(e._valueTracker=j_(e))}function Lm(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=Mm(e)?e.checked?"true":"false":e.value),e=a,e!==r?(t.setValue(e),!0):!1}function Cu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Xd(e,t){var r=t.checked;return Rn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function ef(e,t){var r=t.defaultValue==null?"":t.defaultValue,a=t.checked!=null?t.checked:t.defaultChecked;r=Ms(t.value!=null?t.value:r),e._wrapperState={initialChecked:a,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Nm(e,t){t=t.checked,t!=null&&Qp(e,"checked",t,!1)}function ep(e,t){Nm(e,t);var r=Ms(t.value),a=t.type;if(r!=null)a==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(a==="submit"||a==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?tp(e,t.type,r):t.hasOwnProperty("defaultValue")&&tp(e,t.type,Ms(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function tf(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!(a!=="submit"&&a!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function tp(e,t,r){(t!=="number"||Cu(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Uc=Array.isArray;function Ho(e,t,r,a){if(e=e.options,t){t={};for(var h=0;h<r.length;h++)t["$"+r[h]]=!0;for(r=0;r<e.length;r++)h=t.hasOwnProperty("$"+e[r].value),e[r].selected!==h&&(e[r].selected=h),h&&a&&(e[r].defaultSelected=!0)}else{for(r=""+Ms(r),t=null,h=0;h<e.length;h++){if(e[h].value===r){e[h].selected=!0,a&&(e[h].defaultSelected=!0);return}t!==null||e[h].disabled||(t=e[h])}t!==null&&(t.selected=!0)}}function rp(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(tt(91));return Rn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function rf(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(tt(92));if(Uc(r)){if(1<r.length)throw Error(tt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Ms(r)}}function Am(e,t){var r=Ms(t.value),a=Ms(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),a!=null&&(e.defaultValue=""+a)}function nf(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function jm(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function np(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?jm(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Jl,Fm=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,a,h){MSApp.execUnsafeLocalFunction(function(){return e(t,r,a,h)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Jl=Jl||document.createElement("div"),Jl.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Jl.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function el(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var zc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},F_=["Webkit","ms","Moz","O"];Object.keys(zc).forEach(function(e){F_.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),zc[t]=zc[e]})});function Bm(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||zc.hasOwnProperty(e)&&zc[e]?(""+t).trim():t+"px"}function Um(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var a=r.indexOf("--")===0,h=Bm(r,t[r],a);r==="float"&&(r="cssFloat"),a?e.setProperty(r,h):e[r]=h}}var B_=Rn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ap(e,t){if(t){if(B_[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(tt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(tt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(tt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(tt(62))}}function ip(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sp=null;function eh(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var op=null,zo=null,Vo=null;function af(e){if(e=yl(e)){if(typeof op!="function")throw Error(tt(280));var t=e.stateNode;t&&(t=rd(t),op(e.stateNode,e.type,t))}}function Wm(e){zo?Vo?Vo.push(e):Vo=[e]:zo=e}function Hm(){if(zo){var e=zo,t=Vo;if(Vo=zo=null,af(e),t)for(e=0;e<t.length;e++)af(t[e])}}function zm(e,t){return e(t)}function Vm(){}var kd=!1;function $m(e,t,r){if(kd)return e(t,r);kd=!0;try{return zm(e,t,r)}finally{kd=!1,(zo!==null||Vo!==null)&&(Vm(),Hm())}}function tl(e,t){var r=e.stateNode;if(r===null)return null;var a=rd(r);if(a===null)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(e=e.type,a=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!a;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(tt(231,t,typeof r));return r}var cp=!1;if(Hi)try{var Ic={};Object.defineProperty(Ic,"passive",{get:function(){cp=!0}}),window.addEventListener("test",Ic,Ic),window.removeEventListener("test",Ic,Ic)}catch{cp=!1}function U_(e,t,r,a,h,y,j,L,b){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(P){this.onError(P)}}var Vc=!1,Tu=null,Pu=!1,lp=null,W_={onError:function(e){Vc=!0,Tu=e}};function H_(e,t,r,a,h,y,j,L,b){Vc=!1,Tu=null,U_.apply(W_,arguments)}function z_(e,t,r,a,h,y,j,L,b){if(H_.apply(this,arguments),Vc){if(Vc){var u=Tu;Vc=!1,Tu=null}else throw Error(tt(198));Pu||(Pu=!0,lp=u)}}function ho(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Gm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function sf(e){if(ho(e)!==e)throw Error(tt(188))}function V_(e){var t=e.alternate;if(!t){if(t=ho(e),t===null)throw Error(tt(188));return t!==e?null:e}for(var r=e,a=t;;){var h=r.return;if(h===null)break;var y=h.alternate;if(y===null){if(a=h.return,a!==null){r=a;continue}break}if(h.child===y.child){for(y=h.child;y;){if(y===r)return sf(h),e;if(y===a)return sf(h),t;y=y.sibling}throw Error(tt(188))}if(r.return!==a.return)r=h,a=y;else{for(var j=!1,L=h.child;L;){if(L===r){j=!0,r=h,a=y;break}if(L===a){j=!0,a=h,r=y;break}L=L.sibling}if(!j){for(L=y.child;L;){if(L===r){j=!0,r=y,a=h;break}if(L===a){j=!0,a=y,r=h;break}L=L.sibling}if(!j)throw Error(tt(189))}}if(r.alternate!==a)throw Error(tt(190))}if(r.tag!==3)throw Error(tt(188));return r.stateNode.current===r?e:t}function Zm(e){return e=V_(e),e!==null?qm(e):null}function qm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=qm(e);if(t!==null)return t;e=e.sibling}return null}var Km=Ga.unstable_scheduleCallback,of=Ga.unstable_cancelCallback,$_=Ga.unstable_shouldYield,G_=Ga.unstable_requestPaint,An=Ga.unstable_now,Z_=Ga.unstable_getCurrentPriorityLevel,th=Ga.unstable_ImmediatePriority,Qm=Ga.unstable_UserBlockingPriority,xu=Ga.unstable_NormalPriority,q_=Ga.unstable_LowPriority,Jm=Ga.unstable_IdlePriority,Yu=null,Ti=null;function K_(e){if(Ti&&typeof Ti.onCommitFiberRoot=="function")try{Ti.onCommitFiberRoot(Yu,e,void 0,(e.current.flags&128)===128)}catch{}}var gi=Math.clz32?Math.clz32:Y_,Q_=Math.log,J_=Math.LN2;function Y_(e){return e>>>=0,e===0?32:31-(Q_(e)/J_|0)|0}var Yl=64,Xl=4194304;function Wc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ou(e,t){var r=e.pendingLanes;if(r===0)return 0;var a=0,h=e.suspendedLanes,y=e.pingedLanes,j=r&268435455;if(j!==0){var L=j&~h;L!==0?a=Wc(L):(y&=j,y!==0&&(a=Wc(y)))}else j=r&~h,j!==0?a=Wc(j):y!==0&&(a=Wc(y));if(a===0)return 0;if(t!==0&&t!==a&&!(t&h)&&(h=a&-a,y=t&-t,h>=y||h===16&&(y&4194240)!==0))return t;if(a&4&&(a|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=a;0<t;)r=31-gi(t),h=1<<r,a|=e[r],t&=~h;return a}function X_(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function e0(e,t){for(var r=e.suspendedLanes,a=e.pingedLanes,h=e.expirationTimes,y=e.pendingLanes;0<y;){var j=31-gi(y),L=1<<j,b=h[j];b===-1?(!(L&r)||L&a)&&(h[j]=X_(L,t)):b<=t&&(e.expiredLanes|=L),y&=~L}}function up(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ym(){var e=Yl;return Yl<<=1,!(Yl&4194240)&&(Yl=64),e}function Cd(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function vl(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-gi(t),e[t]=r}function t0(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<r;){var h=31-gi(r),y=1<<h;t[h]=0,a[h]=-1,e[h]=-1,r&=~y}}function rh(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var a=31-gi(r),h=1<<a;h&t|e[a]&t&&(e[a]|=t),r&=~h}}var Kr=0;function Xm(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var eg,nh,tg,rg,ng,dp=!1,eu=[],ks=null,Cs=null,Ts=null,rl=new Map,nl=new Map,bs=[],r0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cf(e,t){switch(e){case"focusin":case"focusout":ks=null;break;case"dragenter":case"dragleave":Cs=null;break;case"mouseover":case"mouseout":Ts=null;break;case"pointerover":case"pointerout":rl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":nl.delete(t.pointerId)}}function Mc(e,t,r,a,h,y){return e===null||e.nativeEvent!==y?(e={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:y,targetContainers:[h]},t!==null&&(t=yl(t),t!==null&&nh(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,h!==null&&t.indexOf(h)===-1&&t.push(h),e)}function n0(e,t,r,a,h){switch(t){case"focusin":return ks=Mc(ks,e,t,r,a,h),!0;case"dragenter":return Cs=Mc(Cs,e,t,r,a,h),!0;case"mouseover":return Ts=Mc(Ts,e,t,r,a,h),!0;case"pointerover":var y=h.pointerId;return rl.set(y,Mc(rl.get(y)||null,e,t,r,a,h)),!0;case"gotpointercapture":return y=h.pointerId,nl.set(y,Mc(nl.get(y)||null,e,t,r,a,h)),!0}return!1}function ag(e){var t=eo(e.target);if(t!==null){var r=ho(t);if(r!==null){if(t=r.tag,t===13){if(t=Gm(r),t!==null){e.blockedOn=t,ng(e.priority,function(){tg(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function fu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=pp(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var a=new r.constructor(r.type,r);sp=a,r.target.dispatchEvent(a),sp=null}else return t=yl(r),t!==null&&nh(t),e.blockedOn=r,!1;t.shift()}return!0}function lf(e,t,r){fu(e)&&r.delete(t)}function a0(){dp=!1,ks!==null&&fu(ks)&&(ks=null),Cs!==null&&fu(Cs)&&(Cs=null),Ts!==null&&fu(Ts)&&(Ts=null),rl.forEach(lf),nl.forEach(lf)}function Lc(e,t){e.blockedOn===t&&(e.blockedOn=null,dp||(dp=!0,Ga.unstable_scheduleCallback(Ga.unstable_NormalPriority,a0)))}function al(e){function t(h){return Lc(h,e)}if(0<eu.length){Lc(eu[0],e);for(var r=1;r<eu.length;r++){var a=eu[r];a.blockedOn===e&&(a.blockedOn=null)}}for(ks!==null&&Lc(ks,e),Cs!==null&&Lc(Cs,e),Ts!==null&&Lc(Ts,e),rl.forEach(t),nl.forEach(t),r=0;r<bs.length;r++)a=bs[r],a.blockedOn===e&&(a.blockedOn=null);for(;0<bs.length&&(r=bs[0],r.blockedOn===null);)ag(r),r.blockedOn===null&&bs.shift()}var $o=Zi.ReactCurrentBatchConfig,Du=!0;function i0(e,t,r,a){var h=Kr,y=$o.transition;$o.transition=null;try{Kr=1,ah(e,t,r,a)}finally{Kr=h,$o.transition=y}}function s0(e,t,r,a){var h=Kr,y=$o.transition;$o.transition=null;try{Kr=4,ah(e,t,r,a)}finally{Kr=h,$o.transition=y}}function ah(e,t,r,a){if(Du){var h=pp(e,t,r,a);if(h===null)Ad(e,t,a,Iu,r),cf(e,a);else if(n0(h,e,t,r,a))a.stopPropagation();else if(cf(e,a),t&4&&-1<r0.indexOf(e)){for(;h!==null;){var y=yl(h);if(y!==null&&eg(y),y=pp(e,t,r,a),y===null&&Ad(e,t,a,Iu,r),y===h)break;h=y}h!==null&&a.stopPropagation()}else Ad(e,t,a,null,r)}}var Iu=null;function pp(e,t,r,a){if(Iu=null,e=eh(a),e=eo(e),e!==null)if(t=ho(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Gm(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Iu=e,null}function ig(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Z_()){case th:return 1;case Qm:return 4;case xu:case q_:return 16;case Jm:return 536870912;default:return 16}default:return 16}}var Rs=null,ih=null,mu=null;function sg(){if(mu)return mu;var e,t=ih,r=t.length,a,h="value"in Rs?Rs.value:Rs.textContent,y=h.length;for(e=0;e<r&&t[e]===h[e];e++);var j=r-e;for(a=1;a<=j&&t[r-a]===h[y-a];a++);return mu=h.slice(e,1<a?1-a:void 0)}function gu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function tu(){return!0}function uf(){return!1}function qa(e){function t(r,a,h,y,j){this._reactName=r,this._targetInst=h,this.type=a,this.nativeEvent=y,this.target=j,this.currentTarget=null;for(var L in e)e.hasOwnProperty(L)&&(r=e[L],this[L]=r?r(y):y[L]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?tu:uf,this.isPropagationStopped=uf,this}return Rn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=tu)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=tu)},persist:function(){},isPersistent:tu}),t}var ac={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sh=qa(ac),_l=Rn({},ac,{view:0,detail:0}),o0=qa(_l),Td,Pd,Nc,Xu=Rn({},_l,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oh,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Nc&&(Nc&&e.type==="mousemove"?(Td=e.screenX-Nc.screenX,Pd=e.screenY-Nc.screenY):Pd=Td=0,Nc=e),Td)},movementY:function(e){return"movementY"in e?e.movementY:Pd}}),df=qa(Xu),c0=Rn({},Xu,{dataTransfer:0}),l0=qa(c0),u0=Rn({},_l,{relatedTarget:0}),xd=qa(u0),d0=Rn({},ac,{animationName:0,elapsedTime:0,pseudoElement:0}),p0=qa(d0),h0=Rn({},ac,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),f0=qa(h0),m0=Rn({},ac,{data:0}),pf=qa(m0),g0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},v0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function y0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=_0[e])?!!t[e]:!1}function oh(){return y0}var b0=Rn({},_l,{key:function(e){if(e.key){var t=g0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=gu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?v0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oh,charCode:function(e){return e.type==="keypress"?gu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?gu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),w0=qa(b0),S0=Rn({},Xu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hf=qa(S0),R0=Rn({},_l,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oh}),E0=qa(R0),k0=Rn({},ac,{propertyName:0,elapsedTime:0,pseudoElement:0}),C0=qa(k0),T0=Rn({},Xu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),P0=qa(T0),x0=[9,13,27,32],ch=Hi&&"CompositionEvent"in window,$c=null;Hi&&"documentMode"in document&&($c=document.documentMode);var O0=Hi&&"TextEvent"in window&&!$c,og=Hi&&(!ch||$c&&8<$c&&11>=$c),ff=" ",mf=!1;function cg(e,t){switch(e){case"keyup":return x0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lg(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Io=!1;function D0(e,t){switch(e){case"compositionend":return lg(t);case"keypress":return t.which!==32?null:(mf=!0,ff);case"textInput":return e=t.data,e===ff&&mf?null:e;default:return null}}function I0(e,t){if(Io)return e==="compositionend"||!ch&&cg(e,t)?(e=sg(),mu=ih=Rs=null,Io=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return og&&t.locale!=="ko"?null:t.data;default:return null}}var M0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gf(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!M0[e.type]:t==="textarea"}function ug(e,t,r,a){Wm(a),t=Mu(t,"onChange"),0<t.length&&(r=new sh("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var Gc=null,il=null;function L0(e){wg(e,0)}function ed(e){var t=No(e);if(Lm(t))return e}function N0(e,t){if(e==="change")return t}var dg=!1;if(Hi){var Od;if(Hi){var Dd="oninput"in document;if(!Dd){var vf=document.createElement("div");vf.setAttribute("oninput","return;"),Dd=typeof vf.oninput=="function"}Od=Dd}else Od=!1;dg=Od&&(!document.documentMode||9<document.documentMode)}function _f(){Gc&&(Gc.detachEvent("onpropertychange",pg),il=Gc=null)}function pg(e){if(e.propertyName==="value"&&ed(il)){var t=[];ug(t,il,e,eh(e)),$m(L0,t)}}function A0(e,t,r){e==="focusin"?(_f(),Gc=t,il=r,Gc.attachEvent("onpropertychange",pg)):e==="focusout"&&_f()}function j0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ed(il)}function F0(e,t){if(e==="click")return ed(t)}function B0(e,t){if(e==="input"||e==="change")return ed(t)}function U0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _i=typeof Object.is=="function"?Object.is:U0;function sl(e,t){if(_i(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var h=r[a];if(!qd.call(t,h)||!_i(e[h],t[h]))return!1}return!0}function yf(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function bf(e,t){var r=yf(e);e=0;for(var a;r;){if(r.nodeType===3){if(a=e+r.textContent.length,e<=t&&a>=t)return{node:r,offset:t-e};e=a}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=yf(r)}}function hg(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?hg(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function fg(){for(var e=window,t=Cu();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Cu(e.document)}return t}function lh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function W0(e){var t=fg(),r=e.focusedElem,a=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&hg(r.ownerDocument.documentElement,r)){if(a!==null&&lh(r)){if(t=a.start,e=a.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var h=r.textContent.length,y=Math.min(a.start,h);a=a.end===void 0?y:Math.min(a.end,h),!e.extend&&y>a&&(h=a,a=y,y=h),h=bf(r,y);var j=bf(r,a);h&&j&&(e.rangeCount!==1||e.anchorNode!==h.node||e.anchorOffset!==h.offset||e.focusNode!==j.node||e.focusOffset!==j.offset)&&(t=t.createRange(),t.setStart(h.node,h.offset),e.removeAllRanges(),y>a?(e.addRange(t),e.extend(j.node,j.offset)):(t.setEnd(j.node,j.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var H0=Hi&&"documentMode"in document&&11>=document.documentMode,Mo=null,hp=null,Zc=null,fp=!1;function wf(e,t,r){var a=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;fp||Mo==null||Mo!==Cu(a)||(a=Mo,"selectionStart"in a&&lh(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Zc&&sl(Zc,a)||(Zc=a,a=Mu(hp,"onSelect"),0<a.length&&(t=new sh("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=Mo)))}function ru(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Lo={animationend:ru("Animation","AnimationEnd"),animationiteration:ru("Animation","AnimationIteration"),animationstart:ru("Animation","AnimationStart"),transitionend:ru("Transition","TransitionEnd")},Id={},mg={};Hi&&(mg=document.createElement("div").style,"AnimationEvent"in window||(delete Lo.animationend.animation,delete Lo.animationiteration.animation,delete Lo.animationstart.animation),"TransitionEvent"in window||delete Lo.transitionend.transition);function td(e){if(Id[e])return Id[e];if(!Lo[e])return e;var t=Lo[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in mg)return Id[e]=t[r];return e}var gg=td("animationend"),vg=td("animationiteration"),_g=td("animationstart"),yg=td("transitionend"),bg=new Map,Sf="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ns(e,t){bg.set(e,t),po(t,[e])}for(var Md=0;Md<Sf.length;Md++){var Ld=Sf[Md],z0=Ld.toLowerCase(),V0=Ld[0].toUpperCase()+Ld.slice(1);Ns(z0,"on"+V0)}Ns(gg,"onAnimationEnd");Ns(vg,"onAnimationIteration");Ns(_g,"onAnimationStart");Ns("dblclick","onDoubleClick");Ns("focusin","onFocus");Ns("focusout","onBlur");Ns(yg,"onTransitionEnd");Ko("onMouseEnter",["mouseout","mouseover"]);Ko("onMouseLeave",["mouseout","mouseover"]);Ko("onPointerEnter",["pointerout","pointerover"]);Ko("onPointerLeave",["pointerout","pointerover"]);po("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));po("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));po("onBeforeInput",["compositionend","keypress","textInput","paste"]);po("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));po("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));po("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hc));function Rf(e,t,r){var a=e.type||"unknown-event";e.currentTarget=r,z_(a,t,void 0,e),e.currentTarget=null}function wg(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var a=e[r],h=a.event;a=a.listeners;e:{var y=void 0;if(t)for(var j=a.length-1;0<=j;j--){var L=a[j],b=L.instance,u=L.currentTarget;if(L=L.listener,b!==y&&h.isPropagationStopped())break e;Rf(h,L,u),y=b}else for(j=0;j<a.length;j++){if(L=a[j],b=L.instance,u=L.currentTarget,L=L.listener,b!==y&&h.isPropagationStopped())break e;Rf(h,L,u),y=b}}}if(Pu)throw e=lp,Pu=!1,lp=null,e}function hn(e,t){var r=t[yp];r===void 0&&(r=t[yp]=new Set);var a=e+"__bubble";r.has(a)||(Sg(t,e,2,!1),r.add(a))}function Nd(e,t,r){var a=0;t&&(a|=4),Sg(r,e,a,t)}var nu="_reactListening"+Math.random().toString(36).slice(2);function ol(e){if(!e[nu]){e[nu]=!0,xm.forEach(function(r){r!=="selectionchange"&&($0.has(r)||Nd(r,!1,e),Nd(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[nu]||(t[nu]=!0,Nd("selectionchange",!1,t))}}function Sg(e,t,r,a){switch(ig(t)){case 1:var h=i0;break;case 4:h=s0;break;default:h=ah}r=h.bind(null,t,r,e),h=void 0,!cp||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(h=!0),a?h!==void 0?e.addEventListener(t,r,{capture:!0,passive:h}):e.addEventListener(t,r,!0):h!==void 0?e.addEventListener(t,r,{passive:h}):e.addEventListener(t,r,!1)}function Ad(e,t,r,a,h){var y=a;if(!(t&1)&&!(t&2)&&a!==null)e:for(;;){if(a===null)return;var j=a.tag;if(j===3||j===4){var L=a.stateNode.containerInfo;if(L===h||L.nodeType===8&&L.parentNode===h)break;if(j===4)for(j=a.return;j!==null;){var b=j.tag;if((b===3||b===4)&&(b=j.stateNode.containerInfo,b===h||b.nodeType===8&&b.parentNode===h))return;j=j.return}for(;L!==null;){if(j=eo(L),j===null)return;if(b=j.tag,b===5||b===6){a=y=j;continue e}L=L.parentNode}}a=a.return}$m(function(){var u=y,P=eh(r),E=[];e:{var c=bg.get(e);if(c!==void 0){var _=sh,w=e;switch(e){case"keypress":if(gu(r)===0)break e;case"keydown":case"keyup":_=w0;break;case"focusin":w="focus",_=xd;break;case"focusout":w="blur",_=xd;break;case"beforeblur":case"afterblur":_=xd;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=df;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=l0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=E0;break;case gg:case vg:case _g:_=p0;break;case yg:_=C0;break;case"scroll":_=o0;break;case"wheel":_=P0;break;case"copy":case"cut":case"paste":_=f0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=hf}var d=(t&4)!==0,g=!d&&e==="scroll",n=d?c!==null?c+"Capture":null:c;d=[];for(var m=u,v;m!==null;){v=m;var R=v.stateNode;if(v.tag===5&&R!==null&&(v=R,n!==null&&(R=tl(m,n),R!=null&&d.push(cl(m,R,v)))),g)break;m=m.return}0<d.length&&(c=new _(c,w,null,r,P),E.push({event:c,listeners:d}))}}if(!(t&7)){e:{if(c=e==="mouseover"||e==="pointerover",_=e==="mouseout"||e==="pointerout",c&&r!==sp&&(w=r.relatedTarget||r.fromElement)&&(eo(w)||w[zi]))break e;if((_||c)&&(c=P.window===P?P:(c=P.ownerDocument)?c.defaultView||c.parentWindow:window,_?(w=r.relatedTarget||r.toElement,_=u,w=w?eo(w):null,w!==null&&(g=ho(w),w!==g||w.tag!==5&&w.tag!==6)&&(w=null)):(_=null,w=u),_!==w)){if(d=df,R="onMouseLeave",n="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(d=hf,R="onPointerLeave",n="onPointerEnter",m="pointer"),g=_==null?c:No(_),v=w==null?c:No(w),c=new d(R,m+"leave",_,r,P),c.target=g,c.relatedTarget=v,R=null,eo(P)===u&&(d=new d(n,m+"enter",w,r,P),d.target=v,d.relatedTarget=g,R=d),g=R,_&&w)t:{for(d=_,n=w,m=0,v=d;v;v=Po(v))m++;for(v=0,R=n;R;R=Po(R))v++;for(;0<m-v;)d=Po(d),m--;for(;0<v-m;)n=Po(n),v--;for(;m--;){if(d===n||n!==null&&d===n.alternate)break t;d=Po(d),n=Po(n)}d=null}else d=null;_!==null&&Ef(E,c,_,d,!1),w!==null&&g!==null&&Ef(E,g,w,d,!0)}}e:{if(c=u?No(u):window,_=c.nodeName&&c.nodeName.toLowerCase(),_==="select"||_==="input"&&c.type==="file")var k=N0;else if(gf(c))if(dg)k=B0;else{k=j0;var T=A0}else(_=c.nodeName)&&_.toLowerCase()==="input"&&(c.type==="checkbox"||c.type==="radio")&&(k=F0);if(k&&(k=k(e,u))){ug(E,k,r,P);break e}T&&T(e,c,u),e==="focusout"&&(T=c._wrapperState)&&T.controlled&&c.type==="number"&&tp(c,"number",c.value)}switch(T=u?No(u):window,e){case"focusin":(gf(T)||T.contentEditable==="true")&&(Mo=T,hp=u,Zc=null);break;case"focusout":Zc=hp=Mo=null;break;case"mousedown":fp=!0;break;case"contextmenu":case"mouseup":case"dragend":fp=!1,wf(E,r,P);break;case"selectionchange":if(H0)break;case"keydown":case"keyup":wf(E,r,P)}var S;if(ch)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Io?cg(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(og&&r.locale!=="ko"&&(Io||C!=="onCompositionStart"?C==="onCompositionEnd"&&Io&&(S=sg()):(Rs=P,ih="value"in Rs?Rs.value:Rs.textContent,Io=!0)),T=Mu(u,C),0<T.length&&(C=new pf(C,e,null,r,P),E.push({event:C,listeners:T}),S?C.data=S:(S=lg(r),S!==null&&(C.data=S)))),(S=O0?D0(e,r):I0(e,r))&&(u=Mu(u,"onBeforeInput"),0<u.length&&(P=new pf("onBeforeInput","beforeinput",null,r,P),E.push({event:P,listeners:u}),P.data=S))}wg(E,t)})}function cl(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Mu(e,t){for(var r=t+"Capture",a=[];e!==null;){var h=e,y=h.stateNode;h.tag===5&&y!==null&&(h=y,y=tl(e,r),y!=null&&a.unshift(cl(e,y,h)),y=tl(e,t),y!=null&&a.push(cl(e,y,h))),e=e.return}return a}function Po(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Ef(e,t,r,a,h){for(var y=t._reactName,j=[];r!==null&&r!==a;){var L=r,b=L.alternate,u=L.stateNode;if(b!==null&&b===a)break;L.tag===5&&u!==null&&(L=u,h?(b=tl(r,y),b!=null&&j.unshift(cl(r,b,L))):h||(b=tl(r,y),b!=null&&j.push(cl(r,b,L)))),r=r.return}j.length!==0&&e.push({event:t,listeners:j})}var G0=/\r\n?/g,Z0=/\u0000|\uFFFD/g;function kf(e){return(typeof e=="string"?e:""+e).replace(G0,`
`).replace(Z0,"")}function au(e,t,r){if(t=kf(t),kf(e)!==t&&r)throw Error(tt(425))}function Lu(){}var mp=null,gp=null;function vp(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var _p=typeof setTimeout=="function"?setTimeout:void 0,q0=typeof clearTimeout=="function"?clearTimeout:void 0,Cf=typeof Promise=="function"?Promise:void 0,K0=typeof queueMicrotask=="function"?queueMicrotask:typeof Cf<"u"?function(e){return Cf.resolve(null).then(e).catch(Q0)}:_p;function Q0(e){setTimeout(function(){throw e})}function jd(e,t){var r=t,a=0;do{var h=r.nextSibling;if(e.removeChild(r),h&&h.nodeType===8)if(r=h.data,r==="/$"){if(a===0){e.removeChild(h),al(t);return}a--}else r!=="$"&&r!=="$?"&&r!=="$!"||a++;r=h}while(r);al(t)}function Ps(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Tf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var ic=Math.random().toString(36).slice(2),Ci="__reactFiber$"+ic,ll="__reactProps$"+ic,zi="__reactContainer$"+ic,yp="__reactEvents$"+ic,J0="__reactListeners$"+ic,Y0="__reactHandles$"+ic;function eo(e){var t=e[Ci];if(t)return t;for(var r=e.parentNode;r;){if(t=r[zi]||r[Ci]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Tf(e);e!==null;){if(r=e[Ci])return r;e=Tf(e)}return t}e=r,r=e.parentNode}return null}function yl(e){return e=e[Ci]||e[zi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function No(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(tt(33))}function rd(e){return e[ll]||null}var bp=[],Ao=-1;function As(e){return{current:e}}function fn(e){0>Ao||(e.current=bp[Ao],bp[Ao]=null,Ao--)}function ln(e,t){Ao++,bp[Ao]=e.current,e.current=t}var Ls={},ka=As(Ls),Fa=As(!1),so=Ls;function Qo(e,t){var r=e.type.contextTypes;if(!r)return Ls;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var h={},y;for(y in r)h[y]=t[y];return a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=h),h}function Ba(e){return e=e.childContextTypes,e!=null}function Nu(){fn(Fa),fn(ka)}function Pf(e,t,r){if(ka.current!==Ls)throw Error(tt(168));ln(ka,t),ln(Fa,r)}function Rg(e,t,r){var a=e.stateNode;if(t=t.childContextTypes,typeof a.getChildContext!="function")return r;a=a.getChildContext();for(var h in a)if(!(h in t))throw Error(tt(108,A_(e)||"Unknown",h));return Rn({},r,a)}function Au(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ls,so=ka.current,ln(ka,e),ln(Fa,Fa.current),!0}function xf(e,t,r){var a=e.stateNode;if(!a)throw Error(tt(169));r?(e=Rg(e,t,so),a.__reactInternalMemoizedMergedChildContext=e,fn(Fa),fn(ka),ln(ka,e)):fn(Fa),ln(Fa,r)}var Fi=null,nd=!1,Fd=!1;function Eg(e){Fi===null?Fi=[e]:Fi.push(e)}function X0(e){nd=!0,Eg(e)}function js(){if(!Fd&&Fi!==null){Fd=!0;var e=0,t=Kr;try{var r=Fi;for(Kr=1;e<r.length;e++){var a=r[e];do a=a(!0);while(a!==null)}Fi=null,nd=!1}catch(h){throw Fi!==null&&(Fi=Fi.slice(e+1)),Km(th,js),h}finally{Kr=t,Fd=!1}}return null}var jo=[],Fo=0,ju=null,Fu=0,ti=[],ri=0,oo=null,Bi=1,Ui="";function Ys(e,t){jo[Fo++]=Fu,jo[Fo++]=ju,ju=e,Fu=t}function kg(e,t,r){ti[ri++]=Bi,ti[ri++]=Ui,ti[ri++]=oo,oo=e;var a=Bi;e=Ui;var h=32-gi(a)-1;a&=~(1<<h),r+=1;var y=32-gi(t)+h;if(30<y){var j=h-h%5;y=(a&(1<<j)-1).toString(32),a>>=j,h-=j,Bi=1<<32-gi(t)+h|r<<h|a,Ui=y+e}else Bi=1<<y|r<<h|a,Ui=e}function uh(e){e.return!==null&&(Ys(e,1),kg(e,1,0))}function dh(e){for(;e===ju;)ju=jo[--Fo],jo[Fo]=null,Fu=jo[--Fo],jo[Fo]=null;for(;e===oo;)oo=ti[--ri],ti[ri]=null,Ui=ti[--ri],ti[ri]=null,Bi=ti[--ri],ti[ri]=null}var $a=null,Va=null,gn=!1,mi=null;function Cg(e,t){var r=ni(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Of(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,$a=e,Va=Ps(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,$a=e,Va=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=oo!==null?{id:Bi,overflow:Ui}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=ni(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,$a=e,Va=null,!0):!1;default:return!1}}function wp(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Sp(e){if(gn){var t=Va;if(t){var r=t;if(!Of(e,t)){if(wp(e))throw Error(tt(418));t=Ps(r.nextSibling);var a=$a;t&&Of(e,t)?Cg(a,r):(e.flags=e.flags&-4097|2,gn=!1,$a=e)}}else{if(wp(e))throw Error(tt(418));e.flags=e.flags&-4097|2,gn=!1,$a=e}}}function Df(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;$a=e}function iu(e){if(e!==$a)return!1;if(!gn)return Df(e),gn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!vp(e.type,e.memoizedProps)),t&&(t=Va)){if(wp(e))throw Tg(),Error(tt(418));for(;t;)Cg(e,t),t=Ps(t.nextSibling)}if(Df(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(tt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Va=Ps(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Va=null}}else Va=$a?Ps(e.stateNode.nextSibling):null;return!0}function Tg(){for(var e=Va;e;)e=Ps(e.nextSibling)}function Jo(){Va=$a=null,gn=!1}function ph(e){mi===null?mi=[e]:mi.push(e)}var ey=Zi.ReactCurrentBatchConfig;function Ac(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(tt(309));var a=r.stateNode}if(!a)throw Error(tt(147,e));var h=a,y=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===y?t.ref:(t=function(j){var L=h.refs;j===null?delete L[y]:L[y]=j},t._stringRef=y,t)}if(typeof e!="string")throw Error(tt(284));if(!r._owner)throw Error(tt(290,e))}return e}function su(e,t){throw e=Object.prototype.toString.call(t),Error(tt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function If(e){var t=e._init;return t(e._payload)}function Pg(e){function t(n,m){if(e){var v=n.deletions;v===null?(n.deletions=[m],n.flags|=16):v.push(m)}}function r(n,m){if(!e)return null;for(;m!==null;)t(n,m),m=m.sibling;return null}function a(n,m){for(n=new Map;m!==null;)m.key!==null?n.set(m.key,m):n.set(m.index,m),m=m.sibling;return n}function h(n,m){return n=Is(n,m),n.index=0,n.sibling=null,n}function y(n,m,v){return n.index=v,e?(v=n.alternate,v!==null?(v=v.index,v<m?(n.flags|=2,m):v):(n.flags|=2,m)):(n.flags|=1048576,m)}function j(n){return e&&n.alternate===null&&(n.flags|=2),n}function L(n,m,v,R){return m===null||m.tag!==6?(m=$d(v,n.mode,R),m.return=n,m):(m=h(m,v),m.return=n,m)}function b(n,m,v,R){var k=v.type;return k===Do?P(n,m,v.props.children,R,v.key):m!==null&&(m.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===_s&&If(k)===m.type)?(R=h(m,v.props),R.ref=Ac(n,m,v),R.return=n,R):(R=Ru(v.type,v.key,v.props,null,n.mode,R),R.ref=Ac(n,m,v),R.return=n,R)}function u(n,m,v,R){return m===null||m.tag!==4||m.stateNode.containerInfo!==v.containerInfo||m.stateNode.implementation!==v.implementation?(m=Gd(v,n.mode,R),m.return=n,m):(m=h(m,v.children||[]),m.return=n,m)}function P(n,m,v,R,k){return m===null||m.tag!==7?(m=io(v,n.mode,R,k),m.return=n,m):(m=h(m,v),m.return=n,m)}function E(n,m,v){if(typeof m=="string"&&m!==""||typeof m=="number")return m=$d(""+m,n.mode,v),m.return=n,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Kl:return v=Ru(m.type,m.key,m.props,null,n.mode,v),v.ref=Ac(n,null,m),v.return=n,v;case Oo:return m=Gd(m,n.mode,v),m.return=n,m;case _s:var R=m._init;return E(n,R(m._payload),v)}if(Uc(m)||Dc(m))return m=io(m,n.mode,v,null),m.return=n,m;su(n,m)}return null}function c(n,m,v,R){var k=m!==null?m.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return k!==null?null:L(n,m,""+v,R);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Kl:return v.key===k?b(n,m,v,R):null;case Oo:return v.key===k?u(n,m,v,R):null;case _s:return k=v._init,c(n,m,k(v._payload),R)}if(Uc(v)||Dc(v))return k!==null?null:P(n,m,v,R,null);su(n,v)}return null}function _(n,m,v,R,k){if(typeof R=="string"&&R!==""||typeof R=="number")return n=n.get(v)||null,L(m,n,""+R,k);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Kl:return n=n.get(R.key===null?v:R.key)||null,b(m,n,R,k);case Oo:return n=n.get(R.key===null?v:R.key)||null,u(m,n,R,k);case _s:var T=R._init;return _(n,m,v,T(R._payload),k)}if(Uc(R)||Dc(R))return n=n.get(v)||null,P(m,n,R,k,null);su(m,R)}return null}function w(n,m,v,R){for(var k=null,T=null,S=m,C=m=0,I=null;S!==null&&C<v.length;C++){S.index>C?(I=S,S=null):I=S.sibling;var o=c(n,S,v[C],R);if(o===null){S===null&&(S=I);break}e&&S&&o.alternate===null&&t(n,S),m=y(o,m,C),T===null?k=o:T.sibling=o,T=o,S=I}if(C===v.length)return r(n,S),gn&&Ys(n,C),k;if(S===null){for(;C<v.length;C++)S=E(n,v[C],R),S!==null&&(m=y(S,m,C),T===null?k=S:T.sibling=S,T=S);return gn&&Ys(n,C),k}for(S=a(n,S);C<v.length;C++)I=_(S,n,C,v[C],R),I!==null&&(e&&I.alternate!==null&&S.delete(I.key===null?C:I.key),m=y(I,m,C),T===null?k=I:T.sibling=I,T=I);return e&&S.forEach(function(p){return t(n,p)}),gn&&Ys(n,C),k}function d(n,m,v,R){var k=Dc(v);if(typeof k!="function")throw Error(tt(150));if(v=k.call(v),v==null)throw Error(tt(151));for(var T=k=null,S=m,C=m=0,I=null,o=v.next();S!==null&&!o.done;C++,o=v.next()){S.index>C?(I=S,S=null):I=S.sibling;var p=c(n,S,o.value,R);if(p===null){S===null&&(S=I);break}e&&S&&p.alternate===null&&t(n,S),m=y(p,m,C),T===null?k=p:T.sibling=p,T=p,S=I}if(o.done)return r(n,S),gn&&Ys(n,C),k;if(S===null){for(;!o.done;C++,o=v.next())o=E(n,o.value,R),o!==null&&(m=y(o,m,C),T===null?k=o:T.sibling=o,T=o);return gn&&Ys(n,C),k}for(S=a(n,S);!o.done;C++,o=v.next())o=_(S,n,C,o.value,R),o!==null&&(e&&o.alternate!==null&&S.delete(o.key===null?C:o.key),m=y(o,m,C),T===null?k=o:T.sibling=o,T=o);return e&&S.forEach(function(i){return t(n,i)}),gn&&Ys(n,C),k}function g(n,m,v,R){if(typeof v=="object"&&v!==null&&v.type===Do&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Kl:e:{for(var k=v.key,T=m;T!==null;){if(T.key===k){if(k=v.type,k===Do){if(T.tag===7){r(n,T.sibling),m=h(T,v.props.children),m.return=n,n=m;break e}}else if(T.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===_s&&If(k)===T.type){r(n,T.sibling),m=h(T,v.props),m.ref=Ac(n,T,v),m.return=n,n=m;break e}r(n,T);break}else t(n,T);T=T.sibling}v.type===Do?(m=io(v.props.children,n.mode,R,v.key),m.return=n,n=m):(R=Ru(v.type,v.key,v.props,null,n.mode,R),R.ref=Ac(n,m,v),R.return=n,n=R)}return j(n);case Oo:e:{for(T=v.key;m!==null;){if(m.key===T)if(m.tag===4&&m.stateNode.containerInfo===v.containerInfo&&m.stateNode.implementation===v.implementation){r(n,m.sibling),m=h(m,v.children||[]),m.return=n,n=m;break e}else{r(n,m);break}else t(n,m);m=m.sibling}m=Gd(v,n.mode,R),m.return=n,n=m}return j(n);case _s:return T=v._init,g(n,m,T(v._payload),R)}if(Uc(v))return w(n,m,v,R);if(Dc(v))return d(n,m,v,R);su(n,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,m!==null&&m.tag===6?(r(n,m.sibling),m=h(m,v),m.return=n,n=m):(r(n,m),m=$d(v,n.mode,R),m.return=n,n=m),j(n)):r(n,m)}return g}var Yo=Pg(!0),xg=Pg(!1),Bu=As(null),Uu=null,Bo=null,hh=null;function fh(){hh=Bo=Uu=null}function mh(e){var t=Bu.current;fn(Bu),e._currentValue=t}function Rp(e,t,r){for(;e!==null;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,a!==null&&(a.childLanes|=t)):a!==null&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===r)break;e=e.return}}function Go(e,t){Uu=e,hh=Bo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ja=!0),e.firstContext=null)}function ii(e){var t=e._currentValue;if(hh!==e)if(e={context:e,memoizedValue:t,next:null},Bo===null){if(Uu===null)throw Error(tt(308));Bo=e,Uu.dependencies={lanes:0,firstContext:e}}else Bo=Bo.next=e;return t}var to=null;function gh(e){to===null?to=[e]:to.push(e)}function Og(e,t,r,a){var h=t.interleaved;return h===null?(r.next=r,gh(t)):(r.next=h.next,h.next=r),t.interleaved=r,Vi(e,a)}function Vi(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ys=!1;function vh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dg(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Wi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function xs(e,t,r){var a=e.updateQueue;if(a===null)return null;if(a=a.shared,Fr&2){var h=a.pending;return h===null?t.next=t:(t.next=h.next,h.next=t),a.pending=t,Vi(e,r)}return h=a.interleaved,h===null?(t.next=t,gh(a)):(t.next=h.next,h.next=t),a.interleaved=t,Vi(e,r)}function vu(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,rh(e,r)}}function Mf(e,t){var r=e.updateQueue,a=e.alternate;if(a!==null&&(a=a.updateQueue,r===a)){var h=null,y=null;if(r=r.firstBaseUpdate,r!==null){do{var j={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};y===null?h=y=j:y=y.next=j,r=r.next}while(r!==null);y===null?h=y=t:y=y.next=t}else h=y=t;r={baseState:a.baseState,firstBaseUpdate:h,lastBaseUpdate:y,shared:a.shared,effects:a.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Wu(e,t,r,a){var h=e.updateQueue;ys=!1;var y=h.firstBaseUpdate,j=h.lastBaseUpdate,L=h.shared.pending;if(L!==null){h.shared.pending=null;var b=L,u=b.next;b.next=null,j===null?y=u:j.next=u,j=b;var P=e.alternate;P!==null&&(P=P.updateQueue,L=P.lastBaseUpdate,L!==j&&(L===null?P.firstBaseUpdate=u:L.next=u,P.lastBaseUpdate=b))}if(y!==null){var E=h.baseState;j=0,P=u=b=null,L=y;do{var c=L.lane,_=L.eventTime;if((a&c)===c){P!==null&&(P=P.next={eventTime:_,lane:0,tag:L.tag,payload:L.payload,callback:L.callback,next:null});e:{var w=e,d=L;switch(c=t,_=r,d.tag){case 1:if(w=d.payload,typeof w=="function"){E=w.call(_,E,c);break e}E=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=d.payload,c=typeof w=="function"?w.call(_,E,c):w,c==null)break e;E=Rn({},E,c);break e;case 2:ys=!0}}L.callback!==null&&L.lane!==0&&(e.flags|=64,c=h.effects,c===null?h.effects=[L]:c.push(L))}else _={eventTime:_,lane:c,tag:L.tag,payload:L.payload,callback:L.callback,next:null},P===null?(u=P=_,b=E):P=P.next=_,j|=c;if(L=L.next,L===null){if(L=h.shared.pending,L===null)break;c=L,L=c.next,c.next=null,h.lastBaseUpdate=c,h.shared.pending=null}}while(!0);if(P===null&&(b=E),h.baseState=b,h.firstBaseUpdate=u,h.lastBaseUpdate=P,t=h.shared.interleaved,t!==null){h=t;do j|=h.lane,h=h.next;while(h!==t)}else y===null&&(h.shared.lanes=0);lo|=j,e.lanes=j,e.memoizedState=E}}function Lf(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var a=e[t],h=a.callback;if(h!==null){if(a.callback=null,a=r,typeof h!="function")throw Error(tt(191,h));h.call(a)}}}var bl={},Pi=As(bl),ul=As(bl),dl=As(bl);function ro(e){if(e===bl)throw Error(tt(174));return e}function _h(e,t){switch(ln(dl,t),ln(ul,e),ln(Pi,bl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:np(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=np(t,e)}fn(Pi),ln(Pi,t)}function Xo(){fn(Pi),fn(ul),fn(dl)}function Ig(e){ro(dl.current);var t=ro(Pi.current),r=np(t,e.type);t!==r&&(ln(ul,e),ln(Pi,r))}function yh(e){ul.current===e&&(fn(Pi),fn(ul))}var wn=As(0);function Hu(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Bd=[];function bh(){for(var e=0;e<Bd.length;e++)Bd[e]._workInProgressVersionPrimary=null;Bd.length=0}var _u=Zi.ReactCurrentDispatcher,Ud=Zi.ReactCurrentBatchConfig,co=0,Sn=null,Kn=null,aa=null,zu=!1,qc=!1,pl=0,ty=0;function Sa(){throw Error(tt(321))}function wh(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!_i(e[r],t[r]))return!1;return!0}function Sh(e,t,r,a,h,y){if(co=y,Sn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_u.current=e===null||e.memoizedState===null?iy:sy,e=r(a,h),qc){y=0;do{if(qc=!1,pl=0,25<=y)throw Error(tt(301));y+=1,aa=Kn=null,t.updateQueue=null,_u.current=oy,e=r(a,h)}while(qc)}if(_u.current=Vu,t=Kn!==null&&Kn.next!==null,co=0,aa=Kn=Sn=null,zu=!1,t)throw Error(tt(300));return e}function Rh(){var e=pl!==0;return pl=0,e}function ki(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return aa===null?Sn.memoizedState=aa=e:aa=aa.next=e,aa}function si(){if(Kn===null){var e=Sn.alternate;e=e!==null?e.memoizedState:null}else e=Kn.next;var t=aa===null?Sn.memoizedState:aa.next;if(t!==null)aa=t,Kn=e;else{if(e===null)throw Error(tt(310));Kn=e,e={memoizedState:Kn.memoizedState,baseState:Kn.baseState,baseQueue:Kn.baseQueue,queue:Kn.queue,next:null},aa===null?Sn.memoizedState=aa=e:aa=aa.next=e}return aa}function hl(e,t){return typeof t=="function"?t(e):t}function Wd(e){var t=si(),r=t.queue;if(r===null)throw Error(tt(311));r.lastRenderedReducer=e;var a=Kn,h=a.baseQueue,y=r.pending;if(y!==null){if(h!==null){var j=h.next;h.next=y.next,y.next=j}a.baseQueue=h=y,r.pending=null}if(h!==null){y=h.next,a=a.baseState;var L=j=null,b=null,u=y;do{var P=u.lane;if((co&P)===P)b!==null&&(b=b.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),a=u.hasEagerState?u.eagerState:e(a,u.action);else{var E={lane:P,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};b===null?(L=b=E,j=a):b=b.next=E,Sn.lanes|=P,lo|=P}u=u.next}while(u!==null&&u!==y);b===null?j=a:b.next=L,_i(a,t.memoizedState)||(ja=!0),t.memoizedState=a,t.baseState=j,t.baseQueue=b,r.lastRenderedState=a}if(e=r.interleaved,e!==null){h=e;do y=h.lane,Sn.lanes|=y,lo|=y,h=h.next;while(h!==e)}else h===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Hd(e){var t=si(),r=t.queue;if(r===null)throw Error(tt(311));r.lastRenderedReducer=e;var a=r.dispatch,h=r.pending,y=t.memoizedState;if(h!==null){r.pending=null;var j=h=h.next;do y=e(y,j.action),j=j.next;while(j!==h);_i(y,t.memoizedState)||(ja=!0),t.memoizedState=y,t.baseQueue===null&&(t.baseState=y),r.lastRenderedState=y}return[y,a]}function Mg(){}function Lg(e,t){var r=Sn,a=si(),h=t(),y=!_i(a.memoizedState,h);if(y&&(a.memoizedState=h,ja=!0),a=a.queue,Eh(jg.bind(null,r,a,e),[e]),a.getSnapshot!==t||y||aa!==null&&aa.memoizedState.tag&1){if(r.flags|=2048,fl(9,Ag.bind(null,r,a,h,t),void 0,null),ia===null)throw Error(tt(349));co&30||Ng(r,t,h)}return h}function Ng(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Sn.updateQueue,t===null?(t={lastEffect:null,stores:null},Sn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Ag(e,t,r,a){t.value=r,t.getSnapshot=a,Fg(t)&&Bg(e)}function jg(e,t,r){return r(function(){Fg(t)&&Bg(e)})}function Fg(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!_i(e,r)}catch{return!0}}function Bg(e){var t=Vi(e,1);t!==null&&vi(t,e,1,-1)}function Nf(e){var t=ki();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hl,lastRenderedState:e},t.queue=e,e=e.dispatch=ay.bind(null,Sn,e),[t.memoizedState,e]}function fl(e,t,r,a){return e={tag:e,create:t,destroy:r,deps:a,next:null},t=Sn.updateQueue,t===null?(t={lastEffect:null,stores:null},Sn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e)),e}function Ug(){return si().memoizedState}function yu(e,t,r,a){var h=ki();Sn.flags|=e,h.memoizedState=fl(1|t,r,void 0,a===void 0?null:a)}function ad(e,t,r,a){var h=si();a=a===void 0?null:a;var y=void 0;if(Kn!==null){var j=Kn.memoizedState;if(y=j.destroy,a!==null&&wh(a,j.deps)){h.memoizedState=fl(t,r,y,a);return}}Sn.flags|=e,h.memoizedState=fl(1|t,r,y,a)}function Af(e,t){return yu(8390656,8,e,t)}function Eh(e,t){return ad(2048,8,e,t)}function Wg(e,t){return ad(4,2,e,t)}function Hg(e,t){return ad(4,4,e,t)}function zg(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Vg(e,t,r){return r=r!=null?r.concat([e]):null,ad(4,4,zg.bind(null,t,e),r)}function kh(){}function $g(e,t){var r=si();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&wh(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function Gg(e,t){var r=si();t=t===void 0?null:t;var a=r.memoizedState;return a!==null&&t!==null&&wh(t,a[1])?a[0]:(e=e(),r.memoizedState=[e,t],e)}function Zg(e,t,r){return co&21?(_i(r,t)||(r=Ym(),Sn.lanes|=r,lo|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ja=!0),e.memoizedState=r)}function ry(e,t){var r=Kr;Kr=r!==0&&4>r?r:4,e(!0);var a=Ud.transition;Ud.transition={};try{e(!1),t()}finally{Kr=r,Ud.transition=a}}function qg(){return si().memoizedState}function ny(e,t,r){var a=Ds(e);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},Kg(e))Qg(t,r);else if(r=Og(e,t,r,a),r!==null){var h=Oa();vi(r,e,a,h),Jg(r,t,a)}}function ay(e,t,r){var a=Ds(e),h={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(Kg(e))Qg(t,h);else{var y=e.alternate;if(e.lanes===0&&(y===null||y.lanes===0)&&(y=t.lastRenderedReducer,y!==null))try{var j=t.lastRenderedState,L=y(j,r);if(h.hasEagerState=!0,h.eagerState=L,_i(L,j)){var b=t.interleaved;b===null?(h.next=h,gh(t)):(h.next=b.next,b.next=h),t.interleaved=h;return}}catch{}finally{}r=Og(e,t,h,a),r!==null&&(h=Oa(),vi(r,e,a,h),Jg(r,t,a))}}function Kg(e){var t=e.alternate;return e===Sn||t!==null&&t===Sn}function Qg(e,t){qc=zu=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Jg(e,t,r){if(r&4194240){var a=t.lanes;a&=e.pendingLanes,r|=a,t.lanes=r,rh(e,r)}}var Vu={readContext:ii,useCallback:Sa,useContext:Sa,useEffect:Sa,useImperativeHandle:Sa,useInsertionEffect:Sa,useLayoutEffect:Sa,useMemo:Sa,useReducer:Sa,useRef:Sa,useState:Sa,useDebugValue:Sa,useDeferredValue:Sa,useTransition:Sa,useMutableSource:Sa,useSyncExternalStore:Sa,useId:Sa,unstable_isNewReconciler:!1},iy={readContext:ii,useCallback:function(e,t){return ki().memoizedState=[e,t===void 0?null:t],e},useContext:ii,useEffect:Af,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,yu(4194308,4,zg.bind(null,t,e),r)},useLayoutEffect:function(e,t){return yu(4194308,4,e,t)},useInsertionEffect:function(e,t){return yu(4,2,e,t)},useMemo:function(e,t){var r=ki();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var a=ki();return t=r!==void 0?r(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=ny.bind(null,Sn,e),[a.memoizedState,e]},useRef:function(e){var t=ki();return e={current:e},t.memoizedState=e},useState:Nf,useDebugValue:kh,useDeferredValue:function(e){return ki().memoizedState=e},useTransition:function(){var e=Nf(!1),t=e[0];return e=ry.bind(null,e[1]),ki().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var a=Sn,h=ki();if(gn){if(r===void 0)throw Error(tt(407));r=r()}else{if(r=t(),ia===null)throw Error(tt(349));co&30||Ng(a,t,r)}h.memoizedState=r;var y={value:r,getSnapshot:t};return h.queue=y,Af(jg.bind(null,a,y,e),[e]),a.flags|=2048,fl(9,Ag.bind(null,a,y,r,t),void 0,null),r},useId:function(){var e=ki(),t=ia.identifierPrefix;if(gn){var r=Ui,a=Bi;r=(a&~(1<<32-gi(a)-1)).toString(32)+r,t=":"+t+"R"+r,r=pl++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=ty++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},sy={readContext:ii,useCallback:$g,useContext:ii,useEffect:Eh,useImperativeHandle:Vg,useInsertionEffect:Wg,useLayoutEffect:Hg,useMemo:Gg,useReducer:Wd,useRef:Ug,useState:function(){return Wd(hl)},useDebugValue:kh,useDeferredValue:function(e){var t=si();return Zg(t,Kn.memoizedState,e)},useTransition:function(){var e=Wd(hl)[0],t=si().memoizedState;return[e,t]},useMutableSource:Mg,useSyncExternalStore:Lg,useId:qg,unstable_isNewReconciler:!1},oy={readContext:ii,useCallback:$g,useContext:ii,useEffect:Eh,useImperativeHandle:Vg,useInsertionEffect:Wg,useLayoutEffect:Hg,useMemo:Gg,useReducer:Hd,useRef:Ug,useState:function(){return Hd(hl)},useDebugValue:kh,useDeferredValue:function(e){var t=si();return Kn===null?t.memoizedState=e:Zg(t,Kn.memoizedState,e)},useTransition:function(){var e=Hd(hl)[0],t=si().memoizedState;return[e,t]},useMutableSource:Mg,useSyncExternalStore:Lg,useId:qg,unstable_isNewReconciler:!1};function hi(e,t){if(e&&e.defaultProps){t=Rn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Ep(e,t,r,a){t=e.memoizedState,r=r(a,t),r=r==null?t:Rn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var id={isMounted:function(e){return(e=e._reactInternals)?ho(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var a=Oa(),h=Ds(e),y=Wi(a,h);y.payload=t,r!=null&&(y.callback=r),t=xs(e,y,h),t!==null&&(vi(t,e,h,a),vu(t,e,h))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=Oa(),h=Ds(e),y=Wi(a,h);y.tag=1,y.payload=t,r!=null&&(y.callback=r),t=xs(e,y,h),t!==null&&(vi(t,e,h,a),vu(t,e,h))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Oa(),a=Ds(e),h=Wi(r,a);h.tag=2,t!=null&&(h.callback=t),t=xs(e,h,a),t!==null&&(vi(t,e,a,r),vu(t,e,a))}};function jf(e,t,r,a,h,y,j){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(a,y,j):t.prototype&&t.prototype.isPureReactComponent?!sl(r,a)||!sl(h,y):!0}function Yg(e,t,r){var a=!1,h=Ls,y=t.contextType;return typeof y=="object"&&y!==null?y=ii(y):(h=Ba(t)?so:ka.current,a=t.contextTypes,y=(a=a!=null)?Qo(e,h):Ls),t=new t(r,y),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=id,e.stateNode=t,t._reactInternals=e,a&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=h,e.__reactInternalMemoizedMaskedChildContext=y),t}function Ff(e,t,r,a){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,a),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&id.enqueueReplaceState(t,t.state,null)}function kp(e,t,r,a){var h=e.stateNode;h.props=r,h.state=e.memoizedState,h.refs={},vh(e);var y=t.contextType;typeof y=="object"&&y!==null?h.context=ii(y):(y=Ba(t)?so:ka.current,h.context=Qo(e,y)),h.state=e.memoizedState,y=t.getDerivedStateFromProps,typeof y=="function"&&(Ep(e,t,y,r),h.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof h.getSnapshotBeforeUpdate=="function"||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(t=h.state,typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount(),t!==h.state&&id.enqueueReplaceState(h,h.state,null),Wu(e,r,h,a),h.state=e.memoizedState),typeof h.componentDidMount=="function"&&(e.flags|=4194308)}function ec(e,t){try{var r="",a=t;do r+=N_(a),a=a.return;while(a);var h=r}catch(y){h=`
Error generating stack: `+y.message+`
`+y.stack}return{value:e,source:t,stack:h,digest:null}}function zd(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Cp(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var cy=typeof WeakMap=="function"?WeakMap:Map;function Xg(e,t,r){r=Wi(-1,r),r.tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){Gu||(Gu=!0,Ap=a),Cp(e,t)},r}function ev(e,t,r){r=Wi(-1,r),r.tag=3;var a=e.type.getDerivedStateFromError;if(typeof a=="function"){var h=t.value;r.payload=function(){return a(h)},r.callback=function(){Cp(e,t)}}var y=e.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(r.callback=function(){Cp(e,t),typeof a!="function"&&(Os===null?Os=new Set([this]):Os.add(this));var j=t.stack;this.componentDidCatch(t.value,{componentStack:j!==null?j:""})}),r}function Bf(e,t,r){var a=e.pingCache;if(a===null){a=e.pingCache=new cy;var h=new Set;a.set(t,h)}else h=a.get(t),h===void 0&&(h=new Set,a.set(t,h));h.has(r)||(h.add(r),e=Sy.bind(null,e,t,r),t.then(e,e))}function Uf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Wf(e,t,r,a,h){return e.mode&1?(e.flags|=65536,e.lanes=h,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Wi(-1,1),t.tag=2,xs(r,t,1))),r.lanes|=1),e)}var ly=Zi.ReactCurrentOwner,ja=!1;function Pa(e,t,r,a){t.child=e===null?xg(t,null,r,a):Yo(t,e.child,r,a)}function Hf(e,t,r,a,h){r=r.render;var y=t.ref;return Go(t,h),a=Sh(e,t,r,a,y,h),r=Rh(),e!==null&&!ja?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~h,$i(e,t,h)):(gn&&r&&uh(t),t.flags|=1,Pa(e,t,a,h),t.child)}function zf(e,t,r,a,h){if(e===null){var y=r.type;return typeof y=="function"&&!Mh(y)&&y.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=y,tv(e,t,y,a,h)):(e=Ru(r.type,null,a,t,t.mode,h),e.ref=t.ref,e.return=t,t.child=e)}if(y=e.child,!(e.lanes&h)){var j=y.memoizedProps;if(r=r.compare,r=r!==null?r:sl,r(j,a)&&e.ref===t.ref)return $i(e,t,h)}return t.flags|=1,e=Is(y,a),e.ref=t.ref,e.return=t,t.child=e}function tv(e,t,r,a,h){if(e!==null){var y=e.memoizedProps;if(sl(y,a)&&e.ref===t.ref)if(ja=!1,t.pendingProps=a=y,(e.lanes&h)!==0)e.flags&131072&&(ja=!0);else return t.lanes=e.lanes,$i(e,t,h)}return Tp(e,t,r,a,h)}function rv(e,t,r){var a=t.pendingProps,h=a.children,y=e!==null?e.memoizedState:null;if(a.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ln(Wo,za),za|=r;else{if(!(r&1073741824))return e=y!==null?y.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ln(Wo,za),za|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=y!==null?y.baseLanes:r,ln(Wo,za),za|=a}else y!==null?(a=y.baseLanes|r,t.memoizedState=null):a=r,ln(Wo,za),za|=a;return Pa(e,t,h,r),t.child}function nv(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Tp(e,t,r,a,h){var y=Ba(r)?so:ka.current;return y=Qo(t,y),Go(t,h),r=Sh(e,t,r,a,y,h),a=Rh(),e!==null&&!ja?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~h,$i(e,t,h)):(gn&&a&&uh(t),t.flags|=1,Pa(e,t,r,h),t.child)}function Vf(e,t,r,a,h){if(Ba(r)){var y=!0;Au(t)}else y=!1;if(Go(t,h),t.stateNode===null)bu(e,t),Yg(t,r,a),kp(t,r,a,h),a=!0;else if(e===null){var j=t.stateNode,L=t.memoizedProps;j.props=L;var b=j.context,u=r.contextType;typeof u=="object"&&u!==null?u=ii(u):(u=Ba(r)?so:ka.current,u=Qo(t,u));var P=r.getDerivedStateFromProps,E=typeof P=="function"||typeof j.getSnapshotBeforeUpdate=="function";E||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(L!==a||b!==u)&&Ff(t,j,a,u),ys=!1;var c=t.memoizedState;j.state=c,Wu(t,a,j,h),b=t.memoizedState,L!==a||c!==b||Fa.current||ys?(typeof P=="function"&&(Ep(t,r,P,a),b=t.memoizedState),(L=ys||jf(t,r,L,a,c,b,u))?(E||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(t.flags|=4194308)):(typeof j.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=b),j.props=a,j.state=b,j.context=u,a=L):(typeof j.componentDidMount=="function"&&(t.flags|=4194308),a=!1)}else{j=t.stateNode,Dg(e,t),L=t.memoizedProps,u=t.type===t.elementType?L:hi(t.type,L),j.props=u,E=t.pendingProps,c=j.context,b=r.contextType,typeof b=="object"&&b!==null?b=ii(b):(b=Ba(r)?so:ka.current,b=Qo(t,b));var _=r.getDerivedStateFromProps;(P=typeof _=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(L!==E||c!==b)&&Ff(t,j,a,b),ys=!1,c=t.memoizedState,j.state=c,Wu(t,a,j,h);var w=t.memoizedState;L!==E||c!==w||Fa.current||ys?(typeof _=="function"&&(Ep(t,r,_,a),w=t.memoizedState),(u=ys||jf(t,r,u,a,c,w,b)||!1)?(P||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(a,w,b),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(a,w,b)),typeof j.componentDidUpdate=="function"&&(t.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof j.componentDidUpdate!="function"||L===e.memoizedProps&&c===e.memoizedState||(t.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||L===e.memoizedProps&&c===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=w),j.props=a,j.state=w,j.context=b,a=u):(typeof j.componentDidUpdate!="function"||L===e.memoizedProps&&c===e.memoizedState||(t.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||L===e.memoizedProps&&c===e.memoizedState||(t.flags|=1024),a=!1)}return Pp(e,t,r,a,y,h)}function Pp(e,t,r,a,h,y){nv(e,t);var j=(t.flags&128)!==0;if(!a&&!j)return h&&xf(t,r,!1),$i(e,t,y);a=t.stateNode,ly.current=t;var L=j&&typeof r.getDerivedStateFromError!="function"?null:a.render();return t.flags|=1,e!==null&&j?(t.child=Yo(t,e.child,null,y),t.child=Yo(t,null,L,y)):Pa(e,t,L,y),t.memoizedState=a.state,h&&xf(t,r,!0),t.child}function av(e){var t=e.stateNode;t.pendingContext?Pf(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Pf(e,t.context,!1),_h(e,t.containerInfo)}function $f(e,t,r,a,h){return Jo(),ph(h),t.flags|=256,Pa(e,t,r,a),t.child}var xp={dehydrated:null,treeContext:null,retryLane:0};function Op(e){return{baseLanes:e,cachePool:null,transitions:null}}function iv(e,t,r){var a=t.pendingProps,h=wn.current,y=!1,j=(t.flags&128)!==0,L;if((L=j)||(L=e!==null&&e.memoizedState===null?!1:(h&2)!==0),L?(y=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(h|=1),ln(wn,h&1),e===null)return Sp(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(j=a.children,e=a.fallback,y?(a=t.mode,y=t.child,j={mode:"hidden",children:j},!(a&1)&&y!==null?(y.childLanes=0,y.pendingProps=j):y=cd(j,a,0,null),e=io(e,a,r,null),y.return=t,e.return=t,y.sibling=e,t.child=y,t.child.memoizedState=Op(r),t.memoizedState=xp,e):Ch(t,j));if(h=e.memoizedState,h!==null&&(L=h.dehydrated,L!==null))return uy(e,t,j,a,L,h,r);if(y){y=a.fallback,j=t.mode,h=e.child,L=h.sibling;var b={mode:"hidden",children:a.children};return!(j&1)&&t.child!==h?(a=t.child,a.childLanes=0,a.pendingProps=b,t.deletions=null):(a=Is(h,b),a.subtreeFlags=h.subtreeFlags&14680064),L!==null?y=Is(L,y):(y=io(y,j,r,null),y.flags|=2),y.return=t,a.return=t,a.sibling=y,t.child=a,a=y,y=t.child,j=e.child.memoizedState,j=j===null?Op(r):{baseLanes:j.baseLanes|r,cachePool:null,transitions:j.transitions},y.memoizedState=j,y.childLanes=e.childLanes&~r,t.memoizedState=xp,a}return y=e.child,e=y.sibling,a=Is(y,{mode:"visible",children:a.children}),!(t.mode&1)&&(a.lanes=r),a.return=t,a.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=a,t.memoizedState=null,a}function Ch(e,t){return t=cd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ou(e,t,r,a){return a!==null&&ph(a),Yo(t,e.child,null,r),e=Ch(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function uy(e,t,r,a,h,y,j){if(r)return t.flags&256?(t.flags&=-257,a=zd(Error(tt(422))),ou(e,t,j,a)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(y=a.fallback,h=t.mode,a=cd({mode:"visible",children:a.children},h,0,null),y=io(y,h,j,null),y.flags|=2,a.return=t,y.return=t,a.sibling=y,t.child=a,t.mode&1&&Yo(t,e.child,null,j),t.child.memoizedState=Op(j),t.memoizedState=xp,y);if(!(t.mode&1))return ou(e,t,j,null);if(h.data==="$!"){if(a=h.nextSibling&&h.nextSibling.dataset,a)var L=a.dgst;return a=L,y=Error(tt(419)),a=zd(y,a,void 0),ou(e,t,j,a)}if(L=(j&e.childLanes)!==0,ja||L){if(a=ia,a!==null){switch(j&-j){case 4:h=2;break;case 16:h=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:h=32;break;case 536870912:h=268435456;break;default:h=0}h=h&(a.suspendedLanes|j)?0:h,h!==0&&h!==y.retryLane&&(y.retryLane=h,Vi(e,h),vi(a,e,h,-1))}return Ih(),a=zd(Error(tt(421))),ou(e,t,j,a)}return h.data==="$?"?(t.flags|=128,t.child=e.child,t=Ry.bind(null,e),h._reactRetry=t,null):(e=y.treeContext,Va=Ps(h.nextSibling),$a=t,gn=!0,mi=null,e!==null&&(ti[ri++]=Bi,ti[ri++]=Ui,ti[ri++]=oo,Bi=e.id,Ui=e.overflow,oo=t),t=Ch(t,a.children),t.flags|=4096,t)}function Gf(e,t,r){e.lanes|=t;var a=e.alternate;a!==null&&(a.lanes|=t),Rp(e.return,t,r)}function Vd(e,t,r,a,h){var y=e.memoizedState;y===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:h}:(y.isBackwards=t,y.rendering=null,y.renderingStartTime=0,y.last=a,y.tail=r,y.tailMode=h)}function sv(e,t,r){var a=t.pendingProps,h=a.revealOrder,y=a.tail;if(Pa(e,t,a.children,r),a=wn.current,a&2)a=a&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Gf(e,r,t);else if(e.tag===19)Gf(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(ln(wn,a),!(t.mode&1))t.memoizedState=null;else switch(h){case"forwards":for(r=t.child,h=null;r!==null;)e=r.alternate,e!==null&&Hu(e)===null&&(h=r),r=r.sibling;r=h,r===null?(h=t.child,t.child=null):(h=r.sibling,r.sibling=null),Vd(t,!1,h,r,y);break;case"backwards":for(r=null,h=t.child,t.child=null;h!==null;){if(e=h.alternate,e!==null&&Hu(e)===null){t.child=h;break}e=h.sibling,h.sibling=r,r=h,h=e}Vd(t,!0,r,null,y);break;case"together":Vd(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function bu(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function $i(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),lo|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(tt(153));if(t.child!==null){for(e=t.child,r=Is(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Is(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function dy(e,t,r){switch(t.tag){case 3:av(t),Jo();break;case 5:Ig(t);break;case 1:Ba(t.type)&&Au(t);break;case 4:_h(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,h=t.memoizedProps.value;ln(Bu,a._currentValue),a._currentValue=h;break;case 13:if(a=t.memoizedState,a!==null)return a.dehydrated!==null?(ln(wn,wn.current&1),t.flags|=128,null):r&t.child.childLanes?iv(e,t,r):(ln(wn,wn.current&1),e=$i(e,t,r),e!==null?e.sibling:null);ln(wn,wn.current&1);break;case 19:if(a=(r&t.childLanes)!==0,e.flags&128){if(a)return sv(e,t,r);t.flags|=128}if(h=t.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),ln(wn,wn.current),a)break;return null;case 22:case 23:return t.lanes=0,rv(e,t,r)}return $i(e,t,r)}var ov,Dp,cv,lv;ov=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Dp=function(){};cv=function(e,t,r,a){var h=e.memoizedProps;if(h!==a){e=t.stateNode,ro(Pi.current);var y=null;switch(r){case"input":h=Xd(e,h),a=Xd(e,a),y=[];break;case"select":h=Rn({},h,{value:void 0}),a=Rn({},a,{value:void 0}),y=[];break;case"textarea":h=rp(e,h),a=rp(e,a),y=[];break;default:typeof h.onClick!="function"&&typeof a.onClick=="function"&&(e.onclick=Lu)}ap(r,a);var j;r=null;for(u in h)if(!a.hasOwnProperty(u)&&h.hasOwnProperty(u)&&h[u]!=null)if(u==="style"){var L=h[u];for(j in L)L.hasOwnProperty(j)&&(r||(r={}),r[j]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Xc.hasOwnProperty(u)?y||(y=[]):(y=y||[]).push(u,null));for(u in a){var b=a[u];if(L=h!=null?h[u]:void 0,a.hasOwnProperty(u)&&b!==L&&(b!=null||L!=null))if(u==="style")if(L){for(j in L)!L.hasOwnProperty(j)||b&&b.hasOwnProperty(j)||(r||(r={}),r[j]="");for(j in b)b.hasOwnProperty(j)&&L[j]!==b[j]&&(r||(r={}),r[j]=b[j])}else r||(y||(y=[]),y.push(u,r)),r=b;else u==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,L=L?L.__html:void 0,b!=null&&L!==b&&(y=y||[]).push(u,b)):u==="children"?typeof b!="string"&&typeof b!="number"||(y=y||[]).push(u,""+b):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Xc.hasOwnProperty(u)?(b!=null&&u==="onScroll"&&hn("scroll",e),y||L===b||(y=[])):(y=y||[]).push(u,b))}r&&(y=y||[]).push("style",r);var u=y;(t.updateQueue=u)&&(t.flags|=4)}};lv=function(e,t,r,a){r!==a&&(t.flags|=4)};function jc(e,t){if(!gn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Ra(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,a=0;if(t)for(var h=e.child;h!==null;)r|=h.lanes|h.childLanes,a|=h.subtreeFlags&14680064,a|=h.flags&14680064,h.return=e,h=h.sibling;else for(h=e.child;h!==null;)r|=h.lanes|h.childLanes,a|=h.subtreeFlags,a|=h.flags,h.return=e,h=h.sibling;return e.subtreeFlags|=a,e.childLanes=r,t}function py(e,t,r){var a=t.pendingProps;switch(dh(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ra(t),null;case 1:return Ba(t.type)&&Nu(),Ra(t),null;case 3:return a=t.stateNode,Xo(),fn(Fa),fn(ka),bh(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(iu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,mi!==null&&(Bp(mi),mi=null))),Dp(e,t),Ra(t),null;case 5:yh(t);var h=ro(dl.current);if(r=t.type,e!==null&&t.stateNode!=null)cv(e,t,r,a,h),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(t.stateNode===null)throw Error(tt(166));return Ra(t),null}if(e=ro(Pi.current),iu(t)){a=t.stateNode,r=t.type;var y=t.memoizedProps;switch(a[Ci]=t,a[ll]=y,e=(t.mode&1)!==0,r){case"dialog":hn("cancel",a),hn("close",a);break;case"iframe":case"object":case"embed":hn("load",a);break;case"video":case"audio":for(h=0;h<Hc.length;h++)hn(Hc[h],a);break;case"source":hn("error",a);break;case"img":case"image":case"link":hn("error",a),hn("load",a);break;case"details":hn("toggle",a);break;case"input":ef(a,y),hn("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!y.multiple},hn("invalid",a);break;case"textarea":rf(a,y),hn("invalid",a)}ap(r,y),h=null;for(var j in y)if(y.hasOwnProperty(j)){var L=y[j];j==="children"?typeof L=="string"?a.textContent!==L&&(y.suppressHydrationWarning!==!0&&au(a.textContent,L,e),h=["children",L]):typeof L=="number"&&a.textContent!==""+L&&(y.suppressHydrationWarning!==!0&&au(a.textContent,L,e),h=["children",""+L]):Xc.hasOwnProperty(j)&&L!=null&&j==="onScroll"&&hn("scroll",a)}switch(r){case"input":Ql(a),tf(a,y,!0);break;case"textarea":Ql(a),nf(a);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(a.onclick=Lu)}a=h,t.updateQueue=a,a!==null&&(t.flags|=4)}else{j=h.nodeType===9?h:h.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=jm(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=j.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof a.is=="string"?e=j.createElement(r,{is:a.is}):(e=j.createElement(r),r==="select"&&(j=e,a.multiple?j.multiple=!0:a.size&&(j.size=a.size))):e=j.createElementNS(e,r),e[Ci]=t,e[ll]=a,ov(e,t,!1,!1),t.stateNode=e;e:{switch(j=ip(r,a),r){case"dialog":hn("cancel",e),hn("close",e),h=a;break;case"iframe":case"object":case"embed":hn("load",e),h=a;break;case"video":case"audio":for(h=0;h<Hc.length;h++)hn(Hc[h],e);h=a;break;case"source":hn("error",e),h=a;break;case"img":case"image":case"link":hn("error",e),hn("load",e),h=a;break;case"details":hn("toggle",e),h=a;break;case"input":ef(e,a),h=Xd(e,a),hn("invalid",e);break;case"option":h=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},h=Rn({},a,{value:void 0}),hn("invalid",e);break;case"textarea":rf(e,a),h=rp(e,a),hn("invalid",e);break;default:h=a}ap(r,h),L=h;for(y in L)if(L.hasOwnProperty(y)){var b=L[y];y==="style"?Um(e,b):y==="dangerouslySetInnerHTML"?(b=b?b.__html:void 0,b!=null&&Fm(e,b)):y==="children"?typeof b=="string"?(r!=="textarea"||b!=="")&&el(e,b):typeof b=="number"&&el(e,""+b):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(Xc.hasOwnProperty(y)?b!=null&&y==="onScroll"&&hn("scroll",e):b!=null&&Qp(e,y,b,j))}switch(r){case"input":Ql(e),tf(e,a,!1);break;case"textarea":Ql(e),nf(e);break;case"option":a.value!=null&&e.setAttribute("value",""+Ms(a.value));break;case"select":e.multiple=!!a.multiple,y=a.value,y!=null?Ho(e,!!a.multiple,y,!1):a.defaultValue!=null&&Ho(e,!!a.multiple,a.defaultValue,!0);break;default:typeof h.onClick=="function"&&(e.onclick=Lu)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ra(t),null;case 6:if(e&&t.stateNode!=null)lv(e,t,e.memoizedProps,a);else{if(typeof a!="string"&&t.stateNode===null)throw Error(tt(166));if(r=ro(dl.current),ro(Pi.current),iu(t)){if(a=t.stateNode,r=t.memoizedProps,a[Ci]=t,(y=a.nodeValue!==r)&&(e=$a,e!==null))switch(e.tag){case 3:au(a.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&au(a.nodeValue,r,(e.mode&1)!==0)}y&&(t.flags|=4)}else a=(r.nodeType===9?r:r.ownerDocument).createTextNode(a),a[Ci]=t,t.stateNode=a}return Ra(t),null;case 13:if(fn(wn),a=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(gn&&Va!==null&&t.mode&1&&!(t.flags&128))Tg(),Jo(),t.flags|=98560,y=!1;else if(y=iu(t),a!==null&&a.dehydrated!==null){if(e===null){if(!y)throw Error(tt(318));if(y=t.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(tt(317));y[Ci]=t}else Jo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ra(t),y=!1}else mi!==null&&(Bp(mi),mi=null),y=!0;if(!y)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(a=a!==null,a!==(e!==null&&e.memoizedState!==null)&&a&&(t.child.flags|=8192,t.mode&1&&(e===null||wn.current&1?Qn===0&&(Qn=3):Ih())),t.updateQueue!==null&&(t.flags|=4),Ra(t),null);case 4:return Xo(),Dp(e,t),e===null&&ol(t.stateNode.containerInfo),Ra(t),null;case 10:return mh(t.type._context),Ra(t),null;case 17:return Ba(t.type)&&Nu(),Ra(t),null;case 19:if(fn(wn),y=t.memoizedState,y===null)return Ra(t),null;if(a=(t.flags&128)!==0,j=y.rendering,j===null)if(a)jc(y,!1);else{if(Qn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(j=Hu(e),j!==null){for(t.flags|=128,jc(y,!1),a=j.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;r!==null;)y=r,e=a,y.flags&=14680066,j=y.alternate,j===null?(y.childLanes=0,y.lanes=e,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=j.childLanes,y.lanes=j.lanes,y.child=j.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=j.memoizedProps,y.memoizedState=j.memoizedState,y.updateQueue=j.updateQueue,y.type=j.type,e=j.dependencies,y.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return ln(wn,wn.current&1|2),t.child}e=e.sibling}y.tail!==null&&An()>tc&&(t.flags|=128,a=!0,jc(y,!1),t.lanes=4194304)}else{if(!a)if(e=Hu(j),e!==null){if(t.flags|=128,a=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),jc(y,!0),y.tail===null&&y.tailMode==="hidden"&&!j.alternate&&!gn)return Ra(t),null}else 2*An()-y.renderingStartTime>tc&&r!==1073741824&&(t.flags|=128,a=!0,jc(y,!1),t.lanes=4194304);y.isBackwards?(j.sibling=t.child,t.child=j):(r=y.last,r!==null?r.sibling=j:t.child=j,y.last=j)}return y.tail!==null?(t=y.tail,y.rendering=t,y.tail=t.sibling,y.renderingStartTime=An(),t.sibling=null,r=wn.current,ln(wn,a?r&1|2:r&1),t):(Ra(t),null);case 22:case 23:return Dh(),a=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==a&&(t.flags|=8192),a&&t.mode&1?za&1073741824&&(Ra(t),t.subtreeFlags&6&&(t.flags|=8192)):Ra(t),null;case 24:return null;case 25:return null}throw Error(tt(156,t.tag))}function hy(e,t){switch(dh(t),t.tag){case 1:return Ba(t.type)&&Nu(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Xo(),fn(Fa),fn(ka),bh(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return yh(t),null;case 13:if(fn(wn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(tt(340));Jo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return fn(wn),null;case 4:return Xo(),null;case 10:return mh(t.type._context),null;case 22:case 23:return Dh(),null;case 24:return null;default:return null}}var cu=!1,Ea=!1,fy=typeof WeakSet=="function"?WeakSet:Set,xt=null;function Uo(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(a){xn(e,t,a)}else r.current=null}function Ip(e,t,r){try{r()}catch(a){xn(e,t,a)}}var Zf=!1;function my(e,t){if(mp=Du,e=fg(),lh(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var a=r.getSelection&&r.getSelection();if(a&&a.rangeCount!==0){r=a.anchorNode;var h=a.anchorOffset,y=a.focusNode;a=a.focusOffset;try{r.nodeType,y.nodeType}catch{r=null;break e}var j=0,L=-1,b=-1,u=0,P=0,E=e,c=null;t:for(;;){for(var _;E!==r||h!==0&&E.nodeType!==3||(L=j+h),E!==y||a!==0&&E.nodeType!==3||(b=j+a),E.nodeType===3&&(j+=E.nodeValue.length),(_=E.firstChild)!==null;)c=E,E=_;for(;;){if(E===e)break t;if(c===r&&++u===h&&(L=j),c===y&&++P===a&&(b=j),(_=E.nextSibling)!==null)break;E=c,c=E.parentNode}E=_}r=L===-1||b===-1?null:{start:L,end:b}}else r=null}r=r||{start:0,end:0}}else r=null;for(gp={focusedElem:e,selectionRange:r},Du=!1,xt=t;xt!==null;)if(t=xt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,xt=e;else for(;xt!==null;){t=xt;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var d=w.memoizedProps,g=w.memoizedState,n=t.stateNode,m=n.getSnapshotBeforeUpdate(t.elementType===t.type?d:hi(t.type,d),g);n.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(tt(163))}}catch(R){xn(t,t.return,R)}if(e=t.sibling,e!==null){e.return=t.return,xt=e;break}xt=t.return}return w=Zf,Zf=!1,w}function Kc(e,t,r){var a=t.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var h=a=a.next;do{if((h.tag&e)===e){var y=h.destroy;h.destroy=void 0,y!==void 0&&Ip(t,r,y)}h=h.next}while(h!==a)}}function sd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function Mp(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function uv(e){var t=e.alternate;t!==null&&(e.alternate=null,uv(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ci],delete t[ll],delete t[yp],delete t[J0],delete t[Y0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function dv(e){return e.tag===5||e.tag===3||e.tag===4}function qf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||dv(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Lp(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Lu));else if(a!==4&&(e=e.child,e!==null))for(Lp(e,t,r),e=e.sibling;e!==null;)Lp(e,t,r),e=e.sibling}function Np(e,t,r){var a=e.tag;if(a===5||a===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(a!==4&&(e=e.child,e!==null))for(Np(e,t,r),e=e.sibling;e!==null;)Np(e,t,r),e=e.sibling}var ma=null,fi=!1;function vs(e,t,r){for(r=r.child;r!==null;)pv(e,t,r),r=r.sibling}function pv(e,t,r){if(Ti&&typeof Ti.onCommitFiberUnmount=="function")try{Ti.onCommitFiberUnmount(Yu,r)}catch{}switch(r.tag){case 5:Ea||Uo(r,t);case 6:var a=ma,h=fi;ma=null,vs(e,t,r),ma=a,fi=h,ma!==null&&(fi?(e=ma,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):ma.removeChild(r.stateNode));break;case 18:ma!==null&&(fi?(e=ma,r=r.stateNode,e.nodeType===8?jd(e.parentNode,r):e.nodeType===1&&jd(e,r),al(e)):jd(ma,r.stateNode));break;case 4:a=ma,h=fi,ma=r.stateNode.containerInfo,fi=!0,vs(e,t,r),ma=a,fi=h;break;case 0:case 11:case 14:case 15:if(!Ea&&(a=r.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){h=a=a.next;do{var y=h,j=y.destroy;y=y.tag,j!==void 0&&(y&2||y&4)&&Ip(r,t,j),h=h.next}while(h!==a)}vs(e,t,r);break;case 1:if(!Ea&&(Uo(r,t),a=r.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(L){xn(r,t,L)}vs(e,t,r);break;case 21:vs(e,t,r);break;case 22:r.mode&1?(Ea=(a=Ea)||r.memoizedState!==null,vs(e,t,r),Ea=a):vs(e,t,r);break;default:vs(e,t,r)}}function Kf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new fy),t.forEach(function(a){var h=Ey.bind(null,e,a);r.has(a)||(r.add(a),a.then(h,h))})}}function pi(e,t){var r=t.deletions;if(r!==null)for(var a=0;a<r.length;a++){var h=r[a];try{var y=e,j=t,L=j;e:for(;L!==null;){switch(L.tag){case 5:ma=L.stateNode,fi=!1;break e;case 3:ma=L.stateNode.containerInfo,fi=!0;break e;case 4:ma=L.stateNode.containerInfo,fi=!0;break e}L=L.return}if(ma===null)throw Error(tt(160));pv(y,j,h),ma=null,fi=!1;var b=h.alternate;b!==null&&(b.return=null),h.return=null}catch(u){xn(h,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)hv(t,e),t=t.sibling}function hv(e,t){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pi(t,e),Ei(e),a&4){try{Kc(3,e,e.return),sd(3,e)}catch(d){xn(e,e.return,d)}try{Kc(5,e,e.return)}catch(d){xn(e,e.return,d)}}break;case 1:pi(t,e),Ei(e),a&512&&r!==null&&Uo(r,r.return);break;case 5:if(pi(t,e),Ei(e),a&512&&r!==null&&Uo(r,r.return),e.flags&32){var h=e.stateNode;try{el(h,"")}catch(d){xn(e,e.return,d)}}if(a&4&&(h=e.stateNode,h!=null)){var y=e.memoizedProps,j=r!==null?r.memoizedProps:y,L=e.type,b=e.updateQueue;if(e.updateQueue=null,b!==null)try{L==="input"&&y.type==="radio"&&y.name!=null&&Nm(h,y),ip(L,j);var u=ip(L,y);for(j=0;j<b.length;j+=2){var P=b[j],E=b[j+1];P==="style"?Um(h,E):P==="dangerouslySetInnerHTML"?Fm(h,E):P==="children"?el(h,E):Qp(h,P,E,u)}switch(L){case"input":ep(h,y);break;case"textarea":Am(h,y);break;case"select":var c=h._wrapperState.wasMultiple;h._wrapperState.wasMultiple=!!y.multiple;var _=y.value;_!=null?Ho(h,!!y.multiple,_,!1):c!==!!y.multiple&&(y.defaultValue!=null?Ho(h,!!y.multiple,y.defaultValue,!0):Ho(h,!!y.multiple,y.multiple?[]:"",!1))}h[ll]=y}catch(d){xn(e,e.return,d)}}break;case 6:if(pi(t,e),Ei(e),a&4){if(e.stateNode===null)throw Error(tt(162));h=e.stateNode,y=e.memoizedProps;try{h.nodeValue=y}catch(d){xn(e,e.return,d)}}break;case 3:if(pi(t,e),Ei(e),a&4&&r!==null&&r.memoizedState.isDehydrated)try{al(t.containerInfo)}catch(d){xn(e,e.return,d)}break;case 4:pi(t,e),Ei(e);break;case 13:pi(t,e),Ei(e),h=e.child,h.flags&8192&&(y=h.memoizedState!==null,h.stateNode.isHidden=y,!y||h.alternate!==null&&h.alternate.memoizedState!==null||(xh=An())),a&4&&Kf(e);break;case 22:if(P=r!==null&&r.memoizedState!==null,e.mode&1?(Ea=(u=Ea)||P,pi(t,e),Ea=u):pi(t,e),Ei(e),a&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!P&&e.mode&1)for(xt=e,P=e.child;P!==null;){for(E=xt=P;xt!==null;){switch(c=xt,_=c.child,c.tag){case 0:case 11:case 14:case 15:Kc(4,c,c.return);break;case 1:Uo(c,c.return);var w=c.stateNode;if(typeof w.componentWillUnmount=="function"){a=c,r=c.return;try{t=a,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(d){xn(a,r,d)}}break;case 5:Uo(c,c.return);break;case 22:if(c.memoizedState!==null){Jf(E);continue}}_!==null?(_.return=c,xt=_):Jf(E)}P=P.sibling}e:for(P=null,E=e;;){if(E.tag===5){if(P===null){P=E;try{h=E.stateNode,u?(y=h.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(L=E.stateNode,b=E.memoizedProps.style,j=b!=null&&b.hasOwnProperty("display")?b.display:null,L.style.display=Bm("display",j))}catch(d){xn(e,e.return,d)}}}else if(E.tag===6){if(P===null)try{E.stateNode.nodeValue=u?"":E.memoizedProps}catch(d){xn(e,e.return,d)}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===e)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===e)break e;for(;E.sibling===null;){if(E.return===null||E.return===e)break e;P===E&&(P=null),E=E.return}P===E&&(P=null),E.sibling.return=E.return,E=E.sibling}}break;case 19:pi(t,e),Ei(e),a&4&&Kf(e);break;case 21:break;default:pi(t,e),Ei(e)}}function Ei(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(dv(r)){var a=r;break e}r=r.return}throw Error(tt(160))}switch(a.tag){case 5:var h=a.stateNode;a.flags&32&&(el(h,""),a.flags&=-33);var y=qf(e);Np(e,y,h);break;case 3:case 4:var j=a.stateNode.containerInfo,L=qf(e);Lp(e,L,j);break;default:throw Error(tt(161))}}catch(b){xn(e,e.return,b)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function gy(e,t,r){xt=e,fv(e)}function fv(e,t,r){for(var a=(e.mode&1)!==0;xt!==null;){var h=xt,y=h.child;if(h.tag===22&&a){var j=h.memoizedState!==null||cu;if(!j){var L=h.alternate,b=L!==null&&L.memoizedState!==null||Ea;L=cu;var u=Ea;if(cu=j,(Ea=b)&&!u)for(xt=h;xt!==null;)j=xt,b=j.child,j.tag===22&&j.memoizedState!==null?Yf(h):b!==null?(b.return=j,xt=b):Yf(h);for(;y!==null;)xt=y,fv(y),y=y.sibling;xt=h,cu=L,Ea=u}Qf(e)}else h.subtreeFlags&8772&&y!==null?(y.return=h,xt=y):Qf(e)}}function Qf(e){for(;xt!==null;){var t=xt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ea||sd(5,t);break;case 1:var a=t.stateNode;if(t.flags&4&&!Ea)if(r===null)a.componentDidMount();else{var h=t.elementType===t.type?r.memoizedProps:hi(t.type,r.memoizedProps);a.componentDidUpdate(h,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var y=t.updateQueue;y!==null&&Lf(t,y,a);break;case 3:var j=t.updateQueue;if(j!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Lf(t,j,r)}break;case 5:var L=t.stateNode;if(r===null&&t.flags&4){r=L;var b=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":b.autoFocus&&r.focus();break;case"img":b.src&&(r.src=b.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var P=u.memoizedState;if(P!==null){var E=P.dehydrated;E!==null&&al(E)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(tt(163))}Ea||t.flags&512&&Mp(t)}catch(c){xn(t,t.return,c)}}if(t===e){xt=null;break}if(r=t.sibling,r!==null){r.return=t.return,xt=r;break}xt=t.return}}function Jf(e){for(;xt!==null;){var t=xt;if(t===e){xt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,xt=r;break}xt=t.return}}function Yf(e){for(;xt!==null;){var t=xt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{sd(4,t)}catch(b){xn(t,r,b)}break;case 1:var a=t.stateNode;if(typeof a.componentDidMount=="function"){var h=t.return;try{a.componentDidMount()}catch(b){xn(t,h,b)}}var y=t.return;try{Mp(t)}catch(b){xn(t,y,b)}break;case 5:var j=t.return;try{Mp(t)}catch(b){xn(t,j,b)}}}catch(b){xn(t,t.return,b)}if(t===e){xt=null;break}var L=t.sibling;if(L!==null){L.return=t.return,xt=L;break}xt=t.return}}var vy=Math.ceil,$u=Zi.ReactCurrentDispatcher,Th=Zi.ReactCurrentOwner,ai=Zi.ReactCurrentBatchConfig,Fr=0,ia=null,Vn=null,ga=0,za=0,Wo=As(0),Qn=0,ml=null,lo=0,od=0,Ph=0,Qc=null,Aa=null,xh=0,tc=1/0,ji=null,Gu=!1,Ap=null,Os=null,lu=!1,Es=null,Zu=0,Jc=0,jp=null,wu=-1,Su=0;function Oa(){return Fr&6?An():wu!==-1?wu:wu=An()}function Ds(e){return e.mode&1?Fr&2&&ga!==0?ga&-ga:ey.transition!==null?(Su===0&&(Su=Ym()),Su):(e=Kr,e!==0||(e=window.event,e=e===void 0?16:ig(e.type)),e):1}function vi(e,t,r,a){if(50<Jc)throw Jc=0,jp=null,Error(tt(185));vl(e,r,a),(!(Fr&2)||e!==ia)&&(e===ia&&(!(Fr&2)&&(od|=r),Qn===4&&ws(e,ga)),Ua(e,a),r===1&&Fr===0&&!(t.mode&1)&&(tc=An()+500,nd&&js()))}function Ua(e,t){var r=e.callbackNode;e0(e,t);var a=Ou(e,e===ia?ga:0);if(a===0)r!==null&&of(r),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(r!=null&&of(r),t===1)e.tag===0?X0(Xf.bind(null,e)):Eg(Xf.bind(null,e)),K0(function(){!(Fr&6)&&js()}),r=null;else{switch(Xm(a)){case 1:r=th;break;case 4:r=Qm;break;case 16:r=xu;break;case 536870912:r=Jm;break;default:r=xu}r=Sv(r,mv.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function mv(e,t){if(wu=-1,Su=0,Fr&6)throw Error(tt(327));var r=e.callbackNode;if(Zo()&&e.callbackNode!==r)return null;var a=Ou(e,e===ia?ga:0);if(a===0)return null;if(a&30||a&e.expiredLanes||t)t=qu(e,a);else{t=a;var h=Fr;Fr|=2;var y=vv();(ia!==e||ga!==t)&&(ji=null,tc=An()+500,ao(e,t));do try{by();break}catch(L){gv(e,L)}while(!0);fh(),$u.current=y,Fr=h,Vn!==null?t=0:(ia=null,ga=0,t=Qn)}if(t!==0){if(t===2&&(h=up(e),h!==0&&(a=h,t=Fp(e,h))),t===1)throw r=ml,ao(e,0),ws(e,a),Ua(e,An()),r;if(t===6)ws(e,a);else{if(h=e.current.alternate,!(a&30)&&!_y(h)&&(t=qu(e,a),t===2&&(y=up(e),y!==0&&(a=y,t=Fp(e,y))),t===1))throw r=ml,ao(e,0),ws(e,a),Ua(e,An()),r;switch(e.finishedWork=h,e.finishedLanes=a,t){case 0:case 1:throw Error(tt(345));case 2:Xs(e,Aa,ji);break;case 3:if(ws(e,a),(a&130023424)===a&&(t=xh+500-An(),10<t)){if(Ou(e,0)!==0)break;if(h=e.suspendedLanes,(h&a)!==a){Oa(),e.pingedLanes|=e.suspendedLanes&h;break}e.timeoutHandle=_p(Xs.bind(null,e,Aa,ji),t);break}Xs(e,Aa,ji);break;case 4:if(ws(e,a),(a&4194240)===a)break;for(t=e.eventTimes,h=-1;0<a;){var j=31-gi(a);y=1<<j,j=t[j],j>h&&(h=j),a&=~y}if(a=h,a=An()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*vy(a/1960))-a,10<a){e.timeoutHandle=_p(Xs.bind(null,e,Aa,ji),a);break}Xs(e,Aa,ji);break;case 5:Xs(e,Aa,ji);break;default:throw Error(tt(329))}}}return Ua(e,An()),e.callbackNode===r?mv.bind(null,e):null}function Fp(e,t){var r=Qc;return e.current.memoizedState.isDehydrated&&(ao(e,t).flags|=256),e=qu(e,t),e!==2&&(t=Aa,Aa=r,t!==null&&Bp(t)),e}function Bp(e){Aa===null?Aa=e:Aa.push.apply(Aa,e)}function _y(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var a=0;a<r.length;a++){var h=r[a],y=h.getSnapshot;h=h.value;try{if(!_i(y(),h))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ws(e,t){for(t&=~Ph,t&=~od,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-gi(t),a=1<<r;e[r]=-1,t&=~a}}function Xf(e){if(Fr&6)throw Error(tt(327));Zo();var t=Ou(e,0);if(!(t&1))return Ua(e,An()),null;var r=qu(e,t);if(e.tag!==0&&r===2){var a=up(e);a!==0&&(t=a,r=Fp(e,a))}if(r===1)throw r=ml,ao(e,0),ws(e,t),Ua(e,An()),r;if(r===6)throw Error(tt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Xs(e,Aa,ji),Ua(e,An()),null}function Oh(e,t){var r=Fr;Fr|=1;try{return e(t)}finally{Fr=r,Fr===0&&(tc=An()+500,nd&&js())}}function uo(e){Es!==null&&Es.tag===0&&!(Fr&6)&&Zo();var t=Fr;Fr|=1;var r=ai.transition,a=Kr;try{if(ai.transition=null,Kr=1,e)return e()}finally{Kr=a,ai.transition=r,Fr=t,!(Fr&6)&&js()}}function Dh(){za=Wo.current,fn(Wo)}function ao(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,q0(r)),Vn!==null)for(r=Vn.return;r!==null;){var a=r;switch(dh(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&Nu();break;case 3:Xo(),fn(Fa),fn(ka),bh();break;case 5:yh(a);break;case 4:Xo();break;case 13:fn(wn);break;case 19:fn(wn);break;case 10:mh(a.type._context);break;case 22:case 23:Dh()}r=r.return}if(ia=e,Vn=e=Is(e.current,null),ga=za=t,Qn=0,ml=null,Ph=od=lo=0,Aa=Qc=null,to!==null){for(t=0;t<to.length;t++)if(r=to[t],a=r.interleaved,a!==null){r.interleaved=null;var h=a.next,y=r.pending;if(y!==null){var j=y.next;y.next=h,a.next=j}r.pending=a}to=null}return e}function gv(e,t){do{var r=Vn;try{if(fh(),_u.current=Vu,zu){for(var a=Sn.memoizedState;a!==null;){var h=a.queue;h!==null&&(h.pending=null),a=a.next}zu=!1}if(co=0,aa=Kn=Sn=null,qc=!1,pl=0,Th.current=null,r===null||r.return===null){Qn=1,ml=t,Vn=null;break}e:{var y=e,j=r.return,L=r,b=t;if(t=ga,L.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var u=b,P=L,E=P.tag;if(!(P.mode&1)&&(E===0||E===11||E===15)){var c=P.alternate;c?(P.updateQueue=c.updateQueue,P.memoizedState=c.memoizedState,P.lanes=c.lanes):(P.updateQueue=null,P.memoizedState=null)}var _=Uf(j);if(_!==null){_.flags&=-257,Wf(_,j,L,y,t),_.mode&1&&Bf(y,u,t),t=_,b=u;var w=t.updateQueue;if(w===null){var d=new Set;d.add(b),t.updateQueue=d}else w.add(b);break e}else{if(!(t&1)){Bf(y,u,t),Ih();break e}b=Error(tt(426))}}else if(gn&&L.mode&1){var g=Uf(j);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Wf(g,j,L,y,t),ph(ec(b,L));break e}}y=b=ec(b,L),Qn!==4&&(Qn=2),Qc===null?Qc=[y]:Qc.push(y),y=j;do{switch(y.tag){case 3:y.flags|=65536,t&=-t,y.lanes|=t;var n=Xg(y,b,t);Mf(y,n);break e;case 1:L=b;var m=y.type,v=y.stateNode;if(!(y.flags&128)&&(typeof m.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Os===null||!Os.has(v)))){y.flags|=65536,t&=-t,y.lanes|=t;var R=ev(y,L,t);Mf(y,R);break e}}y=y.return}while(y!==null)}yv(r)}catch(k){t=k,Vn===r&&r!==null&&(Vn=r=r.return);continue}break}while(!0)}function vv(){var e=$u.current;return $u.current=Vu,e===null?Vu:e}function Ih(){(Qn===0||Qn===3||Qn===2)&&(Qn=4),ia===null||!(lo&268435455)&&!(od&268435455)||ws(ia,ga)}function qu(e,t){var r=Fr;Fr|=2;var a=vv();(ia!==e||ga!==t)&&(ji=null,ao(e,t));do try{yy();break}catch(h){gv(e,h)}while(!0);if(fh(),Fr=r,$u.current=a,Vn!==null)throw Error(tt(261));return ia=null,ga=0,Qn}function yy(){for(;Vn!==null;)_v(Vn)}function by(){for(;Vn!==null&&!$_();)_v(Vn)}function _v(e){var t=wv(e.alternate,e,za);e.memoizedProps=e.pendingProps,t===null?yv(e):Vn=t,Th.current=null}function yv(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=hy(r,t),r!==null){r.flags&=32767,Vn=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Qn=6,Vn=null;return}}else if(r=py(r,t,za),r!==null){Vn=r;return}if(t=t.sibling,t!==null){Vn=t;return}Vn=t=e}while(t!==null);Qn===0&&(Qn=5)}function Xs(e,t,r){var a=Kr,h=ai.transition;try{ai.transition=null,Kr=1,wy(e,t,r,a)}finally{ai.transition=h,Kr=a}return null}function wy(e,t,r,a){do Zo();while(Es!==null);if(Fr&6)throw Error(tt(327));r=e.finishedWork;var h=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(tt(177));e.callbackNode=null,e.callbackPriority=0;var y=r.lanes|r.childLanes;if(t0(e,y),e===ia&&(Vn=ia=null,ga=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||lu||(lu=!0,Sv(xu,function(){return Zo(),null})),y=(r.flags&15990)!==0,r.subtreeFlags&15990||y){y=ai.transition,ai.transition=null;var j=Kr;Kr=1;var L=Fr;Fr|=4,Th.current=null,my(e,r),hv(r,e),W0(gp),Du=!!mp,gp=mp=null,e.current=r,gy(r),G_(),Fr=L,Kr=j,ai.transition=y}else e.current=r;if(lu&&(lu=!1,Es=e,Zu=h),y=e.pendingLanes,y===0&&(Os=null),K_(r.stateNode),Ua(e,An()),t!==null)for(a=e.onRecoverableError,r=0;r<t.length;r++)h=t[r],a(h.value,{componentStack:h.stack,digest:h.digest});if(Gu)throw Gu=!1,e=Ap,Ap=null,e;return Zu&1&&e.tag!==0&&Zo(),y=e.pendingLanes,y&1?e===jp?Jc++:(Jc=0,jp=e):Jc=0,js(),null}function Zo(){if(Es!==null){var e=Xm(Zu),t=ai.transition,r=Kr;try{if(ai.transition=null,Kr=16>e?16:e,Es===null)var a=!1;else{if(e=Es,Es=null,Zu=0,Fr&6)throw Error(tt(331));var h=Fr;for(Fr|=4,xt=e.current;xt!==null;){var y=xt,j=y.child;if(xt.flags&16){var L=y.deletions;if(L!==null){for(var b=0;b<L.length;b++){var u=L[b];for(xt=u;xt!==null;){var P=xt;switch(P.tag){case 0:case 11:case 15:Kc(8,P,y)}var E=P.child;if(E!==null)E.return=P,xt=E;else for(;xt!==null;){P=xt;var c=P.sibling,_=P.return;if(uv(P),P===u){xt=null;break}if(c!==null){c.return=_,xt=c;break}xt=_}}}var w=y.alternate;if(w!==null){var d=w.child;if(d!==null){w.child=null;do{var g=d.sibling;d.sibling=null,d=g}while(d!==null)}}xt=y}}if(y.subtreeFlags&2064&&j!==null)j.return=y,xt=j;else e:for(;xt!==null;){if(y=xt,y.flags&2048)switch(y.tag){case 0:case 11:case 15:Kc(9,y,y.return)}var n=y.sibling;if(n!==null){n.return=y.return,xt=n;break e}xt=y.return}}var m=e.current;for(xt=m;xt!==null;){j=xt;var v=j.child;if(j.subtreeFlags&2064&&v!==null)v.return=j,xt=v;else e:for(j=m;xt!==null;){if(L=xt,L.flags&2048)try{switch(L.tag){case 0:case 11:case 15:sd(9,L)}}catch(k){xn(L,L.return,k)}if(L===j){xt=null;break e}var R=L.sibling;if(R!==null){R.return=L.return,xt=R;break e}xt=L.return}}if(Fr=h,js(),Ti&&typeof Ti.onPostCommitFiberRoot=="function")try{Ti.onPostCommitFiberRoot(Yu,e)}catch{}a=!0}return a}finally{Kr=r,ai.transition=t}}return!1}function em(e,t,r){t=ec(r,t),t=Xg(e,t,1),e=xs(e,t,1),t=Oa(),e!==null&&(vl(e,1,t),Ua(e,t))}function xn(e,t,r){if(e.tag===3)em(e,e,r);else for(;t!==null;){if(t.tag===3){em(t,e,r);break}else if(t.tag===1){var a=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Os===null||!Os.has(a))){e=ec(r,e),e=ev(t,e,1),t=xs(t,e,1),e=Oa(),t!==null&&(vl(t,1,e),Ua(t,e));break}}t=t.return}}function Sy(e,t,r){var a=e.pingCache;a!==null&&a.delete(t),t=Oa(),e.pingedLanes|=e.suspendedLanes&r,ia===e&&(ga&r)===r&&(Qn===4||Qn===3&&(ga&130023424)===ga&&500>An()-xh?ao(e,0):Ph|=r),Ua(e,t)}function bv(e,t){t===0&&(e.mode&1?(t=Xl,Xl<<=1,!(Xl&130023424)&&(Xl=4194304)):t=1);var r=Oa();e=Vi(e,t),e!==null&&(vl(e,t,r),Ua(e,r))}function Ry(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),bv(e,r)}function Ey(e,t){var r=0;switch(e.tag){case 13:var a=e.stateNode,h=e.memoizedState;h!==null&&(r=h.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(tt(314))}a!==null&&a.delete(t),bv(e,r)}var wv;wv=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Fa.current)ja=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ja=!1,dy(e,t,r);ja=!!(e.flags&131072)}else ja=!1,gn&&t.flags&1048576&&kg(t,Fu,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;bu(e,t),e=t.pendingProps;var h=Qo(t,ka.current);Go(t,r),h=Sh(null,t,a,e,h,r);var y=Rh();return t.flags|=1,typeof h=="object"&&h!==null&&typeof h.render=="function"&&h.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ba(a)?(y=!0,Au(t)):y=!1,t.memoizedState=h.state!==null&&h.state!==void 0?h.state:null,vh(t),h.updater=id,t.stateNode=h,h._reactInternals=t,kp(t,a,e,r),t=Pp(null,t,a,!0,y,r)):(t.tag=0,gn&&y&&uh(t),Pa(null,t,h,r),t=t.child),t;case 16:a=t.elementType;e:{switch(bu(e,t),e=t.pendingProps,h=a._init,a=h(a._payload),t.type=a,h=t.tag=Cy(a),e=hi(a,e),h){case 0:t=Tp(null,t,a,e,r);break e;case 1:t=Vf(null,t,a,e,r);break e;case 11:t=Hf(null,t,a,e,r);break e;case 14:t=zf(null,t,a,hi(a.type,e),r);break e}throw Error(tt(306,a,""))}return t;case 0:return a=t.type,h=t.pendingProps,h=t.elementType===a?h:hi(a,h),Tp(e,t,a,h,r);case 1:return a=t.type,h=t.pendingProps,h=t.elementType===a?h:hi(a,h),Vf(e,t,a,h,r);case 3:e:{if(av(t),e===null)throw Error(tt(387));a=t.pendingProps,y=t.memoizedState,h=y.element,Dg(e,t),Wu(t,a,null,r);var j=t.memoizedState;if(a=j.element,y.isDehydrated)if(y={element:a,isDehydrated:!1,cache:j.cache,pendingSuspenseBoundaries:j.pendingSuspenseBoundaries,transitions:j.transitions},t.updateQueue.baseState=y,t.memoizedState=y,t.flags&256){h=ec(Error(tt(423)),t),t=$f(e,t,a,r,h);break e}else if(a!==h){h=ec(Error(tt(424)),t),t=$f(e,t,a,r,h);break e}else for(Va=Ps(t.stateNode.containerInfo.firstChild),$a=t,gn=!0,mi=null,r=xg(t,null,a,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Jo(),a===h){t=$i(e,t,r);break e}Pa(e,t,a,r)}t=t.child}return t;case 5:return Ig(t),e===null&&Sp(t),a=t.type,h=t.pendingProps,y=e!==null?e.memoizedProps:null,j=h.children,vp(a,h)?j=null:y!==null&&vp(a,y)&&(t.flags|=32),nv(e,t),Pa(e,t,j,r),t.child;case 6:return e===null&&Sp(t),null;case 13:return iv(e,t,r);case 4:return _h(t,t.stateNode.containerInfo),a=t.pendingProps,e===null?t.child=Yo(t,null,a,r):Pa(e,t,a,r),t.child;case 11:return a=t.type,h=t.pendingProps,h=t.elementType===a?h:hi(a,h),Hf(e,t,a,h,r);case 7:return Pa(e,t,t.pendingProps,r),t.child;case 8:return Pa(e,t,t.pendingProps.children,r),t.child;case 12:return Pa(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,h=t.pendingProps,y=t.memoizedProps,j=h.value,ln(Bu,a._currentValue),a._currentValue=j,y!==null)if(_i(y.value,j)){if(y.children===h.children&&!Fa.current){t=$i(e,t,r);break e}}else for(y=t.child,y!==null&&(y.return=t);y!==null;){var L=y.dependencies;if(L!==null){j=y.child;for(var b=L.firstContext;b!==null;){if(b.context===a){if(y.tag===1){b=Wi(-1,r&-r),b.tag=2;var u=y.updateQueue;if(u!==null){u=u.shared;var P=u.pending;P===null?b.next=b:(b.next=P.next,P.next=b),u.pending=b}}y.lanes|=r,b=y.alternate,b!==null&&(b.lanes|=r),Rp(y.return,r,t),L.lanes|=r;break}b=b.next}}else if(y.tag===10)j=y.type===t.type?null:y.child;else if(y.tag===18){if(j=y.return,j===null)throw Error(tt(341));j.lanes|=r,L=j.alternate,L!==null&&(L.lanes|=r),Rp(j,r,t),j=y.sibling}else j=y.child;if(j!==null)j.return=y;else for(j=y;j!==null;){if(j===t){j=null;break}if(y=j.sibling,y!==null){y.return=j.return,j=y;break}j=j.return}y=j}Pa(e,t,h.children,r),t=t.child}return t;case 9:return h=t.type,a=t.pendingProps.children,Go(t,r),h=ii(h),a=a(h),t.flags|=1,Pa(e,t,a,r),t.child;case 14:return a=t.type,h=hi(a,t.pendingProps),h=hi(a.type,h),zf(e,t,a,h,r);case 15:return tv(e,t,t.type,t.pendingProps,r);case 17:return a=t.type,h=t.pendingProps,h=t.elementType===a?h:hi(a,h),bu(e,t),t.tag=1,Ba(a)?(e=!0,Au(t)):e=!1,Go(t,r),Yg(t,a,h),kp(t,a,h,r),Pp(null,t,a,!0,e,r);case 19:return sv(e,t,r);case 22:return rv(e,t,r)}throw Error(tt(156,t.tag))};function Sv(e,t){return Km(e,t)}function ky(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ni(e,t,r,a){return new ky(e,t,r,a)}function Mh(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Cy(e){if(typeof e=="function")return Mh(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Yp)return 11;if(e===Xp)return 14}return 2}function Is(e,t){var r=e.alternate;return r===null?(r=ni(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ru(e,t,r,a,h,y){var j=2;if(a=e,typeof e=="function")Mh(e)&&(j=1);else if(typeof e=="string")j=5;else e:switch(e){case Do:return io(r.children,h,y,t);case Jp:j=8,h|=8;break;case Kd:return e=ni(12,r,t,h|2),e.elementType=Kd,e.lanes=y,e;case Qd:return e=ni(13,r,t,h),e.elementType=Qd,e.lanes=y,e;case Jd:return e=ni(19,r,t,h),e.elementType=Jd,e.lanes=y,e;case Im:return cd(r,h,y,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Om:j=10;break e;case Dm:j=9;break e;case Yp:j=11;break e;case Xp:j=14;break e;case _s:j=16,a=null;break e}throw Error(tt(130,e==null?e:typeof e,""))}return t=ni(j,r,t,h),t.elementType=e,t.type=a,t.lanes=y,t}function io(e,t,r,a){return e=ni(7,e,a,t),e.lanes=r,e}function cd(e,t,r,a){return e=ni(22,e,a,t),e.elementType=Im,e.lanes=r,e.stateNode={isHidden:!1},e}function $d(e,t,r){return e=ni(6,e,null,t),e.lanes=r,e}function Gd(e,t,r){return t=ni(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ty(e,t,r,a,h){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cd(0),this.expirationTimes=Cd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cd(0),this.identifierPrefix=a,this.onRecoverableError=h,this.mutableSourceEagerHydrationData=null}function Lh(e,t,r,a,h,y,j,L,b){return e=new Ty(e,t,r,L,b),t===1?(t=1,y===!0&&(t|=8)):t=0,y=ni(3,null,null,t),e.current=y,y.stateNode=e,y.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},vh(y),e}function Py(e,t,r){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Oo,key:a==null?null:""+a,children:e,containerInfo:t,implementation:r}}function Rv(e){if(!e)return Ls;e=e._reactInternals;e:{if(ho(e)!==e||e.tag!==1)throw Error(tt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ba(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(tt(171))}if(e.tag===1){var r=e.type;if(Ba(r))return Rg(e,r,t)}return t}function Ev(e,t,r,a,h,y,j,L,b){return e=Lh(r,a,!0,e,h,y,j,L,b),e.context=Rv(null),r=e.current,a=Oa(),h=Ds(r),y=Wi(a,h),y.callback=t??null,xs(r,y,h),e.current.lanes=h,vl(e,h,a),Ua(e,a),e}function ld(e,t,r,a){var h=t.current,y=Oa(),j=Ds(h);return r=Rv(r),t.context===null?t.context=r:t.pendingContext=r,t=Wi(y,j),t.payload={element:e},a=a===void 0?null:a,a!==null&&(t.callback=a),e=xs(h,t,j),e!==null&&(vi(e,h,j,y),vu(e,h,j)),j}function Ku(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function tm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Nh(e,t){tm(e,t),(e=e.alternate)&&tm(e,t)}function xy(){return null}var kv=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ah(e){this._internalRoot=e}ud.prototype.render=Ah.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(tt(409));ld(e,t,null,null)};ud.prototype.unmount=Ah.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;uo(function(){ld(null,e,null,null)}),t[zi]=null}};function ud(e){this._internalRoot=e}ud.prototype.unstable_scheduleHydration=function(e){if(e){var t=rg();e={blockedOn:null,target:e,priority:t};for(var r=0;r<bs.length&&t!==0&&t<bs[r].priority;r++);bs.splice(r,0,e),r===0&&ag(e)}};function jh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function dd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function rm(){}function Oy(e,t,r,a,h){if(h){if(typeof a=="function"){var y=a;a=function(){var u=Ku(j);y.call(u)}}var j=Ev(t,a,e,0,null,!1,!1,"",rm);return e._reactRootContainer=j,e[zi]=j.current,ol(e.nodeType===8?e.parentNode:e),uo(),j}for(;h=e.lastChild;)e.removeChild(h);if(typeof a=="function"){var L=a;a=function(){var u=Ku(b);L.call(u)}}var b=Lh(e,0,!1,null,null,!1,!1,"",rm);return e._reactRootContainer=b,e[zi]=b.current,ol(e.nodeType===8?e.parentNode:e),uo(function(){ld(t,b,r,a)}),b}function pd(e,t,r,a,h){var y=r._reactRootContainer;if(y){var j=y;if(typeof h=="function"){var L=h;h=function(){var b=Ku(j);L.call(b)}}ld(t,j,e,h)}else j=Oy(r,t,e,h,a);return Ku(j)}eg=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Wc(t.pendingLanes);r!==0&&(rh(t,r|1),Ua(t,An()),!(Fr&6)&&(tc=An()+500,js()))}break;case 13:uo(function(){var a=Vi(e,1);if(a!==null){var h=Oa();vi(a,e,1,h)}}),Nh(e,1)}};nh=function(e){if(e.tag===13){var t=Vi(e,134217728);if(t!==null){var r=Oa();vi(t,e,134217728,r)}Nh(e,134217728)}};tg=function(e){if(e.tag===13){var t=Ds(e),r=Vi(e,t);if(r!==null){var a=Oa();vi(r,e,t,a)}Nh(e,t)}};rg=function(){return Kr};ng=function(e,t){var r=Kr;try{return Kr=e,t()}finally{Kr=r}};op=function(e,t,r){switch(t){case"input":if(ep(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var h=rd(a);if(!h)throw Error(tt(90));Lm(a),ep(a,h)}}}break;case"textarea":Am(e,r);break;case"select":t=r.value,t!=null&&Ho(e,!!r.multiple,t,!1)}};zm=Oh;Vm=uo;var Dy={usingClientEntryPoint:!1,Events:[yl,No,rd,Wm,Hm,Oh]},Fc={findFiberByHostInstance:eo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Iy={bundleType:Fc.bundleType,version:Fc.version,rendererPackageName:Fc.rendererPackageName,rendererConfig:Fc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Zm(e),e===null?null:e.stateNode},findFiberByHostInstance:Fc.findFiberByHostInstance||xy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uu.isDisabled&&uu.supportsFiber)try{Yu=uu.inject(Iy),Ti=uu}catch{}}Za.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dy;Za.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jh(t))throw Error(tt(200));return Py(e,t,null,r)};Za.createRoot=function(e,t){if(!jh(e))throw Error(tt(299));var r=!1,a="",h=kv;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(h=t.onRecoverableError)),t=Lh(e,1,!1,null,null,r,!1,a,h),e[zi]=t.current,ol(e.nodeType===8?e.parentNode:e),new Ah(t)};Za.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(tt(188)):(e=Object.keys(e).join(","),Error(tt(268,e)));return e=Zm(t),e=e===null?null:e.stateNode,e};Za.flushSync=function(e){return uo(e)};Za.hydrate=function(e,t,r){if(!dd(t))throw Error(tt(200));return pd(null,e,t,!0,r)};Za.hydrateRoot=function(e,t,r){if(!jh(e))throw Error(tt(405));var a=r!=null&&r.hydratedSources||null,h=!1,y="",j=kv;if(r!=null&&(r.unstable_strictMode===!0&&(h=!0),r.identifierPrefix!==void 0&&(y=r.identifierPrefix),r.onRecoverableError!==void 0&&(j=r.onRecoverableError)),t=Ev(t,null,e,1,r??null,h,!1,y,j),e[zi]=t.current,ol(e),a)for(e=0;e<a.length;e++)r=a[e],h=r._getVersion,h=h(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,h]:t.mutableSourceEagerHydrationData.push(r,h);return new ud(t)};Za.render=function(e,t,r){if(!dd(t))throw Error(tt(200));return pd(null,e,t,!1,r)};Za.unmountComponentAtNode=function(e){if(!dd(e))throw Error(tt(40));return e._reactRootContainer?(uo(function(){pd(null,null,e,!1,function(){e._reactRootContainer=null,e[zi]=null})}),!0):!1};Za.unstable_batchedUpdates=Oh;Za.unstable_renderSubtreeIntoContainer=function(e,t,r,a){if(!dd(r))throw Error(tt(200));if(e==null||e._reactInternals===void 0)throw Error(tt(38));return pd(e,t,r,!1,a)};Za.version="18.3.1-next-f1338f8080-20240426";function Cv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Cv)}catch(e){console.error(e)}}Cv(),Cm.exports=Za;var My=Cm.exports,Tv,nm=My;Tv=nm.createRoot,nm.hydrateRoot;var Fh={exports:{}},qo=typeof Reflect=="object"?Reflect:null,am=qo&&typeof qo.apply=="function"?qo.apply:function(t,r,a){return Function.prototype.apply.call(t,r,a)},Eu;qo&&typeof qo.ownKeys=="function"?Eu=qo.ownKeys:Object.getOwnPropertySymbols?Eu=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Eu=function(t){return Object.getOwnPropertyNames(t)};function Ly(e){console&&console.warn&&console.warn(e)}var Pv=Number.isNaN||function(t){return t!==t};function nn(){nn.init.call(this)}Fh.exports=nn;Fh.exports.once=Fy;nn.EventEmitter=nn;nn.prototype._events=void 0;nn.prototype._eventsCount=0;nn.prototype._maxListeners=void 0;var im=10;function hd(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(nn,"defaultMaxListeners",{enumerable:!0,get:function(){return im},set:function(e){if(typeof e!="number"||e<0||Pv(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");im=e}});nn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};nn.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Pv(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function xv(e){return e._maxListeners===void 0?nn.defaultMaxListeners:e._maxListeners}nn.prototype.getMaxListeners=function(){return xv(this)};nn.prototype.emit=function(t){for(var r=[],a=1;a<arguments.length;a++)r.push(arguments[a]);var h=t==="error",y=this._events;if(y!==void 0)h=h&&y.error===void 0;else if(!h)return!1;if(h){var j;if(r.length>0&&(j=r[0]),j instanceof Error)throw j;var L=new Error("Unhandled error."+(j?" ("+j.message+")":""));throw L.context=j,L}var b=y[t];if(b===void 0)return!1;if(typeof b=="function")am(b,this,r);else for(var u=b.length,P=Lv(b,u),a=0;a<u;++a)am(P[a],this,r);return!0};function Ov(e,t,r,a){var h,y,j;if(hd(r),y=e._events,y===void 0?(y=e._events=Object.create(null),e._eventsCount=0):(y.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),y=e._events),j=y[t]),j===void 0)j=y[t]=r,++e._eventsCount;else if(typeof j=="function"?j=y[t]=a?[r,j]:[j,r]:a?j.unshift(r):j.push(r),h=xv(e),h>0&&j.length>h&&!j.warned){j.warned=!0;var L=new Error("Possible EventEmitter memory leak detected. "+j.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");L.name="MaxListenersExceededWarning",L.emitter=e,L.type=t,L.count=j.length,Ly(L)}return e}nn.prototype.addListener=function(t,r){return Ov(this,t,r,!1)};nn.prototype.on=nn.prototype.addListener;nn.prototype.prependListener=function(t,r){return Ov(this,t,r,!0)};function Ny(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Dv(e,t,r){var a={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},h=Ny.bind(a);return h.listener=r,a.wrapFn=h,h}nn.prototype.once=function(t,r){return hd(r),this.on(t,Dv(this,t,r)),this};nn.prototype.prependOnceListener=function(t,r){return hd(r),this.prependListener(t,Dv(this,t,r)),this};nn.prototype.removeListener=function(t,r){var a,h,y,j,L;if(hd(r),h=this._events,h===void 0)return this;if(a=h[t],a===void 0)return this;if(a===r||a.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete h[t],h.removeListener&&this.emit("removeListener",t,a.listener||r));else if(typeof a!="function"){for(y=-1,j=a.length-1;j>=0;j--)if(a[j]===r||a[j].listener===r){L=a[j].listener,y=j;break}if(y<0)return this;y===0?a.shift():Ay(a,y),a.length===1&&(h[t]=a[0]),h.removeListener!==void 0&&this.emit("removeListener",t,L||r)}return this};nn.prototype.off=nn.prototype.removeListener;nn.prototype.removeAllListeners=function(t){var r,a,h;if(a=this._events,a===void 0)return this;if(a.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):a[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete a[t]),this;if(arguments.length===0){var y=Object.keys(a),j;for(h=0;h<y.length;++h)j=y[h],j!=="removeListener"&&this.removeAllListeners(j);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=a[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(h=r.length-1;h>=0;h--)this.removeListener(t,r[h]);return this};function Iv(e,t,r){var a=e._events;if(a===void 0)return[];var h=a[t];return h===void 0?[]:typeof h=="function"?r?[h.listener||h]:[h]:r?jy(h):Lv(h,h.length)}nn.prototype.listeners=function(t){return Iv(this,t,!0)};nn.prototype.rawListeners=function(t){return Iv(this,t,!1)};nn.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):Mv.call(e,t)};nn.prototype.listenerCount=Mv;function Mv(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}nn.prototype.eventNames=function(){return this._eventsCount>0?Eu(this._events):[]};function Lv(e,t){for(var r=new Array(t),a=0;a<t;++a)r[a]=e[a];return r}function Ay(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function jy(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function Fy(e,t){return new Promise(function(r,a){function h(j){e.removeListener(t,y),a(j)}function y(){typeof e.removeListener=="function"&&e.removeListener("error",h),r([].slice.call(arguments))}Nv(e,t,y,{once:!0}),t!=="error"&&By(e,h,{once:!0})})}function By(e,t,r){typeof e.on=="function"&&Nv(e,"error",t,r)}function Nv(e,t,r,a){if(typeof e.on=="function")a.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function h(y){a.once&&e.removeEventListener(t,h),r(y)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var Uy=Fh.exports;const Wy=zp(Uy);var Av={exports:{}};(function(e,t){var r={};/*! For license information please see videosdk.js.LICENSE.txt */(function(a,h){e.exports=h()})(self,()=>(()=>{var a={7757:(L,b,u)=>{L.exports=u(5666)},4180:L=>{L.exports=(()=>{var b={43:function(c,_,w){var d,g;(function(){d=function(){var n=function(){},m="undefined",v=typeof window!==m&&typeof window.navigator!==m&&/Trident\/|MSIE /.test(window.navigator.userAgent),R=["trace","debug","info","warn","error"];function k(l,f){var O=l[f];if(typeof O.bind=="function")return O.bind(l);try{return Function.prototype.bind.call(O,l)}catch{return function(){return Function.prototype.apply.apply(O,[l,arguments])}}}function T(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function S(l,f){for(var O=0;O<R.length;O++){var F=R[O];this[F]=O<l?n:this.methodFactory(F,l,f)}this.log=this.debug}function C(l,f,O){return function(){typeof console!==m&&(S.call(this,f,O),this[l].apply(this,arguments))}}function I(l,f,O){return function(F){return F==="debug"&&(F="log"),typeof console!==m&&(F==="trace"&&v?T:console[F]!==void 0?k(console,F):console.log!==void 0?k(console,"log"):n)}(l)||C.apply(this,arguments)}function o(l,f,O){var F,x=this,N="loglevel";function z(){var J;if(typeof window!==m&&N){try{J=window.localStorage[N]}catch{}if(typeof J===m)try{var ne=window.document.cookie,ee=ne.indexOf(encodeURIComponent(N)+"=");ee!==-1&&(J=/^([^;]+)/.exec(ne.slice(ee))[1])}catch{}return x.levels[J]===void 0&&(J=void 0),J}}typeof l=="string"?N+=":"+l:typeof l=="symbol"&&(N=void 0),x.name=l,x.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},x.methodFactory=O||I,x.getLevel=function(){return F},x.setLevel=function(J,ne){if(typeof J=="string"&&x.levels[J.toUpperCase()]!==void 0&&(J=x.levels[J.toUpperCase()]),!(typeof J=="number"&&J>=0&&J<=x.levels.SILENT))throw"log.setLevel() called with invalid level: "+J;if(F=J,ne!==!1&&function(ee){var Q=(R[ee]||"silent").toUpperCase();if(typeof window!==m&&N){try{return void(window.localStorage[N]=Q)}catch{}try{window.document.cookie=encodeURIComponent(N)+"="+Q+";"}catch{}}}(J),S.call(x,J,l),typeof console===m&&J<x.levels.SILENT)return"No console available for logging"},x.setDefaultLevel=function(J){z()||x.setLevel(J,!1)},x.enableAll=function(J){x.setLevel(x.levels.TRACE,J)},x.disableAll=function(J){x.setLevel(x.levels.SILENT,J)};var V=z();V==null&&(V=f??"WARN"),x.setLevel(V,!1)}var p=new o,i={};p.getLogger=function(l){if(typeof l!="symbol"&&typeof l!="string"||l==="")throw new TypeError("You must supply a name when creating a logger.");var f=i[l];return f||(f=i[l]=new o(l,p.getLevel(),p.methodFactory)),f};var s=typeof window!==m?window.log:void 0;return p.noConflict=function(){return typeof window!==m&&window.log===p&&(window.log=s),p},p.getLoggers=function(){return i},p.default=p,p},(g=d.call(_,w,_,c))===void 0||(c.exports=g)})()}},u={};function P(c){var _=u[c];if(_!==void 0)return _.exports;var w=u[c]={exports:{}};return b[c].call(w.exports,w,w.exports,P),w.exports}P.d=(c,_)=>{for(var w in _)P.o(_,w)&&!P.o(c,w)&&Object.defineProperty(c,w,{enumerable:!0,get:_[w]})},P.o=(c,_)=>Object.prototype.hasOwnProperty.call(c,_),P.r=c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})};var E={};return(()=>{P.r(E),P.d(E,{VideoSDKMetrics:()=>oi});const c="inbound",_="outbound",w={codec_id_in:"",codec_in:{mime_type:null,clock_rate:null,sdp_fmtp_line:null},delta_jitter_ms_in:0,delta_rtt_ms_out:null,percent_packets_lost_in:0,delta_packets_in:0,delta_packets_lost_in:0,total_packets_in:0,total_packets_lost_in:0,total_KBytes_in:0,delta_KBytes_in:0,delta_kbs_in:0,timestamp_in:null,ssrc:"",total_concealment_events:0,delta_concealment_events:0,total_inserted_samples_for_decelaration:0,delta_inserted_samples_for_decelaration:0,total_removed_samples_for_accelaration:0,delta_removed_samples_for_accelaration:0,direction:c},d={codec_id_out:"",codec_out:{mime_type:null,clock_rate:null,sdp_fmtp_line:null},delta_jitter_ms_out:0,delta_rtt_ms_out:null,percent_packets_lost_out:0,delta_packets_out:0,delta_packets_lost_out:0,total_packets_out:0,total_packets_lost_out:0,total_KBytes_out:0,delta_KBytes_out:0,delta_kbs_out:0,timestamp_out:null,ssrc:"",direction:_},g={codec_id_in:"",size_in:{width:null,height:null,framerate:null},codec_in:{mime_type:null,clock_rate:null},delta_jitter_ms_in:0,percent_packets_lost_in:0,delta_packets_in:0,delta_packets_lost_in:0,total_packets_in:0,total_packets_lost_in:0,total_KBytes_in:0,delta_KBytes_in:0,delta_kbs_in:0,ssrc:"",direction:c},n={codec_id_out:"",size_out:{width:null,height:null,framerate:null},codec_out:{mime_type:null,clock_rate:null},delta_jitter_ms_out:0,delta_rtt_ms_out:null,percent_packets_lost_out:0,delta_packets_out:0,delta_packets_lost_out:0,total_packets_out:0,total_packets_lost_out:0,total_KBytes_out:0,delta_KBytes_out:0,delta_kbs_out:0,limitation_out:{reason:null,durations:null,resolutionChanges:0},timestamp_out:null,ssrc:"",direction:_},m="inbound-rtp",v="bytesReceived",R="bytesSent",k="clockRate",T="codecId",S="currentRoundTripTime",C="roundTripTime",I="fractionLost",o="frameHeight",p="frameWidth",i="qualityLimitationReason",s="qualityLimitationDurations",l="qualityLimitationResolutionChanges",f="id",O="jitter",F="kind",x="mimeType",N="packetsLost",z="packetsReceived",V="packetsSent",J="responsesReceived",ne="ssrc",ee="selected",Q="timestamp",oe="totalRoundTripTime",he="roundTripTimeMeasurements",Te="type",Se="framesDecoded",Ce="framesEncoded",Re="totalDecodeTime",Ee="totalEncodeTime",We="pliCount",Yt="nackCount",rr="trackId",yt="trackIdentifier",yr="mediaSourceId",Kt="audio",Tt="video",Gr={0:"ETHERNET",2:"CELLULAR_5G",3:"WIFI",5:"CELLULAR_4G",10:"CELLULAR"},ft="audio",Dt="video",Qr="network",Gt="data";var ut=P(43);const _t=()=>`${new Date().toISOString()} | metrics`,fr=(wt,Fe,gt)=>`${wt} | ${Fe} | ${gt}`;ut.setDefaultLevel(ut.levels.TRACE);const Ft=(wt,Fe,gt)=>{gt?ut.debug(fr(_t(),wt,Fe),gt):ut.debug(fr(_t(),wt,Fe))},Qt=(wt,Fe)=>{ut.warn(fr(_t(),wt,Fe))},Br=(wt,Fe)=>{ut.error(fr(_t(),wt,Fe))},xe="extractor   ",De=(wt,Fe,gt)=>{if(!Fe)return null;const Qe={};let lt=Fe[Kt][wt];lt||(lt=gt===c?{...w}:{...d}),Qe[Kt]=lt;let st=Fe[Tt][wt];return st||(st=gt===c?{...g}:{...n}),Qe[Tt]=st,Qe},gr=(wt,Fe,gt,Qe)=>{let lt=!1;const st=Qe[Fe].total_rtt_ms_out,ye=Qe[Fe].total_rtt_measure_out,ir=gt?gt[Fe].total_rtt_ms_out:0,kr=gt?gt[Fe].total_rtt_measure_out:0,Cr={rtt:null,totalRTT:st,totalRTTMeasurements:ye};if(wt[Q]===Qe[Fe].timestamp_out||!Object.prototype.hasOwnProperty.call(wt,C)||Object.prototype.hasOwnProperty.call(wt,he)&&(lt=!0,Number(wt[he])===0||Number(wt[he])-kr===ye))return Cr;const Dr=1e3*Number(wt[C]);let sn=st+Dr,Ie=ye+1;return lt&&(sn=1e3*Number(wt[oe])-ir,Ie=Number(wt[he])-kr),{rtt:Dr,totalRTT:sn,totalRTTMeasurements:Ie}},nr=(wt,Fe,gt)=>wt[Q]===gt[Fe].timestamp_out?null:Object.prototype.hasOwnProperty.call(wt,O)?1e3*(Number(wt[O])||0):null,un=(wt,Fe,gt,Qe)=>{if(!Object.prototype.hasOwnProperty.call(wt,V)||!Object.prototype.hasOwnProperty.call(wt,R))return{packetsSent:gt[Fe].total_packets_out,packetsLost:gt[Fe].total_packets_lost_out,bytesSent:gt[Fe].total_KBytes_out};const lt=Number(wt[V])||0-(Qe?Qe[Fe].total_packets_out:0),st=lt-gt[Fe].total_packets_out,ye=Number(wt[R])/1024-(Qe?Qe[Fe].total_KBytes_out:0),ir=ye-gt[Fe].total_KBytes_out,kr=wt[Q]||Date.now(),Cr=Qe?Qe.timestamp:null;let Dr=gt.timestamp;!Dr&&Cr&&(Dr=Cr);const sn=Dr?kr-Dr:0;return{packetsSent:lt,deltaPacketsSent:st,KBytesSent:ye,deltaKBytesSent:ir,kbsSent:sn>0?.008*ir*1024/sn*1e3:0}},On=(wt,Fe,gt,Qe)=>{let lt=gt[Fe].total_packets_lost_out,st=0,ye=0;return Object.prototype.hasOwnProperty.call(wt,N)&&(lt=Number(wt[N])||0-(Qe?Qe[Fe].total_packets_lost_out:0),st=lt-gt[Fe].total_packets_lost_out),Object.prototype.hasOwnProperty.call(wt,I)&&(ye=Number(100*wt[I])),{packetsLost:lt,deltaPacketsLost:st,fractionLost:ye}},jn=(wt,Fe,gt,Qe)=>{if(!Object.prototype.hasOwnProperty.call(wt,z)||!Object.prototype.hasOwnProperty.call(wt,N)||!Object.prototype.hasOwnProperty.call(wt,v))return{percent_packets_lost:gt[Fe].percent_packets_lost_in,packetsReceived:gt[Fe].total_packets_in,packetsLost:gt[Fe].total_packets_lost_in,bytesReceived:gt[Fe].total_KBytes_in};const lt=(Number(wt[z])||0)-(Qe?Qe[Fe].total_packets_in:0),st=(Number(wt[N])||0)-(Qe?Qe[Fe].total_packets_lost_in:0),ye=st-gt[Fe].total_packets_lost_in,ir=lt-gt[Fe].total_packets_in,kr=lt!==gt[Fe].total_packets_in?100*ye/(ye+ir):0,Cr=Number(wt[v])/1024-(Qe?Qe[Fe].total_KBytes_in:0),Dr=Cr-gt[Fe].total_KBytes_in,sn=wt[Q]||Date.now(),Ie=Qe?Qe.timestamp:null;let Ot=gt.timestamp;!Ot&&Ie&&(Ot=Ie);const bt=Ot?sn-Ot:0;return{percentPacketsLost:kr,packetsReceived:lt,deltaPacketsReceived:ir,packetsLost:st,deltaPacketsLost:ye,KBytesReceived:Cr,deltaKBytesReceived:Dr,kbsReceived:bt>0?.008*Dr*1024/bt*1e3:0}},Zt=wt=>wt.candidateType!=="relay"?"":wt.relayProtocol||"",Nr=wt=>Object.prototype.hasOwnProperty.call(wt,o)&&Object.prototype.hasOwnProperty.call(wt,p)?{width:wt[p]||null,height:wt[o]||null,framerate:wt.framesPerSecond}:{width:null,height:null,framerate:null};class an{constructor(Fe,gt){this._callbacks={onStatsCollected:null},this._id=`collector-${gt}`,this._moduleName=this._id,this._probeId=gt,this._config=Fe,this._state="idle",this._statsReports=[]}registerCallback(Fe,gt,Qe){Fe in this._callbacks?(this._callbacks[Fe]={callback:gt,context:Qe},Ft(this._moduleName,`registered callback '${Fe}'`)):Br(this._moduleName,`can't register callback for '${Fe}' - not found`)}unregisterCallback(Fe){Fe in this._callbacks?(this._callbacks[Fe]=null,delete this._callbacks[Fe],Ft(this._moduleName,`unregistered callback '${Fe}'`)):Br(this._moduleName,`can't unregister callback for '${Fe}' - not found`)}analyze(Fe,gt){const Qe=(st=>{const ye={name:"",meetingId:"",peerId:"",timestamp:null,count:0,audio:{},video:{},network:{infrastructure:3},data:{delta_kbs_bandwidth_in:0,delta_kbs_bandwidth_out:0,delta_rtt_connectivity_ms:null,total_rtt_connectivity_ms:0}};if(st){const ir={...st,audio:{},video:{},data:{...st.data},network:{...st.network}};return Object.keys(st.audio).forEach(kr=>{ir.audio[kr]={...st.audio[kr]}}),Object.keys(st.video).forEach(kr=>{ir.video[kr]={...st.video[kr]}}),ir}return{...ye,audio:{},video:{},data:{...ye.data},network:{...ye.network}}})(gt);Qe.name=this._config.name,Qe.meetingId=this._config.meetingId,Qe.peerId=this._config.peerId,Qe.count=gt?gt.count+1:1;let lt=null;return Fe.forEach(st=>{!lt&&st.timestamp&&(lt=st.timestamp),((ye,ir,kr,Cr)=>{if(!ye)return[];switch(ye[Te]){case"candidate-pair":let Dr=!1;if(ye.nominated&&ye.state==="succeeded"&&(Dr=!0,Ft(xe,`analyze() - got stats ${ye[Te]} for ${kr}`,ye),ee in ye&&!ye[ee]&&(Dr=!1)),Dr){ye.localCandidateId,ye.remoteCandidateId;const Ie=((bt,kt,Lr)=>{const Ir=(bt[v]||0)/1024-0,Ur=(bt[R]||0)/1024-0,sr=bt[Q]||Date.now(),ar=Ir-kt.data.total_KBytes_in,Mr=Ur-kt.data.total_KBytes_out,Dn=null;let Ar=kt.timestamp;!Ar&&Dn&&(Ar=Dn);const Pe=Ar?sr-Ar:0;return{total_KBytes_received:Ir,total_KBytes_sent:Ur,delta_KBytes_received:ar,delta_KBytes_sent:Mr,kbs_speed_received:Pe>0?.008*ar*1024/Pe*1e3:0,kbs_speed_sent:Pe>0?.008*Mr*1024/Pe*1e3:0}})(ye,ir),Ot=((bt=>{bt.availableIncomingBitrate,bt.availableOutgoingBitrate})(ye),((bt,kt,Lr,Ir)=>{if(!Object.prototype.hasOwnProperty.call(bt,S))return{rtt:null,totalRTT:Ir[kt].total_rtt_connectivity_ms,totalRTTMeasurements:Ir[kt].total_rtt_connectivity_measure};const Ur=1e3*Number(bt[S]);let sr=Ir[kt].total_rtt_connectivity_ms+Ur,ar=Ir[kt].total_rtt_connectivity_measure+1;return Object.prototype.hasOwnProperty.call(bt,oe)&&(sr=1e3*Number(bt[oe])-0),Object.prototype.hasOwnProperty.call(bt,J)&&(ar=Number(bt[J])-0),{rtt:Ur,totalRTT:sr,totalRTTMeasurements:ar}})(ye,"data",Cr,ir));return[{type:Gt,value:{total_KBytes_in:Ie.total_KBytes_received}},{type:Gt,value:{total_KBytes_out:Ie.total_KBytes_sent}},{type:Gt,value:{delta_KBytes_in:Ie.delta_KBytes_received}},{type:Gt,value:{delta_KBytes_out:Ie.delta_KBytes_sent}},{type:Gt,value:{delta_kbs_in:Ie.kbs_speed_received}},{type:Gt,value:{delta_kbs_out:Ie.kbs_speed_sent}},{type:Gt,value:{delta_rtt_connectivity_ms:Ot.rtt}}]}break;case"local-candidate":if(ye[f]===ir.network.local_candidate_id)return[{type:Qr,value:{infrastructure:ye.networkType}},{type:Qr,value:{local_candidate_protocol:ye.protocol||""}},{type:Qr,value:{local_candidate_relay_protocol:Zt(ye)}}];break;case m:{Ft(xe,`analyze() - got stats ${ye[Te]} for ${kr}`,ye);const Ie=ye[ne],Ot=De(Ie,ir,c);Ot&&(Ot.timestamp=ir.timestamp);const bt=De(Ie,Cr,c);if(bt&&(bt.timestamp=Cr.timestamp),ye[F]===Kt){const kt=jn(ye,Kt,Ot,bt),Lr=nr(ye,Kt,Ot),Ir=ye[T]||"",Ur=((sr,ar,Mr)=>{const Dn=Number(sr.concealmentEvents)||0,Ar=Dn-(Mr[ar].total_concealment_events||0),Pe=Number(sr.insertedSamplesForDeceleration)||0,bi=Pe-(Mr[ar].total_inserted_samples_for_decelaration||0),Ka=Number(sr.removedSamplesForAcceleration)||0;return{totalConcealmentEvents:Dn,deltaConcealmentEvents:Ar,totalInsertedSamplesForDecelaration:Pe,deltaInsertedSamplesForDecelaration:bi,totalRemovedSamplesForAccelaration:Ka,deltaRemovedSampleForAccelaration:Ka-(Mr[ar].total_removed_samples_for_accelaration||0)}})(ye,Kt,Ot);return[{ssrc:Ie,type:ft,value:{codec_id_in:Ir}},{ssrc:Ie,type:ft,value:{total_packets_in:kt.packetsReceived}},{ssrc:Ie,type:ft,value:{delta_packets_in:kt.deltaPacketsReceived}},{ssrc:Ie,type:ft,value:{total_packets_lost_in:kt.packetsLost}},{ssrc:Ie,type:ft,value:{delta_packets_lost_in:kt.deltaPacketsLost}},{ssrc:Ie,type:ft,value:{percent_packets_lost_in:kt.percentPacketsLost}},{ssrc:Ie,type:ft,value:{total_KBytes_in:kt.KBytesReceived}},{ssrc:Ie,type:ft,value:{delta_KBytes_in:kt.deltaKBytesReceived}},{ssrc:Ie,type:ft,value:{delta_kbs_in:kt.kbsReceived}},{ssrc:Ie,type:ft,value:{delta_jitter_ms_in:Lr}},{ssrc:Ie,type:ft,value:{total_concealment_events:Ur.totalConcealmentEvents}},{ssrc:Ie,type:ft,value:{delta_concealment_events:Ur.deltaConcealmentEvents}},{ssrc:Ie,type:ft,value:{total_inserted_samples_for_decelaration:Ur.totalInsertedSamplesForDecelaration}},{ssrc:Ie,type:ft,value:{delta_inserted_samples_for_decelaration:Ur.deltaInsertedSamplesForDecelaration}},{ssrc:Ie,type:ft,value:{total_removed_samples_for_accelaration:Ur.totalRemovedSamplesForAccelaration}},{ssrc:Ie,type:ft,value:{delta_removed_samples_for_accelaration:Ur.deltaRemovedSampleForAccelaration}},{ssrc:Ie,type:ft,value:{track_in:ye[rr]}},{ssrc:Ie,type:ft,value:{track_id_in:ye[yt]}},{ssrc:Ie,type:ft,value:{media_source_id:ye[yr]}}]}if(ye[F]===Tt){((sr,ar)=>{if(!Object.prototype.hasOwnProperty.call(sr,Se)||!Object.prototype.hasOwnProperty.call(sr,Re))return{delta_ms_decode_frame:ar[Tt].delta_ms_decode_frame_in,frames_decoded:ar[Tt].total_frames_decoded_in,total_decode_time:ar[Tt].total_time_decoded_in};sr[Se],sr[Re],ar[Tt].total_time_decoded_in,ar[Tt].total_frames_decoded_in})(ye,Ot);const kt=jn(ye,Tt,Ot,bt),Lr=nr(ye,Tt,Ot),Ir=(ye.decoderImplementation,ye[T]||null),Ur=Nr(ye);return((sr,ar,Mr)=>{if(!Object.prototype.hasOwnProperty.call(sr,We)||!Object.prototype.hasOwnProperty.call(sr,Yt))return{pliCount:ar.total_pli_sent_in,nackCount:ar.total_nack_sent_in,deltaPliCount:0,deltaNackCount:0};sr[We],Mr&&Mr[Tt].total_pli_sent_in,sr[Yt],Mr&&Mr[Tt].total_nack_sent_in,ar[Tt].total_pli_sent_in,ar[Tt].total_nack_sent_in})(ye,Ot,bt),[{ssrc:Ie,type:Dt,value:{codec_id_in:Ir}},{ssrc:Ie,type:Dt,value:{total_packets_in:kt.packetsReceived}},{ssrc:Ie,type:Dt,value:{delta_packets_in:kt.deltaPacketsReceived}},{ssrc:Ie,type:Dt,value:{total_packets_lost_in:kt.packetsLost}},{ssrc:Ie,type:Dt,value:{delta_packets_lost_in:kt.deltaPacketsLost}},{ssrc:Ie,type:Dt,value:{percent_packets_lost_in:kt.percentPacketsLost}},{ssrc:Ie,type:Dt,value:{total_KBytes_in:kt.KBytesReceived}},{ssrc:Ie,type:Dt,value:{delta_KBytes_in:kt.deltaKBytesReceived}},{ssrc:Ie,type:Dt,value:{delta_kbs_in:kt.kbsReceived}},{ssrc:Ie,type:Dt,value:{delta_jitter_ms_in:Lr}},{ssrc:Ie,type:Dt,value:{size_in:Ur}},{ssrc:Ie,type:Dt,value:{track_in:ye[rr]}},{ssrc:Ie,type:Dt,value:{track_id_in:ye[yt]}},{ssrc:Ie,type:Dt,value:{media_source_id:ye[yr]}},{ssrc:Ie,type:Dt,value:{pause_count:ye.pauseCount}},{ssrc:Ie,type:Dt,value:{total_pauses_duration:ye.totalPausesDuration}},{ssrc:Ie,type:Dt,value:{freeze_count:ye.freezeCount}},{ssrc:Ie,type:Dt,value:{total_freezes_duration:ye.totalFreezesDuration}}]}break}case"outbound-rtp":{Ft(xe,`analyze() - got stats ${ye[Te]} for ${kr}`,ye);const Ie=ye[ne],Ot=De(Ie,ir,_);Ot&&(Ot.timestamp=ir.timestamp);const bt=De(Ie,Cr,_);if(bt&&(bt.timestamp=Cr.timestamp),ye[F]===Kt){const kt=ye[T]||null,Lr=un(ye,Kt,Ot,bt);return[{ssrc:Ie,type:ft,value:{codec_id_out:kt}},{ssrc:Ie,type:ft,value:{total_packets_out:Lr.packetsSent}},{ssrc:Ie,type:ft,value:{delta_packets_out:Lr.deltaPacketsSent}},{ssrc:Ie,type:ft,value:{total_KBytes_out:Lr.KBytesSent}},{type:ft,value:{delta_KBytes_out:Lr.deltaKBytesSent}},{ssrc:Ie,type:ft,value:{delta_kbs_out:Lr.kbsSent}},{ssrc:Ie,type:ft,value:{track_out:ye[rr]}},{ssrc:Ie,type:ft,value:{track_id_out:ye[yt]}},{ssrc:Ie,type:ft,value:{media_source_id:ye[yr]}}]}if(ye[F]===Tt){ye.encoderImplementation;const kt=ye[T]||null,Lr=(((sr,ar)=>{if(!Object.prototype.hasOwnProperty.call(sr,Ce)||!Object.prototype.hasOwnProperty.call(sr,Ee))return{delta_ms_encode_frame:ar[Tt].delta_ms_encode_frame_out,frames_encoded:ar[Tt].total_frames_encoded_out,total_encode_time:ar[Tt].total_time_encoded_out};sr[Ce],sr[Ee],ar[Tt].total_time_encoded_out,ar[Tt].total_frames_encoded_out})(ye,Ot),Nr(ye)),Ir=(sr=>{const ar=Object.prototype.hasOwnProperty.call(sr,i)?sr[i]:null,Mr=Object.prototype.hasOwnProperty.call(sr,l)?sr[l]:null,Dn=Object.prototype.hasOwnProperty.call(sr,s)?sr[s]:null;return Dn&&Object.keys(Dn).forEach(Ar=>{Dn[Ar]>1e3&&(Dn[Ar]=Number(Dn[Ar]/1e3))}),{reason:ar,durations:Dn,resolutionChanges:Mr}})(ye),Ur=(((sr,ar,Mr)=>{if(!Object.prototype.hasOwnProperty.call(sr,We)||!Object.prototype.hasOwnProperty.call(sr,Yt))return{pliCount:ar.total_pli_received_out,nackCount:ar.total_nack_received_out,deltaPliCount:0,deltaNackCount:0};sr[We],Mr&&Mr[Tt].total_pli_received_out,sr[Yt],Mr&&Mr[Tt].total_nack_received_out,ar[Tt].total_pli_received_out,ar[Tt].total_nack_received_out})(ye,Ot,bt),un(ye,Tt,Ot,bt));return[{ssrc:Ie,type:Dt,value:{codec_id_out:kt}},{ssrc:Ie,type:Dt,value:{total_packets_out:Ur.packetsSent}},{ssrc:Ie,type:Dt,value:{delta_packets_out:Ur.deltaPacketsSent}},{ssrc:Ie,type:Dt,value:{total_KBytes_out:Ur.KBytesSent}},{ssrc:Ie,type:Dt,value:{delta_KBytes_out:Ur.deltaKBytesSent}},{ssrc:Ie,type:Dt,value:{delta_kbs_out:Ur.kbsSent}},{ssrc:Ie,type:Dt,value:{size_out:Lr}},{ssrc:Ie,type:Dt,value:{limitation_out:Ir}},{ssrc:Ie,type:Dt,value:{track_out:ye[rr]}},{ssrc:Ie,type:Dt,value:{track_id_out:ye[yt]}},{ssrc:Ie,type:Dt,value:{media_source_id:ye[yr]}}]}break}case"media-source":{Ft(xe,`analyze() - got stats ${ye[Te]} for ${kr}`,ye);const Ie=[];return Object.keys(ir[Kt]).forEach(Ot=>{const bt=ir[Kt][Ot];if(bt.media_source_id===ye[f]){var kt=ye[yt];Ie.push({ssrc:bt.ssrc,type:ft,value:{track_id_out:kt}})}}),Object.keys(ir[Tt]).forEach(Ot=>{const bt=ir[Tt][Ot];if(bt.media_source_id===ye[f]){var kt=ye[yt];Ie.push({ssrc:bt.ssrc,type:Dt,value:{track_id_out:kt}})}}),Ie}case"track":{Ft(xe,`analyze() - got stats ${ye[Te]} for ${kr}`,ye);const Ie=[];return Object.keys(ir[Kt]).forEach(Ot=>{const bt=ir[Kt][Ot];if(bt.track_in===ye[f]||bt.track_out===ye[f]){Ft(xe,`analyze() - got stats ${ye[Te]} for ${kr}`,ye);var kt=ye[yt];ye[f]===bt.track_in?Ie.push({ssrc:bt.ssrc,type:ft,value:{track_id_in:kt}}):Ie.push({ssrc:bt.ssrc,type:ft,value:{track_id_out:kt}})}}),Object.keys(ir[Tt]).forEach(Ot=>{const bt=ir[Tt][Ot];if(bt.track_in===ye[f]||bt.track_out===ye[f]){Ft(xe,`analyze() - got stats ${ye[Te]} for ${kr}`,ye);var kt=ye[yt];ye[f]===bt.track_in?Ie.push({ssrc:bt.ssrc,type:Dt,value:{track_id_in:kt}}):Ie.push({ssrc:bt.ssrc,type:Dt,value:{track_id_out:kt}})}}),Ie}case"codec":const sn=[];return Object.keys(ir[Kt]).forEach(Ie=>{const Ot=ir[Kt][Ie];if(Ot.codec_id_in===ye[f]||Ot.codec_id_out===ye[f]){Ft(xe,`analyze() - got stats ${ye[Te]} for ${kr}`,ye);const bt=(kt=>({channels:kt.channels||null,clock_rate:kt[k]||null,mime_type:kt[x]||null,sdp_fmtp_line:kt.sdpFmtpLine||null}))(ye);ye[f]===Ot.codec_id_in?sn.push({ssrc:Ot.ssrc,type:ft,value:{codec_in:bt}}):sn.push({ssrc:Ot.ssrc,type:ft,value:{codec_out:bt}})}}),Object.keys(ir[Tt]).forEach(Ie=>{const Ot=ir[Tt][Ie];if(Ot.codec_id_in===ye[f]||Ot.codec_id_out===ye[f]){Ft(xe,`analyze() - got stats ${ye[Te]} for ${kr}`,ye);const bt=(kt=>({clock_rate:kt[k]||null,mime_type:kt[x]||null}))(ye);ye[f]===Ot.codec_id_in?sn.push({ssrc:Ot.ssrc,type:Dt,value:{codec_in:bt}}):sn.push({ssrc:Ot.ssrc,type:Dt,value:{codec_out:bt}})}}),sn;case"remote-inbound-rtp":{Ft(xe,`analyze() - got stats ${ye[Te]} for ${kr}`,ye);const Ie=ye[ne],Ot=De(Ie,ir,_),bt=De(Ie,Cr,_);if(ye[F]===Kt){const kt=gr(ye,Kt,bt,Ot),Lr=nr(ye,Kt,Ot),Ir=On(ye,Kt,Ot,bt);return[{ssrc:Ie,type:ft,value:{delta_rtt_ms_out:kt.rtt}},{ssrc:Ie,type:ft,value:{delta_jitter_ms_out:Lr}},{ssrc:Ie,type:ft,value:{timestamp_out:ye[Q]}},{ssrc:Ie,type:ft,value:{total_packets_lost_out:Ir.packetsLost}},{ssrc:Ie,type:ft,value:{delta_packets_lost_out:Ir.deltaPacketsLost}},{ssrc:Ie,type:ft,value:{percent_packets_lost_out:Ir.fractionLost}}]}if(ye[F]===Tt){const kt=gr(ye,Tt,bt,Ot),Lr=nr(ye,Tt,Ot),Ir=On(ye,Tt,Ot,bt);return[{ssrc:Ie,type:Dt,value:{delta_rtt_ms_out:kt.rtt}},{ssrc:Ie,type:Dt,value:{delta_jitter_ms_out:Lr}},{ssrc:Ie,type:Dt,value:{timestamp_out:ye[Q]}},{ssrc:Ie,type:Dt,value:{total_packets_lost_out:Ir.packetsLost}},{ssrc:Ie,type:Dt,value:{delta_packets_lost_out:Ir.deltaPacketsLost}}]}break}case"remote-outbound-rtp":{Ft(xe,`analyze() - got stats ${ye[Te]} for ${kr}`,ye);const Ie=ye[ne],Ot=De(Ie,ir,_),bt=De(Ie,Cr,_);if(ye[F]===Kt){const kt=gr(ye,Kt,bt,Ot);return[{ssrc:Ie,type:ft,value:{delta_rtt_ms_in:kt.rtt}},{ssrc:Ie,type:ft,value:{timestamp_in:ye[Q]}}]}break}}return[]})(st,Qe,Qe.name,null).forEach(ye=>{if(ye.value&&ye.type)if(ye.ssrc){let Cr=Qe[ye.type][ye.ssrc];Cr||(ir=ye.type,kr=st.type,Cr=ir===Kt?kr===m?{...w}:{...d}:kr===m?{...g}:{...n},Cr.ssrc=ye.ssrc,Qe[ye.type][ye.ssrc]=Cr),Object.keys(ye.value).forEach(Dr=>{ye.value[Dr]!==void 0&&(Cr[Dr]=ye.value[Dr])})}else Object.keys(ye.value).forEach(Cr=>{ye.value[Cr]!==void 0&&(Qe[ye.type][Cr]=ye.value[Cr])});var ir,kr})}),Qe.timestamp=lt,Qe}async collectStats(){try{const Fe=await this._config.monitoringObject.getStats(),gt=this.analyze(Fe,this._statsReports.slice().pop()||null);return this._statsReports.push(gt),this.fireOnStatsCollected(gt),Fe}catch(Fe){return Br(this._moduleName,`got error ${Fe}`),null}}fireOnStatsCollected(Fe){if(this._callbacks.onStatsCollected){const gt={};gt.meetingId=Fe.meetingId,gt.peerId=Fe.peerId,gt.name=Fe.name,gt.audio=[],gt.video=[],Object.values(Fe.audio).forEach(Qe=>{const lt={};if(lt.network=Gr[Fe.network.infrastructure],lt.timestamp=Fe.timestamp,Qe.direction==c){lt.codec=Qe.codec_in.mime_type,lt.jitter=Qe.delta_jitter_ms_in,lt.bitrate=Qe.delta_kbs_in,lt.packetsLost=Qe.delta_packets_lost_in,lt.rtt=Fe.data.delta_rtt_connectivity_ms||0,lt.totalPackets=Qe.delta_packets_in,lt.concealmentEvents=Qe.delta_concealment_events,lt.removedSampleForAccelaration=Qe.delta_removed_samples_for_accelaration,lt.insertedSamplesForDecelaration=Qe.delta_inserted_samples_for_decelaration;const st=JSON.stringify(Qe.track_id_in).replace(/[{}"]/g,"");lt.trackId=st}else Qe.direction==_&&(lt.codec=Qe.codec_out.mime_type,lt.jitter=Qe.delta_jitter_ms_out,lt.bitrate=Qe.delta_kbs_out,lt.packetsLost=Qe.delta_packets_lost_out,lt.rtt=Fe.data.delta_rtt_connectivity_ms||0,lt.totalPackets=Qe.delta_packets_out,lt.trackId=Qe.track_id_out);gt.audio.push(lt)}),Object.values(Fe.video).forEach(Qe=>{const lt={};if(lt.network=Gr[Fe.network.infrastructure],lt.timestamp=Fe.timestamp,Qe.direction==c){lt.codec=Qe.codec_in.mime_type,lt.jitter=Qe.delta_jitter_ms_in,lt.bitrate=Qe.delta_kbs_in,lt.packetsLost=Qe.delta_packets_lost_in,lt.rtt=Fe.data.delta_rtt_connectivity_ms||0,lt.totalPackets=Qe.delta_packets_in,lt.size=Qe.size_in,lt.pauseCount=Qe.pause_count,lt.totalPausesDuration=Qe.total_pauses_duration,lt.freezeCount=Qe.freeze_count,lt.totalFreezesDuration=Qe.total_freezes_duration;const st=JSON.stringify(Qe.track_id_in).replace(/[{}"]/g,"");lt.trackId=st}else Qe.direction==_&&(lt.codec=Qe.codec_out.mime_type,lt.jitter=Qe.delta_jitter_ms_out,lt.bitrate=Qe.delta_kbs_out,lt.packetsLost=Qe.delta_packets_lost_out,lt.rtt=Fe.data.delta_rtt_connectivity_ms||0,lt.totalPackets=Qe.delta_packets_out,lt.limitation=Qe.limitation_out,lt.size=Qe.size_out,lt.trackId=Qe.track_id_out);gt.video.push(lt)}),this._callbacks.onStatsCollected.callback(gt)}}}class Wa{constructor(Fe){this._id=Fe.name&&Fe.name.substr(0,12).padEnd(12," "),this._moduleName=this._id,this._config=Fe,this._collector=new an(this._config,this._id)}get id(){return this._id}start(){this._collectorIntervalId?Qt("Probe already started."):(Ft(this._moduleName,"Probe Started"),this._collectorIntervalId=setInterval(()=>{Ft(this._moduleName,"Collector collecting stats"),this._collector.collectStats()},this._config.refreshEvery))}stop(){this._collectorIntervalId?(clearInterval(this._collectorIntervalId),Ft(this._moduleName,"Probe Stopped")):Qt("Probe not running, Please start first.")}set onStatsCollected(Fe){Fe?this._collector.registerCallback("onStatsCollected",Fe):this._collector.unregisterCallback("onStatsCollected")}}const Ca={refreshEvery:2e3,startAfter:0,stopAfter:-1,verbose:!1,peerId:"peerId",meetingId:"meetingId",name:"name"};class oi{constructor(Fe){var gt;this._config={defaultConfig:Ca,...Fe},this._probes=[],gt=this._config.verbose||!1,ut.setLevel(gt?ut.levels.TRACE:ut.levels.INFO),Ft("VideoSDKMetrics","VideoSDKMetrics initialized")}get probes(){return this._probes}addNewProbe(Fe,gt){if(!Fe)throw new Error("undefined monitoring object");const Qe={monitoringObject:Fe,...gt,...this._config},lt=new Wa(Qe);return this._probes.push(lt),lt}removeExistingProbe(Fe){if(!Fe)throw new Error("undefined probe");Fe.stop(),this._probes=this._probes.filter(gt=>Fe.id!==gt.id)}getProbe(Fe){for(let gt of this.probes)if(gt.id==Fe)return gt}startAllProbes(){this._probes.forEach((Fe,gt)=>{Fe.start()})}stopAllProbes(){this._probes.forEach(Fe=>Fe.stop())}}})(),E})()},7329:(L,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.Logger=void 0;const P=u(1227),E="awaitqueue";b.Logger=class{constructor(c){c?(this._debug=(0,P.default)(`awaitqueue:${c}`),this._warn=(0,P.default)(`awaitqueue:WARN:${c}`),this._error=(0,P.default)(`awaitqueue:ERROR:${c}`)):(this._debug=(0,P.default)(E),this._warn=(0,P.default)("awaitqueue:WARN"),this._error=(0,P.default)("awaitqueue:ERROR")),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},2186:(L,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.AwaitQueue=b.AwaitQueueRemovedTaskError=b.AwaitQueueStoppedError=void 0;const P=new(u(7329)).Logger;class E extends Error{constructor(w){super(w??"AwaitQueue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,E)}}b.AwaitQueueStoppedError=E;class c extends Error{constructor(w){super(w??"AwaitQueue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,c)}}b.AwaitQueueRemovedTaskError=c,b.AwaitQueue=class{constructor(){this.pendingTasks=new Map,this.nextTaskId=0,this.stopping=!1}get size(){return this.pendingTasks.size}async push(_,w){if(w=w??_.name,P.debug(`push() [name:${w}]`),typeof _!="function")throw new TypeError("given task is not a function");if(w)try{Object.defineProperty(_,"name",{value:w})}catch{}return new Promise((d,g)=>{const n={id:this.nextTaskId++,task:_,name:w,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:m=>{if(n.completed)return;n.completed=!0,this.pendingTasks.delete(n.id),P.debug(`resolving task [name:${n.name}]`),d(m);const[v]=this.pendingTasks.values();v&&!v.executedAt&&this.execute(v)},reject:m=>{if(!n.completed&&(n.completed=!0,this.pendingTasks.delete(n.id),P.debug(`rejecting task [name:${n.name}]: %s`,String(m)),g(m),!this.stopping)){const[v]=this.pendingTasks.values();v&&!v.executedAt&&this.execute(v)}}};this.pendingTasks.set(n.id,n),this.pendingTasks.size===1&&this.execute(n)})}stop(){P.debug("stop()"),this.stopping=!0;for(const _ of this.pendingTasks.values())P.debug(`stop() | stopping task [name:${_.name}]`),_.reject(new E);this.stopping=!1}remove(_){P.debug(`remove() [taskIdx:${_}]`);const w=Array.from(this.pendingTasks.values())[_];w?w.reject(new c):P.debug(`stop() | no task with given idx [taskIdx:${_}]`)}dump(){const _=Date.now();let w=0;return Array.from(this.pendingTasks.values()).map(d=>({idx:w++,task:d.task,name:d.name,enqueuedTime:d.executedAt?d.executedAt-d.enqueuedAt:_-d.enqueuedAt,executionTime:d.executedAt?_-d.executedAt:0}))}async execute(_){if(P.debug(`execute() [name:${_.name}]`),_.executedAt)throw new Error("task already being executed");_.executedAt=Date.now();try{const w=await _.task();_.resolve(w)}catch(w){_.reject(w)}}}},8962:(L,b,u)=>{u.d(b,{v:()=>P});var P={networkPriorities:{audio:"high",dominatingVideo:"high",otherVideos:"medium",screenShare:"medium"},aspectRatios:{fourThree:{label:"fourThree",value:1.333},oneSixNine:{label:"oneSixNine",value:1.777}},audioProfiles:{speech_low_quality:{sampleRate:16e3,bitRate:24,sampleSize:16,stereo:!1,dtx:!0,fec:!0,maxPlaybackRate:16e3,packetTime:20,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,channelCount:1},speech_standard:{sampleRate:32e3,bitRate:24,sampleSize:24,stereo:!1,dtx:!0,fec:!0,maxPlaybackRate:32e3,packetTime:30,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,channelCount:1},music_standard:{sampleRate:48e3,bitRate:40,sampleSize:32,stereo:!1,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:40,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:1},standard_stereo:{sampleRate:48e3,sampleSize:32,bitRate:64,stereo:!0,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:40,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:2},high_quality:{sampleRate:48e3,sampleSize:32,bitRate:128,stereo:!1,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:60,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:1},high_quality_stereo:{sampleRate:48e3,sampleSize:32,bitRate:192,stereo:!0,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:60,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:2}},videoProfiles:{h90p_w160p:{width:160,height:90,bitRate:6e4,frameRate:15,aspectRatio:"oneSixNine"},h180p_w320p:{width:320,height:180,bitRate:12e4,frameRate:15,aspectRatio:"oneSixNine"},h216p_w384p:{width:384,height:216,bitRate:18e4,frameRate:15,aspectRatio:"oneSixNine"},h360p_w640p:{width:640,height:360,bitRate:3e5,frameRate:20,aspectRatio:"oneSixNine"},h540p_w960p:{width:960,height:540,bitRate:6e5,frameRate:25,aspectRatio:"oneSixNine"},h720p_w1280p:{width:1280,height:720,bitRate:2e6,frameRate:30,aspectRatio:"oneSixNine"},h1080p_w1920p:{width:1920,height:1080,bitRate:3e6,frameRate:30,aspectRatio:"oneSixNine"},h1440p_w2560p:{width:2560,height:1440,bitRate:5e6,frameRate:30,aspectRatio:"oneSixNine"},h2160p_w3840p:{width:3840,height:2160,bitRate:8e6,frameRate:30,aspectRatio:"oneSixNine"},h120p_w160p:{width:160,height:120,bitRate:8e4,frameRate:15,aspectRatio:"fourThree"},h180p_w240p:{width:240,height:180,bitRate:1e5,frameRate:15,aspectRatio:"fourThree"},h240p_w320p:{width:320,height:240,bitRate:15e4,frameRate:15,aspectRatio:"fourThree"},h360p_w480p:{width:480,height:360,bitRate:225e3,frameRate:20,aspectRatio:"fourThree"},h480p_w640p:{width:640,height:480,bitRate:3e5,frameRate:25,aspectRatio:"fourThree"},h540p_w720p:{width:720,height:540,bitRate:45e4,frameRate:30,aspectRatio:"fourThree"},h720p_w960p:{width:960,height:720,bitRate:15e5,frameRate:30,aspectRatio:"fourThree"},h1080p_w1440p:{width:1440,height:1080,bitRate:25e5,frameRate:30,aspectRatio:"fourThree"},h1440p_w1920p:{width:1920,height:1440,bitRate:35e5,frameRate:30,aspectRatio:"fourThree"}},screenShareProfiles:{h360p_30fps:{width:640,height:360,bitRate:2e5,frameRate:30},h720p_5fps:{width:1280,height:720,bitRate:4e5,frameRate:5},h720p_15fps:{width:1280,height:720,bitRate:1e6,frameRate:15},h1080p_15fps:{width:1920,height:1080,bitRate:15e5,frameRate:15},h1080p_30fps:{width:1920,height:1080,bitRate:1e6,frameRate:30}},simulcastProfiles:{3840:[{scaleResolutionDownBy:12,maxBitRate:15e4},{scaleResolutionDownBy:6,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:1e7}],1920:[{scaleResolutionDownBy:6,maxBitRate:15e4},{scaleResolutionDownBy:3,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:35e5}],1280:[{scaleResolutionDownBy:4,maxBitRate:15e4},{scaleResolutionDownBy:2,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:12e5}],640:[{scaleResolutionDownBy:2,maxBitRate:15e4},{scaleResolutionDownBy:1,maxBitRate:5e5}],320:[{scaleResolutionDownBy:1,maxBitRate:15e4}]},requestTimeout:2e4,requestRetries:3,transportOptions:{tcp:!0},videoKSVCEncodings:[{scalabilityMode:"S3T3_KEY"}],videoSVCEncodings:[{scalabilityMode:"S3T3",dtx:!0}]}},6900:(L,b,u)=>{u.d(b,{H:()=>E,R:()=>P});var P={INVALID_API_KEY:4001,INVALID_TOKEN:4002,INVALID_MEETING_ID:4003,INVALID_PARTICIPANT_ID:4004,DUPLICATE_PARTICIPANT:4005,ACCOUNT_DEACTIVATED:4006,ACCOUNT_DISCONTINUED:4007,INVALID_PERMISSIONS:4008,MAX_PARTCIPANT_REACHED:4009,MAX_SPEAKER_REACHED:4010,START_RECORDING_FAILED:4011,STOP_RECORDING_FAILED:4012,START_LIVESTREAM_FAILED:4013,STOP_LIVESTREAM_FAILED:4014,INVALID_LIVESTREAM_CONFIG:4015,START_HLS_FAILED:4016,STOP_HLS_FAILED:4017,START_TRANSCRIPTION_FAILED:4031,STOP_TRANSCRIPTION_FAILED:4032,RECORDING_FAILED:5001,LIVESTREAM_FAILED:5002,HLS_FAILED:5003,TRANSCRIPTION_FAILED:5007,ERROR_GET_VIDEO_MEDIA:3011,ERROR_GET_AUDIO_MEDIA:3012,ERROR_GET_DISPLAY_MEDIA:3013,ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:3014,ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED:3015,ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED:3016,ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:3017,ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:3018,ERROR_CAMERA_PERMISSION_DENIED_BY_OS:3019,ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:3020,ERROR_CAMERA_NOT_FOUND:3021,ERROR_MICROPHONE_NOT_FOUND:3022,ERROR_CAMERA_IN_USE:3023,ERROR_MICROPHONE_IN_USE:3024,ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:3025,ERROR_VIDEO_SOURCE_INITIATION_FAILED:3026,ERROR_WEBCAM_TRACK_ENDED:3027,ERROR_MICROPHONE_TRACK_ENDED:3028,ERROR_INVALID_CUSTOM_VIDEO_TRACK:3029,ERROR_INVALID_CUSTOM_AUDIO_TRACK:3030,ERROR_CUSTOM_VIDEO_TRACK_ENDED:3031,ERROR_CUSTOM_AUDIO_TRACK_ENDED:3032,ERROR_CAMERA_ACCESS_UNAVAILABLE:3033,ERROR_MICROPHONE_ACCESS_UNAVAILABLE:3034,ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED:3035,ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED:3036,ERROR_RN_CAMERA_NOT_FOUND:3037,ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED:3038,ERROR_RN_MIC_NOT_FOUND:3039,ERROR_RN_CAMERA_ACCESS_UNAVAILABLE:3040,ERROR_RN_MIC_ACCESS_UNAVAILABLE:3041,ERROR_RN_CAMERA_TRACK_ENDED:3042,ERROR_RN_MIC_TRACK_ENDED:3043},E={ERROR_GET_VIDEO_MEDIA:{code:3011,message:"Your browser/Device does not support Video."},ERROR_GET_AUDIO_MEDIA:{code:3012,message:"Your browser/Device does not support Audio."},ERROR_GET_DISPLAY_MEDIA:{code:3013,message:"Your browser/Device does not support Screen Sharing."},ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:{code:3014,message:"Video capture permission denied."},ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED:{code:3015,message:"Audio capture permission denied."},ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED:{code:3016,message:"Screen sharing permission denied."},ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:{code:3017,message:"Oops! It seems like camera access was denied or dismissed. To proceed, kindly grant access through your browser settings."},ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:{code:3018,message:"Oops! It seems like microphone access was denied or dismissed. To proceed, kindly grant access through your browser settings."},ERROR_CAMERA_PERMISSION_DENIED_BY_OS:{code:3019,message:"Camera permission denied by OS system settings. Please check the system settings and grant permission for this browser."},ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:{code:3020,message:"Microphone permission denied by OS system settings. Please check the system settings and grant permission for this browser."},ERROR_CAMERA_NOT_FOUND:{code:3021,message:"Please ensure your camera is connected and turned on, and that the camera driver is installed and up-to-date."},ERROR_MICROPHONE_NOT_FOUND:{code:3022,message:"Please ensure your microphone is connected and turned on."},ERROR_CAMERA_IN_USE:{code:3023,message:"The camera is being used by another application. Please close any programs utilizing the camera, such as video conferencing tools, screen recording software, or other browsers. Restart your browser and attempt again."},ERROR_MICROPHONE_IN_USE:{code:3024,message:"The microphone is being used by another application. Please close any programs utilizing the microphone, such as video conferencing tools, screen recording software, or other browsers. Restart your browser and attempt again."},ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:{code:3025,message:"It seems like there's an issue with camera permission or video autoplay, you can check out this link for details: http://tinyurl.com/autoplay-issue"},ERROR_VIDEO_SOURCE_INITIATION_FAILED:{code:3026,message:"Unable to initiate video source. Please verify browser settings for video permissions."},ERROR_WEBCAM_TRACK_ENDED:{code:3027,message:"Webcam track has ended or the webcam is disconnected. Please ensure your webcam is properly connected and try restarting it."},ERROR_MICROPHONE_TRACK_ENDED:{code:3028,message:"Microphone track has ended or the microphone is disconnected. Please check your microphone connection and try again."},ERROR_INVALID_CUSTOM_VIDEO_TRACK:{code:3029,message:"The provided custom video track is invalid; reverting to the default video track. Please ensure that the video track meets the required specifications."},ERROR_INVALID_CUSTOM_AUDIO_TRACK:{code:3030,message:"The provided custom audio track is invalid; reverting to the default audio track. Please ensure that the audio track meets the required specifications."},ERROR_CUSTOM_VIDEO_TRACK_ENDED:{code:3031,message:"The provided custom video track is in an ended state. Please verify the video track's status, and try again."},ERROR_CUSTOM_AUDIO_TRACK_ENDED:{code:3032,message:"The provided custom audio track is in an ended state. Please verify the audio track's status, and try again."},ERROR_CAMERA_ACCESS_UNAVAILABLE:{code:3033,message:"Camera access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)."},ERROR_MICROPHONE_ACCESS_UNAVAILABLE:{code:3034,message:"Microphone access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)."},ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED:{code:3035,message:"Oops! Something went wrong. The room was in a connecting state, and during that time, an action encountered an issue. Please try again after joining a meeting."},ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED:{code:3036,message:"Oops! It seems like camera access was denied or dismissed. To proceed, kindly grant access through your App settings."},ERROR_RN_CAMERA_NOT_FOUND:{code:3037,message:"Please ensure your camera is connected and turned on"},ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED:{code:3038,message:"Oops! It seems like mic access was denied or dismissed. To proceed, kindly grant access through your App settings."},ERROR_RN_MIC_NOT_FOUND:{code:3039,message:"Please ensure your mic is connected and turned on"},ERROR_RN_CAMERA_ACCESS_UNAVAILABLE:{code:3040,message:"Camera access unavailable: Please ensure your device is compatible."},ERROR_RN_MIC_ACCESS_UNAVAILABLE:{code:3041,message:"Microphone access unavailable: Please ensure your device is compatible."},ERROR_RN_CAMERA_TRACK_ENDED:{code:3042,message:"Camera track has ended. Please make sure your camera is turned on or try restarting it."},ERROR_RN_MIC_TRACK_ENDED:{code:3043,message:"Microphone track has ended or the microphone is disconnected. Please check your microphone connection and try again."}}},6380:(L,b,u)=>{u.d(b,{o:()=>P});var P={HLS_STARTING:"HLS_STARTING",HLS_STARTED:"HLS_STARTED",HLS_PLAYABLE:"HLS_PLAYABLE",HLS_STOPPING:"HLS_STOPPING",HLS_STOPPED:"HLS_STOPPED"}},3430:(L,b,u)=>{u.d(b,{S:()=>P});var P={CONFERENCE:"CONFERENCE",VIEWER:"VIEWER"}},3003:(L,b,u)=>{u.r(b),u.d(b,{default:()=>mo});var P=u(885),E=u(1002),c=u(5861),_=u(5671),w=u(3144),d=u(4942),g=u(7757),n=u.n(g),m=u(9293),v=u(960),R=u(1227),k=u.n(R),T="mediasoup-demo",S=function(){function be(Oe){(0,_.Z)(this,be),Oe?(this._debug=k()("".concat(T,":").concat(Oe)),this._warn=k()("".concat(T,":WARN:").concat(Oe)),this._error=k()("".concat(T,":ERROR:").concat(Oe))):(this._debug=k()(T),this._warn=k()("".concat(T,":WARN")),this._error=k()("".concat(T,":ERROR"))),k().disable(),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}return(0,w.Z)(be,[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}]),be}(),C=u(1354),I=C.enc.Latin1.parse("6gf9Oz5Y(6fOWPP@3XPv0Mwp51yfJ0HiZW^0*!9NdUuZ*VdKmRC@f))&^!Iriw)q"),o=C.enc.Latin1.parse("BHrabik^$W^y*HL@A*$4YKj(");function p(be){return i.apply(this,arguments)}function i(){return(i=(0,c.Z)(n().mark(function be(Oe){var $e,at,Bt,At,or,lr,It,mr,Ut,dr,pr,jr,on;return n().wrap(function(mn){for(;;)switch(mn.prev=mn.next){case 0:return $e=Oe.roomId,at=Oe.secret,Bt=Oe.signalingBaseUrl,At="call-api.videosdk.live",or=[],lr=null,It={},mr={},Ut={},dr=null,mn.next=10,fetch("https://".concat(Bt,"/infra/v1/meetings/init-config"),{method:"POST",headers:{Authorization:at,"Content-Type":"application/json"},body:JSON.stringify({roomId:$e})}).then(function(En){return En.json()}).catch(function(En){return{}});case 10:return pr=mn.sent,(jr=pr.data)&&(At=jr.baseUrl,on=jr.observability,or=s(jr.iceServers),lr=on.jwt,It=on.traces,mr=on.logs,Ut=on.metaData,dr=jr.signalingUrl),mn.abrupt("return",{baseUrl:At,iceServers:or,observabilityJwt:lr,traces:It,logs:mr,metaData:Ut,signalingUrl:dr});case 14:case"end":return mn.stop()}},be)}))).apply(this,arguments)}function s(be){try{var Oe=C.AES.decrypt(be,I,{iv:o,mode:C.mode.CBC,padding:C.pad.ZeroPadding}).toString(C.enc.Utf8);return JSON.parse(Oe)}catch{return[]}}var l=u(6808),f=u.n(l),O="mediasoup-demo.user",F="mediasoup-demo.devices";function x(be){var Oe=be.displayName;f().set(O,{displayName:Oe})}function N(){return f().getJSON(F)}var z=u(3196),V=u.n(z),J=function(be){return{type:"SET_ROOM_STATE",payload:{state:be}}},ne=function(be){return{type:"SET_ROOM_ACTIVE_SPEAKER",payload:{peerId:be}}},ee=function(be){return{type:"SET_ROOM_STATS_PEER_ID",payload:{peerId:be}}},Q=function(be){return{type:"SET_MEDIA_CAPABILITIES",payload:{canSendMic:be.canSendMic,canSendWebcam:be.canSendWebcam}}},oe=function(be){return{type:"SET_CAN_CHANGE_WEBCAM",payload:be}},he=function(be){return{type:"SET_DISPLAY_NAME",payload:{displayName:be}}},Te=function(be){return{type:"SET_AUDIO_ONLY_STATE",payload:{enabled:be}}},Se=function(be){return{type:"SET_AUDIO_ONLY_IN_PROGRESS",payload:{flag:be}}},Ce=function(be){return{type:"SET_AUDIO_MUTED_STATE",payload:{enabled:be}}},Re=function(be){return{type:"SET_RESTART_ICE_IN_PROGRESS",payload:{flag:be}}},Ee=function(be){return{type:"ADD_PRODUCER",payload:{producer:be}}},We=function(be){return{type:"REMOVE_PRODUCER",payload:{producerId:be}}},Yt=function(be,Oe){return{type:"SET_PRODUCER_TRACK",payload:{producerId:be,track:Oe}}},rr=function(be,Oe){return{type:"SET_PRODUCER_SCORE",payload:{producerId:be,score:Oe}}},yt=function(be){return{type:"ADD_DATA_PRODUCER",payload:{dataProducer:be}}},yr=function(be){return{type:"SET_WEBCAM_IN_PROGRESS",payload:{flag:be}}},Kt=function(be){return{type:"SET_SHARE_IN_PROGRESS",payload:{flag:be}}},Tt=function(be){return{type:"ADD_PEER",payload:{peer:be}}},Gr=function(be){return{type:"REMOVE_PEER",payload:{peerId:be}}},ft=function(be,Oe){return{type:"SET_PEER_DISPLAY_NAME",payload:{displayName:be,peerId:Oe}}},Dt=function(be,Oe){return{type:"ADD_CONSUMER",payload:{consumer:be,peerId:Oe}}},Qr=function(be,Oe){return{type:"REMOVE_CONSUMER",payload:{consumerId:be,peerId:Oe}}},Gt=function(be,Oe){return{type:"SET_CONSUMER_PAUSED",payload:{consumerId:be,originator:Oe}}},ut=function(be,Oe){return{type:"SET_CONSUMER_RESUMED",payload:{consumerId:be,originator:Oe}}},_t=function(be,Oe,$e){return{type:"SET_CONSUMER_CURRENT_LAYERS",payload:{consumerId:be,spatialLayer:Oe,temporalLayer:$e}}},fr=function(be,Oe,$e){return{type:"SET_CONSUMER_PREFERRED_LAYERS",payload:{consumerId:be,spatialLayer:Oe,temporalLayer:$e}}},Ft=function(be,Oe){return{type:"SET_CONSUMER_PRIORITY",payload:{consumerId:be,priority:Oe}}},Qt=function(be,Oe){return{type:"SET_CONSUMER_SCORE",payload:{consumerId:be,score:Oe}}},Br=function(be,Oe){return{type:"ADD_DATA_CONSUMER",payload:{dataConsumer:be,peerId:Oe}}},xe=function(be,Oe){return{type:"REMOVE_DATA_CONSUMER",payload:{dataConsumerId:be,peerId:Oe}}},De=function(be){var Oe=be.type,$e=Oe===void 0?"info":Oe,at=be.text,Bt=be.title,At=be.timeout;if(!At)switch($e){case"info":At=3e3;break;case"error":At=5e3}var or={id:V()({length:6}).toLowerCase(),type:$e,title:Bt,text:at,timeout:At};return function(lr){lr(function(It){return{type:"ADD_NOTIFICATION",payload:{notification:It}}}(or)),setTimeout(function(){lr({type:"REMOVE_NOTIFICATION",payload:{notificationId:or.id}})},At)}},gr=u(7187),nr=u(8962);function un(be,Oe){var $e=Object.keys(be);if(Object.getOwnPropertySymbols){var at=Object.getOwnPropertySymbols(be);Oe&&(at=at.filter(function(Bt){return Object.getOwnPropertyDescriptor(be,Bt).enumerable})),$e.push.apply($e,at)}return $e}var On={},jn={},Zt={};for(var Nr in nr.v.videoProfiles)nr.v.videoProfiles[Nr].aspectRatio=="oneSixNine"&&(On[Nr]=nr.v.videoProfiles[Nr],On[Nr].encoding={maxBitrate:On[Nr].bitRate,maxFramerate:On[Nr].frameRate}),nr.v.videoProfiles[Nr].aspectRatio=="fourThree"&&(jn[Nr]=nr.v.videoProfiles[Nr],jn[Nr].encoding={maxBitrate:jn[Nr].bitRate,maxFramerate:jn[Nr].frameRate});for(var Nr in nr.v.screenShareProfiles)Zt[Nr]=nr.v.screenShareProfiles[Nr],Zt[Nr].encoding={maxBitrate:Zt[Nr].bitRate,maxFramerate:Zt[Nr].frameRate};var an=Object.values(On),Wa=Object.values(jn),Ca=[On.h180p_w320p,On.h360p_w640p],oi=[jn.h180p_w240p,jn.h360p_w480p],wt=["q","h","f"];function Fe(be,Oe,$e,at,Bt){var At=at&&at.videoEncoding,or=at==null?void 0:at.simulcast;if(At||(At=function(jr,on,mn){for(var En=function(La,_a,Qa){var ci=_a>Qa?_a/Qa:Qa/_a;return Math.abs(ci-1.7777777777777777)<Math.abs(ci-1.3333333333333333)?an:Wa}(jr,on,mn),$n=En[0].encoding,Jn=Math.max(on,mn),sa=0;sa<En.length;sa+=1){var Ma=En[sa];if($n=Ma.encoding,Ma.width>=Jn)break}return $n}(be,Oe,$e)),!or)return[At];var lr,It={width:Oe,height:$e,encoding:{maxBitrate:At.maxBitrate,maxFramerate:At.maxFramerate}},mr=[],Ut=(mr=gt(be,It))[0];if(mr.length>1){var dr=mr;lr=(0,P.Z)(dr,2)[1]}var pr=Math.max(Oe,$e);return Qe(Oe,$e,pr>=960&&lr?[Ut,lr,It]:pr>=480?[Ut,It]:[It],Bt)}function gt(be,Oe){var $e=Oe.width,at=Oe.height,Bt=$e>at?$e/at:at/$e;return Math.abs(Bt-1.7777777777777777)<Math.abs(Bt-1.3333333333333333)?Ca:oi}function Qe(be,Oe,$e,at){var Bt=[];return $e.forEach(function(At,or){if(!(or>=wt.length)){var lr=at?null:{maxFramerate:At.encoding.maxFramerate},It=Math.min(be,Oe),mr=function(Ut){for(var dr=1;dr<arguments.length;dr++){var pr=arguments[dr]!=null?arguments[dr]:{};dr%2?un(Object(pr),!0).forEach(function(jr){(0,d.Z)(Ut,jr,pr[jr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Ut,Object.getOwnPropertyDescriptors(pr)):un(Object(pr)).forEach(function(jr){Object.defineProperty(Ut,jr,Object.getOwnPropertyDescriptor(pr,jr))})}return Ut}({rid:wt[or],scaleResolutionDownBy:It/Math.min(At.width,At.height),maxBitrate:At.encoding.maxBitrate},lr);Bt.push(mr)}}),Bt}function lt(be,Oe,$e){if(!be)return{};var at=be.id,Bt=(be.preferredSpatialLayer,be.preferredTemporalLayer,be.appData),At=Bt.width,or=Bt.height,lr=Bt.encodings;try{var It=function($n){var Jn=[];if($n&&$n.length!=0){if($n.length===1){for(var sa=0;sa<3;sa++)Jn.push(Math.pow(2,3-sa-1));return Jn}var Ma=!1;return $n.forEach(function(La){La.scaleResolutionDownBy!==void 0?(Ma=!0,Jn.push(Math.max(1,La.scaleResolutionDownBy))):Jn.push(1)}),Ma||$n.forEach(function(La,_a){Jn[_a]=Math.pow(2,$n.length-_a-1)}),Jn}}(lr);if(!It)return{};for(var mr=Math.min(Math.max(nr.v.adaptiveScalingFactor||.75,.5),1),Ut=0,dr=0;dr<It.length;dr++){var pr=mr*At/It[dr],jr=mr*or/It[dr];if(!(Oe>=pr&&$e>=jr))break;Ut=dr}var on=(be.temporalLayers?be.temporalLayers:3)-1;if(Ut===0&&on>0){var mn=At/It[0],En=or/It[0];Oe<.5*mn&&$e<.5*En&&(on-=1),on>0&&Oe<.25*mn&&$e<.25*En&&(on-=1)}return{consumerId:at,newPreferredSpatialLayer:Ut,newPreferredTemporalLayer:on}}catch{return{}}}var st=u(6900),ye=u(4180),ir=u(3430),kr=u(6380),Cr=u(2982),Dr=Array(32);function sn(){for(var be=0;be<16;be++)Dr[be]=Math.floor(16*Math.random())+48,Dr[be]>=58&&(Dr[be]+=39);return String.fromCharCode.apply(null,Dr.slice(0,16))}function Ie(){var be=(1e6*new Date().getTime()).toString().padEnd(19,"0");return Number(be)}function Ot(be,Oe){var $e=Object.keys(be);if(Object.getOwnPropertySymbols){var at=Object.getOwnPropertySymbols(be);Oe&&(at=at.filter(function(Bt){return Object.getOwnPropertyDescriptor(be,Bt).enumerable})),$e.push.apply($e,at)}return $e}function bt(be){for(var Oe=1;Oe<arguments.length;Oe++){var $e=arguments[Oe]!=null?arguments[Oe]:{};Oe%2?Ot(Object($e),!0).forEach(function(at){(0,d.Z)(be,at,$e[at])}):Object.getOwnPropertyDescriptors?Object.defineProperties(be,Object.getOwnPropertyDescriptors($e)):Ot(Object($e)).forEach(function(at){Object.defineProperty(be,at,Object.getOwnPropertyDescriptor($e,at))})}return be}var kt=function(){function be(Oe){var $e=this,at=Oe.roomId,Bt=Oe.peerId,At=Oe.sdkName,or=Oe.observabilityJwt,lr=Oe.metaData,It=Oe.traces;(0,_.Z)(this,be),this._traceId=function(){for(var Ut=0;Ut<32;Ut++)Dr[Ut]=Math.floor(16*Math.random())+48,Dr[Ut]>=58&&(Dr[Ut]+=39);return String.fromCharCode.apply(null,Dr.slice(0,32))}(),this._rootSpanId=sn(),this._observabilityJwt=or,this._tracesEnabled=It.enabled,this._tracesEndpoint=It.endPoint;var mr=function(Ut){for(var dr="0123456789abcdefghijklmnopqrstuvwxyz",pr="",jr=Ut;jr>0;jr--)pr+=dr[Math.floor(Math.random()*dr.length)];return pr}(8);this._spans=[],this._traceJSON={resourceSpans:[{resource:{attributes:[{key:"service.name",value:{stringValue:"videosdk-otel"}},{key:"telemetry.sdk.language",value:{stringValue:"webjs"}},{key:"telemetry.sdk.name",value:{stringValue:"opentelemetry"}},{key:"telemetry.sdk.version",value:{stringValue:"1.14.0"}},{key:"sdk-version",value:{stringValue:"0.0.1"}}],droppedAttributesCount:0},scopeSpans:[{scope:{name:mr},spans:[]}]}]},this._tracesEnabled&&(this.addRootSpan(at,Bt,At,lr),setInterval(function(){$e.processQueue()},4e3))}return(0,w.Z)(be,[{key:"addRootSpan",value:function(Oe,$e,at,Bt){var At={traceId:this._traceId,spanId:this._rootSpanId,name:"room_".concat(Oe,"_peer_").concat($e,"_sdk_").concat(at),kind:1,startTimeUnixNano:Ie(),endTimeUnixNano:Ie(),attributes:[{key:"roomId",value:{stringValue:Oe}},{key:"peerId",value:{stringValue:$e}},{key:"sdkName",value:{stringValue:at}},{key:"userId",value:{stringValue:Bt.userId}},{key:"email",value:{stringValue:Bt.email}}],droppedAttributesCount:0,events:[],droppedEventsCount:0,status:{code:0},links:[],droppedLinksCount:0};this._spans.push(At)}},{key:"addSpanToTrace",value:function(Oe){this._spans.push(Oe)}},{key:"trace",value:function(Oe){var $e=Oe.spanName,at=Oe.attributes,Bt=at===void 0?{}:at,At=Oe.span,or=At===void 0?void 0:At;if(this._tracesEnabled){var lr=sn(),It=Ie(),mr={traceId:this._traceId,spanId:lr,parentSpanId:or||this._rootSpanId,name:$e,kind:1,startTimeUnixNano:It,droppedAttributesCount:0,events:[],droppedEventsCount:0,links:[],droppedLinksCount:0};return Object.keys(Bt).length>0&&(mr.attributes=Object.entries(Bt).map(function(Ut){var dr=(0,P.Z)(Ut,2);return{key:dr[0],value:{stringValue:dr[1]}}})),this.addSpanToTrace(mr),lr}}},{key:"traceAutoComplete",value:function(Oe){var $e=Oe.spanName,at=Oe.attributes,Bt=at===void 0?{}:at,At=Oe.status,or=At===void 0?1:At,lr=Oe.span,It=lr===void 0?void 0:lr,mr=Oe.message,Ut=mr===void 0?"SUCCESS":mr;if(this._tracesEnabled){var dr=sn(),pr=Ie(),jr=Ie(),on={traceId:this._traceId,spanId:dr,parentSpanId:It||this._rootSpanId,name:$e,kind:1,startTimeUnixNano:pr,endTimeUnixNano:jr,droppedAttributesCount:0,events:[],droppedEventsCount:0,links:[],droppedLinksCount:0,status:{code:or,message:Ut}};Object.keys(Bt).length>0&&(on.attributes=Object.entries(Bt).map(function(mn){var En=(0,P.Z)(mn,2);return{key:En[0],value:{stringValue:En[1]}}})),this.addSpanToTrace(on)}}},{key:"completeSpan",value:function(Oe){var $e=Oe.span,at=Oe.status,Bt=Oe.message,At=Oe.attributes,or=At===void 0?{}:At;if(this._tracesEnabled){var lr=Ie();this._spans=this._spans.map(function(It){if(It.spanId!==$e)return It;var mr=Object.entries(or).map(function(Ut){var dr=(0,P.Z)(Ut,2);return{key:dr[0],value:{stringValue:dr[1]}}});return It.attributes=It.attributes?[].concat((0,Cr.Z)(It.attributes),(0,Cr.Z)(mr)):mr,bt(bt({},It),{},{status:{code:at,message:Bt},endTimeUnixNano:lr})})}}},{key:"processQueue",value:function(){var Oe=this;if(this._spans.length>0){this._traceJSON.resourceSpans[0].scopeSpans[0].spans=this._spans,this._spans=[];var $e={method:"POST",headers:{Authorization:this._observabilityJwt,"Content-Type":"application/json"},body:JSON.stringify(this._traceJSON)};fetch(this._tracesEndpoint,$e).then(function(){var at=(0,c.Z)(n().mark(function Bt(At){return n().wrap(function(or){for(;;)switch(or.prev=or.next){case 0:return Oe._traceJSON.resourceSpans[0].scopeSpans[0].spans=[],or.next=3,At.text();case 3:return or.abrupt("return",or.sent);case 4:case"end":return or.stop()}},Bt)}));return function(Bt){return at.apply(this,arguments)}}()).then(function(at){}).catch(function(at){Oe._spans=Oe._traceJSON.resourceSpans[0].scopeSpans[0].spans,console.error("There was a problem with the POST request:",at)})}}}]),be}();function Lr(be,Oe){var $e=Object.keys(be);if(Object.getOwnPropertySymbols){var at=Object.getOwnPropertySymbols(be);Oe&&(at=at.filter(function(Bt){return Object.getOwnPropertyDescriptor(be,Bt).enumerable})),$e.push.apply($e,at)}return $e}function Ir(be){for(var Oe=1;Oe<arguments.length;Oe++){var $e=arguments[Oe]!=null?arguments[Oe]:{};Oe%2?Lr(Object($e),!0).forEach(function(at){(0,d.Z)(be,at,$e[at])}):Object.getOwnPropertyDescriptors?Object.defineProperties(be,Object.getOwnPropertyDescriptors($e)):Lr(Object($e)).forEach(function(at){Object.defineProperty(be,at,Object.getOwnPropertyDescriptor($e,at))})}return be}var Ur=function(){function be($e){var at=$e.roomId,Bt=$e.peerId,At=$e.logs,or=$e.observabilityJwt,lr=$e.deviceInfo,It=$e.sessionId,mr=$e.debugMode;(0,_.Z)(this,be);var Ut=lr.browserUserAgent,dr=lr.deviceUserAgent,pr=lr.platform;this._peerId=Bt,this._roomId=at,this._logs=At,this._observabilityJwt=or,this._deviceInfo=lr,this._sessionId=It,this._debugMode=mr,this.browserOrDeviceInfo=Ut?{browserName:Ut.browser.name,browserVersion:Ut.browser.version,osName:Ut.os.name,osVersion:Ut.os.version,platform:pr}:dr?Ir({platform:pr},dr):null}var Oe;return(0,w.Z)(be,[{key:"pushLogs",value:(Oe=(0,c.Z)(n().mark(function $e(at){var Bt,At,or,lr,It,mr,Ut,dr;return n().wrap(function(pr){for(;;)switch(pr.prev=pr.next){case 0:if(Bt=at.logType,At=at.logText,or=at.attributes,lr=at.dashboardLog,It=lr!==void 0&&lr,mr=this._logs,Ut=mr.enabled,dr=mr.endPoint,!Ut){pr.next=8;break}return pr.next=5,fetch(dr,{method:"POST",headers:{Authorization:this._observabilityJwt,"Content-Type":"application/json"},body:JSON.stringify({logType:Bt,logText:At,attributes:Ir(Ir({},or),{},{roomId:this._roomId,peerId:this._peerId,SDK:"".concat(this._deviceInfo.sdkType,"-sdk"),SDK_VERSION:this._deviceInfo.sdkVersion,sessionId:this._sessionId},this.browserOrDeviceInfo),debugMode:this._debugMode,dashboardLog:It})}).then(function(jr){return jr.json()}).catch(function(jr){return console.log("error",jr),{}});case 5:return pr.abrupt("return",pr.sent);case 8:return pr.abrupt("return",null);case 9:case"end":return pr.stop()}},$e,this)})),function($e){return Oe.apply(this,arguments)})}]),be}(),sr=u(7393);function ar(be,Oe){var $e=typeof Symbol<"u"&&be[Symbol.iterator]||be["@@iterator"];if(!$e){if(Array.isArray(be)||($e=function(It,mr){if(It){if(typeof It=="string")return Mr(It,mr);var Ut=Object.prototype.toString.call(It).slice(8,-1);if(Ut==="Object"&&It.constructor&&(Ut=It.constructor.name),Ut==="Map"||Ut==="Set")return Array.from(It);if(Ut==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ut))return Mr(It,mr)}}(be))||Oe){$e&&(be=$e);var at=0,Bt=function(){};return{s:Bt,n:function(){return at>=be.length?{done:!0}:{done:!1,value:be[at++]}},e:function(It){throw It},f:Bt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var At,or=!0,lr=!1;return{s:function(){$e=$e.call(be)},n:function(){var It=$e.next();return or=It.done,It},e:function(It){lr=!0,At=It},f:function(){try{or||$e.return==null||$e.return()}finally{if(lr)throw At}}}}function Mr(be,Oe){(Oe==null||Oe>be.length)&&(Oe=be.length);for(var $e=0,at=new Array(Oe);$e<Oe;$e++)at[$e]=be[$e];return at}function Dn(be,Oe){var $e=Object.keys(be);if(Object.getOwnPropertySymbols){var at=Object.getOwnPropertySymbols(be);Oe&&(at=at.filter(function(Bt){return Object.getOwnPropertyDescriptor(be,Bt).enumerable})),$e.push.apply($e,at)}return $e}function Ar(be){for(var Oe=1;Oe<arguments.length;Oe++){var $e=arguments[Oe]!=null?arguments[Oe]:{};Oe%2?Dn(Object($e),!0).forEach(function(at){(0,d.Z)(be,at,$e[at])}):Object.getOwnPropertyDescriptors?Object.defineProperties(be,Object.getOwnPropertyDescriptors($e)):Dn(Object($e)).forEach(function(at){Object.defineProperty(be,at,Object.getOwnPropertyDescriptor($e,at))})}return be}var Pe,bi={sd:{low:{s:0,t:2},med:{s:0,t:2},high:{s:1,t:2},s0t0:{s:0,t:0},s0t1:{s:0,t:1},s0t2:{s:0,t:2},s1t0:{s:1,t:0},s1t1:{s:1,t:1},s1t2:{s:1,t:2},s2t0:{s:2,t:0},s2t1:{s:2,t:1},s2t2:{s:2,t:2}},hd:{low:{s:0,t:2},med:{s:1,t:2},high:{s:2,t:2},s0t0:{s:0,t:0},s0t1:{s:0,t:1},s0t2:{s:0,t:2},s1t0:{s:1,t:0},s1t1:{s:1,t:1},s1t2:{s:1,t:2},s2t0:{s:2,t:0},s2t1:{s:2,t:1},s2t2:{s:2,t:2}}},Ka={qvga:{width:{ideal:320},height:{ideal:240}},vga:{width:{ideal:640},height:{ideal:480}},sd:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:24}},hd:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:24}}},Bs={sd:[{scaleResolutionDownBy:6},{scaleResolutionDownBy:4},{scaleResolutionDownBy:2}],hd:[{scaleResolutionDownBy:4},{scaleResolutionDownBy:2},{scaleResolutionDownBy:1}]},xi=[{scalabilityMode:"S3T3_KEY"}],qi=[{dtx:!0,maxFramerate:30}],Oi=[{scalabilityMode:"S3T3",dtx:!0}],_e=new S("RoomClient"),mo=function(){function be(q){var W,B,U=q.roomId,H=q.peerId,re=q.secret,ie=q.displayName,we=q.device,me=q.handlerName,it=q.useSimulcast,Ue=q.useSharingSimulcast,rt=q.forceTcp,se=q.mode,Ye=q.forceH264,He=q.forceVP9,Je=q.svc,fe=q.datachannel,Ae=q.externalVideo,Mt=q.micEnabled,Wt=q.webcamEnabled,Ht=q.maxResolution,$t=q.useSpartialLayerAnalytics,zt=q._deviceInfo,Xt=q.customCameraVideoTrack,Lt=q.customMicrophoneAudioTrack,Et=q.autoConsume,br=q.preferredProtocol,Nt=q.signalingBaseUrl,er=q.metaData,Rr=q.defaultCameraIndex,Yr=q.debugMode;(0,_.Z)(this,be),(0,d.Z)(this,"delay",function(Wr){return new Promise(function(tr){return setTimeout(tr,Wr)})}),_e.debug('constructor() [roomId:"%s", peerId:"%s", displayName:"%s", device:%s]',U,H,ie,we.flag),this.useSpartialLayerAnalytics=$t||!1,this._deviceInfo=zt,this._eventEmitter=new gr.EventEmitter,this._closed=!1,this._displayName=ie,this._device=we,this._forceTcp=rt,this._preferredProtocol=br,se==ir.S.CONFERENCE?(W=!0,B=!0):(W=!1,B=!1),this._mode=se,this._produce=W,this._consume=B,this._useDataChannel=fe,this._forceH264=!!Ye,this._forceVP9=!!He,this._micEnabled=!!Mt,this._webcamEnabled=!!Wt,this._externalVideo=null,this._externalVideoStream=null,this._nextDataChannelTestNumber=0,Ae&&(this._externalVideo=document.createElement("video"),this._externalVideo.controls=!0,this._externalVideo.loop=!0,this._externalVideo.setAttribute("playsinline",""),this._externalVideo.src=Ae,this._externalVideo.play().catch(function(Wr){return _e.warn("externalVideo.play() failed:%o",Wr)})),this._handlerName=me,this._useSimulcast=it,this._useSharingSimulcast=Ue,this._protooUrl="",this._secret=re,this._peerId=H,this._roomId=U,this._baseUrl="",this._protoo=null,this._mediasoupDevice=null,this._sendTransport=null,this._recvTransport=null,this._micProducer=null,this._webcamProducer=null,this._shareProducer=null,this._shareAudioProducer=null,this._chatDataProducer=null,this._botDataProducer=null,this._consumers=new Map,this._dataConsumers=new Map,this._mics=new Map,this._mic={device:null},this._webcams=new Map,this._webcam={device:null,resolution:Ht||"hd"},this._pinnedParticipants=new Map,Je&&(xi[0].scalabilityMode="".concat(Je,"_KEY"),Oi[0].scalabilityMode=Je),this.customCameraVideoTrack=Xt,this.customMicrophoneAudioTrack=Lt,this._autoConsume=Et,this._iceServers=[],this._metrics=new ye.VideoSDKMetrics({refreshEvery:1e3,startAfter:1e3,verbose:!1}),this._stats={},this._latestStats={},this._isWebsocketAlive=!1,this._pingWebsocketInterval=null,this._pingInternetInterval=null,this._pingWebsocketFailedCounter=0,this._pongInternetCounter=0,this._transportState="",this._openTelemetry=null,this._videosdkLogs=null,this._signalingBaseUrl=Nt||"api.videosdk.live",this._metaData=er,this._defaultCameraIndex=Rr,this._debugMode=!!Yr}var Oe,$e,at,Bt,At,or,lr,It,mr,Ut,dr,pr,jr,on,mn,En,$n,Jn,sa,Ma,La,_a,Qa,ci,Ki,Qi,Ji,Yi,Xi,es,ts,rs,ns,as,is,ss,os,cs,ls,us,Di,wi,dt,K,Ke,qt,Fn,Gn,ur,Sl,Ii,go,Mi,Us,ds,vo,_o,sc,Yn,Rl,Ws,El,oc,kl,Cl,Tl,Pl,xl,li,cc,Na,oa,Ol,ca,Jt,Hs,Jr,yo,ui,vr,Dl,zs,lc,bo,wo,kn,la,di,uc,So,dc,ue,St,pc,Vt,hc,Rt,Bn,Vs,fc,mc,Il,Ml,Ll,Nl,Al;return(0,w.Z)(be,[{key:"on",value:function(q,W){this._eventEmitter.on(q,W)}},{key:"close",value:function(q){var W,B,U,H,re,ie=q.sendLeft,we=ie===void 0||ie;if(we&&(this._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"CLOSING"}),(re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Meeting is in CLOSING State",status:1})),!this._closed){this._closed=!0,this._pingWebsocketInterval&&clearInterval(this._pingWebsocketInterval),this._pingWebsocketInterval=null,this._pingInternetInterval&&clearInterval(this._pingInternetInterval),this._pingInternetInterval=null,this._protoo.close(),this._metrics.running&&this._metrics.stopAllProbes(),_e.debug("close()");var me=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"Closing Trasnport"});this._sendTransport&&this._sendTransport.close(),this._recvTransport&&this._recvTransport.close(),(B=this._openTelemetry)===null||B===void 0||B.completeSpan({span:me,status:1,message:"Closed Trasnport"}),Pe.dispatch(J("closed")),we&&this._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"CLOSED"}),(U=this._openTelemetry)===null||U===void 0||U.traceAutoComplete({spanName:"Meeting is in CLOSED State",status:1}),we&&this._eventEmitter.emit("MEETING_LEFT"),(H=this._openTelemetry)===null||H===void 0||H.traceAutoComplete({spanName:"Emitted MEETING_LEFT Event",status:1})}}},{key:"join",value:(Al=(0,c.Z)(n().mark(function q(){var W,B,U,H,re,ie,we,me,it,Ue,rt,se=this;return n().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:return Ye.next=2,p({roomId:this._roomId,secret:this._secret,signalingBaseUrl:this._signalingBaseUrl});case 2:U=Ye.sent,H=U.baseUrl,re=U.iceServers,ie=U.logs,we=U.observabilityJwt,me=U.traces,it=U.metaData,Ue=U.signalingUrl,this._baseUrl=H,this._protooUrl="".concat(Ue||"wss://".concat(this._baseUrl),"/?roomId=").concat(this._roomId,"&peerId=").concat(this._peerId,"&secret=").concat(this._secret,"&mode=").concat(this._mode),this._iceServers=re,this._tracesEnabled=me.enabled,this._openTelemetry=new kt((0,d.Z)({roomId:this._roomId,peerId:this._peerId,sdkName:"".concat(this._deviceInfo.sdkType,"-sdk"),traces:me,logs:ie,observabilityJwt:we,metaData:it},"traces",me)),this._joinSpan=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"Join() Calling",attributes:{DeviceInfo:JSON.stringify(this._deviceInfo),mode:this._mode,displayName:this._displayName,multiStream:this._useSimulcast,micEnabled:this._micEnabled,webcamEnabled:this._webcamEnabled,CustomVideoTrack:!!this.customCameraVideoTrack,CustomMicTrack:!!this.customMicrophoneAudioTrack,signalingUrl:Ue||"signalingUrl not specify"}}),rt=new m.qo(this._protooUrl),this._protoo=new m._z(rt),this._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"CONNECTING"}),Pe.dispatch(J("connecting")),(B=this._openTelemetry)===null||B===void 0||B.traceAutoComplete({spanName:"Meeting is in CONNECTING State",span:this._joinSpan,status:1}),this._protoo.on("open",function(){var He;se._isWebsocketAlive=!0,se._closed=!1,se.startPingPong(),se._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"CONNECTED"}),(He=se._openTelemetry)===null||He===void 0||He.traceAutoComplete({spanName:"Meeting is in CONNECTED State",span:se._joinSpan,status:1}),se.requestEntry()}),this._protoo.on("failed",function(){var He;se._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"FAILED"}),(He=se._openTelemetry)===null||He===void 0||He.traceAutoComplete({spanName:"Meeting is in FAILED State",span:se._joinSpan,status:2}),Pe.dispatch(De({type:"error",text:"WebSocket connection failed"}))}),this._protoo.on("disconnected",function(){var He;se._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"DISCONNECTED"}),(He=se._openTelemetry)===null||He===void 0||He.traceAutoComplete({spanName:"Meeting is in DISCONNECTED State",span:se._joinSpan,status:1}),Pe.dispatch(De({type:"error",text:"WebSocket disconnected"})),se._sendTransport&&(se._sendTransport.close(),se._sendTransport=null),se._recvTransport&&(se._recvTransport.close(),se._recvTransport=null),Pe.dispatch(J("closed"))}),this._protoo.on("close",function(){se._closed||se.close({sendLeft:!0})}),this._protoo.on("request",function(){var He=(0,c.Z)(n().mark(function Je(fe,Ae,Mt){var Wt,Ht,$t,zt,Xt,Lt,Et,br,Nt,er,Rr,Yr,Wr,tr,Xr,vn,Pr,cn,_r,_n,Pt,en,vt,cr,Er,qr,Zr,Hr,Xn,ua,da,Un,In,ea,pa,zr,ya,Wn,ha,ta,tn,fa,ba,Mn,Zn,Hn,Cn,rn,qn,dn,Ln,Tr,Tn,ra,wr,Sr,Xe,Le,hr,Vr,zn,wa;return n().wrap(function(et){for(;;)switch(et.prev=et.next){case 0:_e.debug('proto "request" event [method:%s, data:%o]',fe.method,fe.data),et.t0=fe.method,et.next=et.t0==="close"?4:et.t0==="newConsumer"?7:et.t0==="newDataConsumer"?45:et.t0==="enableMic"?72:et.t0==="disableMic"?74:et.t0==="enableWebcam"?88:et.t0==="disableWebcam"?90:et.t0==="pinStateChanged"?104:et.t0==="switchRoom"?124:et.t0==="statsData"?127:130;break;case 4:return Ae(),se.close({sendLeft:!0}),et.abrupt("break",130);case 7:if($t=(Wt=se._openTelemetry)===null||Wt===void 0?void 0:Wt.trace({spanName:"Protoo REQ: newConsumer",attributes:{request:JSON.stringify(fe)}}),se._consume){et.next=12;break}return Mt(403,"I do not want to consume"),(zt=se._openTelemetry)===null||zt===void 0||zt.completeSpan({span:$t,status:2,message:"I do not want to consume"}),et.abrupt("break",130);case 12:return Xt=fe.data,Lt=Xt.peerId,Et=Xt.producerId,br=Xt.id,Nt=Xt.kind,er=Xt.rtpParameters,Rr=Xt.type,Yr=Xt.appData,Wr=Xt.producerPaused,tr=(Ht=se._openTelemetry)===null||Ht===void 0?void 0:Ht.trace({spanName:"Creating Consumer",span:$t}),et.prev=14,et.next=17,se._recvTransport.consume({id:br,producerId:Et,kind:Nt,rtpParameters:er,appData:Ar(Ar({},Yr),{},{peerId:Lt})});case 17:_r=et.sent,_n=v.parseScalabilityMode(_r.rtpParameters.encodings[0].scalabilityMode),Pt=_n.spatialLayers,en=_n.temporalLayers,_r.spatialLayers=Pt,_r.temporalLayers=en,_r.currentSpatialLayers=Pt-1,_r.currentTemporalLayers=en-1,se._consumers.set(_r.id,_r),_r.on("transportclose",function(){se._consumers.delete(_r.id);var $r=Qr(_r.id,Lt);Pe.dispatch($r),se._eventEmitter.emit($r.type,$r.payload)}),(Xr=se._openTelemetry)===null||Xr===void 0||Xr.completeSpan({span:tr,status:1,message:"Consumer Created"}),tr=(vn=se._openTelemetry)===null||vn===void 0?void 0:vn.trace({spanName:"Sending Stream Enabled Event",span:$t}),vt=Dt({id:_r.id,type:Rr,locallyPaused:!1,remotelyPaused:Wr,rtpParameters:_r.rtpParameters,spatialLayers:Pt,temporalLayers:en,currentSpatialLayer:Pt-1,currentTemporalLayer:en-1,preferredSpatialLayer:Pt-1,preferredTemporalLayer:en-1,priority:1,codec:_r.rtpParameters.codecs[0].mimeType.split("/")[1],track:_r.track,appData:Yr,instance:_r},Lt),Pe.dispatch(vt),se._eventEmitter.emit(vt.type,vt.payload),Ae(),_r.kind==="video"&&Pe.getState().me.audioOnly&&se._pauseConsumer(_r),(Pr=se._openTelemetry)===null||Pr===void 0||Pr.completeSpan({span:tr,status:1,message:"Event Send Successfully"}),(cn=se._openTelemetry)===null||cn===void 0||cn.completeSpan({span:$t,status:1,message:"New Consumer Created Successfully",attributes:{"consumer.consumerId":_r.id}}),_r.kind=="video"&&_r.appData.share&&((cr=se._openTelemetry)===null||cr===void 0||cr.traceAutoComplete({spanName:"Presenter Changed",span:$t,attributes:{"peer.id":Lt}})),et.next=44;break;case 37:throw et.prev=37,et.t1=et.catch(14),(Er=se._openTelemetry)===null||Er===void 0||Er.completeSpan({span:tr,status:2,message:"Error creating a Consumer: ".concat(et.t1)}),(qr=se._openTelemetry)===null||qr===void 0||qr.completeSpan({span:$t,status:2,message:"Error creating a Consumer: ".concat(et.t1)}),Pe.dispatch(De({type:"error",text:"Error creating a Consumer: ".concat(et.t1)})),(Zr=se._videosdkLogs)===null||Zr===void 0||Zr.pushLogs({logText:"Error creating a Consumer",logType:"ERROR",attributes:{error:et.t1.message}}),et.t1;case 44:return et.abrupt("break",130);case 45:if(se._consume){et.next=48;break}return Mt(403,"I do not want to data consume"),et.abrupt("break",130);case 48:if(se._useDataChannel){et.next=51;break}return Mt(403,"I do not want DataChannels"),et.abrupt("break",130);case 51:return Hr=fe.data,Xn=Hr.peerId,ua=Hr.dataProducerId,da=Hr.id,Un=Hr.sctpStreamParameters,In=Hr.label,ea=Hr.protocol,pa=Hr.appData,et.prev=52,et.next=55,se._recvTransport.consumeData({id:da,dataProducerId:ua,sctpStreamParameters:Un,label:In,protocol:ea,appData:Ar(Ar({},pa),{},{peerId:Xn})});case 55:zr=et.sent,se._dataConsumers.set(zr.id,zr),zr.on("transportclose",function(){se._dataConsumers.delete(zr.id)}),zr.on("open",function(){_e.debug('DataConsumer "open" event')}),zr.on("close",function(){_e.warn('DataConsumer "close" event'),se._dataConsumers.delete(zr.id),Pe.dispatch(De({type:"error",text:"DataConsumer closed"}))}),zr.on("error",function($r){_e.error('DataConsumer "error" event:%o',$r),Pe.dispatch(De({type:"error",text:"DataConsumer error: ".concat($r)}))}),zr.on("message",function($r){if(_e.debug('DataConsumer "message" event [streamId:%d]',zr.sctpStreamParameters.streamId),window.DC_MESSAGE=$r,$r instanceof ArrayBuffer){var Si=new DataView($r).getUint32();return Si==Math.pow(2,32)-1?(_e.warn("dataChannelTest finished!"),void(se._nextDataChannelTestNumber=0)):(Si>se._nextDataChannelTestNumber&&_e.warn("dataChannelTest: %s packets missing",Si-se._nextDataChannelTestNumber),void(se._nextDataChannelTestNumber=Si+1))}if(typeof $r=="string")switch(zr.label){case"chat":var ps=Pe.getState().peers,Li=Object.keys(ps).map(function(Ni){return ps[Ni]}).find(function(Ni){return Ni.dataConsumers.includes(zr.id)});if(!Li){_e.warn('DataConsumer "message" from unknown peer');break}Pe.dispatch(De({title:"".concat(Li.displayName," says:"),text:$r,timeout:5e3})),se._eventEmitter.emit("CHAT_MESSAGE",{text:$r,senderId:Li.id,timestamp:new Date().getTime()});break;case"bot":Pe.dispatch(De({title:"Message from Bot:",text:$r,timeout:5e3}))}else _e.warn('ignoring DataConsumer "message" (not a string)')}),window.DC=zr,Pe.dispatch(Br({id:zr.id,sctpStreamParameters:zr.sctpStreamParameters,label:zr.label,protocol:zr.protocol},Xn)),Ae(),et.next=71;break;case 67:et.prev=67,et.t2=et.catch(52),_e.error('"newDataConsumer" request failed:%o',et.t2),Pe.dispatch(De({type:"error",text:"Error creating a DataConsumer: ".concat(et.t2)}));case 71:return et.abrupt("break",130);case 72:try{Wn=fe.data.peerId,(ya=se._openTelemetry)===null||ya===void 0||ya.traceAutoComplete({spanName:"Emitting MIC_REQUESTED & Protoo REQ: enableMic for ".concat(Wn),status:1}),se._eventEmitter.emit("MIC_REQUESTED",{peerId:Wn}),Ae()}catch($r){_e.error('"enableMic" request failed:%o',$r),(ha=se._videosdkLogs)===null||ha===void 0||ha.pushLogs({logText:"Error enableMic request failed",logType:"ERROR",attributes:{error:$r.message}}),se._emitError({code:3027,message:$r.message})}return et.abrupt("break",130);case 74:return et.prev=74,ta=(tn=se._openTelemetry)===null||tn===void 0?void 0:tn.trace({spanName:"Protoo REQ: disableMic"}),et.next=78,se.disableMic(!1,ta);case 78:(fa=se._openTelemetry)===null||fa===void 0||fa.completeSpan({span:ta,status:1,message:"Request Completed"}),Ae(),et.next=87;break;case 82:et.prev=82,et.t3=et.catch(74),(ba=se._openTelemetry)===null||ba===void 0||ba.completeSpan({span:ta,status:2,message:"disableMic request failed ".concat(et.t3)}),(Mn=se._videosdkLogs)===null||Mn===void 0||Mn.pushLogs({logText:"Error disableMic request failed",logType:"ERROR",attributes:{error:et.t3.message}}),se._emitError({code:3028,message:et.t3.message});case 87:return et.abrupt("break",130);case 88:try{Hn=fe.data.peerId,(Zn=se._openTelemetry)===null||Zn===void 0||Zn.traceAutoComplete({spanName:"Emitting WEBCAM_REQUESTED & Protoo REQ: enableWebcam for ".concat(Hn),status:1}),se._eventEmitter.emit("WEBCAM_REQUESTED",{peerId:Hn}),Ae()}catch($r){_e.error('"enableWebcam" request failed:%o',$r),(Cn=se._videosdkLogs)===null||Cn===void 0||Cn.pushLogs({logText:"Error enableWebcam request failed",logType:"ERROR",attributes:{error:$r.message}}),se._emitError({code:3029,message:$r.message})}return et.abrupt("break",130);case 90:return et.prev=90,rn=(qn=se._openTelemetry)===null||qn===void 0?void 0:qn.trace({spanName:"Protoo REQ: disableWebcam"}),et.next=94,se.disableWebcam(rn);case 94:(dn=se._openTelemetry)===null||dn===void 0||dn.completeSpan({span:rn,status:1,message:"Request Completed"}),Ae(),et.next=103;break;case 98:et.prev=98,et.t4=et.catch(90),(Ln=se._openTelemetry)===null||Ln===void 0||Ln.completeSpan({span:rn,status:2,message:"disableWebcam request failed ".concat(et.t4)}),(Tr=se._videosdkLogs)===null||Tr===void 0||Tr.pushLogs({logText:"Error disableWebcam request failed",logType:"ERROR",attributes:{error:et.t4.message}}),se._emitError({code:3030,message:et.t4.message});case 103:return et.abrupt("break",130);case 104:et.prev=104,Sr=fe.data,Xe=Sr.peerId,Le=Sr.state,hr=Sr.pinnedBy,Tn=(ra=se._openTelemetry)===null||ra===void 0?void 0:ra.trace({spanName:"Protoo REQ: pinStateChanged",attributes:{requestData:JSON.stringify({peerId:Xe,state:Le,pinnedBy:hr})}}),se._pinnedParticipants.has(Xe)||se._pinnedParticipants.set(Xe,{cam:!1,share:!1}),Vr=se._pinnedParticipants.get(Xe),Le.cam!=null&&(Vr.cam=Le.cam),Le.share!=null&&(Vr.share=Le.share),se._pinnedParticipants.set(Xe,Vr),se._eventEmitter.emit("PIN_STATE_CHANGED",{peerId:Xe,state:Le,pinnedBy:hr}),Vr.share==0&&Vr.cam==0&&se._pinnedParticipants.delete(Xe),(wr=se._openTelemetry)===null||wr===void 0||wr.completeSpan({span:Tn,status:1,message:"Request Completed",attributes:{_pinnedParticipants:JSON.stringify(se._pinnedParticipants)}}),Ae(),et.next=123;break;case 118:throw et.prev=118,et.t5=et.catch(104),(zn=se._openTelemetry)===null||zn===void 0||zn.completeSpan({span:Tn,status:2,message:"pinStateChanged request failed"}),(wa=se._videosdkLogs)===null||wa===void 0||wa.pushLogs({logText:"Error pinStateChanged request failed",logType:"ERROR",attributes:{error:et.t5.message}}),et.t5;case 123:return et.abrupt("break",130);case 124:return se._eventEmitter.emit("SWITCH_ROOM",fe.data),Ae(),et.abrupt("break",130);case 127:return Ae({peerId:se._peerId,statsData:se._stats}),se._stats={},et.abrupt("break",130);case 130:case"end":return et.stop()}},Je,null,[[14,37],[52,67],[74,82],[90,98],[104,118]])}));return function(Je,fe,Ae){return He.apply(this,arguments)}}()),this._protoo.on("notification",function(){var He=(0,c.Z)(n().mark(function Je(fe){var Ae,Mt,Wt,Ht,$t,zt,Xt,Lt,Et,br,Nt,er,Rr,Yr,Wr,tr,Xr,vn,Pr,cn,_r,_n,Pt,en,vt,cr,Er,qr,Zr,Hr,Xn,ua,da,Un,In,ea,pa,zr,ya,Wn,ha,ta,tn,fa,ba,Mn,Zn,Hn,Cn,rn,qn,dn,Ln,Tr,Tn,ra,wr,Sr,Xe,Le,hr,Vr,zn,wa,et,$r,Si,ps,Li,Ni,Ro,hs,gc,vc,fs,Eo,$s,yn,_c,yc,bc,wc,Sc,Rc,Gs,Zs,Ec;return n().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:_e.debug('proto "notification" event [method:%s, data:%o]',fe.method,fe.data),ze.t0=fe.method,ze.next=ze.t0==="error"?4:ze.t0==="participantMediaStateChanged"?9:ze.t0==="producerScore"?10:ze.t0==="entryRequested"?13:ze.t0==="entryResponded"?17:ze.t0==="newPeer"?23:ze.t0==="peerClosed"?30:ze.t0==="peerDisplayNameChanged"?36:ze.t0==="downlinkBwe"?40:ze.t0==="consumerClosed"?42:ze.t0==="consumerPaused"?54:ze.t0==="consumerResumed"?61:ze.t0==="consumerLayersChanged"?68:ze.t0==="consumerScore"?79:ze.t0==="dataConsumerClosed"?82:ze.t0==="activeSpeaker"?91:ze.t0==="transcriptionStateChanged"?96:ze.t0==="transcriptionText"?99:ze.t0==="recordingStateChanged"?101:ze.t0==="recordingStarted"?104:ze.t0==="recordingStopped"?106:ze.t0==="livestreamStateChanged"?108:ze.t0==="livestreamStarted"?111:ze.t0==="livestreamStopped"?113:ze.t0==="hlsStateChanged"?115:ze.t0==="hlsPlayableStateChanged"?118:ze.t0==="hlsStarted"?120:ze.t0==="hlsStopped"?123:ze.t0==="whiteboardStarted"?125:ze.t0==="whiteboardStopped"?128:ze.t0==="addCharacter"?130:ze.t0==="removeCharacter"?136:ze.t0==="characterStateChanged"?142:ze.t0==="characterMessage"?145:ze.t0==="userMessage"?147:ze.t0==="characterData"?149:ze.t0==="videoStatusChanged"?151:ze.t0==="videoSeeked"?153:ze.t0==="connectionOpen"?156:ze.t0==="connectionClose"?158:ze.t0==="connectionChatMessage"?160:ze.t0==="connectionParticipantJoined"?162:ze.t0==="connectionParticipantLeft"?164:ze.t0==="pubsubMessage"?166:ze.t0==="peerModeChanged"?168:ze.t0==="restartIce"?171:175;break;case 4:return Wt=fe.data,se._eventEmitter.emit("ERROR",Wt),(Ae=se._videosdkLogs)===null||Ae===void 0||Ae.pushLogs({logText:"Error in Meeting Session",logType:"ERROR",attributes:{error:Wt.message}}),(Mt=se._openTelemetry)===null||Mt===void 0||Mt.traceAutoComplete({spanName:"Emitted `ERROR` Event",attributes:{error:Wt.message},status:2}),ze.abrupt("break",176);case 9:try{Ht=fe.data,$t=Ht.peerId,zt=Ht.kind,Xt=Ht.newState,se._eventEmitter.emit("PARTICIPANT_MEDIA_STATE_CHANGED",{peerId:$t,kind:zt,newState:Xt}),zt=="video"&&((Lt=se._openTelemetry)===null||Lt===void 0||Lt.traceAutoComplete({spanName:"".concat($t," has ").concat(Xt?"enable":"disable"," ").concat(zt),status:1}))}catch(qs){_e.error('"newProducer" request failed:%o',qs),(Et=se._videosdkLogs)===null||Et===void 0||Et.pushLogs({logText:"Error newProducer request failed",logType:"ERROR",attributes:{error:qs.message}})}case 10:return br=fe.data,Nt=br.producerId,er=br.score,Pe.dispatch(rr(Nt,er)),ze.abrupt("break",176);case 13:return Yr=fe.data,Wr=Yr.id,tr=Yr.name,Xr=(Rr=se._openTelemetry)===null||Rr===void 0?void 0:Rr.trace({spanName:"Protoo Noti: entryRequested",span:se._joinSpan,attributes:{data:JSON.stringify({id:Wr,name:tr})}}),Wr!==se._peerId?(se._eventEmitter.emit("ENTRY_REQUESTED",{id:Wr,name:tr}),(vn=se._openTelemetry)===null||vn===void 0||vn.completeSpan({span:Xr,status:1,message:"EntryResponded Recieved"})):(Pr=se._openTelemetry)===null||Pr===void 0||Pr.completeSpan({span:Xr,status:2,message:"Entry Request Failed"}),ze.abrupt("break",176);case 17:return _r=fe.data,_n=_r.id,Pt=_r.decision,en=_r.sessionId,se._videosdkLogs=new Ur({roomId:se._roomId,peerId:se._peerId,logs:ie,observabilityJwt:we,deviceInfo:se._deviceInfo,sessionId:en,debugMode:se._debugMode}),se._eventEmitter.emit("ENTRY_RESPONDED",{id:_n,decision:Pt}),vt=(cn=se._openTelemetry)===null||cn===void 0?void 0:cn.trace({spanName:"Protoo Noti: entryResponded",attributes:{data:JSON.stringify({id:_n,decision:Pt}),sessionId:en},span:se._joinSpan}),_n===se._peerId&&Pt==="allowed"?(se.joinRoom(),(cr=se._openTelemetry)===null||cr===void 0||cr.completeSpan({span:vt,status:1,message:"EntryResponded Recieved"})):(Er=se._openTelemetry)===null||Er===void 0||Er.completeSpan({span:se._joinSpan,status:2,message:"Join Request Denied"}),ze.abrupt("break",176);case 23:qr=fe.data,Zr=Tt(Ar(Ar({},qr),{},{consumers:[],dataConsumers:[]})),Pe.dispatch(Zr),se._eventEmitter.emit(Zr.type,Zr.payload),Pe.dispatch(De({text:"".concat(qr.displayName," has joined the room")}));try{(Hr=se._openTelemetry)===null||Hr===void 0||Hr.traceAutoComplete({spanName:"Protoo Noti: newPeer ".concat(qr.displayName),attributes:{peerData:JSON.stringify(qr)}})}catch(qs){(Xn=se._videosdkLogs)===null||Xn===void 0||Xn.pushLogs({logText:"Error Protoo Noti: newPeer",logType:"ERROR",attributes:{error:qs.message}}),console.error(qs)}return ze.abrupt("break",176);case 30:return da=fe.data.peerId,Un=Gr(da),Pe.dispatch(Un),se._eventEmitter.emit(Un.type,Un.payload),(ua=se._openTelemetry)===null||ua===void 0||ua.traceAutoComplete({spanName:"Protoo Noti: peerClosed for ".concat(da)}),ze.abrupt("break",176);case 36:return In=fe.data,ea=In.peerId,pa=In.displayName,zr=In.oldDisplayName,Pe.dispatch(ft(pa,ea)),Pe.dispatch(De({text:"".concat(zr," is now ").concat(pa)})),ze.abrupt("break",176);case 40:return _e.debug("'downlinkBwe' event:%o",fe.data),ze.abrupt("break",176);case 42:if(Wn=fe.data.consumerId,ha=se._consumers.get(Wn)){ze.next=46;break}return ze.abrupt("break",176);case 46:return ha.close(),se._consumers.delete(Wn),ta=ha.appData.peerId,tn=Qr(Wn,ta),Pe.dispatch(tn),se._eventEmitter.emit(tn.type,tn.payload),(ya=se._openTelemetry)===null||ya===void 0||ya.traceAutoComplete({spanName:"Protoo Noti: consumerClosed for id ".concat(Wn),attributes:{consumerData:JSON.stringify(ha)}}),ze.abrupt("break",176);case 54:if(fa=fe.data.consumerId,ba=se._consumers.get(fa)){ze.next=58;break}return ze.abrupt("break",176);case 58:return ba.pause(),Pe.dispatch(Gt(fa,"remote")),ze.abrupt("break",176);case 61:if(Mn=fe.data.consumerId,Zn=se._consumers.get(Mn)){ze.next=65;break}return ze.abrupt("break",176);case 65:return Zn.resume(),Pe.dispatch(ut(Mn,"remote")),ze.abrupt("break",176);case 68:if(rn=fe.data,qn=rn.consumerId,dn=rn.spatialLayer,Ln=rn.temporalLayer,(Tr=se._consumers.get(qn)).currentSpatialLayer=dn,Tr.currentTemporalLayer=Ln,Tr){ze.next=74;break}return ze.abrupt("break",176);case 74:return((Hn=Tr.appData)===null||Hn===void 0||(Cn=Hn.encodings)===null||Cn===void 0?void 0:Cn.length)>1?(se._eventEmitter.emit("VIDEO_QUALITY_CHANGED",{peerId:Tr.appData.peerId,prevQuality:Tr.spatialLayers-1-Tr.currentSpatialLayer==0?"HIGH":Tr.spatialLayers-1-Tr.currentSpatialLayer==1?"MEDIUM":"LOW",currentQuality:Tr.spatialLayers-1-dn==0?"HIGH":Tr.spatialLayers-1-dn==1?"MEDIUM":"LOW"}),(Tn=se._videosdkLogs)===null||Tn===void 0||Tn.pushLogs({logText:"Consumer Peer ".concat(Tr.appData.peerId," changed to ").concat(Tr.spatialLayers-1-dn==0?"HIGH":Tr.spatialLayers-1-dn==1?"MEDIUM":"LOW",", previous quality was ").concat(Tr.spatialLayers-1-Tr.currentSpatialLayer==0?"HIGH":Tr.spatialLayers-1-Tr.currentSpatialLayer==1?"MEDIUM":"LOW"),logType:"INFO",attributes:{consumerId:qn}})):(se._eventEmitter.emit("VIDEO_QUALITY_CHANGED",{peerId:Tr.appData.peerId,prevQuality:"HIGH",currentQuality:"HIGH"}),(ra=se._videosdkLogs)===null||ra===void 0||ra.pushLogs({logText:"Consumer Peer ".concat(Tr.appData.peerId," changed to HIGH, previous quality was HIGH"),logType:"INFO",attributes:{consumerId:qn}})),Tr.currentSpatialLayer=dn,Tr.currentTemporalLayer=Ln,Pe.dispatch(_t(qn,dn,Ln)),ze.abrupt("break",176);case 79:return wr=fe.data,Sr=wr.consumerId,Xe=wr.score,Pe.dispatch(Qt(Sr,Xe)),ze.abrupt("break",176);case 82:if(Le=fe.data.dataConsumerId,hr=se._dataConsumers.get(Le)){ze.next=86;break}return ze.abrupt("break",176);case 86:return hr.close(),se._dataConsumers.delete(Le),Vr=hr.appData.peerId,Pe.dispatch(xe(Le,Vr)),ze.abrupt("break",176);case 91:return zn=fe.data.peerId,wa=ne(zn),Pe.dispatch(wa),se._eventEmitter.emit(wa.type,wa.payload),ze.abrupt("break",176);case 96:return se._eventEmitter.emit("TRANSCRIPTION_STATE_CHANGED",fe.data),(et=se._openTelemetry)===null||et===void 0||et.traceAutoComplete({spanName:"Emitted TRANSCRIPTION_STATE_CHANGED, status : ".concat(fe.data.status),attributes:{data:JSON.stringify(fe.data)},status:1}),ze.abrupt("break",176);case 99:return se._eventEmitter.emit("TRANSCRIPTION_TEXT",fe.data),ze.abrupt("break",176);case 101:return se._eventEmitter.emit("RECORDING_STATE_CHANGED",fe.data),($r=se._openTelemetry)===null||$r===void 0||$r.traceAutoComplete({spanName:"Emitted RECORDING_STATE_CHANGED, status : ".concat(fe.data.status),attributes:{data:JSON.stringify(fe.data)},status:1}),ze.abrupt("break",176);case 104:return se._eventEmitter.emit("RECORDING_STARTED",{}),ze.abrupt("break",176);case 106:return se._eventEmitter.emit("RECORDING_STOPPED",{}),ze.abrupt("break",176);case 108:return se._eventEmitter.emit("LIVESTREAM_STATE_CHANGED",fe.data),(Si=se._openTelemetry)===null||Si===void 0||Si.traceAutoComplete({spanName:"Emitted LIVESTREAM_STATE_CHANGED, status : ".concat(fe.data.status),attributes:{data:JSON.stringify(fe.data)},status:1}),ze.abrupt("break",176);case 111:return se._eventEmitter.emit("LIVESTREAM_STARTED",{}),ze.abrupt("break",176);case 113:return se._eventEmitter.emit("LIVESTREAM_STOPPED",{}),ze.abrupt("break",176);case 115:return se._eventEmitter.emit("HLS_STATE_CHANGED",fe.data),(ps=se._openTelemetry)===null||ps===void 0||ps.traceAutoComplete({spanName:"Emitted HLS_STATE_CHANGED, status : ".concat(fe.data.status),attributes:{data:JSON.stringify(fe.data)},status:1}),ze.abrupt("break",176);case 118:return fe.data.isPlayable&&(se._eventEmitter.emit("HLS_STATE_CHANGED",Ar(Ar({},fe.data),{},{status:kr.o.HLS_PLAYABLE})),(Li=se._openTelemetry)===null||Li===void 0||Li.traceAutoComplete({spanName:"Protoo Noti: hlsPlayableStateChanged",status:1})),ze.abrupt("break",176);case 120:return Ni=fe.data.downstreamUrl,se._eventEmitter.emit("HLS_STARTED",Ni),ze.abrupt("break",176);case 123:return se._eventEmitter.emit("HLS_STOPPED",{}),ze.abrupt("break",176);case 125:return Ro=fe.data,hs=Ro.state,gc=Ro.url,hs?se._eventEmitter.emit("WHITEBOARD_STARTED",{state:hs}):gc&&se._eventEmitter.emit("WHITEBOARD_STARTED",{url:gc}),ze.abrupt("break",176);case 128:return se._eventEmitter.emit("WHITEBOARD_STOPPED",{}),ze.abrupt("break",176);case 130:return fs=fe.data,Eo=Tt(Ar(Ar({},fs),{},{consumers:[],dataConsumers:[]})),Pe.dispatch(Eo),se._eventEmitter.emit("ADD_CHARACTER",fe.data),(vc=se._openTelemetry)===null||vc===void 0||vc.traceAutoComplete({spanName:"Emitted ADD_CHARACTER : ".concat(fe.data),attributes:{data:JSON.stringify(fe.data)},status:1}),ze.abrupt("break",176);case 136:return yn=fe.data.id,_c=Gr(yn),Pe.dispatch(_c),se._eventEmitter.emit("REMOVE_CHARACTER",fe.data),($s=se._openTelemetry)===null||$s===void 0||$s.traceAutoComplete({spanName:"Emitted REMOVE_CHARACTER : ".concat(fe.data),attributes:{data:JSON.stringify(fe.data)},status:1}),ze.abrupt("break",176);case 142:return se._eventEmitter.emit("CHARACTER_STATE_CHANGED",fe.data),(yc=se._openTelemetry)===null||yc===void 0||yc.traceAutoComplete({spanName:"Emitted CHARACTER_STATE_CHANGED, status : ".concat(fe.data.status),attributes:{data:JSON.stringify(fe.data)},status:1}),ze.abrupt("break",176);case 145:return se._eventEmitter.emit("CHARACTER_MESSAGE",fe.data),ze.abrupt("break",176);case 147:return se._eventEmitter.emit("USER_MESSAGE",fe.data),ze.abrupt("break",176);case 149:return se._eventEmitter.emit("CHARACTER_DATA",fe.data),ze.abrupt("break",176);case 151:return se._eventEmitter.emit("VIDEO_STATE_CHANGED",fe.data),ze.abrupt("break",176);case 153:return bc=fe.data.currentTime,se._eventEmitter.emit("VIDEO_SEEKED",{currentTime:bc}),ze.abrupt("break",176);case 156:return se._eventEmitter.emit("CONNECTION_OPEN",fe.data),ze.abrupt("break",176);case 158:return se._eventEmitter.emit("CONNECTION_CLOSE",fe.data),ze.abrupt("break",176);case 160:return se._eventEmitter.emit("CONNECTION_CHAT_MESSAGE",fe.data),ze.abrupt("break",176);case 162:return se._eventEmitter.emit("CONNECTION_PARTICIPANT_JOIN",fe.data),ze.abrupt("break",176);case 164:return se._eventEmitter.emit("CONNECTION_PARTICIPANT_LEFT",fe.data),ze.abrupt("break",176);case 166:return se._eventEmitter.emit("PUBSUB_MESSAGE",fe.data),ze.abrupt("break",176);case 168:return se._eventEmitter.emit("PEER_MODE_CHANGED",fe.data),(wc=se._openTelemetry)===null||wc===void 0||wc.traceAutoComplete({spanName:"Emitted PEER_MODE_CHANGED",attributes:{data:JSON.stringify(fe.data)},status:1}),ze.abrupt("break",176);case 171:return Rc=fe.data,Gs=Rc.transportId,Zs=Rc.iceParameters,Ec=(Sc=se._openTelemetry)===null||Sc===void 0?void 0:Sc.trace({spanName:"Protoo Noti: restartIce for transportId :".concat(Gs),attributes:{iceParameters:JSON.stringify(Zs)}}),se.handleRemoteRestartIce({transportId:Gs,iceParameters:Zs,internalSpan:Ec}),ze.abrupt("break",176);case 175:_e.error('unknown protoo notification.method "%s"',fe.method);case 176:case"end":return ze.stop()}},Je)}));return function(Je){return He.apply(this,arguments)}}());case 27:case"end":return Ye.stop()}},q,this)})),function(){return Al.apply(this,arguments)})},{key:"requestEntry",value:(Nl=(0,c.Z)(n().mark(function q(){var W,B,U;return n().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return U=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"Requesting Entry",span:this._joinSpan}),H.next=3,this._protoo.request("requestEntry",{name:this._displayName});case 3:(B=this._openTelemetry)===null||B===void 0||B.completeSpan({span:U,status:1,message:"Entry Requested Successfully"});case 4:case"end":return H.stop()}},q,this)})),function(){return Nl.apply(this,arguments)})},{key:"respondEntry",value:(Ll=(0,c.Z)(n().mark(function q(W,B){var U,H,re;return n().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return re=(U=this._openTelemetry)===null||U===void 0?void 0:U.trace({spanName:"Responding Entry",attributes:{peerId:W,decision:B},span:this._joinSpan}),ie.next=3,this._protoo.request("respondEntry",{id:W,decision:B});case 3:(H=this._openTelemetry)===null||H===void 0||H.completeSpan({message:"Entry Responded Successfully",span:re,status:1});case 4:case"end":return ie.stop()}},q,this)})),function(q,W){return Ll.apply(this,arguments)})},{key:"startTranscription",value:(Ml=(0,c.Z)(n().mark(function q(W){var B,U,H,re,ie;return n().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return _e.debug("startTranscription()"),H=(B=this._openTelemetry)===null||B===void 0?void 0:B.trace({spanName:"startTranscription() Start",attributes:{config:W?JSON.stringify(W):"config Not Specify"}}),we.prev=2,we.next=5,this._protoo.request("startTranscription",{config:W});case 5:we.next=13;break;case 7:we.prev=7,we.t0=we.catch(2),_e.error("startTranscription() | failed:%o",we.t0),(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:H,status:2,message:"startTranscription() failed"}),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Error startTranscription() failed",logType:"ERROR",attributes:{error:we.t0.message}}),this._emitError({code:4031,message:we.t0.message});case 13:(U=this._openTelemetry)===null||U===void 0||U.completeSpan({span:H,status:1,message:"startTranscription() End"});case 14:case"end":return we.stop()}},q,this,[[2,7]])})),function(q){return Ml.apply(this,arguments)})},{key:"stopTranscription",value:(Il=(0,c.Z)(n().mark(function q(){var W,B,U,H,re;return n().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return _e.debug("stopTranscription()"),U=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"stopTranscription() Start"}),ie.prev=2,ie.next=5,this._protoo.request("stopTranscription",{});case 5:ie.next=12;break;case 7:ie.prev=7,ie.t0=ie.catch(2),(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:U,status:2,message:"stopTranscription() failed"}),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error stopTranscription() failed",logType:"ERROR",attributes:{error:ie.t0.message}}),this._emitError({code:4032,message:ie.t0.message});case 12:(B=this._openTelemetry)===null||B===void 0||B.completeSpan({span:U,status:1,message:"stopTranscription() End"});case 13:case"end":return ie.stop()}},q,this,[[2,7]])})),function(){return Il.apply(this,arguments)})},{key:"startRecording",value:(mc=(0,c.Z)(n().mark(function q(W,B,U,H){var re,ie,we,me,it;return n().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return _e.debug("startRecording()"),we=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"startRecording() Start",attributes:{webhookUrl:W||"webhookUrl Not Specify",awsDirPath:B||"awsDirPath Not Specify",config:U?JSON.stringify(U):"config Not Specify",transcription:H?JSON.stringify(H):"transcription Not Specify"}}),Ue.prev=2,Ue.next=5,this._protoo.request("startRecording",{webhookUrl:W,awsDirPath:B,config:U,transcription:H});case 5:Ue.next=13;break;case 7:Ue.prev=7,Ue.t0=Ue.catch(2),_e.error("startRecording() | failed:%o",Ue.t0),(me=this._openTelemetry)===null||me===void 0||me.completeSpan({span:we,status:2,message:"startRecording() failed"}),(it=this._videosdkLogs)===null||it===void 0||it.pushLogs({logText:"Error startRecording() failed",logType:"ERROR",attributes:{error:Ue.t0.message}}),this._emitError({code:4011,message:Ue.t0.message});case 13:(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:we,status:1,message:"startRecording() End"});case 14:case"end":return Ue.stop()}},q,this,[[2,7]])})),function(q,W,B,U){return mc.apply(this,arguments)})},{key:"stopRecording",value:(fc=(0,c.Z)(n().mark(function q(){var W,B,U,H,re;return n().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:if(!this._closed){ie.next=2;break}return ie.abrupt("return");case 2:return _e.debug("stopRecording()"),U=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"stopRecording() Start"}),ie.prev=4,ie.next=7,this._protoo.request("stopRecording",{});case 7:ie.next=14;break;case 9:ie.prev=9,ie.t0=ie.catch(4),(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:U,status:2,message:"stopRecording() failed"}),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error stopRecording() failed",logType:"ERROR",attributes:{error:ie.t0.message}}),this._emitError({code:4012,message:ie.t0.message});case 14:(B=this._openTelemetry)===null||B===void 0||B.completeSpan({span:U,status:1,message:"stopRecording() End"});case 15:case"end":return ie.stop()}},q,this,[[4,9]])})),function(){return fc.apply(this,arguments)})},{key:"startLivestream",value:(Vs=(0,c.Z)(n().mark(function q(W,B){var U,H,re,ie,we;return n().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return _e.debug("startLivestream()"),re=(U=this._openTelemetry)===null||U===void 0?void 0:U.trace({spanName:"startLivestream() Start",attributes:{outputs:W?JSON.stringify(W):"outputs Not Specify",config:B?JSON.stringify(B):"config Not Specify"}}),me.prev=2,me.next=5,this._protoo.request("startLivestream",{outputs:W,config:B});case 5:me.next=12;break;case 7:me.prev=7,me.t0=me.catch(2),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:re,status:1,message:"startLivestream() End"}),(we=this._videosdkLogs)===null||we===void 0||we.pushLogs({logText:"Error startLivestream() failed",logType:"ERROR",attributes:{error:me.t0.message}}),this._emitError({code:4013,message:me.t0.message});case 12:(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:re,status:1,message:"startLivestream() End"});case 13:case"end":return me.stop()}},q,this,[[2,7]])})),function(q,W){return Vs.apply(this,arguments)})},{key:"stopLivestream",value:(Bn=(0,c.Z)(n().mark(function q(){var W,B,U,H,re;return n().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return _e.debug("stopLivestream()"),U=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"stopLivestream() Start"}),ie.prev=2,ie.next=5,this._protoo.request("stopLivestream",{});case 5:ie.next=12;break;case 7:ie.prev=7,ie.t0=ie.catch(2),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error stopLivestream() failed",logType:"ERROR",attributes:{error:ie.t0.message}}),(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:U,status:2,message:"Error stopLivestream() failed"}),this._emitError({code:4014,message:ie.t0.message});case 12:(B=this._openTelemetry)===null||B===void 0||B.completeSpan({span:U,status:1,message:"stopLivestream() End"});case 13:case"end":return ie.stop()}},q,this,[[2,7]])})),function(){return Bn.apply(this,arguments)})},{key:"startHls",value:(Rt=(0,c.Z)(n().mark(function q(W,B){var U,H,re,ie,we;return n().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:return W=W||{},B=B||{},_e.debug("startHls()"),re=(U=this._openTelemetry)===null||U===void 0?void 0:U.trace({spanName:"startHls() Start",attributes:{config:W?JSON.stringify(W):"config Not Specify",transcription:B?JSON.stringify(B):"transcription Not Specify"}}),me.prev=4,me.next=7,this._protoo.request("startHls",{config:W,transcription:B});case 7:me.next=15;break;case 9:me.prev=9,me.t0=me.catch(4),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Error startHls() failed",logType:"ERROR",attributes:{error:me.t0.message}}),(we=this._openTelemetry)===null||we===void 0||we.completeSpan({span:re,status:2,message:"Error startHls() failed"}),this._emitError({code:4016,message:me.t0.message}),_e.error("startHls() | failed:%o",me.t0);case 15:(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:re,status:1,message:"startHlsSpan() End"});case 16:case"end":return me.stop()}},q,this,[[4,9]])})),function(q,W){return Rt.apply(this,arguments)})},{key:"stopHls",value:(hc=(0,c.Z)(n().mark(function q(){var W,B,U,H,re;return n().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return _e.debug("stopHls()"),U=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"stopHls() Start"}),ie.prev=2,ie.next=5,this._protoo.request("stopHls",{});case 5:ie.next=12;break;case 7:ie.prev=7,ie.t0=ie.catch(2),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error stopHls() failed",logType:"ERROR",attributes:{error:ie.t0.message}}),(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:U,status:2,message:"Error stopHls() failed"}),this._emitError({code:4017,message:ie.t0.message});case 12:(B=this._openTelemetry)===null||B===void 0||B.completeSpan({span:U,status:1,message:"stopHls() End"});case 13:case"end":return ie.stop()}},q,this,[[2,7]])})),function(){return hc.apply(this,arguments)})},{key:"startWhiteboard",value:(Vt=(0,c.Z)(n().mark(function q(){var W,B,U,H;return n().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return _e.debug("startWhiteboard()"),U=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"startWhiteboard() Start"}),re.prev=2,re.next=5,this._protoo.request("startWhiteboard",{version:"v2"});case 5:re.next=12;break;case 7:re.prev=7,re.t0=re.catch(2),_e.error("startWhiteboard() | failed:%o",re.t0),(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:U,status:2,message:"Error startWhiteboard() failed"}),this._emitError({code:3021,message:re.t0.message});case 12:(B=this._openTelemetry)===null||B===void 0||B.completeSpan({span:U,status:1,message:"startWhiteboard() End"});case 13:case"end":return re.stop()}},q,this,[[2,7]])})),function(){return Vt.apply(this,arguments)})},{key:"stopWhiteboard",value:(pc=(0,c.Z)(n().mark(function q(){var W,B,U,H;return n().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return _e.debug("stopWhiteboard()"),U=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"stopWhiteboard() Start"}),re.prev=2,re.next=5,this._protoo.request("stopWhiteboard",{});case 5:re.next=12;break;case 7:re.prev=7,re.t0=re.catch(2),_e.error("stopWhiteboard() | failed:%o",re.t0),(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:U,status:2,message:"Error stopWhiteboard() failed"}),this._emitError({code:3022,message:re.t0.message});case 12:(B=this._openTelemetry)===null||B===void 0||B.completeSpan({span:U,status:1,message:"stopWhiteboard() End"});case 13:case"end":return re.stop()}},q,this,[[2,7]])})),function(){return pc.apply(this,arguments)})},{key:"joinCharacter",value:(St=(0,c.Z)(n().mark(function q(W){var B,U,H,re,ie;return n().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return _e.debug("joinCharacter()"),H=(B=this._openTelemetry)===null||B===void 0?void 0:B.trace({spanName:"joinCharacter() Start",attributes:{config:W?JSON.stringify(W):"config Not Specify"}}),we.prev=2,we.next=5,this._protoo.request("joinCharacter",{config:W});case 5:return we.abrupt("return",we.sent);case 8:we.prev=8,we.t0=we.catch(2),_e.error("joinCharacter() | failed:%o",we.t0),(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:H,status:2,message:"joinCharacter() failed"}),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Error joinCharacter() failed",logType:"ERROR",attributes:{error:we.t0.message}}),this._emitError({code:4033,message:we.t0.message});case 14:return(U=this._openTelemetry)===null||U===void 0||U.completeSpan({span:H,status:1,message:"joinCharacter() End"}),we.abrupt("return",!1);case 16:case"end":return we.stop()}},q,this,[[2,8]])})),function(q){return St.apply(this,arguments)})},{key:"removeCharacter",value:(ue=(0,c.Z)(n().mark(function q(W){var B,U,H,re,ie;return n().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return _e.debug("removeCharacter()"),H=(B=this._openTelemetry)===null||B===void 0?void 0:B.trace({spanName:"removeCharacter() Start"}),we.prev=2,we.next=5,this._protoo.request("leaveCharacter",{config:W});case 5:we.next=14;break;case 7:return we.prev=7,we.t0=we.catch(2),_e.error("removeCharacter() | failed:%o",we.t0),(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:H,status:2,message:"removeCharacter() failed"}),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Error removeCharacter() failed",logType:"ERROR",attributes:{error:we.t0.message}}),this._emitError({code:4034,message:we.t0.message}),we.abrupt("return",!1);case 14:return(U=this._openTelemetry)===null||U===void 0||U.completeSpan({span:H,status:1,message:"removeCharacter() End"}),we.abrupt("return",!0);case 16:case"end":return we.stop()}},q,this,[[2,7]])})),function(q){return ue.apply(this,arguments)})},{key:"sendCharacterMessage",value:(dc=(0,c.Z)(n().mark(function q(W){var B,U;return n().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return B=W.interactionId,U=W.text,_e.debug("sendCharacterMessage()"),H.prev=2,H.next=5,this._protoo.request("sendCharacterMessage",{interactionId:B,text:U});case 5:H.next=11;break;case 7:H.prev=7,H.t0=H.catch(2),_e.error("sendCharacterMessage() | failed:%o",H.t0),this._emitError({code:4035,message:H.t0.message});case 11:case"end":return H.stop()}},q,this,[[2,7]])})),function(q){return dc.apply(this,arguments)})},{key:"interruptCharacter",value:(So=(0,c.Z)(n().mark(function q(W){var B;return n().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return B=W.interactionId,_e.debug("interruptCharacter()"),U.prev=2,U.next=5,this._protoo.request("interruptCharacter",{interactionId:B});case 5:U.next=11;break;case 7:U.prev=7,U.t0=U.catch(2),_e.error("interruptCharacter() | failed:%o",U.t0),this._emitError({code:4036,message:U.t0.message});case 11:case"end":return U.stop()}},q,this,[[2,7]])})),function(q){return So.apply(this,arguments)})},{key:"pinStateChange",value:(uc=(0,c.Z)(n().mark(function q(W){var B,U,H,re;return n().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return U=W.peerId,H=W.state,(B=this._openTelemetry)===null||B===void 0||B.traceAutoComplete({spanName:"Pin state Change for ".concat(U),attributes:{state:H?JSON.stringify(H):null},status:1}),ie.prev=2,ie.next=5,this._protoo.request("pinStateChanged",{peerId:U,state:H});case 5:ie.next=11;break;case 7:ie.prev=7,ie.t0=ie.catch(2),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error pinStateChange() failed",logType:"ERROR",attributes:{error:ie.t0.message}}),_e.error("pinStateChange() | failed");case 11:case"end":return ie.stop()}},q,this,[[2,7]])})),function(q){return uc.apply(this,arguments)})},{key:"startVideo",value:(di=(0,c.Z)(n().mark(function q(W){var B,U,H;return n().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return U=W.link,_e.debug("startVideo()"),(B=this._videosdkLogs)===null||B===void 0||B.pushLogs({logText:"startVideo() Calling",logType:"INFO"}),re.prev=3,re.next=6,this._protoo.request("startVideo",{link:U});case 6:re.next=13;break;case 8:re.prev=8,re.t0=re.catch(3),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error startVideo() failed",logType:"ERROR",attributes:{error:re.t0.message}}),_e.error("startVideo() | failed:%o",re.t0),this._emitError({code:3023,message:re.t0.message});case 13:case"end":return re.stop()}},q,this,[[3,8]])})),function(q){return di.apply(this,arguments)})},{key:"stopVideo",value:(la=(0,c.Z)(n().mark(function q(){var W,B;return n().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return _e.debug("stopVideo()"),(W=this._videosdkLogs)===null||W===void 0||W.pushLogs({logText:"stopVideo() Calling",logType:"INFO"}),U.prev=2,U.next=5,this._protoo.request("stopVideo",{});case 5:U.next=12;break;case 7:U.prev=7,U.t0=U.catch(2),(B=this._videosdkLogs)===null||B===void 0||B.pushLogs({logText:"Error stopVideo() failed",logType:"ERROR",attributes:{error:U.t0.message}}),_e.error("stopVideo() | failed:%o",U.t0),this._emitError({code:3024,message:U.t0.message});case 12:case"end":return U.stop()}},q,this,[[2,7]])})),function(){return la.apply(this,arguments)})},{key:"pauseVideo",value:(kn=(0,c.Z)(n().mark(function q(W){return n().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return _e.debug("pauseVideo()"),B.prev=1,B.next=4,this._protoo.request("pauseVideo",{currentTime:W});case 4:B.next=10;break;case 6:B.prev=6,B.t0=B.catch(1),_e.error("pauseVideo() | failed:%o",B.t0),this._emitError({code:3025,message:B.t0.message});case 10:case"end":return B.stop()}},q,this,[[1,6]])})),function(q){return kn.apply(this,arguments)})},{key:"resumeVideo",value:(wo=(0,c.Z)(n().mark(function q(){return n().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return _e.debug("resumeVideo()"),W.prev=1,W.next=4,this._protoo.request("resumeVideo",{});case 4:W.next=10;break;case 6:W.prev=6,W.t0=W.catch(1),_e.error("resumeVideo() | failed:%o",W.t0),this._emitError({code:3026,message:W.t0.message});case 10:case"end":return W.stop()}},q,this,[[1,6]])})),function(){return wo.apply(this,arguments)})},{key:"seekVideo",value:(bo=(0,c.Z)(n().mark(function q(W){return n().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return _e.debug("seekVideo()"),B.prev=1,B.next=4,this._protoo.request("seekVideo",{currentTime:W});case 4:B.next=10;break;case 6:B.prev=6,B.t0=B.catch(1),_e.error("seekVideo() | failed:%o",B.t0),this._emitError({code:3031,message:B.t0.message});case 10:case"end":return B.stop()}},q,this,[[1,6]])})),function(q){return bo.apply(this,arguments)})},{key:"enablePeerMic",value:(lc=(0,c.Z)(n().mark(function q(W){var B,U;return n().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return(B=this._openTelemetry)===null||B===void 0||B.traceAutoComplete({spanName:"Enabling peer ".concat(W," Mic"),status:1}),_e.debug("enablePeerMic()"),H.prev=2,H.next=5,this._protoo.request("enablePeerMic",{peerId:W});case 5:H.next=11;break;case 7:H.prev=7,H.t0=H.catch(2),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"Error enablePeerMic() failed",logType:"ERROR",attributes:{error:H.t0.message}}),_e.error("enablePeerMic() | failed:%o",H.t0);case 11:case"end":return H.stop()}},q,this,[[2,7]])})),function(q){return lc.apply(this,arguments)})},{key:"disablePeerMic",value:(zs=(0,c.Z)(n().mark(function q(W){var B,U;return n().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return(B=this._openTelemetry)===null||B===void 0||B.traceAutoComplete({spanName:"Disabling peer ".concat(W," Mic"),status:1}),_e.debug("disablePeerMic()"),H.prev=2,H.next=5,this._protoo.request("disablePeerMic",{peerId:W});case 5:H.next=11;break;case 7:H.prev=7,H.t0=H.catch(2),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"Error disablePeerMic() failed",logType:"ERROR",attributes:{error:H.t0.message}}),_e.error("disablePeerMic() | failed:%o",H.t0);case 11:case"end":return H.stop()}},q,this,[[2,7]])})),function(q){return zs.apply(this,arguments)})},{key:"consumeWebcamStreams",value:(Dl=(0,c.Z)(n().mark(function q(W){var B,U;return n().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!this._closed){H.next=2;break}return H.abrupt("return");case 2:return _e.debug("consumeWebcamStreams()"),(B=this._videosdkLogs)===null||B===void 0||B.pushLogs({logText:"consumeWebcamStreams() Calling",logType:"INFO",attributes:{peerId:W}}),H.prev=4,H.next=7,this._protoo.request("consumeVideoStreams",{peerId:W});case 7:H.next=13;break;case 9:H.prev=9,H.t0=H.catch(4),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"Error consumeWebcamStreams() failed",logType:"ERROR",attributes:{error:H.t0.message}}),_e.error("consumeWebcamStreams() | failed:%o",H.t0);case 13:case"end":return H.stop()}},q,this,[[4,9]])})),function(q){return Dl.apply(this,arguments)})},{key:"consumeMicStreams",value:(vr=(0,c.Z)(n().mark(function q(W){var B,U;return n().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return _e.debug("consumeMicStreams()"),(B=this._videosdkLogs)===null||B===void 0||B.pushLogs({logText:"consumeMicStreams() Calling",logType:"INFO",attributes:{peerId:W}}),H.prev=2,H.next=5,this._protoo.request("consumeAudioStreams",{peerId:W});case 5:H.next=11;break;case 7:H.prev=7,H.t0=H.catch(2),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"Error consumeMicStreams() failed",logType:"ERROR",attributes:{error:H.t0.message}}),_e.error("consumeMicStreams() | failed:%o",H.t0);case 11:case"end":return H.stop()}},q,this,[[2,7]])})),function(q){return vr.apply(this,arguments)})},{key:"stopConsumingMicStreams",value:(ui=(0,c.Z)(n().mark(function q(W){var B,U;return n().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!this._closed){H.next=2;break}return H.abrupt("return");case 2:return _e.debug("stopConsumingAudioStreams()"),H.prev=3,H.next=6,this._protoo.request("stopConsumingAudioStreams",{peerId:W});case 6:(B=this._videosdkLogs)===null||B===void 0||B.pushLogs({logText:"stopConsumingAudioStreams() Calling",logType:"INFO",attributes:{peerId:W}}),H.next=13;break;case 9:H.prev=9,H.t0=H.catch(3),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"Error stopConsumingMicStreams() failed",logType:"ERROR",attributes:{error:H.t0.message}}),_e.error("stopConsumingMicStreams() | failed:%o",H.t0);case 13:case"end":return H.stop()}},q,this,[[3,9]])})),function(q){return ui.apply(this,arguments)})},{key:"stopConsumingWebcamStreams",value:(yo=(0,c.Z)(n().mark(function q(W){var B,U;return n().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return _e.debug("stopConsumingWebcamStreams()"),(B=this._videosdkLogs)===null||B===void 0||B.pushLogs({logText:"stopConsumingWebcamStreams() Calling",logType:"INFO",attributes:{peerId:W}}),H.prev=2,H.next=5,this._protoo.request("stopConsumingVideoStreams",{peerId:W});case 5:H.next=11;break;case 7:H.prev=7,H.t0=H.catch(2),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"Error stopConsumingWebcamStreams() failed",logType:"ERROR",attributes:{error:H.t0.message}}),_e.error("stopConsumingWebcamStreams() | failed:%o",H.t0);case 11:case"end":return H.stop()}},q,this,[[2,7]])})),function(q){return yo.apply(this,arguments)})},{key:"changeMode",value:(Jr=(0,c.Z)(n().mark(function q(W){var B,U,H,re,ie,we,me,it,Ue,rt,se,Ye,He,Je,fe,Ae,Mt,Wt,Ht,$t,zt,Xt,Lt,Et,br,Nt,er,Rr,Yr,Wr=this;return n().wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:if(U=(B=this._openTelemetry)===null||B===void 0?void 0:B.trace({spanName:"changeMode() Calling with mode : ".concat(W)}),H=this._mode,tr.prev=2,H!==W){tr.next=7;break}throw(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:U,status:2,message:"changeMode() Ending"}),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"You are already in ".concat(W," mode"),logType:"INFO"}),new Error("You are already in ".concat(W," mode"));case 7:if(this._mode=W,W!==ir.S.CONFERENCE){tr.next=39;break}return this._consume=!0,this._produce=!0,this._mediasoupDevice=new v.Device({handlerName:this._handlerName}),tr.next=14,this._protoo.request("getRouterRtpCapabilities");case 14:return it=tr.sent,this._deviceInfo.sdkType!="react-native"?navigator.userAgent.indexOf("Firefox")&&(it.headerExtensions=(Ue=it.headerExtensions)===null||Ue===void 0?void 0:Ue.filter(function(Xr){return Xr.uri!="urn:3gpp:video-orientation"})):it.headerExtensions=(rt=it.headerExtensions)===null||rt===void 0?void 0:rt.filter(function(Xr){return Xr.uri!="urn:3gpp:video-orientation"}),tr.next=18,this._mediasoupDevice.load({routerRtpCapabilities:it});case 18:if(!this._produce){tr.next=23;break}return tr.next=21,this._protoo.request("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!0,consuming:!1,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 21:se=tr.sent,this.createProducerTransport(se,U);case 23:if(!this._consume){tr.next=30;break}return tr.next=26,this._protoo.request("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!1,consuming:!0,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 26:Ye=tr.sent,He=Ye.id,Je=Ye.iceParameters,fe=Ye.iceCandidates,Ae=Ye.dtlsParameters,Mt=Ye.sctpParameters,this._recvTransport=this._mediasoupDevice.createRecvTransport({id:He,iceParameters:Je,iceCandidates:fe,dtlsParameters:Ae,sctpParameters:Mt,iceServers:this._iceServers}),this._recvTransport.on("connect",function(Xr,vn,Pr){var cn=Xr.dtlsParameters;Wr._protoo.request("connectWebRtcTransport",{transportId:Wr._recvTransport.id,dtlsParameters:cn}).then(vn).catch(Pr)});case 30:return(we=this._openTelemetry)===null||we===void 0||we.traceAutoComplete({spanName:"Sending changeMode request to server",span:U,status:1}),tr.next=33,this._protoo.request("changeMode",{mode:W});case 33:this._produce&&(Pe.dispatch(Q({canSendMic:this._mediasoupDevice.canProduce("audio"),canSendWebcam:this._mediasoupDevice.canProduce("video")})),this._micEnabled&&this.enableMic(this.customMicrophoneAudioTrack),Wt=N(),this._webcamEnabled&&(!Wt||Wt.webcamEnabled||this._externalVideo)&&this.enableWebcam(this.customCameraVideoTrack,U),this.enableChatDataProducer()),window.SHOW_INFO&&(Ht=Pe.getState(),$t=Ht.me,Pe.dispatch(ee($t.id))),(me=this._openTelemetry)===null||me===void 0||me.traceAutoComplete({spanName:"Emitting PEER_MODE_CHANGED for Peer : ".concat(this._peerId," "),span:U,status:1}),this._eventEmitter.emit("PEER_MODE_CHANGED",{peerId:this._peerId,mode:"CONFERENCE"}),tr.next=53;break;case 39:if(W!==ir.S.VIEWER){tr.next=53;break}return(zt=this._openTelemetry)===null||zt===void 0||zt.traceAutoComplete({spanName:"Sending changeMode request to server",span:U,status:1}),tr.next=43,this._protoo.request("changeMode",{mode:W});case 43:this._consume=!1,this._produce=!1,this._dataConsumers.clear(),er=(Xt=this._openTelemetry)===null||Xt===void 0?void 0:Xt.trace({spanName:"Closing Trasnport",span:U}),(Lt=this._sendTransport)===null||Lt===void 0||Lt.close(),this._sendTransport=null,(Et=this._recvTransport)===null||Et===void 0||Et.close(),this._recvTransport=null,(br=this._openTelemetry)===null||br===void 0||br.completeSpan({span:er,status:1,message:"Closed Trasnport"}),(Nt=this._openTelemetry)===null||Nt===void 0||Nt.completeSpan({span:er,status:1,message:"changeMode() Ending"});case 53:tr.next=59;break;case 55:tr.prev=55,tr.t0=tr.catch(2),(Rr=this._videosdkLogs)===null||Rr===void 0||Rr.pushLogs({logText:"Error changeMode(".concat(W,") | failed"),logType:"ERROR",attributes:{error:tr.t0.message}}),(Yr=this._openTelemetry)===null||Yr===void 0||Yr.completeSpan({span:U,status:2,message:"changeMode(".concat(W,") | failed")});case 59:case"end":return tr.stop()}},q,this,[[2,55]])})),function(q){return Jr.apply(this,arguments)})},{key:"enablePeerWebcam",value:(Hs=(0,c.Z)(n().mark(function q(W){var B,U;return n().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return(B=this._openTelemetry)===null||B===void 0||B.traceAutoComplete({spanName:"Enabling peer ".concat(W," Webcam"),status:1}),_e.debug("enablePeerWebcam()"),H.prev=2,H.next=5,this._protoo.request("enablePeerWebcam",{peerId:W});case 5:H.next=11;break;case 7:H.prev=7,H.t0=H.catch(2),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"Error enablePeerWebcam | failed",logType:"ERROR",attributes:{error:H.t0.message}}),_e.error("enablePeerWebcam() | failed:%o",H.t0);case 11:case"end":return H.stop()}},q,this,[[2,7]])})),function(q){return Hs.apply(this,arguments)})},{key:"disablePeerWebcam",value:(Jt=(0,c.Z)(n().mark(function q(W){var B,U;return n().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return(B=this._openTelemetry)===null||B===void 0||B.traceAutoComplete({spanName:"Disabling peer ".concat(W," Webcam"),status:1}),_e.debug("disablePeerWebcam()"),H.prev=2,H.next=5,this._protoo.request("disablePeerWebcam",{peerId:W});case 5:H.next=10;break;case 7:H.prev=7,H.t0=H.catch(2),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"Error disablePeerWebcam | failed",logType:"ERROR",attributes:{error:H.t0.message}});case 10:case"end":return H.stop()}},q,this,[[2,7]])})),function(q){return Jt.apply(this,arguments)})},{key:"getMicStats",value:function(q){var W=this;if(this._micProducer){var B=0;q.onStatsCollected=function(U){var H;W._stats.producerStats||(W._stats.producerStats={}),W._stats.producerStats.audio||(W._stats.producerStats.audio=[]),W._micProducer&&(W._latestStats[(H=W._micProducer)===null||H===void 0?void 0:H.id]=[]),U.audio.forEach(function(re){var ie;W._micProducer&&W._latestStats[(ie=W._micProducer)===null||ie===void 0?void 0:ie.id].push(re)}),B%5==0&&W._micProducer!=null&&W._stats.producerStats.audio.push(Ar({timestamp:new Date},W._latestStats[W._micProducer.id]?W._latestStats[W._micProducer.id][0]:{})),B++}}}},{key:"enableMic",value:(ca=(0,c.Z)(n().mark(function q(){var W,B,U,H,re,ie,we,me,it,Ue,rt,se,Ye,He,Je,fe,Ae,Mt,Wt,Ht,$t,zt,Xt,Lt,Et,br,Nt,er,Rr,Yr,Wr,tr,Xr,vn,Pr,cn,_r,_n,Pt,en,vt,cr,Er,qr,Zr,Hr,Xn,ua,da,Un,In,ea,pa,zr,ya,Wn,ha,ta,tn,fa,ba,Mn,Zn,Hn,Cn,rn,qn,dn,Ln,Tr,Tn,ra,wr=this,Sr=arguments;return n().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:if(ie=Sr.length>0&&Sr[0]!==void 0?Sr[0]:void 0,we=Sr.length>1&&Sr[1]!==void 0?Sr[1]:void 0,me=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"enableMic() Calling ".concat(ie?"With Custom Audio Track":"Without Custom Audio Track "),attributes:{customAudioConfig:ie?JSON.stringify(ie):"Not Specify Custom Track"},span:we||null}),_e.debug("enableMic()"),this._micEnabled=!0,!this._micProducer){Xe.next=27;break}if(rt=(it=this._openTelemetry)===null||it===void 0?void 0:it.trace({spanName:"Mic Producer found",span:me}),ie&&((se=this._openTelemetry)===null||se===void 0||se.traceAutoComplete({spanName:"Stopping customAudioTrack",span:me,status:1}),ie.getTracks().forEach(function(Le){Le.stop()})),(Ue=this._openTelemetry)===null||Ue===void 0||Ue.completeSpan({span:rt,status:1,message:"Resuming Mic Producer"}),this._micProducer.resume(),Ye=this._micProducer,!this._sendTransport){Xe.next=18;break}return Xe.next=14,this._sendTransport.produce({track:this._micProducer.track,encodings:this._micProducer._appData.encodings,codecOptions:this._micProducer._appData.codecOptions});case 14:this._micProducer=Xe.sent,this._micProducer?(Je=Ee({id:this._micProducer.id,paused:this._micProducer.paused,track:this._micProducer.track,rtpParameters:this._micProducer.rtpParameters,codec:this._micProducer.rtpParameters.codecs[0].mimeType.split("/")[1],encodings:Ye._appData.encodings,codecOptions:Ye._appData.codecOptions,instance:this._micProducer}),this._micProducer.track.getConstraints().deviceId&&(this._mic.device=this._mics.get(this._micProducer.track.getConstraints().deviceId)),Pe.dispatch(Je),this._eventEmitter.emit(Je.type,Je.payload),(He=this._openTelemetry)===null||He===void 0||He.completeSpan({span:me,status:1,message:"Enable Mic Successful"})):(fe=this._openTelemetry)===null||fe===void 0||fe.completeSpan({span:me,status:2,message:"Error in enableMic() :: micProducer null"}),Xe.next=21;break;case 18:return(Ae=this._videosdkLogs)===null||Ae===void 0||Ae.pushLogs({logText:st.H.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message,attributes:{error:"Error in enableMic() :: Transport is not setup"},logType:"ERROR",dashboardLog:!0}),this._emitError(st.H.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED),Xe.abrupt("return");case 21:return Mt=this._metrics.addNewProbe(this._micProducer,{name:"mic_producer"}),this._micProducer.observer.on("pause",function(){Mt==null||Mt.stop(),wr._latestStats[wr._micProducer.id]=[],wr._metrics.removeExistingProbe(Mt)}),this._micProducer.observer.on("close",function(){Mt==null||Mt.stop(),wr._latestStats[wr._micProducer.id]=[],wr._metrics.removeExistingProbe(Mt)}),this.getMicStats(Mt),Mt.start(),Xe.abrupt("return");case 27:if(!this._mediasoupDevice){Xe.next=36;break}if(this._mediasoupDevice.canProduce("audio")){Xe.next=34;break}return $t=this._deviceInfo.sdkType=="react-native"?st.H.ERROR_RN_MIC_ACCESS_UNAVAILABLE.message:st.H.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message,(Wt=this._videosdkLogs)===null||Wt===void 0||Wt.pushLogs({logText:$t,attributes:{error:"Error in enableMic() :: Microphone access unavailable"},logType:"ERROR",dashboardLog:!0}),_e.error("enableMic() | cannot produce audio"),(Ht=this._openTelemetry)===null||Ht===void 0||Ht.completeSpan({span:me,status:2,message:"Error in enableMic() :: ".concat($t)}),Xe.abrupt("return");case 34:Xe.next=39;break;case 36:return(zt=this._videosdkLogs)===null||zt===void 0||zt.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the mic. Please try again.",logType:"ERROR",attributes:{error:"Error in enableMic(): Something went wrong."},dashboardLog:!0}),(Xt=this._openTelemetry)===null||Xt===void 0||Xt.completeSpan({span:me,status:2,message:"Error in enableMic() :: mediasoupDevice is undefined"}),Xe.abrupt("return");case 39:if(Xe.prev=39,this._externalVideo){Xe.next=106;break}return _e.debug("enableMic() | calling getUserMedia()"),Xe.next=44,this._updateMics(me);case 44:if(this._mic.device){Xe.next=47;break}throw Wr="Whoops! No Microphone Found: We couldn't find your microphone. Is it plugged in and turned on? If so, try restarting your computer or checking your device settings. Also, ensure you're on a secure website (https://).",new Error(Wr);case 47:try{ie&&(Lt=ie.getAudioTracks()[0]).readyState=="ended"&&(Lt=null,Xr=st.H.ERROR_CUSTOM_AUDIO_TRACK_ENDED,(tr=this._videosdkLogs)===null||tr===void 0||tr.pushLogs({logText:Xr.message,logType:"INFO",attributes:{error:"In enableMic() :: Invalid Custom Track Passed"},dashboardLog:!0}),this._emitError(Xr))}catch(Le){Pr=st.H.ERROR_INVALID_CUSTOM_AUDIO_TRACK,(vn=this._videosdkLogs)===null||vn===void 0||vn.pushLogs({logText:Pr.message,logType:"INFO",attributes:{error:"In enableMic() :: Invalid Custom Track Passed"}}),this._emitError(Pr),console.log("Invalid Custom Audio Track Passed. Reverting to default Error: ".concat(Le))}if(Lt){Xe.next=104;break}return _n=(cn=this._openTelemetry)===null||cn===void 0?void 0:cn.trace({spanName:"Creating Track",span:me}),Xe.prev=50,Xe.next=53,navigator.mediaDevices.getUserMedia({audio:{deviceId:{ideal:this._mic.device.deviceId},channelCount:1,noiseSuppression:!0,echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googNoiseSuppression:!0,googNoiseSuppression2:!0,googHighpassFilter:!0}});case 53:Pt=Xe.sent,Xe.next=102;break;case 56:if(Xe.prev=56,Xe.t0=Xe.catch(50),(en=this._openTelemetry)===null||en===void 0||en.completeSpan({message:"Error in enableMic() :: ".concat(Xe.t0.message),span:_n,status:2}),Xe.t0.name!=="SecurityError"){Xe.next=67;break}Er=st.H.ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED,qr=Er.message,this._emitError(Er),(vt=this._videosdkLogs)===null||vt===void 0||vt.pushLogs({logText:qr,logType:"ERROR",attributes:{error:"Error in enableMic() :: Microphone Permission Denied or Dismissed"},dashboardLog:!0}),(cr=this._openTelemetry)===null||cr===void 0||cr.completeSpan({message:"Error in enableMic() :: occurred in creating audio track, ".concat(qr),span:me,status:2}),Xe.next=101;break;case 67:if(Xe.t0.name!=="DOMException"){Xe.next=75;break}Xn=st.H.ERROR_RN_MIC_NOT_FOUND,ua=Xn.message,this._emitError(Xn),(Zr=this._videosdkLogs)===null||Zr===void 0||Zr.pushLogs({logText:ua,logType:"ERROR",attributes:{error:"Error in enableMic() :: No Microphone Device Found"},dashboardLog:!0}),(Hr=this._openTelemetry)===null||Hr===void 0||Hr.completeSpan({message:"Error in enableMic() :: occurred in creating audio track, ".concat(ua),span:me,status:2}),Xe.next=101;break;case 75:if(!(Xe.t0 instanceof DOMException)){Xe.next=98;break}Xe.t1=Xe.t0.name,Xe.next=Xe.t1==="NotAllowedError"?79:Xe.t1==="NotReadableError"?82:Xe.t1==="NotFoundError"?85:92;break;case 79:return da=this.handleNotAllowedError(Xe.t0,this._openTelemetry,this._videosdkLogs,me,"audio"),this._emitError(da),Xe.abrupt("break",96);case 82:return Un=this.handleNotReadableError(Xe.t0,this._openTelemetry,this._videosdkLogs,me,"audio"),this._emitError(Un),Xe.abrupt("break",96);case 85:return In=st.H.ERROR_MICROPHONE_NOT_FOUND,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(In=st.H.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS),ea=In.message,this._emitError(In),(B=this._videosdkLogs)===null||B===void 0||B.pushLogs({logText:ea,logType:"ERROR",attributes:{error:"Error in enableMic() :: No Microphone Device Found"},dashboardLog:!0}),(U=this._openTelemetry)===null||U===void 0||U.completeSpan({message:"Error in enableMic() :: occurred in creating audio track, ".concat(ea),span:me,status:2}),Xe.abrupt("break",96);case 92:return pa="An error occurred in creating audio track, ".concat(Xe.t0.message),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:Xe.t0.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(pa)},dashboardLog:!0}),(re=this._openTelemetry)===null||re===void 0||re.completeSpan({message:"Error in enableMic() :: ".concat(pa),span:me,status:2}),Xe.abrupt("break",96);case 96:Xe.next=101;break;case 98:Wn="An error occurred in creating audio track, ".concat(Xe.t0.message),(zr=this._videosdkLogs)===null||zr===void 0||zr.pushLogs({logText:Xe.t0.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(Wn)},dashboardLog:!0}),(ya=this._openTelemetry)===null||ya===void 0||ya.completeSpan({message:"Error in enableMic() :: ".concat(Wn),span:me,status:2});case 101:return Xe.abrupt("return");case 102:Lt=Pt.getAudioTracks()[0],(_r=this._openTelemetry)===null||_r===void 0||_r.completeSpan({message:"Audio Track Generated",span:_n,status:1});case 104:Xe.next=110;break;case 106:return Xe.next=108,this._getExternalVideoStream();case 108:ha=Xe.sent,Lt=ha.getAudioTracks()[0].clone();case 110:if(Et=(br=this._openTelemetry)===null||br===void 0?void 0:br.trace({spanName:"Generating Producer Configuration",span:me}),ta={opusStereo:1,opusDtx:1},ie&&(tn=ie.encoderConfig?nr.v.audioProfiles[ie.encoderConfig]:nr.v.audioProfiles.speech_standard,ta={opusStereo:tn.stereo?1:0,opusFec:tn.fec?1:0,opusDtx:tn.dtx?1:0,opusMaxPlaybackRate:tn.maxPlaybackRate,opusPtime:tn.packetTime}),ba={encodings:fa=[{networkPriority:"high"}],codecOptions:ta},(Nt=this._openTelemetry)===null||Nt===void 0||Nt.traceAutoComplete({spanName:"Generated AppData",span:Et,attributes:{appData:JSON.stringify(ba)},status:1}),(er=this._openTelemetry)===null||er===void 0||er.completeSpan({span:Et,status:1,message:"Producer Configuration Generated"}),Et=(Rr=this._openTelemetry)===null||Rr===void 0?void 0:Rr.trace({spanName:"Creating Mic Producer",span:me}),(Yr=Lt)===null||Yr===void 0||Yr.addEventListener("ended",function(){console.log("Track Ended Error");try{var Le,hr,Vr=wr._deviceInfo.sdkType=="react-native"?st.H.ERROR_RN_MIC_TRACK_ENDED:st.H.ERROR_MICROPHONE_TRACK_ENDED;(Le=wr._videosdkLogs)===null||Le===void 0||Le.pushLogs({logText:Vr.message,logType:"ERROR",attributes:{error:"Error Track Ended :: ".concat(Vr.message)},dashboardLog:!0}),(hr=wr._openTelemetry)===null||hr===void 0||hr.traceAutoComplete({spanName:"this._micProducer trackended or Microphone disconnected!",span:me,message:Vr.message,status:2}),Pe.dispatch(De({type:"error",text:"Microphone disconnected!"})),wr.disableMic(!0,me).catch(function(){})}catch(zn){console.error(zn)}}),!this._sendTransport){Xe.next=126;break}return Xe.next=123,this._sendTransport.produce({track:Lt,encodings:fa,codecOptions:ta,appData:ba});case 123:this._micProducer=Xe.sent,Xe.next=129;break;case 126:return(Mn=this._videosdkLogs)===null||Mn===void 0||Mn.pushLogs({logText:st.H.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message,attributes:{error:"Error in enableMic() :: Transport is not setup"},logType:"ERROR",dashboardLog:!0}),this._emitError(st.H.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED),Xe.abrupt("return");case 129:this._micProducer?(Lt.getConstraints().deviceId&&(this._mic.device=this._mics.get(Lt.getConstraints().deviceId)),Cn=Ee({id:this._micProducer.id,paused:this._micProducer.paused,track:this._micProducer.track,rtpParameters:this._micProducer.rtpParameters,codec:this._micProducer.rtpParameters.codecs[0].mimeType.split("/")[1],encodings:fa,codecOptions:ta,instance:this._micProducer}),Pe.dispatch(Cn),this._eventEmitter.emit(Cn.type,Cn.payload),(rn=this._metrics.addNewProbe(this._micProducer,{name:"mic_producer"})).start(),this.getMicStats(rn),this._micProducer.on("transportclose",function(){var Le,hr=We(wr._micProducer.id);Pe.dispatch(hr),wr._eventEmitter.emit(hr.type,hr.payload),(Le=wr._micProducer)===null||Le===void 0||Le.close(),wr._micProducer=null}),this._micProducer.observer.on("pause",function(){rn==null||rn.stop(),wr._latestStats[wr._micProducer.id]=[],wr._metrics.removeExistingProbe(rn)}),this._micProducer.observer.on("close",function(){rn==null||rn.stop(),wr._latestStats[wr._micProducer.id]=[],wr._metrics.removeExistingProbe(rn)}),this._micProducer.on("trackended",function(){var Le,hr,Vr=wr._deviceInfo.sdkType=="react-native"?st.H.ERROR_RN_MIC_TRACK_ENDED:st.H.ERROR_MICROPHONE_TRACK_ENDED;(Le=wr._videosdkLogs)===null||Le===void 0||Le.pushLogs({logText:Vr.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(Vr.message)},dashboardLog:!0}),(hr=wr._openTelemetry)===null||hr===void 0||hr.traceAutoComplete({spanName:"this._micProducer trackended or Microphone disconnected!",span:me,message:Vr.message,status:2}),Pe.dispatch(De({type:"error",text:"Microphone disconnected!"})),wr.disableMic(!0,me).catch(function(){})}),(Zn=this._openTelemetry)===null||Zn===void 0||Zn.completeSpan({span:Et,status:1,message:"Mic Producer Created"}),(Hn=this._openTelemetry)===null||Hn===void 0||Hn.completeSpan({span:me,status:1,message:"Enable Mic Successful"})):((qn=this._videosdkLogs)===null||qn===void 0||qn.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the mic. Please try again.",logType:"ERROR",attributes:{error:"Error in enableMic(): Something went wrong."},dashboardLog:!0}),(dn=this._openTelemetry)===null||dn===void 0||dn.completeSpan({span:Et,status:2,message:"Error in enableMic() :: micProducer null"}),(Ln=this._openTelemetry)===null||Ln===void 0||Ln.completeSpan({span:me,status:2,message:"Error in enableMic() :: micProducer null"})),Xe.next=142;break;case 132:return Xe.prev=132,Xe.t2=Xe.catch(39),(Tr=this._openTelemetry)===null||Tr===void 0||Tr.completeSpan({span:Et,status:2,message:"Error in enableMic() :: occurred in creating mic producer, ".concat(Xe.t2.message)}),(Tn=this._openTelemetry)===null||Tn===void 0||Tn.completeSpan({span:me,status:2,message:"Error in enableMic :: ".concat(Xe.t2.message)}),(ra=this._videosdkLogs)===null||ra===void 0||ra.pushLogs({logText:Xe.t2.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(Xe.t2.message)},dashboardLog:!0}),_e.error("enableMic() | failed:%o",Xe.t2),Pe.dispatch(De({type:"error",text:"Error enabling microphone: ".concat(Xe.t2)})),Xe.next=141,this._protoo.request("produceError",{mediaType:"audio",message:Xe.t2.message});case 141:Lt&&Lt.stop();case 142:case"end":return Xe.stop()}},q,this,[[39,132],[50,56]])})),function(){return ca.apply(this,arguments)})},{key:"disableMic",value:(Ol=(0,c.Z)(n().mark(function q(){var W,B,U,H,re,ie,we,me,it,Ue,rt,se,Ye,He,Je,fe,Ae,Mt,Wt,Ht,$t,zt,Xt,Lt,Et,br=arguments;return n().wrap(function(Nt){for(;;)switch(Nt.prev=Nt.next){case 0:if(U=br.length>0&&br[0]!==void 0&&br[0],H=br.length>1&&br[1]!==void 0?br[1]:void 0,_e.debug("disableMic()"),re=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"disableMic() Calling",status:1,span:H||null}),this._micProducer){Nt.next=8;break}return(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:re,status:2,message:"Error in disableMic() :: Mic Producer Not found"}),(we=this._videosdkLogs)===null||we===void 0||we.pushLogs({logText:"Attempted to call disableMic() multiple times",attributes:{error:"Error in disableMic() :: Microphone is already disabled"},logType:"ERROR",dashboardLog:!0}),Nt.abrupt("return");case 8:if(me=(B=this._openTelemetry)===null||B===void 0?void 0:B.trace({spanName:"Closing Mic Producer",span:re,status:1}),this._micEnabled=!1,!this._micProducer||U){Nt.next=32;break}return se=(it=this._openTelemetry)===null||it===void 0?void 0:it.trace({spanName:"Pausing Mic Producer",span:me,status:1}),this._micProducer.pause(),Ye=We(this._micProducer.id),(Ue=this._openTelemetry)===null||Ue===void 0||Ue.completeSpan({span:se,status:1,message:"Pause Mic Successfully"}),Pe.dispatch(Ye),this._eventEmitter.emit(Ye.type,Ye.payload),Nt.prev=17,Nt.next=20,this._protoo.request("closeProducer",{producerId:this._micProducer.id});case 20:(He=this._openTelemetry)===null||He===void 0||He.completeSpan({span:me,status:1,message:"Requested Server to Close Producer"}),Nt.next=30;break;case 23:Nt.prev=23,Nt.t0=Nt.catch(17),Pe.dispatch(De({type:"error",text:"Error closing server-side mic Producer: ".concat(Nt.t0)})),Mt="Error in disableMic() :: Failed to close server-side microphone producer. closeProducer status: ".concat(U),(Je=this._openTelemetry)===null||Je===void 0||Je.completeSpan({span:me,status:2,message:"Error in disableMic() :: ".concat(Nt.t0.message)}),(fe=this._openTelemetry)===null||fe===void 0||fe.completeSpan({span:re,status:2,message:Mt}),(Ae=this._videosdkLogs)===null||Ae===void 0||Ae.pushLogs({logText:Mt,logType:"ERROR",attributes:{error:Nt.t0.message},dashboardLog:!0});case 30:return(rt=this._openTelemetry)===null||rt===void 0||rt.completeSpan({span:re,status:1,message:"Mic Disabled Successfully"}),Nt.abrupt("return");case 32:return this._micProducer.close(),Wt=We(this._micProducer.id),Pe.dispatch(Wt),this._eventEmitter.emit(Wt.type,Wt.payload),Nt.prev=36,Nt.next=39,this._protoo.request("closeProducer",{producerId:this._micProducer.id});case 39:(Ht=this._openTelemetry)===null||Ht===void 0||Ht.completeSpan({span:me,status:1,message:"Requested Server to Close Producer"}),($t=this._openTelemetry)===null||$t===void 0||$t.completeSpan({span:re,status:1,message:"Mic Disabled Successfully"}),Nt.next=50;break;case 43:Nt.prev=43,Nt.t1=Nt.catch(36),Pe.dispatch(De({type:"error",text:"Error closing server-side mic Producer: ".concat(Nt.t1)})),Et="Error in disableMic() :: Failed to close server-side microphone producer. closeProducer status: ".concat(U),(zt=this._openTelemetry)===null||zt===void 0||zt.completeSpan({span:me,status:2,message:"Error in disableMic() :: ".concat(Nt.t1.message)}),(Xt=this._openTelemetry)===null||Xt===void 0||Xt.completeSpan({span:re,status:2,message:Et}),(Lt=this._videosdkLogs)===null||Lt===void 0||Lt.pushLogs({logText:Et,logType:"ERROR",attributes:{error:Nt.t1.message},dashboardLog:!0});case 50:this._micProducer=null;case 51:case"end":return Nt.stop()}},q,this,[[17,23],[36,43]])})),function(){return Ol.apply(this,arguments)})},{key:"muteMic",value:(oa=(0,c.Z)(n().mark(function q(){var W;return n().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return _e.debug("muteMic()"),this._micEnabled=!1,this._micProducer.pause(),B.prev=3,B.next=6,this._protoo.request("pauseProducer",{producerId:this._micProducer.id});case 6:Pe.dispatch({type:"SET_PRODUCER_PAUSED",payload:{producerId:this._micProducer.id}}),B.next=14;break;case 9:B.prev=9,B.t0=B.catch(3),_e.error("muteMic() | failed: %o",B.t0),(W=this._videosdkLogs)===null||W===void 0||W.pushLogs({logText:"Error pausing server-side mic Producer",logType:"ERROR",attributes:{error:B.t0.message}}),Pe.dispatch(De({type:"error",text:"Error pausing server-side mic Producer: ".concat(B.t0)}));case 14:case"end":return B.stop()}},q,this,[[3,9]])})),function(){return oa.apply(this,arguments)})},{key:"unmuteMic",value:(Na=(0,c.Z)(n().mark(function q(){var W;return n().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return _e.debug("unmuteMic()"),this._micEnabled=!0,this._micProducer.resume(),B.prev=3,B.next=6,this._protoo.request("resumeProducer",{producerId:this._micProducer.id});case 6:Pe.dispatch({type:"SET_PRODUCER_RESUMED",payload:{producerId:this._micProducer.id}}),B.next=14;break;case 9:B.prev=9,B.t0=B.catch(3),_e.error("unmuteMic() | failed: %o",B.t0),(W=this._videosdkLogs)===null||W===void 0||W.pushLogs({logText:"Error resuming server-side mic Producer",logType:"ERROR",attributes:{error:B.t0.message}}),Pe.dispatch(De({type:"error",text:"Error resuming server-side mic Producer: ".concat(B.t0)}));case 14:case"end":return B.stop()}},q,this,[[3,9]])})),function(){return Na.apply(this,arguments)})},{key:"enableWebcam",value:(cc=(0,c.Z)(n().mark(function q(){var W,B,U,H,re,ie,we,me,it,Ue,rt,se,Ye,He,Je,fe,Ae,Mt,Wt,Ht,$t,zt,Xt,Lt,Et,br,Nt,er,Rr,Yr,Wr,tr,Xr,vn,Pr,cn,_r,_n,Pt,en,vt,cr,Er,qr,Zr,Hr,Xn,ua,da,Un,In,ea,pa,zr,ya,Wn,ha,ta,tn,fa,ba,Mn,Zn,Hn,Cn,rn,qn,dn,Ln,Tr,Tn,ra,wr,Sr=this,Xe=arguments;return n().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:if(ie=Xe.length>0&&Xe[0]!==void 0?Xe[0]:void 0,we=Xe.length>1&&Xe[1]!==void 0?Xe[1]:void 0,me=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"enableWebcam() Calling ".concat(ie?"With Custom Video Track":"Without Custom Video Track "),attributes:{customVideoConfig:ie?JSON.stringify(ie):"Not Specify Custom Track"},span:we||null}),_e.debug("enableWebcam()"),this._webcamEnabled=!0,!this._webcamProducer){Le.next=9;break}return(it=this._openTelemetry)===null||it===void 0||it.completeSpan({span:me,status:2,message:"Error in enableWebcam() :: Webcam Producer found"}),(Ue=this._videosdkLogs)===null||Ue===void 0||Ue.pushLogs({logText:"Attempted to call enableWebcam() multiple times",attributes:{error:"Error in enableWebcam() :: Webcam is already enabled"},logType:"ERROR",dashboardLog:!0}),Le.abrupt("return");case 9:if(!this._mediasoupDevice){Le.next=18;break}if(this._mediasoupDevice.canProduce("video")){Le.next=16;break}return Ye=this._deviceInfo.sdkType=="react-native"?st.H.ERROR_RN_CAMERA_ACCESS_UNAVAILABLE.message:st.H.ERROR_CAMERA_ACCESS_UNAVAILABLE.message,(rt=this._openTelemetry)===null||rt===void 0||rt.completeSpan({span:me,status:2,message:"Error in enableWebcam() :: ".concat(Ye)}),(se=this._videosdkLogs)===null||se===void 0||se.pushLogs({logText:Ye,attributes:{error:"Error in enableWebcam() :: Camera access unavailable"},logType:"ERROR",dashboardLog:!0}),_e.error("enableWebcam() | cannot produce video"),Le.abrupt("return");case 16:Le.next=21;break;case 18:return(He=this._videosdkLogs)===null||He===void 0||He.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the webcam. Please try again.",logType:"ERROR",attributes:{error:"Error in enableWebcam(): Something went wrong."}}),(Je=this._openTelemetry)===null||Je===void 0||Je.completeSpan({span:me,status:2,message:"Error in enableWebcam() :: mediasoupDevice is undefined"}),Le.abrupt("return");case 21:if(Pe.dispatch(yr(!0)),Mt=this._webcam.resolution,Le.prev=23,this._externalVideo){Le.next=100;break}return Le.next=27,this._updateWebcams(me);case 27:if(Ae=this._webcam.device){Le.next=31;break}throw Xt="Whoops! No Webcam Found: We couldn't find your camera. Is it plugged in and turned on? If so, try restarting your computer or checking your device settings. If you need help, check out troubleshooter at https://test.8x8.vc/. Also, ensure you're on a secure website (https://).",new Error(Xt);case 31:_e.debug("enableWebcam() | calling getUserMedia()");try{ie&&(fe=ie.getVideoTracks()[0]).readyState=="ended"&&(fe=null,Et=st.H.ERROR_CUSTOM_VIDEO_TRACK_ENDED,(Lt=this._videosdkLogs)===null||Lt===void 0||Lt.pushLogs({logText:Et.message,logType:"INFO",attributes:{error:"In enableWebcam() :: Invalid Custom Track Passed"},dashboardLog:!0}),this._emitError(Et))}catch(hr){Nt=st.H.ERROR_INVALID_CUSTOM_VIDEO_TRACK,(br=this._videosdkLogs)===null||br===void 0||br.pushLogs({logText:Nt.message,logType:"INFO",attributes:{error:"In enableWebcam() :: Invalid Custom Track Passed"}}),this._emitError(Nt),console.log("Invalid Custom Video Track Passed. Reverting to default Error: ".concat(hr))}if(fe){Le.next=98;break}if(Rr=(er=this._openTelemetry)===null||er===void 0?void 0:er.trace({spanName:"Creating Track",span:me}),Yr=null,Le.prev=36,this._webcam.resolution!="hd"){Le.next=44;break}return Le.next=40,this.createCameraVideoTrack({cameraId:Ae.deviceId,encoderConfig:"h720p_w1280p",multiStream:this._useSimulcast,facingMode:Ae.facing});case 40:ie=Le.sent,Yr=JSON.stringify({encoderConfig:"h720p_w1280p",multiStream:this._useSimulcast}),Le.next=48;break;case 44:return Le.next=46,this.createCameraVideoTrack({cameraId:Ae.deviceId,encoderConfig:"h540p_w960p",multiStream:this._useSimulcast,facingMode:Ae.facing});case 46:ie=Le.sent,Yr=JSON.stringify({encoderConfig:"h540p_w960p",multiStream:this._useSimulcast});case 48:fe=ie.getVideoTracks()[0],(Wr=this._openTelemetry)===null||Wr===void 0||Wr.completeSpan({message:"Video Track Generated",span:Rr,attributes:{customVideoTrackConfig:Yr},status:1}),Le.next=98;break;case 52:if(Le.prev=52,Le.t0=Le.catch(36),(tr=this._openTelemetry)===null||tr===void 0||tr.completeSpan({message:"Error in enableWebcam() :: ".concat(Le.t0.message),span:Rr,status:2}),Le.t0.name!=="SecurityError"){Le.next=63;break}Pr=st.H.ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED,cn=Pr.message,this._emitError(Pr),(Xr=this._videosdkLogs)===null||Xr===void 0||Xr.pushLogs({logText:cn,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: Camera Permission Denied or Dismissed"},dashboardLog:!0}),(vn=this._openTelemetry)===null||vn===void 0||vn.completeSpan({message:"Error in enableWebcam() :: occurred in creating video track, ".concat(cn),span:enableMicSpan,status:2}),Le.next=97;break;case 63:if(Le.t0.name!=="DOMException"){Le.next=71;break}Pt=st.H.ERROR_RN_CAMERA_NOT_FOUND,en=Pt.message,this._emitError(Pt),(_r=this._videosdkLogs)===null||_r===void 0||_r.pushLogs({logText:en,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: No Camra Device Found"},dashboardLog:!0}),(_n=this._openTelemetry)===null||_n===void 0||_n.completeSpan({message:"Error in enableWebcam() :: occurred in creating video track, ".concat(en),span:enableMicSpan,status:2}),Le.next=97;break;case 71:if(!(Le.t0 instanceof DOMException)){Le.next=94;break}Le.t1=Le.t0.name,Le.next=Le.t1==="NotAllowedError"?75:Le.t1==="NotReadableError"?78:Le.t1==="NotFoundError"?81:88;break;case 75:return vt=this.handleNotAllowedError(Le.t0,this._openTelemetry,this._videosdkLogs,me,"video"),this._emitError(vt),Le.abrupt("break",92);case 78:return cr=this.handleNotReadableError(Le.t0,this._openTelemetry,this._videosdkLogs,me,"video"),this._emitError(cr),Le.abrupt("break",92);case 81:return Er=st.H.ERROR_CAMERA_NOT_FOUND,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Er=st.H.ERROR_CAMERA_PERMISSION_DENIED_BY_OS),qr=Er.message,this._emitError(Er),(B=this._videosdkLogs)===null||B===void 0||B.pushLogs({logText:qr,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: No Webcam Device Found"},dashboardLog:!0}),(U=this._openTelemetry)===null||U===void 0||U.completeSpan({message:"Error in enableWebcam() :: occurred in creating video track, ".concat(qr),span:me,status:2}),Le.abrupt("break",92);case 88:return Zr="An error occurred in creating video track, ".concat(Le.t0.message),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:Le.t0.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(Zr)},dashboardLog:!0}),(re=this._openTelemetry)===null||re===void 0||re.completeSpan({message:"Error in enableWebcam() :: ".concat(Zr),span:me,status:2}),Le.abrupt("break",92);case 92:Le.next=97;break;case 94:ua="An error occurred in creating video track, ".concat(Le.t0.message),(Hr=this._videosdkLogs)===null||Hr===void 0||Hr.pushLogs({logText:Le.t0.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(ua)},dashboardLog:!0}),(Xn=this._openTelemetry)===null||Xn===void 0||Xn.completeSpan({message:"Error in enableWebcam() :: ".concat(ua),span:me,status:2});case 97:return Le.abrupt("return");case 98:Le.next=105;break;case 100:return Ae={label:"external video"},Le.next=103,this._getExternalVideoStream();case 103:da=Le.sent,fe=da.getVideoTracks()[0].clone();case 105:if(Un=(Wt=this._openTelemetry)===null||Wt===void 0?void 0:Wt.trace({spanName:"Generating Producer Configuration",span:me}),pa={videoGoogleStartBitrate:1e3},!this._forceH264){Le.next=114;break}if(ea=this._mediasoupDevice.rtpCapabilities.codecs.find(function(hr){return hr.mimeType.toLowerCase()==="video/h264"})){Le.next=112;break}throw zr="The desired H.264 codec and configuration are not supported",new Error(zr);case 112:Le.next=119;break;case 114:if(!this._forceVP9){Le.next=119;break}if(ea=this._mediasoupDevice.rtpCapabilities.codecs.find(function(hr){return hr.mimeType.toLowerCase()==="video/vp9"})){Le.next=119;break}throw ya="The desired VP9 codec and configuration are not supported",new Error(ya);case 119:fe?(Wn=fe.getConstraints(),ha=this._deviceInfo.sdkType=="react-native"&&this._deviceInfo.platform=="ios",In=Fe(!1,Wn.width,Wn.height,{simulcast:ie.multiStream},ha)):this._useSimulcast&&(ta=this._mediasoupDevice.rtpCapabilities.codecs.find(function(hr){return hr.kind==="video"}),In=this._forceVP9&&ea||ta.mimeType.toLowerCase()==="video/vp9"?xi:Bs[this._webcam.resolution]),tn={};try{tn={encodings:In,width:ie?(fa=fe)===null||fa===void 0?void 0:fa.getConstraints().width:Ka[Mt].width.ideal,height:ie?(ba=fe)===null||ba===void 0?void 0:ba.getConstraints().height:Ka[Mt].height.ideal}}catch(hr){(Mn=this._videosdkLogs)===null||Mn===void 0||Mn.pushLogs({logText:hr.message,logType:"INFO",attributes:{error:"In enableWebcam() :: ".concat(hr.message)},dashboardLog:!0}),console.log(hr)}if((Ht=this._openTelemetry)===null||Ht===void 0||Ht.traceAutoComplete({spanName:"Track Generated with height ".concat(tn.height," and width ").concat(tn.width," with multiStream ").concat(this._useSimulcast),attributes:{appData:JSON.stringify(tn)},span:me,status:1}),($t=this._openTelemetry)===null||$t===void 0||$t.completeSpan({span:Un,status:1,message:"Producer Configuration Generated"}),Un=(zt=this._openTelemetry)===null||zt===void 0?void 0:zt.trace({spanName:"Creating Webcam Producer",span:me}),!this._sendTransport){Le.next=131;break}return Le.next=128,this._sendTransport.produce({track:fe,encodings:In,codecOptions:pa,codec:ea,appData:tn});case 128:this._webcamProducer=Le.sent,Le.next=134;break;case 131:return(Zn=this._videosdkLogs)===null||Zn===void 0||Zn.pushLogs({logText:st.H.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message,attributes:{error:"Error in enableWebcam() :: Transport is not setup"},logType:"ERROR",dashboardLog:!0}),this._emitError(st.H.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED),Le.abrupt("return");case 134:fe.getConstraints().deviceId&&(this._webcam.device=this._webcams.get(fe.getConstraints().deviceId)),this._webcamProducer?(rn=Ee({id:this._webcamProducer.id,deviceLabel:Ae.label,type:this._getWebcamType(Ae),paused:this._webcamProducer.paused,track:this._webcamProducer.track,rtpParameters:this._webcamProducer.rtpParameters,codec:this._webcamProducer.rtpParameters.codecs[0].mimeType.split("/")[1],instance:this._webcamProducer}),Pe.dispatch(rn),this._eventEmitter.emit(rn.type,rn.payload),qn=0,(dn=this._metrics.addNewProbe(this._webcamProducer,"producer")).onStatsCollected=function(hr){try{var Vr;Sr._stats.producerStats||(Sr._stats.producerStats={}),Sr._stats.producerStats.video||(Sr._stats.producerStats.video=[]),Sr._webcamProducer&&(Sr._latestStats[(Vr=Sr._webcamProducer)===null||Vr===void 0?void 0:Vr.id]=[]),hr.video.forEach(function(wa){var et;Sr._latestStats[(et=Sr._webcamProducer)===null||et===void 0?void 0:et.id].push(wa)}),qn%5==0&&Sr._webcamProducer!=null&&Sr._stats.producerStats.video.push({timestamp:new Date,stats:Sr._latestStats[Sr._webcamProducer.id]}),qn++}catch(wa){var zn;(zn=Sr._videosdkLogs)===null||zn===void 0||zn.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:wa.message}}),console.log("PRODUCER ERROR",wa)}},dn.start(),this._webcamProducer.observer.on("close",function(){dn.stop(),Sr._metrics.removeExistingProbe(dn)}),this._webcamProducer.on("transportclose",function(){var hr,Vr=We(Sr._webcamProducer.id);Pe.dispatch(Vr),Sr._eventEmitter.emit(Vr.type,Vr.payload),(hr=Sr._webcamProducer)===null||hr===void 0||hr.close(),Sr._webcamProducer=null}),this._webcamProducer.on("trackended",function(){var hr,Vr,zn=Sr._deviceInfo.sdkType=="react-native"?st.H.ERROR_RN_CAMERA_TRACK_ENDED:st.H.ERROR_WEBCAM_TRACK_ENDED;(hr=Sr._videosdkLogs)===null||hr===void 0||hr.pushLogs({logText:zn.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(zn.message)},dashboardLog:!0}),(Vr=Sr._openTelemetry)===null||Vr===void 0||Vr.traceAutoComplete({spanName:"this._webcamProducer trackended or Webcam disconnected!",span:me,message:zn.message,status:2}),Pe.dispatch(De({type:"error",text:"Webcam disconnected!"})),Sr.disableWebcam(me).catch(function(){})}),(Hn=this._openTelemetry)===null||Hn===void 0||Hn.completeSpan({span:Un,status:1,message:"Webcam Producer Created"}),(Cn=this._openTelemetry)===null||Cn===void 0||Cn.completeSpan({span:me,status:1,message:"Enable Webcam Successful"})):((Ln=this._videosdkLogs)===null||Ln===void 0||Ln.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the webcam. Please try again.",logType:"ERROR",attributes:{error:"Error in enableWebcam(): Something went wrong."},dashboardLog:!0}),(Tr=this._openTelemetry)===null||Tr===void 0||Tr.completeSpan({span:Un,status:2,message:"Error in enableWebcam() :: webcamProducer null"}),(Tn=this._openTelemetry)===null||Tn===void 0||Tn.completeSpan({span:me,status:2,message:"Error in enableWebcam() :: webcamProducer null"})),Le.next=146;break;case 138:return Le.prev=138,Le.t2=Le.catch(23),(ra=this._videosdkLogs)===null||ra===void 0||ra.pushLogs({logText:Le.t2.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(Le.t2.message)},dashboardLog:!0}),(wr=this._openTelemetry)===null||wr===void 0||wr.completeSpan({span:me,status:2,message:"Error in enableWebcam() :: ".concat(Le.t2.message)}),Pe.dispatch(De({type:"error",text:"Error enabling webcam: ".concat(Le.t2)})),Le.next=145,this._protoo.request("produceError",{mediaType:"video",message:Le.t2.message});case 145:fe&&fe.stop();case 146:Pe.dispatch(yr(!1));case 147:case"end":return Le.stop()}},q,this,[[23,138],[36,52]])})),function(){return cc.apply(this,arguments)})},{key:"handleNotAllowedError",value:function(q,W,B,U,H){var re={};return re=q.message==="Permission denied"||q.message==="Permission dismissed"?H==="video"?st.H.ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:st.H.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:q.message.includes("The request is not allowed by the user agent")?H==="video"?st.H.ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:st.H.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:q.message==="Permission denied by system"?H==="video"?st.H.ERROR_CAMERA_PERMISSION_DENIED_BY_OS:st.H.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:H==="video"?st.H.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:st.H.ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED,B.pushLogs({logText:re.message,logType:"ERROR",attributes:{error:"Error in ".concat(H==="video"?"enableWebcam()":"enableMic()"," :: ").concat(q.message)},dashboardLog:!0}),W.completeSpan({message:H==="video"?"Error in enableWebcam() :: occurred in creating video track, ".concat(re.message):"Error in enableMic() :: occurred in creating audio track, ".concat(re.message),span:U,status:2}),re}},{key:"handleNotReadableError",value:function(q,W,B,U,H){var re={};return re=q.message==="Device in use"?H==="video"?st.H.ERROR_CAMERA_IN_USE:st.H.ERROR_MICROPHONE_IN_USE:H==="video"?st.H.ERROR_VIDEO_SOURCE_INITIATION_FAILED:st.H.ERROR_MICROPHONE_IN_USE,B.pushLogs({logText:re.message,logType:"ERROR",attributes:{error:"Error in ".concat(H==="video"?"enableWebcam()":"enableMic()"," :: ").concat(q.message)},dashboardLog:!0}),W.completeSpan({message:H==="video"?"Error in enableWebcam() :: occurred in creating video track, ".concat(re.message):"Error in enableMic() :: occurred in creating audio track, ".concat(re.message),span:U,status:2}),re}},{key:"createCameraVideoTrack",value:(li=(0,c.Z)(n().mark(function q(W){var B,U,H,re,ie,we,me,it,Ue,rt,se,Ye,He;return n().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:return B=W.cameraId,U=B===void 0?void 0:B,H=W.encoderConfig,re=H===void 0?void 0:H,ie=W.facingMode,we=ie===void 0?void 0:ie,me=W.optimizationMode,it=me===void 0?void 0:me,Ue=W.multiStream,rt=Ue===void 0||Ue,se=re?nr.v.videoProfiles[re]:nr.v.videoProfiles.h360p_w640p,Ye={video:{deviceId:U||void 0,facingMode:we||void 0,width:se.width,height:se.height,frameRate:se.frameRate}},Je.next=5,(0,sr.y)(Ye);case 5:return He=Je.sent,it&&(He.contentHint=it),He.encoderConfig=re||"h360p_w640p",He.contentHint=it||"",He.multiStream=rt,He.cameraId=U,Je.abrupt("return",He);case 12:case"end":return Je.stop()}},q)})),function(q){return li.apply(this,arguments)})},{key:"disableWebcam",value:(xl=(0,c.Z)(n().mark(function q(){var W,B,U,H,re,ie,we,me,it,Ue,rt,se,Ye,He=arguments;return n().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:if(U=He.length>0&&He[0]!==void 0?He[0]:void 0,H=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"disableWebcam() Calling",status:1,span:U||null}),_e.debug("disableWebcam()"),this._webcamEnabled=!1,this._webcamProducer){Je.next=8;break}return(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:H,status:2,message:"Error in disableWebcam() :: Webcam Producer Not found"}),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Attempted to call disableWebcam() multiple times",attributes:{error:"Error in disableWebcam() :: Webcam is already disabled"},logType:"ERROR",dashboardLog:!0}),Je.abrupt("return");case 8:return we=(B=this._openTelemetry)===null||B===void 0?void 0:B.trace({spanName:"Closing Webcam Producer",span:H,status:1}),this._webcamProducer.close(),me=We(this._webcamProducer.id),Pe.dispatch(me),this._eventEmitter.emit(me.type,me.payload),Je.prev=13,Je.next=16,this._protoo.request("closeProducer",{producerId:this._webcamProducer.id});case 16:(it=this._openTelemetry)===null||it===void 0||it.completeSpan({span:we,status:1,message:"Requested Server to Close Producer"}),this._webcamProducer=null,(Ue=this._openTelemetry)===null||Ue===void 0||Ue.completeSpan({span:H,status:1,message:"Webcam Disabled Successfully"}),Je.next=27;break;case 21:Je.prev=21,Je.t0=Je.catch(13),(rt=this._videosdkLogs)===null||rt===void 0||rt.pushLogs({logText:"Error in disableWebcam() :: Failed to close server-side webcam producer",logType:"ERROR",attributes:{error:Je.t0.message},dashboardLog:!0}),(se=this._openTelemetry)===null||se===void 0||se.completeSpan({span:we,status:2,message:"Error in disableWebcam() :: closing server-side webcam Producer: ".concat(Je.t0)}),(Ye=this._openTelemetry)===null||Ye===void 0||Ye.completeSpan({span:H,status:2,message:"Error in disableWebcam() :: closing server-side webcam Producer: ".concat(Je.t0)}),Pe.dispatch(De({type:"error",text:"Error closing server-side webcam Producer: ".concat(Je.t0)}));case 27:case"end":return Je.stop()}},q,this,[[13,21]])})),function(){return xl.apply(this,arguments)})},{key:"getMics",value:(Pl=(0,c.Z)(n().mark(function q(){var W,B;return n().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return W=[],U.prev=1,U.next=4,this._updateMics();case 4:this._mics.forEach(function(H,re){W.push({deviceId:re,label:H.label})}),U.next=11;break;case 7:U.prev=7,U.t0=U.catch(1),_e.error("getMics() | Error",U.t0),(B=this._videosdkLogs)===null||B===void 0||B.pushLogs({logText:U.t0.message,logType:"ERROR",attributes:{error:"Error in getMics() :: Not able to get Mic List"},dashboardLog:!0});case 11:return U.abrupt("return",W);case 12:case"end":return U.stop()}},q,this,[[1,7]])})),function(){return Pl.apply(this,arguments)})},{key:"changeMic",value:(Tl=(0,c.Z)(n().mark(function q(W){var B,U,H,re,ie,we,me,it,Ue,rt,se,Ye,He,Je;return n().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(U=(B=this._openTelemetry)===null||B===void 0?void 0:B.trace({spanName:"changeMic() Calling"}),fe.prev=1,(0,E.Z)(W)!="object"){fe.next=9;break}return fe.next=5,this.disableMic(!0,U);case 5:return fe.next=7,this.enableMic(W,U);case 7:fe.next=27;break;case 9:return we=W,fe.next=12,this._updateMics();case 12:if(me=Array.from(this._mics.keys()),it=me.length,Ue=this._mic.device?this._mic.device.deviceId:void 0,we!=null&&we!=null?rt=me.indexOf(we):(rt=me.indexOf(Ue))<it-1?rt++:rt=0,this._mic.device=this._mics.get(me[rt]),se=(H=this._openTelemetry)===null||H===void 0?void 0:H.trace({spanName:"Getting Selected Mic",span:U,attributes:{selectedWebcam:this._mic.device?JSON.stringify(this._mic.device):"No Mic devices"}}),this._mic.device){fe.next=21;break}throw(Ye=this._videosdkLogs)===null||Ye===void 0||Ye.pushLogs({logText:"Error changeMic : No mic Found",logType:"ERROR"}),new Error("No mic Found");case 21:return fe.next=23,this.disableMic(!0,U);case 23:return fe.next=25,this.enableMic(void 0,U);case 25:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:se,status:1,message:"Done"}),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:U,status:1,message:"changeMic() Ending"});case 27:fe.next=33;break;case 29:fe.prev=29,fe.t0=fe.catch(1),(He=this._openTelemetry)===null||He===void 0||He.completeSpan({span:U,status:2,message:"changeMic() | Error ".concat(fe.t0)}),(Je=this._videosdkLogs)===null||Je===void 0||Je.pushLogs({logText:"Error changeMic() | Error",logType:"ERROR",attributes:{error:fe.t0.message}});case 33:case"end":return fe.stop()}},q,this,[[1,29]])})),function(q){return Tl.apply(this,arguments)})},{key:"getWebcams",value:(Cl=(0,c.Z)(n().mark(function q(){var W,B;return n().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return W=[],U.prev=1,U.next=4,this._updateWebcams();case 4:this._webcams.forEach(function(H,re){W.push({deviceId:re,label:H.label,facingMode:H.facing||"environment"})}),U.next=11;break;case 7:U.prev=7,U.t0=U.catch(1),_e.error("getWebcams() | failed %o",U.t0),(B=this._videosdkLogs)===null||B===void 0||B.pushLogs({logText:U.t0.message,logType:"ERROR",attributes:{error:"Error in getWebcams() :: Not able to get Webcam List"},dashboardLog:!0});case 11:return U.abrupt("return",W);case 12:case"end":return U.stop()}},q,this,[[1,7]])})),function(){return Cl.apply(this,arguments)})},{key:"replaceWebcamStream",value:(kl=(0,c.Z)(n().mark(function q(W){var B;return n().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(!this._webcamProducer){U.next=7;break}return B=W.getVideoTracks()[0],U.next=4,this._webcamProducer.replaceTrack({track:B});case 4:this._eventEmitter.emit("UPDATE_PRODUCER",{producer:this._webcamProducer}),U.next=11;break;case 7:return U.next=9,this.disableWebcam();case 9:return U.next=11,this.enableWebcam(W);case 11:case"end":return U.stop()}},q,this)})),function(q){return kl.apply(this,arguments)})},{key:"changeWebcam",value:(oc=(0,c.Z)(n().mark(function q(W){var B,U,H,re,ie,we,me,it,Ue,rt,se,Ye,He,Je;return n().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(U=(B=this._openTelemetry)===null||B===void 0?void 0:B.trace({spanName:"changeWebcam() Calling"}),Pe.dispatch(yr(!0)),(0,E.Z)(W)!=="object"){fe.next=17;break}return fe.prev=3,fe.next=6,this.disableWebcam(U);case 6:return fe.next=8,this.enableWebcam(W,U);case 8:fe.next=15;break;case 10:fe.prev=10,fe.t0=fe.catch(3),_e.error("changeWebcam() | failed: %o",fe.t0),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error Could not change webcam",logType:"ERROR",attributes:{object:JSON.stringify(W),error:fe.t0.message}}),Pe.dispatch(De({type:"error",text:"Could not change webcam: ".concat(fe.t0)}));case 15:fe.next=46;break;case 17:return fe.prev=17,fe.next=20,this._updateWebcams(U);case 20:if(me=Array.from(this._webcams.keys()),it=me.length,Ue=this._webcam.device?this._webcam.device.deviceId:void 0,W!=null&&W!=null?rt=me.indexOf(W):(rt=me.indexOf(Ue))<it-1?rt++:rt=0,this._webcam.device=this._webcams.get(me[rt]),_e.debug("changeWebcam() | new selected webcam [device:%o]",this._webcam.device),this._webcam.resolution=this._webcam.resolution||"hd",se=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"Getting Selected Webcam",span:U,attributes:{selectedWebcam:this._webcam.device?JSON.stringify(this._webcam.device):"No webcam devices"}}),this._webcam.device){fe.next=31;break}throw(Ye=this._videosdkLogs)===null||Ye===void 0||Ye.pushLogs({logText:"Error changeWebcam : No webcam Found",logType:"ERROR"}),new Error("no webcam devices");case 31:return fe.next=33,this.disableWebcam(U);case 33:return fe.next=35,this.enableWebcam(void 0,U);case 35:return(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:se,status:1,message:"Done"}),(we=this._openTelemetry)===null||we===void 0||we.completeSpan({span:U,status:1,message:"changeWebcam() Ending"}),fe.abrupt("return");case 40:fe.prev=40,fe.t1=fe.catch(17),_e.error("changeWebcam() | failed: %o",fe.t1),(He=this._videosdkLogs)===null||He===void 0||He.pushLogs({logText:"Error Could not change webcam",logType:"ERROR",attributes:{object:JSON.stringify(W),error:fe.t1.message}}),(Je=this._openTelemetry)===null||Je===void 0||Je.completeSpan({span:U,status:2,message:"Could not change webcam ".concat(fe.t1)}),Pe.dispatch(De({type:"error",text:"Could not change webcam: ".concat(fe.t1)}));case 46:Pe.dispatch(yr(!1));case 47:case"end":return fe.stop()}},q,this,[[3,10],[17,40]])})),function(q){return oc.apply(this,arguments)})},{key:"changeWebcamResolution",value:(El=(0,c.Z)(n().mark(function q(){var W,B,U,H;return n().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:_e.debug("changeWebcamResolution()"),Pe.dispatch(yr(!0)),re.prev=2,re.t0=this._webcam.resolution,re.next=re.t0==="qvga"?6:re.t0==="vga"?8:re.t0==="hd"?10:12;break;case 6:return this._webcam.resolution="vga",re.abrupt("break",13);case 8:return this._webcam.resolution="hd",re.abrupt("break",13);case 10:return this._webcam.resolution="qvga",re.abrupt("break",13);case 12:this._webcam.resolution="hd";case 13:return _e.debug("changeWebcamResolution() | calling getUserMedia()"),re.prev=14,re.next=17,navigator.mediaDevices.getUserMedia({video:Ar({deviceId:{exact:this._webcam.device.deviceId}},Ka[this._webcam.resolution])});case 17:W=re.sent,re.next=25;break;case 20:return re.prev=20,re.t1=re.catch(14),(B=this._videosdkLogs)===null||B===void 0||B.pushLogs({logText:"Error in getUserMedia for changeWebcamResolution",logType:"ERROR",attributes:{error:JSON.stringify(re.t1)}}),re.t1.message==="Permission denied"||re.t1.name==="NotAllowedError"?this._emitError(st.H.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED):this._emitError(st.H.ERROR_GET_VIDEO_MEDIA),re.abrupt("return");case 25:return U=W.getVideoTracks()[0],re.next=28,this._webcamProducer.replaceTrack({track:U});case 28:Pe.dispatch(Yt(this._webcamProducer.id,U)),re.next=36;break;case 31:re.prev=31,re.t2=re.catch(2),_e.error("changeWebcamResolution() | failed: %o",re.t2),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error Could not change webcam resolution",logType:"ERROR",attributes:{error:re.t2.message}}),Pe.dispatch(De({type:"error",text:"Could not change webcam resolution: ".concat(re.t2)}));case 36:Pe.dispatch(yr(!1));case 37:case"end":return re.stop()}},q,this,[[2,31],[14,20]])})),function(){return El.apply(this,arguments)})},{key:"enableShare",value:(Ws=(0,c.Z)(n().mark(function q(){var W,B,U,H,re,ie,we,me,it,Ue,rt,se,Ye,He,Je,fe,Ae,Mt,Wt,Ht,$t,zt,Xt,Lt,Et,br,Nt,er,Rr,Yr,Wr,tr,Xr,vn,Pr,cn,_r,_n,Pt=this,en=arguments;return n().wrap(function(vt){for(;;)switch(vt.prev=vt.next){case 0:if(B=en.length>0&&en[0]!==void 0?en[0]:void 0,U=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"enableShare() Calling ".concat(B?"With Custom Video Track":"Without Custom Video Track "),attributes:{customShareConfig:B?JSON.stringify(B):"Not Specify Custom Track"}}),_e.debug("enableShare()"),!this._shareProducer){vt.next=6;break}return(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:U,status:2,message:"Screen Share Producer found"}),vt.abrupt("return");case 6:if(this._mediasoupDevice.canProduce("video")){vt.next=10;break}return(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:U,status:2,message:"enableShare() | cannot produce video"}),_e.error("enableShare() | cannot produce video"),vt.abrupt("return");case 10:if(Pe.dispatch(Kt(!0)),vt.prev=11,_e.debug("enableShare() | calling getUserMedia()"),He=(me=this._openTelemetry)===null||me===void 0?void 0:me.trace({spanName:"Creating Track",span:U}),!B||!B.active){vt.next=19;break}ie=B.getVideoTracks()[0],we=B.getAudioTracks()[0],vt.next=38;break;case 19:return vt.prev=19,vt.next=22,navigator.mediaDevices.getDisplayMedia({audio:!0,video:{width:{max:1920},height:{max:1080},frameRate:{max:10}}});case 22:fe=vt.sent,vt.next=31;break;case 25:return vt.prev=25,vt.t0=vt.catch(19),(Ae=this._videosdkLogs)===null||Ae===void 0||Ae.pushLogs({logText:"Error in getDisplayMedia for screen share",logType:"ERROR",attributes:{error:JSON.stringify(vt.t0)}}),(Mt=this._openTelemetry)===null||Mt===void 0||Mt.completeSpan({span:U,status:2,message:"Error in getDisplayMedia for screen share ".concat(vt.t0)}),vt.t0.message==="Permission denied"||vt.t0.name==="NotAllowedError"?this._emitError(st.H.ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED):this._emitError(st.H.ERROR_GET_DISPLAY_MEDIA),vt.abrupt("return");case 31:if(fe){vt.next=35;break}return Pe.dispatch(Kt(!0)),(Wt=this._openTelemetry)===null||Wt===void 0||Wt.completeSpan({span:U,status:2,message:"Stream not found"}),vt.abrupt("return");case 35:ie=fe.getVideoTracks()[0],we=fe.getAudioTracks()[0],(Je=this._openTelemetry)===null||Je===void 0||Je.completeSpan({message:"Track Generated with height ".concat(ie.getSettings().height," and width ").concat(ie.getSettings().width),span:He,status:1});case 38:if(Ht=(it=this._openTelemetry)===null||it===void 0?void 0:it.trace({spanName:"Generating Producer Configuration",span:U}),Xt={videoGoogleStartBitrate:1e3},!this._forceH264){vt.next=47;break}if(zt=this._mediasoupDevice.rtpCapabilities.codecs.find(function(cr){return cr.mimeType.toLowerCase()==="video/h264"})){vt.next=45;break}throw(Lt=this._videosdkLogs)===null||Lt===void 0||Lt.pushLogs({logText:"Error EnableShare : desired H264 codec+configuration is not supported",logType:"ERROR"}),new Error("desired H264 codec+configuration is not supported");case 45:vt.next=52;break;case 47:if(!this._forceVP9){vt.next=52;break}if(zt=this._mediasoupDevice.rtpCapabilities.codecs.find(function(cr){return cr.mimeType.toLowerCase()==="video/vp9"})){vt.next=52;break}throw(Et=this._videosdkLogs)===null||Et===void 0||Et.pushLogs({logText:"Error EnableShare :desired VP9 codec+configuration is not supported",logType:"ERROR"}),new Error("desired VP9 codec+configuration is not supported");case 52:return this._useSharingSimulcast&&(br=this._mediasoupDevice.rtpCapabilities.codecs.find(function(cr){return cr.kind==="video"}),$t=this._forceVP9&&zt||br.mimeType.toLowerCase()==="video/vp9"?Oi:qi.map(function(cr){return Ar(Ar({},cr),{},{dtx:!0})})),(Ue=this._openTelemetry)===null||Ue===void 0||Ue.completeSpan({span:Ht,status:1,message:"Producer Configuration Generated"}),Ht=(rt=this._openTelemetry)===null||rt===void 0?void 0:rt.trace({spanName:"Creating Share Producer",span:U}),vt.next=57,this._sendTransport.produce({track:ie,encodings:$t,codecOptions:Xt,codec:zt,appData:{share:!0}});case 57:if(this._shareProducer=vt.sent,Nt=Ee({id:this._shareProducer.id,type:"share",paused:this._shareProducer.paused,track:this._shareProducer.track,rtpParameters:this._shareProducer.rtpParameters,codec:this._shareProducer.rtpParameters.codecs[0].mimeType.split("/")[1],appData:{share:!0},instance:this._shareProducer}),Pe.dispatch(Nt),this._eventEmitter.emit(Nt.type,Nt.payload),this._shareProducer.on("transportclose",function(){var cr,Er=We(Pt._shareProducer.id);Pe.dispatch(Er),Pt._eventEmitter.emit(Er.type,Er.payload),(cr=Pt._shareProducer)===null||cr===void 0||cr.close(),Pt._shareProducer=null}),this._shareProducer.on("trackended",function(){var cr;(cr=Pt._openTelemetry)===null||cr===void 0||cr.traceAutoComplete({spanName:"this._shareProducer trackended or Share disconnected!",span:U,status:2}),Pe.dispatch(De({type:"error",text:"Share disconnected!"})),Pt.disableShare().catch(function(){})}),(se=this._openTelemetry)===null||se===void 0||se.completeSpan({span:Ht,status:1,message:"Share Producer Created"}),!we){vt.next=84;break}return vt.prev=65,Yr={opusStereo:1,opusDtx:1},Ht=(er=this._openTelemetry)===null||er===void 0?void 0:er.trace({spanName:"Creating Share Audio Producer",span:U}),vt.next=70,this._sendTransport.produce({track:we,codecOptions:Yr,appData:{share:!0}});case 70:this._shareAudioProducer=vt.sent,Wr=Ee({id:this._shareAudioProducer.id,type:"share",paused:this._shareAudioProducer.paused,track:this._shareAudioProducer.track,rtpParameters:this._shareAudioProducer.rtpParameters,codec:this._shareAudioProducer.rtpParameters.codecs[0].mimeType.split("/")[1],appData:{share:!0},instance:this._shareAudioProducer}),Pe.dispatch(Wr),this._eventEmitter.emit(Wr.type,Wr.payload),this._shareAudioProducer.on("transportclose",function(){var cr,Er=We(Pt._shareAudioProducer.id);Pe.dispatch(Er),Pt._eventEmitter.emit(Er.type,Er.payload),(cr=Pt._shareAudioProducer)===null||cr===void 0||cr.close(),Pt._shareAudioProducer=null}),this._shareAudioProducer.on("trackended",function(){var cr;(cr=Pt._openTelemetry)===null||cr===void 0||cr.traceAutoComplete({spanName:"this._shareAudioProducer trackended",span:U,status:2}),Pe.dispatch(De({type:"error",text:"Share disconnected!"}))}),(Rr=this._openTelemetry)===null||Rr===void 0||Rr.completeSpan({span:Ht,status:1,message:"Share Audio Producer Created"}),vt.next=84;break;case 79:return vt.prev=79,vt.t1=vt.catch(65),vt.next=83,this._protoo.request("produceError",{mediaType:"shareAudio",message:vt.t1.message});case 83:(tr=this._videosdkLogs)===null||tr===void 0||tr.pushLogs({logText:"Error in shareAudio produceError",logType:"ERROR",attributes:{error:vt.t1.message}});case 84:(Ye=this._openTelemetry)===null||Ye===void 0||Ye.completeSpan({span:U,status:1,message:"Enable Share Successful"}),vt.next=98;break;case 87:return vt.prev=87,vt.t2=vt.catch(11),_e.error("enableShare() | failed:%o",vt.t2),(Xr=this._openTelemetry)===null||Xr===void 0||Xr.completeSpan({span:U,status:2,attributes:{error:vt.t2.message},message:"Error in enableShare video produceError"}),console.log("screen share catch",vt.t2.message),(vn=this._videosdkLogs)===null||vn===void 0||vn.pushLogs({logText:"Error in enableShare video produceError",logType:"ERROR",attributes:{error:vt.t2.message}}),vt.t2.name!=="NotAllowedError"&&Pe.dispatch(De({type:"error",text:"Error sharing: ".concat(vt.t2)})),vt.next=96,this._protoo.request("produceError",{mediaType:"share",message:vt.t2.message});case 96:ie&&ie.stop(),we&&we.stop();case 98:Pe.dispatch(Kt(!1)),this._shareProducer&&(Pr=0,(cn=this._metrics.addNewProbe(this._shareProducer,"share_producer")).onStatsCollected=function(cr){try{var Er;Pt._stats.producerStats||(Pt._stats.producerStats={}),Pt._stats.producerStats.share||(Pt._stats.producerStats.share=[]),Pt._shareProducer&&(Pt._latestStats[(Er=Pt._shareProducer)===null||Er===void 0?void 0:Er.id]=[]),cr.video.forEach(function(Zr){var Hr;Pt._shareProducer&&Pt._latestStats[(Hr=Pt._shareProducer)===null||Hr===void 0?void 0:Hr.id].push(Zr)}),Pr%5==0&&Pt._shareProducer!=null&&Pt._stats.producerStats.share.push({timestamp:new Date,stats:Pt._latestStats[Pt._shareProducer.id]}),Pr++}catch(Zr){var qr;(qr=Pt._videosdkLogs)===null||qr===void 0||qr.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:Zr.message}}),console.log("PRODUCER ERROR",Zr)}},cn.start(),this._shareProducer.observer.on("close",function(){cn.stop(),Pt._metrics.removeExistingProbe(cn)})),this._shareAudioProducer&&(_r=0,(_n=this._metrics.addNewProbe(this._shareAudioProducer,"share_audio_producer")).onStatsCollected=function(cr){try{var Er;Pt._stats.producerStats||(Pt._stats.producerStats={}),Pt._stats.producerStats.shareAudio||(Pt._stats.producerStats.shareAudio=[]),Pt._shareAudioProducer&&(Pt._latestStats[(Er=Pt._shareAudioProducer)===null||Er===void 0?void 0:Er.id]=[]),cr.audio.forEach(function(Zr){var Hr;Pt._shareAudioProducer&&Pt._latestStats[(Hr=Pt._shareAudioProducer)===null||Hr===void 0?void 0:Hr.id].push(Zr)}),_r%5==0&&Pt._shareAudioProducer!=null&&Pt._stats.producerStats.shareAudio.push(Ar({timestamp:new Date},Pt._latestStats[Pt._shareAudioProducer.id]?Pt._latestStats[Pt._shareAudioProducer.id][0]:{})),_r++}catch(Zr){var qr;(qr=Pt._videosdkLogs)===null||qr===void 0||qr.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:Zr.message}}),console.log("PRODUCER ERROR",Zr)}},_n.start(),this._shareAudioProducer.observer.on("close",function(){_n.stop(),Pt._metrics.removeExistingProbe(_n)}));case 101:case"end":return vt.stop()}},q,this,[[11,87],[19,25],[65,79]])})),function(){return Ws.apply(this,arguments)})},{key:"disableShare",value:(Rl=(0,c.Z)(n().mark(function q(){var W,B,U,H,re,ie,we,me,it,Ue,rt,se,Ye;return n().wrap(function(He){for(;;)switch(He.prev=He.next){case 0:if(_e.debug("disableShare()"),H=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"disableShare() Calling",status:1}),this._shareProducer){He.next=5;break}return(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:H,status:2,message:"Share Producer Not found"}),He.abrupt("return");case 5:return ie=(B=this._openTelemetry)===null||B===void 0?void 0:B.trace({spanName:"Closing Share Producer",span:H,status:1}),this._shareProducer.close(),we=We(this._shareProducer.id),Pe.dispatch(we),this._eventEmitter.emit(we.type,we.payload),this._shareAudioProducer&&(Ue=(me=this._openTelemetry)===null||me===void 0?void 0:me.trace({spanName:"Closing Share Audio Producer",span:H,status:1}),this._shareAudioProducer.close(),we=We(this._shareAudioProducer.id),Pe.dispatch(we),this._eventEmitter.emit(we.type,we.payload),(it=this._openTelemetry)===null||it===void 0||it.completeSpan({span:Ue,status:1,message:"Closed Share Audio Producer"})),He.prev=11,He.next=14,this._protoo.request("closeProducer",{producerId:this._shareProducer.id});case 14:if(!this._shareAudioProducer){He.next=17;break}return He.next=17,this._protoo.request("closeProducer",{producerId:this._shareAudioProducer.id});case 17:(rt=this._openTelemetry)===null||rt===void 0||rt.completeSpan({span:ie,status:1,message:"Requested Server to Close Producer"}),He.next=25;break;case 20:He.prev=20,He.t0=He.catch(11),Pe.dispatch(De({type:"error",text:"Error closing server-side share Producer: ".concat(He.t0)})),(se=this._openTelemetry)===null||se===void 0||se.completeSpan({span:H,status:2,message:"Error closing server-side share Producer ".concat(He.t0)}),(Ye=this._videosdkLogs)===null||Ye===void 0||Ye.pushLogs({logText:"Error closing server-side share Producer",logType:"ERROR",attributes:{error:He.t0.message}});case 25:this._shareProducer=null,this._shareAudioProducer=null,(U=this._openTelemetry)===null||U===void 0||U.completeSpan({span:H,status:1,message:"Screen Share Disabled Successfully"});case 28:case"end":return He.stop()}},q,this,[[11,20]])})),function(){return Rl.apply(this,arguments)})},{key:"enableAudioOnly",value:(Yn=(0,c.Z)(n().mark(function q(){var W,B,U;return n().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:_e.debug("enableAudioOnly()"),Pe.dispatch(Se(!0)),this.disableWebcam(),W=ar(this._consumers.values()),H.prev=4,W.s();case 6:if((B=W.n()).done){H.next=13;break}if((U=B.value).kind==="video"){H.next=10;break}return H.abrupt("continue",11);case 10:this._pauseConsumer(U);case 11:H.next=6;break;case 13:H.next=18;break;case 15:H.prev=15,H.t0=H.catch(4),W.e(H.t0);case 18:return H.prev=18,W.f(),H.finish(18);case 21:Pe.dispatch(Te(!0)),Pe.dispatch(Se(!1));case 23:case"end":return H.stop()}},q,this,[[4,15,18,21]])})),function(){return Yn.apply(this,arguments)})},{key:"disableAudioOnly",value:(sc=(0,c.Z)(n().mark(function q(){var W,B,U;return n().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:_e.debug("disableAudioOnly()"),Pe.dispatch(Se(!0)),!this._webcamProducer&&this._produce&&(N()||{}).webcamEnabled&&this.enableWebcam(),W=ar(this._consumers.values()),H.prev=4,W.s();case 6:if((B=W.n()).done){H.next=13;break}if((U=B.value).kind==="video"){H.next=10;break}return H.abrupt("continue",11);case 10:this._resumeConsumer(U);case 11:H.next=6;break;case 13:H.next=18;break;case 15:H.prev=15,H.t0=H.catch(4),W.e(H.t0);case 18:return H.prev=18,W.f(),H.finish(18);case 21:Pe.dispatch(Te(!1)),Pe.dispatch(Se(!1));case 23:case"end":return H.stop()}},q,this,[[4,15,18,21]])})),function(){return sc.apply(this,arguments)})},{key:"muteAudio",value:(_o=(0,c.Z)(n().mark(function q(){return n().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:_e.debug("muteAudio()"),Pe.dispatch(Ce(!0));case 2:case"end":return W.stop()}},q)})),function(){return _o.apply(this,arguments)})},{key:"unmuteAudio",value:(vo=(0,c.Z)(n().mark(function q(){return n().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:_e.debug("unmuteAudio()"),Pe.dispatch(Ce(!1));case 2:case"end":return W.stop()}},q)})),function(){return vo.apply(this,arguments)})},{key:"handleRemoteRestartIce",value:(ds=(0,c.Z)(n().mark(function q(W){var B,U,H,re,ie,we,me,it;return n().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return H=W.iceParameters,re=W.transportId,ie=W.internalSpan,re===((B=this._sendTransport)===null||B===void 0?void 0:B.id)&&this._sendTransport.restartIce({iceParameters:H}),re===((U=this._recvTransport)===null||U===void 0?void 0:U.id)&&this._recvTransport.restartIce({iceParameters:H}),Ue.prev=3,Ue.next=6,this._protoo.request("iceRestarted",{transportId:re});case 6:(we=this._openTelemetry)===null||we===void 0||we.completeSpan({span:ie,status:1,message:"iceRestarted"}),Ue.next=14;break;case 9:Ue.prev=9,Ue.t0=Ue.catch(3),(me=this._openTelemetry)===null||me===void 0||me.completeSpan({span:ie,status:2,message:"handleRemoteRestartIce() ICE restart failed ".concat(Ue.t0)}),(it=this._videosdkLogs)===null||it===void 0||it.pushLogs({logText:"Error handleRemoteRestartIce() ICE restart failed",logType:"ERROR",attributes:{error:Ue.t0.message}}),Pe.dispatch(De({type:"error",text:"ICE restart failed: ".concat(Ue.t0)}));case 14:case"end":return Ue.stop()}},q,this,[[3,9]])})),function(q){return ds.apply(this,arguments)})},{key:"restartIce",value:(Us=(0,c.Z)(n().mark(function q(){var W,B,U;return n().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(_e.debug("restartIce()"),Pe.dispatch(Re(!0)),H.prev=2,!this._sendTransport){H.next=9;break}return H.next=6,this._protoo.request("restartIce",{transportId:this._sendTransport.id});case 6:return W=H.sent,H.next=9,this._sendTransport.restartIce({iceParameters:W});case 9:if(!this._recvTransport){H.next=15;break}return H.next=12,this._protoo.request("restartIce",{transportId:this._recvTransport.id});case 12:return B=H.sent,H.next=15,this._recvTransport.restartIce({iceParameters:B});case 15:Pe.dispatch(De({text:"ICE restarted"})),H.next=23;break;case 18:H.prev=18,H.t0=H.catch(2),_e.error("restartIce() | failed:%o",H.t0),Pe.dispatch(De({type:"error",text:"ICE restart failed: ".concat(H.t0)})),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"Error restartIce() ICE restart failed",logType:"ERROR",attributes:{error:H.t0.message}});case 23:Pe.dispatch(Re(!1));case 24:case"end":return H.stop()}},q,this,[[2,18]])})),function(){return Us.apply(this,arguments)})},{key:"setMaxSendingSpatialLayer",value:(Mi=(0,c.Z)(n().mark(function q(W){var B;return n().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(_e.debug("setMaxSendingSpatialLayer() [spatialLayer:%s]",W),U.prev=1,!this._webcamProducer){U.next=7;break}return U.next=5,this._webcamProducer.setMaxSpatialLayer(W);case 5:U.next=10;break;case 7:if(!this._shareProducer){U.next=10;break}return U.next=10,this._shareProducer.setMaxSpatialLayer(W);case 10:U.next=17;break;case 12:U.prev=12,U.t0=U.catch(1),_e.error("setMaxSendingSpatialLayer() | failed:%o",U.t0),(B=this._videosdkLogs)===null||B===void 0||B.pushLogs({logText:"Error setting max sending video spatial layer",logType:"ERROR",attributes:{error:U.t0.message}}),Pe.dispatch(De({type:"error",text:"Error setting max sending video spatial layer: ".concat(U.t0)}));case 17:case"end":return U.stop()}},q,this,[[1,12]])})),function(q){return Mi.apply(this,arguments)})},{key:"setWebcamQuality",value:(go=(0,c.Z)(n().mark(function q(W){var B,U;return n().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(this._webcamProducer){H.next=2;break}return H.abrupt("return");case 2:if(B=this._webcam.resolution,U=bi[B][W].s,this._webcamProducer.maxSpatialLayer!=U){H.next=6;break}return H.abrupt("return");case 6:return H.next=8,this._webcamProducer.setMaxSpatialLayer(U);case 8:case"end":return H.stop()}},q,this)})),function(q){return go.apply(this,arguments)})},{key:"setConsumerQuality",value:(Ii=(0,c.Z)(n().mark(function q(W,B){var U,H,re,ie,we,me,it;return n().wrap(function(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:return ie=this._webcam.resolution,we=(U=this._openTelemetry)===null||U===void 0?void 0:U.trace({spanName:'Setting "'.concat(B,'" Quality')}),me=bi[ie][B].s,it=bi[ie][B].t,(H=this._openTelemetry)===null||H===void 0||H.traceAutoComplete({spanName:"Getting spatial & temporal layers",span:we,attributes:{spatialLayers:JSON.parse(me),temporalLayers:JSON.parse(it)},status:1}),Ue.next=7,this.setConsumerPreferredLayers(W,me,it);case 7:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({message:"Done",span:we,status:1});case 8:case"end":return Ue.stop()}},q,this)})),function(q,W){return Ii.apply(this,arguments)})},{key:"setViewPort",value:(Sl=(0,c.Z)(n().mark(function q(W,B,U){var H,re,ie,we;return n().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(this._consumers.get(W.id)){me.next=2;break}return me.abrupt("return");case 2:if(H=lt(this._consumers.get(W.id),B,U),re=H.consumerId,ie=H.newPreferredSpatialLayer,we=H.newPreferredTemporalLayer,!re){me.next=6;break}return me.next=6,this.setConsumerPreferredLayers(re,ie,we);case 6:case"end":return me.stop()}},q,this)})),function(q,W,B){return Sl.apply(this,arguments)})},{key:"setConsumerPreferredLayers",value:(ur=(0,c.Z)(n().mark(function q(W,B,U){var H,re;return n().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return _e.debug("setConsumerPreferredLayers() [consumerId:%s, spatialLayer:%s, temporalLayer:%s]",W,B,U),ie.prev=1,(H=this._consumers.get(W)).spatialLayers>1&&(H.preferredSpatialLayer=B,H.preferredTemporalLayer=U),ie.next=6,this._protoo.request("setConsumerPreferredLayers",{consumerId:W,spatialLayer:B,temporalLayer:U});case 6:Pe.dispatch(fr(W,B,U)),ie.next=14;break;case 9:ie.prev=9,ie.t0=ie.catch(1),_e.error("setConsumerPreferredLayers() | failed:%o",ie.t0),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error setting Consumer preferred layers:",logType:"ERROR",attributes:{error:ie.t0.message}}),Pe.dispatch(De({type:"error",text:"Error setting Consumer preferred layers: ".concat(ie.t0)}));case 14:case"end":return ie.stop()}},q,this,[[1,9]])})),function(q,W,B){return ur.apply(this,arguments)})},{key:"setConsumerPriority",value:(Gn=(0,c.Z)(n().mark(function q(W,B){var U;return n().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return _e.debug("setConsumerPriority() [consumerId:%s, priority:%d]",W,B),H.prev=1,H.next=4,this._protoo.request("setConsumerPriority",{consumerId:W,priority:B});case 4:Pe.dispatch(Ft(W,B)),H.next=12;break;case 7:H.prev=7,H.t0=H.catch(1),_e.error("setConsumerPriority() | failed:%o",H.t0),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"Error setting Consumer priority",logType:"ERROR",attributes:{error:H.t0.message}}),Pe.dispatch(De({type:"error",text:"Error setting Consumer priority: ".concat(H.t0)}));case 12:case"end":return H.stop()}},q,this,[[1,7]])})),function(q,W){return Gn.apply(this,arguments)})},{key:"requestConsumerKeyFrame",value:(Fn=(0,c.Z)(n().mark(function q(W){var B;return n().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return _e.debug("requestConsumerKeyFrame() [consumerId:%s]",W),U.prev=1,U.next=4,this._protoo.request("requestConsumerKeyFrame",{consumerId:W});case 4:Pe.dispatch(De({text:"Keyframe requested for video consumer"})),U.next=12;break;case 7:U.prev=7,U.t0=U.catch(1),_e.error("requestConsumerKeyFrame() | failed:%o",U.t0),(B=this._videosdkLogs)===null||B===void 0||B.pushLogs({logText:"Error requesting key frame for Consumer",logType:"ERROR",attributes:{error:U.t0.message}}),Pe.dispatch(De({type:"error",text:"Error requesting key frame for Consumer: ".concat(U.t0)}));case 12:case"end":return U.stop()}},q,this,[[1,7]])})),function(q){return Fn.apply(this,arguments)})},{key:"enableChatDataProducer",value:(qt=(0,c.Z)(n().mark(function q(){var W,B=this;return n().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(_e.debug("enableChatDataProducer()"),this._useDataChannel){U.next=3;break}return U.abrupt("return");case 3:return U.prev=3,U.next=6,this._sendTransport.produceData({ordered:!1,maxRetransmits:1,label:"chat",priority:"medium",appData:{info:"my-chat-DataProducer"}});case 6:this._chatDataProducer=U.sent,Pe.dispatch(yt({id:this._chatDataProducer.id,sctpStreamParameters:this._chatDataProducer.sctpStreamParameters,label:this._chatDataProducer.label,protocol:this._chatDataProducer.protocol})),this._chatDataProducer.on("transportclose",function(){B._chatDataProducer=null}),this._chatDataProducer.on("open",function(){_e.debug('chat DataProducer "open" event')}),this._chatDataProducer.on("close",function(){_e.error('chat DataProducer "close" event'),B._chatDataProducer=null,Pe.dispatch(De({type:"error",text:"Chat DataProducer closed"}))}),this._chatDataProducer.on("error",function(H){_e.error('chat DataProducer "error" event:%o',H),Pe.dispatch(De({type:"error",text:"Chat DataProducer error: ".concat(H)}))}),this._chatDataProducer.on("bufferedamountlow",function(){_e.debug('chat DataProducer "bufferedamountlow" event')}),U.next=21;break;case 15:throw U.prev=15,U.t0=U.catch(3),_e.error("enableChatDataProducer() | failed:%o",U.t0),(W=this._videosdkLogs)===null||W===void 0||W.pushLogs({logText:"Error enabling chat DataProducer",logType:"ERROR",attributes:{error:U.t0.message}}),Pe.dispatch(De({type:"error",text:"Error enabling chat DataProducer: ".concat(U.t0)})),U.t0;case 21:case"end":return U.stop()}},q,this,[[3,15]])})),function(){return qt.apply(this,arguments)})},{key:"enableBotDataProducer",value:(Ke=(0,c.Z)(n().mark(function q(){var W,B=this;return n().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(_e.debug("enableBotDataProducer()"),this._useDataChannel){U.next=3;break}return U.abrupt("return");case 3:return U.prev=3,U.next=6,this._sendTransport.produceData({ordered:!1,maxPacketLifeTime:2e3,label:"bot",priority:"medium",appData:{info:"my-bot-DataProducer"}});case 6:this._botDataProducer=U.sent,Pe.dispatch(yt({id:this._botDataProducer.id,sctpStreamParameters:this._botDataProducer.sctpStreamParameters,label:this._botDataProducer.label,protocol:this._botDataProducer.protocol})),this._botDataProducer.on("transportclose",function(){B._botDataProducer=null}),this._botDataProducer.on("open",function(){_e.debug('bot DataProducer "open" event')}),this._botDataProducer.on("close",function(){_e.error('bot DataProducer "close" event'),B._botDataProducer=null,Pe.dispatch(De({type:"error",text:"Bot DataProducer closed"}))}),this._botDataProducer.on("error",function(H){_e.error('bot DataProducer "error" event:%o',H),Pe.dispatch(De({type:"error",text:"Bot DataProducer error: ".concat(H)}))}),this._botDataProducer.on("bufferedamountlow",function(){_e.debug('bot DataProducer "bufferedamountlow" event')}),U.next=21;break;case 15:throw U.prev=15,U.t0=U.catch(3),_e.error("enableBotDataProducer() | failed:%o",U.t0),(W=this._videosdkLogs)===null||W===void 0||W.pushLogs({logText:"Error enabling bot DataProducer",logType:"ERROR",attributes:{error:U.t0.message}}),Pe.dispatch(De({type:"error",text:"Error enabling bot DataProducer: ".concat(U.t0)})),U.t0;case 21:case"end":return U.stop()}},q,this,[[3,15]])})),function(){return Ke.apply(this,arguments)})},{key:"sendChatMessage",value:(K=(0,c.Z)(n().mark(function q(W){return n().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(_e.debug('sendChatMessage() [text:"%s]',W),this._chatDataProducer){B.next=4;break}return Pe.dispatch(De({type:"error",text:"No chat DataProducer"})),B.abrupt("return");case 4:try{this._chatDataProducer.send(W)}catch(U){_e.error("chat DataProducer.send() failed:%o",U),Pe.dispatch(De({type:"error",text:"chat DataProducer.send() failed: ".concat(U)}))}case 5:case"end":return B.stop()}},q,this)})),function(q){return K.apply(this,arguments)})},{key:"sendBotMessage",value:(dt=(0,c.Z)(n().mark(function q(W){return n().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(_e.debug('sendBotMessage() [text:"%s]',W),this._botDataProducer){B.next=4;break}return Pe.dispatch(De({type:"error",text:"No bot DataProducer"})),B.abrupt("return");case 4:try{this._botDataProducer.send(W)}catch(U){_e.error("bot DataProducer.send() failed:%o",U),Pe.dispatch(De({type:"error",text:"bot DataProducer.send() failed: ".concat(U)}))}case 5:case"end":return B.stop()}},q,this)})),function(q){return dt.apply(this,arguments)})},{key:"changeDisplayName",value:(wi=(0,c.Z)(n().mark(function q(W){return n().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return _e.debug('changeDisplayName() [displayName:"%s"]',W),x({displayName:W}),B.prev=2,B.next=5,this._protoo.request("changeDisplayName",{displayName:W});case 5:this._displayName=W,Pe.dispatch(he(W)),Pe.dispatch(De({text:"Display name changed"})),B.next=15;break;case 10:B.prev=10,B.t0=B.catch(2),_e.error("changeDisplayName() | failed: %o",B.t0),Pe.dispatch(De({type:"error",text:"Could not change display name: ".concat(B.t0)})),Pe.dispatch(he());case 15:case"end":return B.stop()}},q,this,[[2,10]])})),function(q){return wi.apply(this,arguments)})},{key:"openConnection",value:(Di=(0,c.Z)(n().mark(function q(W){var B,U;return n().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return B=W.roomId,U=W.payload,H.next=3,this._protoo.request("openConnection",{roomId:B,payload:U}).catch(function(re){throw new Error(re)});case 3:case"end":return H.stop()}},q,this)})),function(q){return Di.apply(this,arguments)})},{key:"closeConnection",value:(us=(0,c.Z)(n().mark(function q(W){return n().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,this._protoo.request("closeConnection",{roomId:W});case 2:case"end":return B.stop()}},q,this)})),function(q){return us.apply(this,arguments)})},{key:"switchTo",value:(ls=(0,c.Z)(n().mark(function q(W){var B,U,H;return n().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return B=W.roomId,U=W.peerIds,H=W.payload,re.next=3,this._protoo.request("requestSwitchRoom",{roomId:B,peerIds:U,payload:H});case 3:case"end":return re.stop()}},q,this)})),function(q){return ls.apply(this,arguments)})},{key:"switchPeerRoom",value:(cs=(0,c.Z)(n().mark(function q(W){var B,U,H,re;return n().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return B=W.peerId,U=W.roomId,H=W.payload,re=W.token,ie.next=3,this._protoo.request("switchPeerRoom",{roomId:U,peerId:B,payload:H,token:re});case 3:case"end":return ie.stop()}},q,this)})),function(q){return cs.apply(this,arguments)})},{key:"connectionSwitchPeerRoom",value:(os=(0,c.Z)(n().mark(function q(W){var B,U,H,re,ie;return n().wrap(function(we){for(;;)switch(we.prev=we.next){case 0:return B=W.roomId,U=W.connectionRoomId,H=W.peerId,re=W.payload,ie=W.token,we.next=3,this._protoo.request("connectionSwitchPeerRoom",{roomId:B,connectionRoomId:U,peerId:H,payload:re,token:ie});case 3:case"end":return we.stop()}},q,this)})),function(q){return os.apply(this,arguments)})},{key:"connectionSendChatMessage",value:(ss=(0,c.Z)(n().mark(function q(W){var B,U;return n().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return B=W.roomId,U=W.message,H.next=3,this._protoo.request("connectionSendChatMessage",{roomId:B,message:U});case 3:case"end":return H.stop()}},q,this)})),function(q){return ss.apply(this,arguments)})},{key:"connectionEndMeeting",value:(is=(0,c.Z)(n().mark(function q(W){var B;return n().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return B=W.roomId,U.next=3,this._protoo.request("connectionCloseRoom",{roomId:B});case 3:case"end":return U.stop()}},q,this)})),function(q){return is.apply(this,arguments)})},{key:"pubsubPublish",value:(as=(0,c.Z)(n().mark(function q(W,B,U,H){var re,ie,we,me,it,Ue;return n().wrap(function(rt){for(;;)switch(rt.prev=rt.next){case 0:if(rt.prev=0,U!=null&&U.sendOnly){if(re=U.sendOnly,ie=[],re){we=ar(re);try{for(we.s();!(me=we.n()).done;)(it=me.value)&&ie.push(it.toString())}catch(se){we.e(se)}finally{we.f()}}U.sendOnly=ie}return rt.next=4,this._protoo.request("pubsubPublish",{topic:W,message:B,options:U,payload:H});case 4:rt.next=10;break;case 6:rt.prev=6,rt.t0=rt.catch(0),(Ue=this._videosdkLogs)===null||Ue===void 0||Ue.pushLogs({logText:"Error pubsubPublish() | failed",logType:"ERROR",attributes:{error:rt.t0.message}}),_e.error("pubsubPublish() | failed: %o",rt.t0);case 10:case"end":return rt.stop()}},q,this,[[0,6]])})),function(q,W,B,U){return as.apply(this,arguments)})},{key:"pubsubSubscribe",value:(ns=(0,c.Z)(n().mark(function q(W){var B,U;return n().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!this._closed){H.next=2;break}return H.abrupt("return");case 2:return H.prev=2,H.next=5,this._protoo.request("pubsubSubscribe",{topic:W});case 5:return B=H.sent,H.abrupt("return",B);case 9:H.prev=9,H.t0=H.catch(2),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"Error pubsubSubscribe() | failed",logType:"ERROR",attributes:{error:H.t0.message}}),_e.error("pubsubSubscribe() | failed: %o",H.t0);case 13:case"end":return H.stop()}},q,this,[[2,9]])})),function(q){return ns.apply(this,arguments)})},{key:"pubsubUnsubscribe",value:(rs=(0,c.Z)(n().mark(function q(W){var B,U;return n().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!this._closed){H.next=2;break}return H.abrupt("return");case 2:return H.prev=2,H.next=5,this._protoo.request("pubsubUnsubscribe",{topic:W});case 5:(B=this._videosdkLogs)===null||B===void 0||B.pushLogs({logText:"Pubsub Unsubscribing Successfully for topic ".concat(W),logType:"INFO"}),H.next=12;break;case 8:H.prev=8,H.t0=H.catch(2),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"Error pubsubUnsubscribe() | failed",logType:"ERROR",attributes:{error:H.t0.message}}),_e.error("pubsubUnsubscribe() | failed: %o",H.t0);case 12:case"end":return H.stop()}},q,this,[[2,8]])})),function(q){return rs.apply(this,arguments)})},{key:"closeRoom",value:(ts=(0,c.Z)(n().mark(function q(){return n().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,this._protoo.request("closeRoom",{});case 2:case"end":return W.stop()}},q,this)})),function(){return ts.apply(this,arguments)})},{key:"removePeer",value:(es=(0,c.Z)(n().mark(function q(W){var B;return n().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if((B=this._openTelemetry)===null||B===void 0||B.traceAutoComplete({spanName:"Removing peer ".concat(W),status:1}),W!=null){U.next=3;break}return U.abrupt("return");case 3:return U.next=5,this._protoo.request("removePeer",{peerId:W});case 5:case"end":return U.stop()}},q,this)})),function(q){return es.apply(this,arguments)})},{key:"startPingPong",value:(Xi=(0,c.Z)(n().mark(function q(){var W=this;return n().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:this._pingWebsocketInterval!=null&&clearInterval(this._pingWebsocketInterval),this._pingWebsocketInterval=setInterval(function(){W.pingWebSocket()},2e3);case 2:case"end":return B.stop()}},q,this)})),function(){return Xi.apply(this,arguments)})},{key:"pingWebSocket",value:(Yi=(0,c.Z)(n().mark(function q(){var W,B=this;return n().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(!this._closed){U.next=2;break}return U.abrupt("return");case 2:W=!1,this._protoo.request("ping").then(function(H){H&&(W=!0)}).catch(function(H){}),setTimeout(function(){W?(!B._isWebsocketAlive||B._pingWebsocketFailedCounter>1?(B._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"CONNECTED"}),B._isWebsocketAlive=!0,B._pingWebsocketFailedCounter=0,B.restartIce()):B._transportState!="failed"&&B._transportState!="disconnected"||(console.log("Calling Restart Ice based on transport state",B._transportState),B.restartIce()),B._pingWebsocketFailedCounter=0):(B._isWebsocketAlive&&B._pingWebsocketFailedCounter>1&&(B._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"DISCONNECTED"}),B._isWebsocketAlive=!1,B.startInternetPingPong()),B._pingWebsocketFailedCounter=B._pingWebsocketFailedCounter+1)},1e3);case 5:case"end":return U.stop()}},q,this)})),function(){return Yi.apply(this,arguments)})},{key:"startInternetPingPong",value:(Ji=(0,c.Z)(n().mark(function q(){var W=this;return n().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:this._pingInternetInterval!=null&&clearInterval(this._pingInternetInterval),this._pingInternetInterval=setInterval(function(){W.pingInternet()},2e3);case 2:case"end":return B.stop()}},q,this)})),function(){return Ji.apply(this,arguments)})},{key:"pingInternet",value:(Qi=(0,c.Z)(n().mark(function q(){var W,B,U,H,re,ie,we=this;return n().wrap(function(me){for(;;)switch(me.prev=me.next){case 0:if(!this._closed){me.next=2;break}return me.abrupt("return");case 2:return(W=this._videosdkLogs)===null||W===void 0||W.pushLogs({logText:"pinging internet",logType:"INFO"}),B=new AbortController,U=B.signal,H=setTimeout(function(){B.abort()},1e3),me.next=8,fetch("https://".concat(this._signalingBaseUrl,"/ping"),{method:"GET",signal:U}).then(function(it){return clearTimeout(H),it.text()}).catch(function(it){var Ue;return(Ue=we._videosdkLogs)===null||Ue===void 0||Ue.pushLogs({logText:"Error pingInternet failed",logType:"ERROR",attributes:{error:it.message}}),"failed"});case 8:if(me.sent!="pong"){me.next=19;break}if((re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Pong",logType:"INFO"}),!(this._pingWebsocketFailedCounter>5&&this._pongInternetCounter>3)||this._isWebsocketAlive){me.next=17;break}return this._pongInternetCounter=0,this.close({sendLeft:!1}),(ie=this._videosdkLogs)===null||ie===void 0||ie.pushLogs({logText:"Re-join the meeting, after diconnect",logType:"INFO"}),me.next=17,this.join();case 17:this._pongInternetCounter=this._pongInternetCounter+1,this._isWebsocketAlive&&(this._pongInternetCounter=0,this._pingInternetInterval!=null&&(clearInterval(this._pingInternetInterval),this._pingInternetInterval=null));case 19:case"end":return me.stop()}},q,this)})),function(){return Qi.apply(this,arguments)})},{key:"getSendTransportRemoteStats",value:(Ki=(0,c.Z)(n().mark(function q(){return n().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(_e.debug("getSendTransportRemoteStats()"),this._sendTransport){W.next=3;break}return W.abrupt("return");case 3:return W.abrupt("return",this._protoo.request("getTransportStats",{transportId:this._sendTransport.id}));case 4:case"end":return W.stop()}},q,this)})),function(){return Ki.apply(this,arguments)})},{key:"getRecvTransportRemoteStats",value:(ci=(0,c.Z)(n().mark(function q(){return n().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(_e.debug("getRecvTransportRemoteStats()"),this._recvTransport){W.next=3;break}return W.abrupt("return");case 3:return W.abrupt("return",this._protoo.request("getTransportStats",{transportId:this._recvTransport.id}));case 4:case"end":return W.stop()}},q,this)})),function(){return ci.apply(this,arguments)})},{key:"getAudioRemoteStats",value:(Qa=(0,c.Z)(n().mark(function q(){var W;return n().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(_e.debug("getAudioRemoteStats()"),W=this._micProducer){B.next=4;break}return B.abrupt("return");case 4:return B.abrupt("return",this._latestStats[W.id]);case 5:case"end":return B.stop()}},q,this)})),function(){return Qa.apply(this,arguments)})},{key:"getVideoRemoteStats",value:(_a=(0,c.Z)(n().mark(function q(){var W;return n().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(_e.debug("getVideoRemoteStats()"),W=this._webcamProducer){B.next=4;break}return B.abrupt("return");case 4:return B.abrupt("return",this._latestStats[W.id]);case 5:case"end":return B.stop()}},q,this)})),function(){return _a.apply(this,arguments)})},{key:"getShareRemoteStats",value:(La=(0,c.Z)(n().mark(function q(){var W;return n().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(_e.debug("getVideoRemoteStats()"),W=this._shareProducer){B.next=4;break}return B.abrupt("return");case 4:return B.abrupt("return",this._latestStats[W.id]);case 5:case"end":return B.stop()}},q,this)})),function(){return La.apply(this,arguments)})},{key:"getShareAudioRemoteStats",value:(Ma=(0,c.Z)(n().mark(function q(){var W;return n().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(W=this._shareAudioProducer){B.next=3;break}return B.abrupt("return");case 3:return B.abrupt("return",this._latestStats[W.id]);case 4:case"end":return B.stop()}},q,this)})),function(){return Ma.apply(this,arguments)})},{key:"getConsumerRemoteStats",value:(sa=(0,c.Z)(n().mark(function q(W){var B,U;return n().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(_e.debug("getConsumerRemoteStats()"),B=this._consumers.get(W)){H.next=4;break}return H.abrupt("return");case 4:return this._latestStats[W]&&(this._latestStats[W][0].currentSpatialLayer=B.currentSpatialLayer,this._latestStats[W][0].currentTemporalLayer=B.currentTemporalLayer,this._latestStats[W][0].preferredSpatialLayer=B.preferredSpatialLayer,this._latestStats[W][0].preferredTemporalLayer=B.preferredTemporalLayer),U=B.track.id.replace(/[{}]/g,""),H.abrupt("return",this._latestStats[U]);case 7:case"end":return H.stop()}},q,this)})),function(q){return sa.apply(this,arguments)})},{key:"getChatDataProducerRemoteStats",value:(Jn=(0,c.Z)(n().mark(function q(){var W;return n().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(_e.debug("getChatDataProducerRemoteStats()"),W=this._chatDataProducer){B.next=4;break}return B.abrupt("return");case 4:return B.abrupt("return",this._protoo.request("getDataProducerStats",{dataProducerId:W.id}));case 5:case"end":return B.stop()}},q,this)})),function(){return Jn.apply(this,arguments)})},{key:"getBotDataProducerRemoteStats",value:($n=(0,c.Z)(n().mark(function q(){var W;return n().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(_e.debug("getBotDataProducerRemoteStats()"),W=this._botDataProducer){B.next=4;break}return B.abrupt("return");case 4:return B.abrupt("return",this._protoo.request("getDataProducerStats",{dataProducerId:W.id}));case 5:case"end":return B.stop()}},q,this)})),function(){return $n.apply(this,arguments)})},{key:"getDataConsumerRemoteStats",value:(En=(0,c.Z)(n().mark(function q(W){return n().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(_e.debug("getDataConsumerRemoteStats()"),this._dataConsumers.get(W)){B.next=4;break}return B.abrupt("return");case 4:return B.abrupt("return",this._protoo.request("getDataConsumerStats",{dataConsumerId:W}));case 5:case"end":return B.stop()}},q,this)})),function(q){return En.apply(this,arguments)})},{key:"getSendTransportLocalStats",value:(mn=(0,c.Z)(n().mark(function q(){return n().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(_e.debug("getSendTransportLocalStats()"),this._sendTransport){W.next=3;break}return W.abrupt("return");case 3:return W.abrupt("return",this._sendTransport.getStats());case 4:case"end":return W.stop()}},q,this)})),function(){return mn.apply(this,arguments)})},{key:"getRecvTransportLocalStats",value:(on=(0,c.Z)(n().mark(function q(){return n().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(_e.debug("getRecvTransportLocalStats()"),this._recvTransport){W.next=3;break}return W.abrupt("return");case 3:return W.abrupt("return",this._recvTransport.getStats());case 4:case"end":return W.stop()}},q,this)})),function(){return on.apply(this,arguments)})},{key:"getAudioLocalStats",value:(jr=(0,c.Z)(n().mark(function q(){return n().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(_e.debug("getAudioLocalStats()"),this._micProducer){W.next=3;break}return W.abrupt("return");case 3:return W.abrupt("return",this._micProducer.getStats());case 4:case"end":return W.stop()}},q,this)})),function(){return jr.apply(this,arguments)})},{key:"getVideoLocalStats",value:(pr=(0,c.Z)(n().mark(function q(){var W;return n().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(_e.debug("getVideoLocalStats()"),W=this._webcamProducer||this._shareProducer){B.next=4;break}return B.abrupt("return");case 4:return B.abrupt("return",W.getStats());case 5:case"end":return B.stop()}},q,this)})),function(){return pr.apply(this,arguments)})},{key:"getConsumerLocalStats",value:(dr=(0,c.Z)(n().mark(function q(W){var B;return n().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(B=this._consumers.get(W)){U.next=3;break}return U.abrupt("return");case 3:return U.abrupt("return",B.getStats());case 4:case"end":return U.stop()}},q,this)})),function(q){return dr.apply(this,arguments)})},{key:"applyNetworkThrottle",value:(Ut=(0,c.Z)(n().mark(function q(W){var B,U,H,re;return n().wrap(function(ie){for(;;)switch(ie.prev=ie.next){case 0:return B=W.uplink,U=W.downlink,H=W.rtt,re=W.secret,_e.debug("applyNetworkThrottle() [uplink:%s, downlink:%s, rtt:%s]",B,U,H),ie.prev=2,ie.next=5,this._protoo.request("applyNetworkThrottle",{uplink:B,downlink:U,rtt:H,secret:re});case 5:ie.next=11;break;case 7:ie.prev=7,ie.t0=ie.catch(2),_e.error("applyNetworkThrottle() | failed:%o",ie.t0),Pe.dispatch(De({type:"error",text:"Error applying network throttle: ".concat(ie.t0)}));case 11:case"end":return ie.stop()}},q,this,[[2,7]])})),function(q){return Ut.apply(this,arguments)})},{key:"resetNetworkThrottle",value:(mr=(0,c.Z)(n().mark(function q(W){var B,U,H;return n().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return B=W.silent,U=B!==void 0&&B,H=W.secret,_e.debug("resetNetworkThrottle()"),re.prev=2,re.next=5,this._protoo.request("resetNetworkThrottle",{secret:H});case 5:re.next=10;break;case 7:re.prev=7,re.t0=re.catch(2),U||(_e.error("resetNetworkThrottle() | failed:%o",re.t0),Pe.dispatch(De({type:"error",text:"Error resetting network throttle: ".concat(re.t0)})));case 10:case"end":return re.stop()}},q,this,[[2,7]])})),function(q){return mr.apply(this,arguments)})},{key:"createProducerTransport",value:(It=(0,c.Z)(n().mark(function q(W,B){var U,H,re,ie,we,me,it,Ue,rt=this;return n().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:re=W.id,ie=W.iceParameters,we=W.iceCandidates,me=W.dtlsParameters,it=W.sctpParameters,Ue=(U=this._openTelemetry)===null||U===void 0?void 0:U.trace({spanName:"Creating Send Transport",span:B||null}),this._sendTransport=this._mediasoupDevice.createSendTransport({id:re,iceParameters:ie,iceCandidates:we,dtlsParameters:me,sctpParameters:it,iceServers:this._iceServers}),this._sendTransport.on("connect",function(Ye,He,Je){var fe,Ae=Ye.dtlsParameters;(fe=rt._openTelemetry)===null||fe===void 0||fe.traceAutoComplete({spanName:"this._sendTransport `connect` Event : Transport is about to establish the ICE+DTLS connection",span:Ue,status:1}),rt._protoo.request("connectWebRtcTransport",{transportId:rt._sendTransport.id,dtlsParameters:Ae}).then(He).catch(Je)}),this._sendTransport.on("produce",function(){var Ye=(0,c.Z)(n().mark(function He(Je,fe,Ae){var Mt,Wt,Ht,$t,zt,Xt,Lt;return n().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:return Mt=Je.kind,Wt=Je.rtpParameters,Ht=Je.appData,Et.prev=1,($t=rt._openTelemetry)===null||$t===void 0||$t.traceAutoComplete({spanName:"this._sendTransport `produce` Event : Transmit information about a new producer ",span:Ue,status:1}),Et.next=5,rt._protoo.request("produce",{transportId:rt._sendTransport.id,kind:Mt,rtpParameters:Wt,appData:Ht});case 5:zt=Et.sent,Xt=zt.id,fe({id:Xt}),Et.next=14;break;case 10:Et.prev=10,Et.t0=Et.catch(1),(Lt=rt._videosdkLogs)===null||Lt===void 0||Lt.pushLogs({logText:'Error this._sendTransport "produce" Event catch',logType:"ERROR",attributes:{error:Et.t0.message}}),Ae(Et.t0);case 14:case"end":return Et.stop()}},He,null,[[1,10]])}));return function(He,Je,fe){return Ye.apply(this,arguments)}}()),this._sendTransport.on("producedata",function(){var Ye=(0,c.Z)(n().mark(function He(Je,fe,Ae){var Mt,Wt,Ht,$t,zt,Xt,Lt;return n().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:return Mt=Je.sctpStreamParameters,Wt=Je.label,Ht=Je.protocol,$t=Je.appData,_e.debug('"producedata" event: [sctpStreamParameters:%o, appData:%o]',Mt,$t),Et.prev=2,Et.next=5,rt._protoo.request("produceData",{transportId:rt._sendTransport.id,sctpStreamParameters:Mt,label:Wt,protocol:Ht,appData:$t});case 5:zt=Et.sent,Xt=zt.id,fe({id:Xt}),Et.next=14;break;case 10:Et.prev=10,Et.t0=Et.catch(2),(Lt=rt._videosdkLogs)===null||Lt===void 0||Lt.pushLogs({logText:"Error producedata event catch",logType:"ERROR",attributes:{error:Et.t0.message}}),Ae(Et.t0);case 14:case"end":return Et.stop()}},He,null,[[2,10]])}));return function(He,Je,fe){return Ye.apply(this,arguments)}}()),this._sendTransport.on("connectionstatechange",function(Ye){var He;(He=rt._openTelemetry)===null||He===void 0||He.traceAutoComplete({spanName:"_sendTransport Event connectionstatechange ".concat(Ye),span:Ue,status:1}),Ye==="failed"&&rt.restartIce(),rt._transportState=Ye}),(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:Ue,status:1,message:"Send Transport Created Successfully"});case 8:case"end":return se.stop()}},q,this)})),function(q,W){return It.apply(this,arguments)})},{key:"createConsumerTransport",value:(lr=(0,c.Z)(n().mark(function q(W,B){var U,H,re,ie,we,me,it,Ue,rt,se,Ye=this;return n().wrap(function(He){for(;;)switch(He.prev=He.next){case 0:re=W.id,ie=W.iceParameters,we=W.iceCandidates,me=W.dtlsParameters,it=W.sctpParameters,Ue=(U=this._openTelemetry)===null||U===void 0?void 0:U.trace({spanName:"Creating Recieve Transport",span:B||null}),this._recvTransport=this._mediasoupDevice.createRecvTransport({id:re,iceParameters:ie,iceCandidates:we,dtlsParameters:me,sctpParameters:it,iceServers:this._iceServers}),this._recvTransport.on("connect",function(Je,fe,Ae){var Mt,Wt=Je.dtlsParameters;(Mt=Ye._openTelemetry)===null||Mt===void 0||Mt.traceAutoComplete({spanName:"this._recvTransport `connect` Event : Recieve Transport is about to establish the ICE+DTLS connection",span:Ue,status:1}),Ye._protoo.request("connectWebRtcTransport",{transportId:Ye._recvTransport.id,dtlsParameters:Wt}).then(fe).catch(Ae)}),this._recvTransport.on("connectionstatechange",function(Je){var fe;(fe=Ye._openTelemetry)===null||fe===void 0||fe.traceAutoComplete({spanName:"_recvTransport Event connectionstatechange ".concat(Je),span:Ue,status:1}),Je==="failed"&&Ye.restartIce(),Ye._transportState=Je}),rt=0,(se=this._metrics.addNewProbe(this._recvTransport,"transport")).onStatsCollected=function(Je){try{var fe=function(Wt,Ht,$t){Ye._stats.consumerStats||(Ye._stats.consumerStats={});var zt=Ht.appData.peerId;Ye._stats.consumerStats[zt]||(Ye._stats.consumerStats[zt]={}),Ye._stats.consumerStats[zt][$t]||(Ye._stats.consumerStats[zt][$t]=[]),Ye._latestStats[Ht.track.id.replace(/[{}]/g,"")]=[Wt],rt%5==0&&Ye._stats.consumerStats[zt][$t].push(Wt)},Ae=function(Wt){Je[Wt].forEach(function(Ht){var $t,zt=ar(Ye._consumers);try{for(zt.s();!($t=zt.n()).done;){var Xt=(0,P.Z)($t.value,2),Lt=(Xt[0],Xt[1]);if(Lt.track.id.replace(/[{}]/g,"")===Ht.trackId){var Et=Lt.appData.share?Lt.kind==="audio"?"shareAudio":"share":Lt.kind;fe(Ht,Lt,Et)}}}catch(br){zt.e(br)}finally{zt.f()}})};Ae("audio"),Ae("video"),rt++}catch(Wt){var Mt;(Mt=Ye._videosdkLogs)===null||Mt===void 0||Mt.pushLogs({logText:"Error CONSUMER Stats ERROR",logType:"ERROR",attributes:{error:Wt.message}}),console.log("CONSUMER CATCH",Wt)}},se.start(),this._recvTransport.observer.on("close",function(){se.stop(),Ye._metrics.removeExistingProbe(se)}),(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:Ue,status:1,message:"Recieve Transport Created Successfully"});case 11:case"end":return He.stop()}},q,this)})),function(q,W){return lr.apply(this,arguments)})},{key:"joinRoom",value:(or=(0,c.Z)(n().mark(function q(){var W,B,U,H,re,ie,we,me,it,Ue,rt,se,Ye,He,Je,fe,Ae,Mt,Wt,Ht,$t,zt,Xt,Lt,Et,br,Nt;return n().wrap(function(er){for(;;)switch(er.prev=er.next){case 0:return _e.debug("joinRoom()"),er.prev=1,we=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"Loading Router Capabilities",span:this._joinSpan}),this._mediasoupDevice=new v.Device({handlerName:this._handlerName}),er.next=6,this._protoo.request("getRouterRtpCapabilities");case 6:return me=er.sent,this._deviceInfo.sdkType!="react-native"?navigator.userAgent.indexOf("Firefox")&&(me.headerExtensions=(it=me.headerExtensions)===null||it===void 0?void 0:it.filter(function(Rr){return Rr.uri!="urn:3gpp:video-orientation"})):me.headerExtensions=(Ue=me.headerExtensions)===null||Ue===void 0?void 0:Ue.filter(function(Rr){return Rr.uri!="urn:3gpp:video-orientation"}),er.next=10,this._mediasoupDevice.load({routerRtpCapabilities:me});case 10:if((B=this._openTelemetry)===null||B===void 0||B.completeSpan({span:we,status:1,attributes:{routerRtpCapabilities:JSON.stringify(me).toString()},message:"Router Capabilities Loaded"}),!this._produce){er.next=16;break}return er.next=14,this._protoo.request("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!0,consuming:!1,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 14:rt=er.sent,this.createProducerTransport(rt,this._joinSpan);case 16:if(!this._consume){er.next=21;break}return er.next=19,this._protoo.request("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!1,consuming:!0,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 19:se=er.sent,this.createConsumerTransport(se,this._joinSpan);case 21:return er.next=23,this._protoo.request("join",{displayName:this._displayName,device:this._device,secret:this._secret,rtpCapabilities:(U=this._mediasoupDevice)===null||U===void 0?void 0:U.rtpCapabilities,sctpCapabilities:(H=this._mediasoupDevice)===null||H===void 0?void 0:H.sctpCapabilities,deviceInfo:this._deviceInfo,debugMode:this._debugMode,autoConsume:this._autoConsume,metaData:this._metaData});case 23:Ye=er.sent,He=Ye.peers,Je=Ye.poll,fe=Ye.messages,Pe.dispatch(J("connected")),(re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Emitted `MEETING_JOINED` Event",span:this._joinSpan,status:1}),this._eventEmitter.emit("MEETING_JOINED",{peers:He,poll:Je,messages:fe,baseUrl:this._baseUrl}),Pe.dispatch({type:"REMOVE_ALL_NOTIFICATIONS"}),Pe.dispatch(De({text:"You are in the room!",timeout:3e3})),Ae=ar(He);try{for(Ae.s();!(Mt=Ae.n()).done;)Wt=Mt.value,Ht=Tt(Ar(Ar({},Wt),{},{consumers:[],dataConsumers:[]})),Pe.dispatch(Ht),this._eventEmitter.emit(Ht.type,Ht.payload)}catch(Rr){Ae.e(Rr)}finally{Ae.f()}this._produce&&(Pe.dispatch(Q({canSendMic:this._mediasoupDevice.canProduce("audio"),canSendWebcam:this._mediasoupDevice.canProduce("video")})),this._micEnabled?this.enableMic(this.customMicrophoneAudioTrack,this._joinSpan):this.customMicrophoneAudioTrack&&(($t=this._openTelemetry)===null||$t===void 0||$t.traceAutoComplete({spanName:"Disposing Audio Track",span:this._joinSpan,status:2}),this.customMicrophoneAudioTrack.getTracks().forEach(function(Rr){Rr.stop()})),zt=N(),this._webcamEnabled&&(!zt||zt.webcamEnabled||this._externalVideo)?this.enableWebcam(this.customCameraVideoTrack,this._joinSpan):this.customCameraVideoTrack&&((Xt=this._openTelemetry)===null||Xt===void 0||Xt.traceAutoComplete({spanName:"Disposing Video Track",span:this._joinSpan,status:2}),this.customCameraVideoTrack.getTracks().forEach(function(Rr){Rr.stop()})),this.enableChatDataProducer()),window.SHOW_INFO&&(Lt=Pe.getState(),Et=Lt.me,Pe.dispatch(ee(Et.id))),(ie=this._openTelemetry)===null||ie===void 0||ie.completeSpan({span:this._joinSpan,status:1,message:"Room Joined"}),er.next=46;break;case 39:er.prev=39,er.t0=er.catch(1),_e.error("joinRoom() failed:%o",er.t0),(br=this._videosdkLogs)===null||br===void 0||br.pushLogs({logText:"Error Could not join the room",logType:"ERROR",attributes:{error:er.t0.message}}),(Nt=this._openTelemetry)===null||Nt===void 0||Nt.completeSpan({span:this._joinSpan,status:2,message:"Could not join the room ".concat(er.t0)}),Pe.dispatch(De({type:"error",text:"Could not join the room: ".concat(er.t0)})),this.close({sendLeft:!0});case 46:case"end":return er.stop()}},q,this,[[1,39]])})),function(){return or.apply(this,arguments)})},{key:"_updateMics",value:(At=(0,c.Z)(n().mark(function q(){var W,B,U,H,re,ie,we,me,it,Ue,rt,se,Ye,He,Je,fe=arguments;return n().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return B=fe.length>0&&fe[0]!==void 0?fe[0]:void 0,this._mics=new Map,_e.debug("_updateMics() |"),U=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"_updateMics() Calling for Getting System Mic list",span:B||null}),Ae.prev=4,Ae.next=7,navigator.mediaDevices.enumerateDevices();case 7:ie=Ae.sent,(H=this._openTelemetry)===null||H===void 0||H.traceAutoComplete({spanName:"Getting System Mic list",span:U,status:1,attributes:{systemDevice:ie?JSON.stringify(ie):"Device not found"}}),we=ar(ie);try{for(we.s();!(me=we.n()).done;)(it=me.value).kind=="audioinput"&&this._mics.set(it.deviceId,it)}catch(Mt){we.e(Mt)}finally{we.f()}Ue=Array.from(this._mics.values()),rt=Ue.length,se=this._mic.device?this._mic.device.deviceId:void 0,rt===0?this._mic.device=null:this._mics.has(se)||(this._mic.device=Ue[0]),(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:U,status:1,message:"Update Mic"}),Ae.next=30;break;case 18:if(Ae.prev=18,Ae.t0=Ae.catch(4),!(Ae.t0 instanceof TypeError)){Ae.next=30;break}if(Ae.t0.name!=="TypeError"){Ae.next=28;break}throw He=st.H.ERROR_MICROPHONE_ACCESS_UNAVAILABLE,this._emitError(He),(Ye=this._openTelemetry)===null||Ye===void 0||Ye.completeSpan({span:U,status:2,message:"Error in updateMics() :: ".concat(He.message)}),new Error(He.message);case 28:throw(Je=this._openTelemetry)===null||Je===void 0||Je.completeSpan({span:U,status:2,message:"Error in updateMics() :: ".concat(Ae.t0.message)}),new Error(Ae.t0.message);case 30:case"end":return Ae.stop()}},q,this,[[4,18]])})),function(){return At.apply(this,arguments)})},{key:"_updateWebcams",value:(Bt=(0,c.Z)(n().mark(function q(){var W,B,U,H,re,ie,we,me,it,Ue,rt,se,Ye,He,Je,fe=arguments;return n().wrap(function(Ae){for(;;)switch(Ae.prev=Ae.next){case 0:return B=fe.length>0&&fe[0]!==void 0?fe[0]:void 0,_e.debug("_updateWebcams()"),this._webcams=new Map,_e.debug("_updateWebcams() | calling enumerateDevices()"),U=(W=this._openTelemetry)===null||W===void 0?void 0:W.trace({spanName:"_updateWebcams() Calling for Getting System Webcam list",span:B||null}),Ae.prev=5,Ae.next=8,navigator.mediaDevices.enumerateDevices();case 8:ie=Ae.sent,(H=this._openTelemetry)===null||H===void 0||H.traceAutoComplete({spanName:"Getting System Webcam list",span:U,status:1,attributes:{systemDevice:ie?JSON.stringify(ie):"Device not found"}}),we=ar(ie),Ae.prev=11,we.s();case 13:if((me=we.n()).done){Ae.next=20;break}if((it=me.value).kind==="videoinput"){Ae.next=17;break}return Ae.abrupt("continue",18);case 17:this._webcams.set(it.deviceId,it);case 18:Ae.next=13;break;case 20:Ae.next=25;break;case 22:Ae.prev=22,Ae.t0=Ae.catch(11),we.e(Ae.t0);case 25:return Ae.prev=25,we.f(),Ae.finish(25);case 28:Ue=Array.from(this._webcams.values()),rt=Ue.length,(se=this._webcam.device?this._webcam.device.deviceId:void 0)&&(this._defaultCameraIndex=se),_e.debug("_updateWebcams() [webcams:%o]",Ue),rt===0?this._webcam.device=null:this._webcams.has(se)||(this._webcam.device=Ue[this._defaultCameraIndex]),(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:U,status:1,message:"Update Webcam"}),Pe.dispatch(oe(this._webcams.size>1)),Ae.next=50;break;case 38:if(Ae.prev=38,Ae.t1=Ae.catch(5),!(Ae.t1 instanceof TypeError)){Ae.next=50;break}if(Ae.t1.name!=="TypeError"){Ae.next=48;break}throw He=st.H.ERROR_CAMERA_ACCESS_UNAVAILABLE,this._emitError(He),(Ye=this._openTelemetry)===null||Ye===void 0||Ye.completeSpan({span:U,status:2,message:"Error in updateWebcams() :: ".concat(He.message)}),new Error(He.message);case 48:throw(Je=this._openTelemetry)===null||Je===void 0||Je.completeSpan({span:U,status:2,message:"Error in updateWebcams() :: ".concat(Ae.t1.message)}),new Error(Ae.t1.message);case 50:case"end":return Ae.stop()}},q,this,[[5,38],[11,22,25,28]])})),function(){return Bt.apply(this,arguments)})},{key:"_getWebcamType",value:function(q){return/(back|rear)/i.test(q.label)?(_e.debug("_getWebcamType() | it seems to be a back camera"),"back"):(_e.debug("_getWebcamType() | it seems to be a front camera"),"front")}},{key:"_pauseConsumer",value:(at=(0,c.Z)(n().mark(function q(W){var B;return n().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(!W.paused){U.next=2;break}return U.abrupt("return");case 2:return U.prev=2,U.next=5,this._protoo.request("pauseConsumer",{consumerId:W.id});case 5:W.pause(),Pe.dispatch(Gt(W.id,"local")),U.next=14;break;case 9:U.prev=9,U.t0=U.catch(2),_e.error("_pauseConsumer() | failed:%o",U.t0),(B=this._videosdkLogs)===null||B===void 0||B.pushLogs({logText:"Error pausing Consumer",logType:"ERROR",attributes:{error:U.t0.message}}),Pe.dispatch(De({type:"error",text:"Error pausing Consumer: ".concat(U.t0)}));case 14:case"end":return U.stop()}},q,this,[[2,9]])})),function(q){return at.apply(this,arguments)})},{key:"_resumeConsumer",value:($e=(0,c.Z)(n().mark(function q(W){var B;return n().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(W.paused){U.next=2;break}return U.abrupt("return");case 2:return U.prev=2,U.next=5,this._protoo.request("resumeConsumer",{consumerId:W.id});case 5:W.resume(),Pe.dispatch(ut(W.id,"local")),U.next=14;break;case 9:U.prev=9,U.t0=U.catch(2),_e.error("_resumeConsumer() | failed:%o",U.t0),(B=this._videosdkLogs)===null||B===void 0||B.pushLogs({logText:"Error resuming Consumer",logType:"ERROR",attributes:{error:U.t0.message}}),Pe.dispatch(De({type:"error",text:"Error resuming Consumer: ".concat(U.t0)}));case 14:case"end":return U.stop()}},q,this,[[2,9]])})),function(q){return $e.apply(this,arguments)})},{key:"_getExternalVideoStream",value:(Oe=(0,c.Z)(n().mark(function q(){var W=this;return n().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:if(!this._externalVideoStream){B.next=2;break}return B.abrupt("return",this._externalVideoStream);case 2:if(!(this._externalVideo.readyState<3)){B.next=5;break}return B.next=5,new Promise(function(U){return W._externalVideo.addEventListener("canplay",U)});case 5:if(!this._externalVideo.captureStream){B.next=9;break}this._externalVideoStream=this._externalVideo.captureStream(),B.next=14;break;case 9:if(!this._externalVideo.mozCaptureStream){B.next=13;break}this._externalVideoStream=this._externalVideo.mozCaptureStream(),B.next=14;break;case 13:throw new Error("video.captureStream() not supported");case 14:return B.abrupt("return",this._externalVideoStream);case 15:case"end":return B.stop()}},q,this)})),function(){return Oe.apply(this,arguments)})},{key:"_emitError",value:function(q){this._eventEmitter.emit("ERROR",q)}}],[{key:"init",value:function(q){Pe=q.store}}]),be}()},7393:(L,b,u)=>{u.d(b,{xb:()=>w,y:()=>_});var P=u(5861),E=u(7757),c=u.n(E),_=(u(8962),function(){var d=(0,P.Z)(c().mark(function g(n){return c().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(v){var R=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return R?new Promise(function(k,T){R.call(navigator,v,k,T)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),m.next=4,navigator.mediaDevices.getUserMedia(n);case 4:return m.abrupt("return",m.sent);case 5:case"end":return m.stop()}},g)}));return function(g){return d.apply(this,arguments)}}()),w=function(){var d=(0,P.Z)(c().mark(function g(n){return c().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getDisplayMedia===void 0&&(navigator.mediaDevices.getDisplayMedia=function(v){var R=navigator.webkitGetDisplayMedia||navigator.mozGetDisplayMedia;return R?new Promise(function(k,T){R.call(navigator,v,k,T)}):Promise.reject(new Error("getDisplayMedia is not implemented in this browser"))}),m.next=4,navigator.mediaDevices.getDisplayMedia(n);case 4:return m.abrupt("return",m.sent);case 5:case"end":return m.stop()}},g)}));return function(g){return d.apply(this,arguments)}}()},1206:function(L){L.exports=function(b){var u={};function P(E){if(u[E])return u[E].exports;var c=u[E]={i:E,l:!1,exports:{}};return b[E].call(c.exports,c,c.exports,P),c.l=!0,c.exports}return P.m=b,P.c=u,P.d=function(E,c,_){P.o(E,c)||Object.defineProperty(E,c,{enumerable:!0,get:_})},P.r=function(E){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(E,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(E,"__esModule",{value:!0})},P.t=function(E,c){if(1&c&&(E=P(E)),8&c||4&c&&typeof E=="object"&&E&&E.__esModule)return E;var _=Object.create(null);if(P.r(_),Object.defineProperty(_,"default",{enumerable:!0,value:E}),2&c&&typeof E!="string")for(var w in E)P.d(_,w,(function(d){return E[d]}).bind(null,w));return _},P.n=function(E){var c=E&&E.__esModule?function(){return E.default}:function(){return E};return P.d(c,"a",c),c},P.o=function(E,c){return Object.prototype.hasOwnProperty.call(E,c)},P.p="",P(P.s=90)}({17:function(b,u,P){u.__esModule=!0,u.default=void 0;var E=P(18),c=function(){function _(){}return _.getFirstMatch=function(w,d){var g=d.match(w);return g&&g.length>0&&g[1]||""},_.getSecondMatch=function(w,d){var g=d.match(w);return g&&g.length>1&&g[2]||""},_.matchAndReturnConst=function(w,d,g){if(w.test(d))return g},_.getWindowsVersionName=function(w){switch(w){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},_.getMacOSVersionName=function(w){var d=w.split(".").splice(0,2).map(function(g){return parseInt(g,10)||0});if(d.push(0),d[0]===10)switch(d[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},_.getAndroidVersionName=function(w){var d=w.split(".").splice(0,2).map(function(g){return parseInt(g,10)||0});if(d.push(0),!(d[0]===1&&d[1]<5))return d[0]===1&&d[1]<6?"Cupcake":d[0]===1&&d[1]>=6?"Donut":d[0]===2&&d[1]<2?"Eclair":d[0]===2&&d[1]===2?"Froyo":d[0]===2&&d[1]>2?"Gingerbread":d[0]===3?"Honeycomb":d[0]===4&&d[1]<1?"Ice Cream Sandwich":d[0]===4&&d[1]<4?"Jelly Bean":d[0]===4&&d[1]>=4?"KitKat":d[0]===5?"Lollipop":d[0]===6?"Marshmallow":d[0]===7?"Nougat":d[0]===8?"Oreo":d[0]===9?"Pie":void 0},_.getVersionPrecision=function(w){return w.split(".").length},_.compareVersions=function(w,d,g){g===void 0&&(g=!1);var n=_.getVersionPrecision(w),m=_.getVersionPrecision(d),v=Math.max(n,m),R=0,k=_.map([w,d],function(T){var S=v-_.getVersionPrecision(T),C=T+new Array(S+1).join(".0");return _.map(C.split("."),function(I){return new Array(20-I.length).join("0")+I}).reverse()});for(g&&(R=v-Math.min(n,m)),v-=1;v>=R;){if(k[0][v]>k[1][v])return 1;if(k[0][v]===k[1][v]){if(v===R)return 0;v-=1}else if(k[0][v]<k[1][v])return-1}},_.map=function(w,d){var g,n=[];if(Array.prototype.map)return Array.prototype.map.call(w,d);for(g=0;g<w.length;g+=1)n.push(d(w[g]));return n},_.find=function(w,d){var g,n;if(Array.prototype.find)return Array.prototype.find.call(w,d);for(g=0,n=w.length;g<n;g+=1){var m=w[g];if(d(m,g))return m}},_.assign=function(w){for(var d,g,n=w,m=arguments.length,v=new Array(m>1?m-1:0),R=1;R<m;R++)v[R-1]=arguments[R];if(Object.assign)return Object.assign.apply(Object,[w].concat(v));var k=function(){var T=v[d];typeof T=="object"&&T!==null&&Object.keys(T).forEach(function(S){n[S]=T[S]})};for(d=0,g=v.length;d<g;d+=1)k();return w},_.getBrowserAlias=function(w){return E.BROWSER_ALIASES_MAP[w]},_.getBrowserTypeByAlias=function(w){return E.BROWSER_MAP[w]||""},_}();u.default=c,b.exports=u.default},18:function(b,u,P){u.__esModule=!0,u.ENGINE_MAP=u.OS_MAP=u.PLATFORMS_MAP=u.BROWSER_MAP=u.BROWSER_ALIASES_MAP=void 0,u.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},u.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},u.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},u.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},u.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(b,u,P){u.__esModule=!0,u.default=void 0;var E,c=(E=P(91))&&E.__esModule?E:{default:E},_=P(18);function w(g,n){for(var m=0;m<n.length;m++){var v=n[m];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(g,v.key,v)}}var d=function(){function g(){}var n,m,v;return g.getParser=function(R,k){if(k===void 0&&(k=!1),typeof R!="string")throw new Error("UserAgent should be a string");return new c.default(R,k)},g.parse=function(R){return new c.default(R).getResult()},n=g,v=[{key:"BROWSER_MAP",get:function(){return _.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return _.ENGINE_MAP}},{key:"OS_MAP",get:function(){return _.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return _.PLATFORMS_MAP}}],(m=null)&&w(n.prototype,m),v&&w(n,v),g}();u.default=d,b.exports=u.default},91:function(b,u,P){u.__esModule=!0,u.default=void 0;var E=g(P(92)),c=g(P(93)),_=g(P(94)),w=g(P(95)),d=g(P(17));function g(m){return m&&m.__esModule?m:{default:m}}var n=function(){function m(R,k){if(k===void 0&&(k=!1),R==null||R==="")throw new Error("UserAgent parameter can't be empty");this._ua=R,this.parsedResult={},k!==!0&&this.parse()}var v=m.prototype;return v.getUA=function(){return this._ua},v.test=function(R){return R.test(this._ua)},v.parseBrowser=function(){var R=this;this.parsedResult.browser={};var k=d.default.find(E.default,function(T){if(typeof T.test=="function")return T.test(R);if(T.test instanceof Array)return T.test.some(function(S){return R.test(S)});throw new Error("Browser's test function is not valid")});return k&&(this.parsedResult.browser=k.describe(this.getUA())),this.parsedResult.browser},v.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},v.getBrowserName=function(R){return R?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},v.getBrowserVersion=function(){return this.getBrowser().version},v.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},v.parseOS=function(){var R=this;this.parsedResult.os={};var k=d.default.find(c.default,function(T){if(typeof T.test=="function")return T.test(R);if(T.test instanceof Array)return T.test.some(function(S){return R.test(S)});throw new Error("Browser's test function is not valid")});return k&&(this.parsedResult.os=k.describe(this.getUA())),this.parsedResult.os},v.getOSName=function(R){var k=this.getOS().name;return R?String(k).toLowerCase()||"":k||""},v.getOSVersion=function(){return this.getOS().version},v.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},v.getPlatformType=function(R){R===void 0&&(R=!1);var k=this.getPlatform().type;return R?String(k).toLowerCase()||"":k||""},v.parsePlatform=function(){var R=this;this.parsedResult.platform={};var k=d.default.find(_.default,function(T){if(typeof T.test=="function")return T.test(R);if(T.test instanceof Array)return T.test.some(function(S){return R.test(S)});throw new Error("Browser's test function is not valid")});return k&&(this.parsedResult.platform=k.describe(this.getUA())),this.parsedResult.platform},v.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},v.getEngineName=function(R){return R?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},v.parseEngine=function(){var R=this;this.parsedResult.engine={};var k=d.default.find(w.default,function(T){if(typeof T.test=="function")return T.test(R);if(T.test instanceof Array)return T.test.some(function(S){return R.test(S)});throw new Error("Browser's test function is not valid")});return k&&(this.parsedResult.engine=k.describe(this.getUA())),this.parsedResult.engine},v.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},v.getResult=function(){return d.default.assign({},this.parsedResult)},v.satisfies=function(R){var k=this,T={},S=0,C={},I=0;if(Object.keys(R).forEach(function(F){var x=R[F];typeof x=="string"?(C[F]=x,I+=1):typeof x=="object"&&(T[F]=x,S+=1)}),S>0){var o=Object.keys(T),p=d.default.find(o,function(F){return k.isOS(F)});if(p){var i=this.satisfies(T[p]);if(i!==void 0)return i}var s=d.default.find(o,function(F){return k.isPlatform(F)});if(s){var l=this.satisfies(T[s]);if(l!==void 0)return l}}if(I>0){var f=Object.keys(C),O=d.default.find(f,function(F){return k.isBrowser(F,!0)});if(O!==void 0)return this.compareVersion(C[O])}},v.isBrowser=function(R,k){k===void 0&&(k=!1);var T=this.getBrowserName().toLowerCase(),S=R.toLowerCase(),C=d.default.getBrowserTypeByAlias(S);return k&&C&&(S=C.toLowerCase()),S===T},v.compareVersion=function(R){var k=[0],T=R,S=!1,C=this.getBrowserVersion();if(typeof C=="string")return R[0]===">"||R[0]==="<"?(T=R.substr(1),R[1]==="="?(S=!0,T=R.substr(2)):k=[],R[0]===">"?k.push(1):k.push(-1)):R[0]==="="?T=R.substr(1):R[0]==="~"&&(S=!0,T=R.substr(1)),k.indexOf(d.default.compareVersions(C,T,S))>-1},v.isOS=function(R){return this.getOSName(!0)===String(R).toLowerCase()},v.isPlatform=function(R){return this.getPlatformType(!0)===String(R).toLowerCase()},v.isEngine=function(R){return this.getEngineName(!0)===String(R).toLowerCase()},v.is=function(R,k){return k===void 0&&(k=!1),this.isBrowser(R,k)||this.isOS(R)||this.isPlatform(R)},v.some=function(R){var k=this;return R===void 0&&(R=[]),R.some(function(T){return k.is(T)})},m}();u.default=n,b.exports=u.default},92:function(b,u,P){u.__esModule=!0,u.default=void 0;var E,c=(E=P(17))&&E.__esModule?E:{default:E},_=/version\/(\d+(\.?_?\d+)+)/i,w=[{test:[/googlebot/i],describe:function(d){var g={name:"Googlebot"},n=c.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,d)||c.default.getFirstMatch(_,d);return n&&(g.version=n),g}},{test:[/opera/i],describe:function(d){var g={name:"Opera"},n=c.default.getFirstMatch(_,d)||c.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,d);return n&&(g.version=n),g}},{test:[/opr\/|opios/i],describe:function(d){var g={name:"Opera"},n=c.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,d)||c.default.getFirstMatch(_,d);return n&&(g.version=n),g}},{test:[/SamsungBrowser/i],describe:function(d){var g={name:"Samsung Internet for Android"},n=c.default.getFirstMatch(_,d)||c.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,d);return n&&(g.version=n),g}},{test:[/Whale/i],describe:function(d){var g={name:"NAVER Whale Browser"},n=c.default.getFirstMatch(_,d)||c.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,d);return n&&(g.version=n),g}},{test:[/MZBrowser/i],describe:function(d){var g={name:"MZ Browser"},n=c.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,d)||c.default.getFirstMatch(_,d);return n&&(g.version=n),g}},{test:[/focus/i],describe:function(d){var g={name:"Focus"},n=c.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,d)||c.default.getFirstMatch(_,d);return n&&(g.version=n),g}},{test:[/swing/i],describe:function(d){var g={name:"Swing"},n=c.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,d)||c.default.getFirstMatch(_,d);return n&&(g.version=n),g}},{test:[/coast/i],describe:function(d){var g={name:"Opera Coast"},n=c.default.getFirstMatch(_,d)||c.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,d);return n&&(g.version=n),g}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(d){var g={name:"Opera Touch"},n=c.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,d)||c.default.getFirstMatch(_,d);return n&&(g.version=n),g}},{test:[/yabrowser/i],describe:function(d){var g={name:"Yandex Browser"},n=c.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,d)||c.default.getFirstMatch(_,d);return n&&(g.version=n),g}},{test:[/ucbrowser/i],describe:function(d){var g={name:"UC Browser"},n=c.default.getFirstMatch(_,d)||c.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,d);return n&&(g.version=n),g}},{test:[/Maxthon|mxios/i],describe:function(d){var g={name:"Maxthon"},n=c.default.getFirstMatch(_,d)||c.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,d);return n&&(g.version=n),g}},{test:[/epiphany/i],describe:function(d){var g={name:"Epiphany"},n=c.default.getFirstMatch(_,d)||c.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,d);return n&&(g.version=n),g}},{test:[/puffin/i],describe:function(d){var g={name:"Puffin"},n=c.default.getFirstMatch(_,d)||c.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,d);return n&&(g.version=n),g}},{test:[/sleipnir/i],describe:function(d){var g={name:"Sleipnir"},n=c.default.getFirstMatch(_,d)||c.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,d);return n&&(g.version=n),g}},{test:[/k-meleon/i],describe:function(d){var g={name:"K-Meleon"},n=c.default.getFirstMatch(_,d)||c.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,d);return n&&(g.version=n),g}},{test:[/micromessenger/i],describe:function(d){var g={name:"WeChat"},n=c.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,d)||c.default.getFirstMatch(_,d);return n&&(g.version=n),g}},{test:[/qqbrowser/i],describe:function(d){var g={name:/qqbrowserlite/i.test(d)?"QQ Browser Lite":"QQ Browser"},n=c.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,d)||c.default.getFirstMatch(_,d);return n&&(g.version=n),g}},{test:[/msie|trident/i],describe:function(d){var g={name:"Internet Explorer"},n=c.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,d);return n&&(g.version=n),g}},{test:[/\sedg\//i],describe:function(d){var g={name:"Microsoft Edge"},n=c.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,d);return n&&(g.version=n),g}},{test:[/edg([ea]|ios)/i],describe:function(d){var g={name:"Microsoft Edge"},n=c.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,d);return n&&(g.version=n),g}},{test:[/vivaldi/i],describe:function(d){var g={name:"Vivaldi"},n=c.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,d);return n&&(g.version=n),g}},{test:[/seamonkey/i],describe:function(d){var g={name:"SeaMonkey"},n=c.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,d);return n&&(g.version=n),g}},{test:[/sailfish/i],describe:function(d){var g={name:"Sailfish"},n=c.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,d);return n&&(g.version=n),g}},{test:[/silk/i],describe:function(d){var g={name:"Amazon Silk"},n=c.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,d);return n&&(g.version=n),g}},{test:[/phantom/i],describe:function(d){var g={name:"PhantomJS"},n=c.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,d);return n&&(g.version=n),g}},{test:[/slimerjs/i],describe:function(d){var g={name:"SlimerJS"},n=c.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,d);return n&&(g.version=n),g}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(d){var g={name:"BlackBerry"},n=c.default.getFirstMatch(_,d)||c.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,d);return n&&(g.version=n),g}},{test:[/(web|hpw)[o0]s/i],describe:function(d){var g={name:"WebOS Browser"},n=c.default.getFirstMatch(_,d)||c.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,d);return n&&(g.version=n),g}},{test:[/bada/i],describe:function(d){var g={name:"Bada"},n=c.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,d);return n&&(g.version=n),g}},{test:[/tizen/i],describe:function(d){var g={name:"Tizen"},n=c.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,d)||c.default.getFirstMatch(_,d);return n&&(g.version=n),g}},{test:[/qupzilla/i],describe:function(d){var g={name:"QupZilla"},n=c.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,d)||c.default.getFirstMatch(_,d);return n&&(g.version=n),g}},{test:[/firefox|iceweasel|fxios/i],describe:function(d){var g={name:"Firefox"},n=c.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,d);return n&&(g.version=n),g}},{test:[/electron/i],describe:function(d){var g={name:"Electron"},n=c.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,d);return n&&(g.version=n),g}},{test:[/MiuiBrowser/i],describe:function(d){var g={name:"Miui"},n=c.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,d);return n&&(g.version=n),g}},{test:[/chromium/i],describe:function(d){var g={name:"Chromium"},n=c.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,d)||c.default.getFirstMatch(_,d);return n&&(g.version=n),g}},{test:[/chrome|crios|crmo/i],describe:function(d){var g={name:"Chrome"},n=c.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,d);return n&&(g.version=n),g}},{test:[/GSA/i],describe:function(d){var g={name:"Google Search"},n=c.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,d);return n&&(g.version=n),g}},{test:function(d){var g=!d.test(/like android/i),n=d.test(/android/i);return g&&n},describe:function(d){var g={name:"Android Browser"},n=c.default.getFirstMatch(_,d);return n&&(g.version=n),g}},{test:[/playstation 4/i],describe:function(d){var g={name:"PlayStation 4"},n=c.default.getFirstMatch(_,d);return n&&(g.version=n),g}},{test:[/safari|applewebkit/i],describe:function(d){var g={name:"Safari"},n=c.default.getFirstMatch(_,d);return n&&(g.version=n),g}},{test:[/.*/i],describe:function(d){var g=d.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:c.default.getFirstMatch(g,d),version:c.default.getSecondMatch(g,d)}}}];u.default=w,b.exports=u.default},93:function(b,u,P){u.__esModule=!0,u.default=void 0;var E,c=(E=P(17))&&E.__esModule?E:{default:E},_=P(18),w=[{test:[/Roku\/DVP/],describe:function(d){var g=c.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,d);return{name:_.OS_MAP.Roku,version:g}}},{test:[/windows phone/i],describe:function(d){var g=c.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,d);return{name:_.OS_MAP.WindowsPhone,version:g}}},{test:[/windows /i],describe:function(d){var g=c.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,d),n=c.default.getWindowsVersionName(g);return{name:_.OS_MAP.Windows,version:g,versionName:n}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(d){var g={name:_.OS_MAP.iOS},n=c.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,d);return n&&(g.version=n),g}},{test:[/macintosh/i],describe:function(d){var g=c.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,d).replace(/[_\s]/g,"."),n=c.default.getMacOSVersionName(g),m={name:_.OS_MAP.MacOS,version:g};return n&&(m.versionName=n),m}},{test:[/(ipod|iphone|ipad)/i],describe:function(d){var g=c.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,d).replace(/[_\s]/g,".");return{name:_.OS_MAP.iOS,version:g}}},{test:function(d){var g=!d.test(/like android/i),n=d.test(/android/i);return g&&n},describe:function(d){var g=c.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,d),n=c.default.getAndroidVersionName(g),m={name:_.OS_MAP.Android,version:g};return n&&(m.versionName=n),m}},{test:[/(web|hpw)[o0]s/i],describe:function(d){var g=c.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,d),n={name:_.OS_MAP.WebOS};return g&&g.length&&(n.version=g),n}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(d){var g=c.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,d)||c.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,d)||c.default.getFirstMatch(/\bbb(\d+)/i,d);return{name:_.OS_MAP.BlackBerry,version:g}}},{test:[/bada/i],describe:function(d){var g=c.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,d);return{name:_.OS_MAP.Bada,version:g}}},{test:[/tizen/i],describe:function(d){var g=c.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,d);return{name:_.OS_MAP.Tizen,version:g}}},{test:[/linux/i],describe:function(){return{name:_.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:_.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(d){var g=c.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,d);return{name:_.OS_MAP.PlayStation4,version:g}}}];u.default=w,b.exports=u.default},94:function(b,u,P){u.__esModule=!0,u.default=void 0;var E,c=(E=P(17))&&E.__esModule?E:{default:E},_=P(18),w=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(d){var g=c.default.getFirstMatch(/(can-l01)/i,d)&&"Nova",n={type:_.PLATFORMS_MAP.mobile,vendor:"Huawei"};return g&&(n.model=g),n}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:_.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:_.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:_.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:_.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:_.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:_.PLATFORMS_MAP.tablet}}},{test:function(d){var g=d.test(/ipod|iphone/i),n=d.test(/like (ipod|iphone)/i);return g&&!n},describe:function(d){var g=c.default.getFirstMatch(/(ipod|iphone)/i,d);return{type:_.PLATFORMS_MAP.mobile,vendor:"Apple",model:g}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:_.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:_.PLATFORMS_MAP.mobile}}},{test:function(d){return d.getBrowserName(!0)==="blackberry"},describe:function(){return{type:_.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(d){return d.getBrowserName(!0)==="bada"},describe:function(){return{type:_.PLATFORMS_MAP.mobile}}},{test:function(d){return d.getBrowserName()==="windows phone"},describe:function(){return{type:_.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(d){var g=Number(String(d.getOSVersion()).split(".")[0]);return d.getOSName(!0)==="android"&&g>=3},describe:function(){return{type:_.PLATFORMS_MAP.tablet}}},{test:function(d){return d.getOSName(!0)==="android"},describe:function(){return{type:_.PLATFORMS_MAP.mobile}}},{test:function(d){return d.getOSName(!0)==="macos"},describe:function(){return{type:_.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(d){return d.getOSName(!0)==="windows"},describe:function(){return{type:_.PLATFORMS_MAP.desktop}}},{test:function(d){return d.getOSName(!0)==="linux"},describe:function(){return{type:_.PLATFORMS_MAP.desktop}}},{test:function(d){return d.getOSName(!0)==="playstation 4"},describe:function(){return{type:_.PLATFORMS_MAP.tv}}},{test:function(d){return d.getOSName(!0)==="roku"},describe:function(){return{type:_.PLATFORMS_MAP.tv}}}];u.default=w,b.exports=u.default},95:function(b,u,P){u.__esModule=!0,u.default=void 0;var E,c=(E=P(17))&&E.__esModule?E:{default:E},_=P(18),w=[{test:function(d){return d.getBrowserName(!0)==="microsoft edge"},describe:function(d){if(/\sedg\//i.test(d))return{name:_.ENGINE_MAP.Blink};var g=c.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,d);return{name:_.ENGINE_MAP.EdgeHTML,version:g}}},{test:[/trident/i],describe:function(d){var g={name:_.ENGINE_MAP.Trident},n=c.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,d);return n&&(g.version=n),g}},{test:function(d){return d.test(/presto/i)},describe:function(d){var g={name:_.ENGINE_MAP.Presto},n=c.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,d);return n&&(g.version=n),g}},{test:function(d){var g=d.test(/gecko/i),n=d.test(/like gecko/i);return g&&!n},describe:function(d){var g={name:_.ENGINE_MAP.Gecko},n=c.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,d);return n&&(g.version=n),g}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:_.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(d){var g={name:_.ENGINE_MAP.WebKit},n=c.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,d);return n&&(g.version=n),g}}];u.default=w,b.exports=u.default}})},452:function(L,b,u){var P;L.exports=(P=u(8249),u(8269),u(8214),u(888),u(5109),function(){var E=P,c=E.lib.BlockCipher,_=E.algo,w=[],d=[],g=[],n=[],m=[],v=[],R=[],k=[],T=[],S=[];(function(){for(var o=[],p=0;p<256;p++)o[p]=p<128?p<<1:p<<1^283;var i=0,s=0;for(p=0;p<256;p++){var l=s^s<<1^s<<2^s<<3^s<<4;l=l>>>8^255&l^99,w[i]=l,d[l]=i;var f=o[i],O=o[f],F=o[O],x=257*o[l]^16843008*l;g[i]=x<<24|x>>>8,n[i]=x<<16|x>>>16,m[i]=x<<8|x>>>24,v[i]=x,x=16843009*F^65537*O^257*f^16843008*i,R[l]=x<<24|x>>>8,k[l]=x<<16|x>>>16,T[l]=x<<8|x>>>24,S[l]=x,i?(i=f^o[o[o[F^f]]],s^=o[o[s]]):i=s=1}})();var C=[0,1,2,4,8,16,32,64,128,27,54],I=_.AES=c.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var o=this._keyPriorReset=this._key,p=o.words,i=o.sigBytes/4,s=4*((this._nRounds=i+6)+1),l=this._keySchedule=[],f=0;f<s;f++)f<i?l[f]=p[f]:(x=l[f-1],f%i?i>6&&f%i==4&&(x=w[x>>>24]<<24|w[x>>>16&255]<<16|w[x>>>8&255]<<8|w[255&x]):(x=w[(x=x<<8|x>>>24)>>>24]<<24|w[x>>>16&255]<<16|w[x>>>8&255]<<8|w[255&x],x^=C[f/i|0]<<24),l[f]=l[f-i]^x);for(var O=this._invKeySchedule=[],F=0;F<s;F++){if(f=s-F,F%4)var x=l[f];else x=l[f-4];O[F]=F<4||f<=4?x:R[w[x>>>24]]^k[w[x>>>16&255]]^T[w[x>>>8&255]]^S[w[255&x]]}}},encryptBlock:function(o,p){this._doCryptBlock(o,p,this._keySchedule,g,n,m,v,w)},decryptBlock:function(o,p){var i=o[p+1];o[p+1]=o[p+3],o[p+3]=i,this._doCryptBlock(o,p,this._invKeySchedule,R,k,T,S,d),i=o[p+1],o[p+1]=o[p+3],o[p+3]=i},_doCryptBlock:function(o,p,i,s,l,f,O,F){for(var x=this._nRounds,N=o[p]^i[0],z=o[p+1]^i[1],V=o[p+2]^i[2],J=o[p+3]^i[3],ne=4,ee=1;ee<x;ee++){var Q=s[N>>>24]^l[z>>>16&255]^f[V>>>8&255]^O[255&J]^i[ne++],oe=s[z>>>24]^l[V>>>16&255]^f[J>>>8&255]^O[255&N]^i[ne++],he=s[V>>>24]^l[J>>>16&255]^f[N>>>8&255]^O[255&z]^i[ne++],Te=s[J>>>24]^l[N>>>16&255]^f[z>>>8&255]^O[255&V]^i[ne++];N=Q,z=oe,V=he,J=Te}Q=(F[N>>>24]<<24|F[z>>>16&255]<<16|F[V>>>8&255]<<8|F[255&J])^i[ne++],oe=(F[z>>>24]<<24|F[V>>>16&255]<<16|F[J>>>8&255]<<8|F[255&N])^i[ne++],he=(F[V>>>24]<<24|F[J>>>16&255]<<16|F[N>>>8&255]<<8|F[255&z])^i[ne++],Te=(F[J>>>24]<<24|F[N>>>16&255]<<16|F[z>>>8&255]<<8|F[255&V])^i[ne++],o[p]=Q,o[p+1]=oe,o[p+2]=he,o[p+3]=Te},keySize:8});E.AES=c._createHelper(I)}(),P.AES)},5109:function(L,b,u){var P;L.exports=(P=u(8249),u(888),void(P.lib.Cipher||function(E){var c=P,_=c.lib,w=_.Base,d=_.WordArray,g=_.BufferedBlockAlgorithm,n=c.enc,m=(n.Utf8,n.Base64),v=c.algo.EvpKDF,R=_.Cipher=g.extend({cfg:w.extend(),createEncryptor:function(l,f){return this.create(this._ENC_XFORM_MODE,l,f)},createDecryptor:function(l,f){return this.create(this._DEC_XFORM_MODE,l,f)},init:function(l,f,O){this.cfg=this.cfg.extend(O),this._xformMode=l,this._key=f,this.reset()},reset:function(){g.reset.call(this),this._doReset()},process:function(l){return this._append(l),this._process()},finalize:function(l){return l&&this._append(l),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function l(f){return typeof f=="string"?s:p}return function(f){return{encrypt:function(O,F,x){return l(F).encrypt(f,O,F,x)},decrypt:function(O,F,x){return l(F).decrypt(f,O,F,x)}}}}()}),k=(_.StreamCipher=R.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),c.mode={}),T=_.BlockCipherMode=w.extend({createEncryptor:function(l,f){return this.Encryptor.create(l,f)},createDecryptor:function(l,f){return this.Decryptor.create(l,f)},init:function(l,f){this._cipher=l,this._iv=f}}),S=k.CBC=function(){var l=T.extend();function f(O,F,x){var N,z=this._iv;z?(N=z,this._iv=E):N=this._prevBlock;for(var V=0;V<x;V++)O[F+V]^=N[V]}return l.Encryptor=l.extend({processBlock:function(O,F){var x=this._cipher,N=x.blockSize;f.call(this,O,F,N),x.encryptBlock(O,F),this._prevBlock=O.slice(F,F+N)}}),l.Decryptor=l.extend({processBlock:function(O,F){var x=this._cipher,N=x.blockSize,z=O.slice(F,F+N);x.decryptBlock(O,F),f.call(this,O,F,N),this._prevBlock=z}}),l}(),C=(c.pad={}).Pkcs7={pad:function(l,f){for(var O=4*f,F=O-l.sigBytes%O,x=F<<24|F<<16|F<<8|F,N=[],z=0;z<F;z+=4)N.push(x);var V=d.create(N,F);l.concat(V)},unpad:function(l){var f=255&l.words[l.sigBytes-1>>>2];l.sigBytes-=f}},I=(_.BlockCipher=R.extend({cfg:R.cfg.extend({mode:S,padding:C}),reset:function(){var l;R.reset.call(this);var f=this.cfg,O=f.iv,F=f.mode;this._xformMode==this._ENC_XFORM_MODE?l=F.createEncryptor:(l=F.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==l?this._mode.init(this,O&&O.words):(this._mode=l.call(F,this,O&&O.words),this._mode.__creator=l)},_doProcessBlock:function(l,f){this._mode.processBlock(l,f)},_doFinalize:function(){var l,f=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(f.pad(this._data,this.blockSize),l=this._process(!0)):(l=this._process(!0),f.unpad(l)),l},blockSize:4}),_.CipherParams=w.extend({init:function(l){this.mixIn(l)},toString:function(l){return(l||this.formatter).stringify(this)}})),o=(c.format={}).OpenSSL={stringify:function(l){var f=l.ciphertext,O=l.salt;return(O?d.create([1398893684,1701076831]).concat(O).concat(f):f).toString(m)},parse:function(l){var f,O=m.parse(l),F=O.words;return F[0]==1398893684&&F[1]==1701076831&&(f=d.create(F.slice(2,4)),F.splice(0,4),O.sigBytes-=16),I.create({ciphertext:O,salt:f})}},p=_.SerializableCipher=w.extend({cfg:w.extend({format:o}),encrypt:function(l,f,O,F){F=this.cfg.extend(F);var x=l.createEncryptor(O,F),N=x.finalize(f),z=x.cfg;return I.create({ciphertext:N,key:O,iv:z.iv,algorithm:l,mode:z.mode,padding:z.padding,blockSize:l.blockSize,formatter:F.format})},decrypt:function(l,f,O,F){return F=this.cfg.extend(F),f=this._parse(f,F.format),l.createDecryptor(O,F).finalize(f.ciphertext)},_parse:function(l,f){return typeof l=="string"?f.parse(l,this):l}}),i=(c.kdf={}).OpenSSL={execute:function(l,f,O,F){F||(F=d.random(8));var x=v.create({keySize:f+O}).compute(l,F),N=d.create(x.words.slice(f),4*O);return x.sigBytes=4*f,I.create({key:x,iv:N,salt:F})}},s=_.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:i}),encrypt:function(l,f,O,F){var x=(F=this.cfg.extend(F)).kdf.execute(O,l.keySize,l.ivSize);F.iv=x.iv;var N=p.encrypt.call(this,l,f,x.key,F);return N.mixIn(x),N},decrypt:function(l,f,O,F){F=this.cfg.extend(F),f=this._parse(f,F.format);var x=F.kdf.execute(O,l.keySize,l.ivSize,f.salt);return F.iv=x.iv,p.decrypt.call(this,l,f,x.key,F)}})}()))},8249:function(L,b,u){var P;L.exports=(P=P||function(E,c){var _;if(typeof window<"u"&&window.crypto&&(_=window.crypto),typeof self<"u"&&self.crypto&&(_=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(_=globalThis.crypto),!_&&typeof window<"u"&&window.msCrypto&&(_=window.msCrypto),!_&&u.g!==void 0&&u.g.crypto&&(_=u.g.crypto),!_)try{_=u(2480)}catch{}var w=function(){if(_){if(typeof _.getRandomValues=="function")try{return _.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof _.randomBytes=="function")try{return _.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},d=Object.create||function(){function o(){}return function(p){var i;return o.prototype=p,i=new o,o.prototype=null,i}}(),g={},n=g.lib={},m=n.Base={extend:function(o){var p=d(this);return o&&p.mixIn(o),p.hasOwnProperty("init")&&this.init!==p.init||(p.init=function(){p.$super.init.apply(this,arguments)}),p.init.prototype=p,p.$super=this,p},create:function(){var o=this.extend();return o.init.apply(o,arguments),o},init:function(){},mixIn:function(o){for(var p in o)o.hasOwnProperty(p)&&(this[p]=o[p]);o.hasOwnProperty("toString")&&(this.toString=o.toString)},clone:function(){return this.init.prototype.extend(this)}},v=n.WordArray=m.extend({init:function(o,p){o=this.words=o||[],this.sigBytes=p!=c?p:4*o.length},toString:function(o){return(o||k).stringify(this)},concat:function(o){var p=this.words,i=o.words,s=this.sigBytes,l=o.sigBytes;if(this.clamp(),s%4)for(var f=0;f<l;f++){var O=i[f>>>2]>>>24-f%4*8&255;p[s+f>>>2]|=O<<24-(s+f)%4*8}else for(var F=0;F<l;F+=4)p[s+F>>>2]=i[F>>>2];return this.sigBytes+=l,this},clamp:function(){var o=this.words,p=this.sigBytes;o[p>>>2]&=4294967295<<32-p%4*8,o.length=E.ceil(p/4)},clone:function(){var o=m.clone.call(this);return o.words=this.words.slice(0),o},random:function(o){for(var p=[],i=0;i<o;i+=4)p.push(w());return new v.init(p,o)}}),R=g.enc={},k=R.Hex={stringify:function(o){for(var p=o.words,i=o.sigBytes,s=[],l=0;l<i;l++){var f=p[l>>>2]>>>24-l%4*8&255;s.push((f>>>4).toString(16)),s.push((15&f).toString(16))}return s.join("")},parse:function(o){for(var p=o.length,i=[],s=0;s<p;s+=2)i[s>>>3]|=parseInt(o.substr(s,2),16)<<24-s%8*4;return new v.init(i,p/2)}},T=R.Latin1={stringify:function(o){for(var p=o.words,i=o.sigBytes,s=[],l=0;l<i;l++){var f=p[l>>>2]>>>24-l%4*8&255;s.push(String.fromCharCode(f))}return s.join("")},parse:function(o){for(var p=o.length,i=[],s=0;s<p;s++)i[s>>>2]|=(255&o.charCodeAt(s))<<24-s%4*8;return new v.init(i,p)}},S=R.Utf8={stringify:function(o){try{return decodeURIComponent(escape(T.stringify(o)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(o){return T.parse(unescape(encodeURIComponent(o)))}},C=n.BufferedBlockAlgorithm=m.extend({reset:function(){this._data=new v.init,this._nDataBytes=0},_append:function(o){typeof o=="string"&&(o=S.parse(o)),this._data.concat(o),this._nDataBytes+=o.sigBytes},_process:function(o){var p,i=this._data,s=i.words,l=i.sigBytes,f=this.blockSize,O=l/(4*f),F=(O=o?E.ceil(O):E.max((0|O)-this._minBufferSize,0))*f,x=E.min(4*F,l);if(F){for(var N=0;N<F;N+=f)this._doProcessBlock(s,N);p=s.splice(0,F),i.sigBytes-=x}return new v.init(p,x)},clone:function(){var o=m.clone.call(this);return o._data=this._data.clone(),o},_minBufferSize:0}),I=(n.Hasher=C.extend({cfg:m.extend(),init:function(o){this.cfg=this.cfg.extend(o),this.reset()},reset:function(){C.reset.call(this),this._doReset()},update:function(o){return this._append(o),this._process(),this},finalize:function(o){return o&&this._append(o),this._doFinalize()},blockSize:16,_createHelper:function(o){return function(p,i){return new o.init(i).finalize(p)}},_createHmacHelper:function(o){return function(p,i){return new I.HMAC.init(o,i).finalize(p)}}}),g.algo={});return g}(Math),P)},8269:function(L,b,u){var P;L.exports=(P=u(8249),function(){var E=P,c=E.lib.WordArray;function _(w,d,g){for(var n=[],m=0,v=0;v<d;v++)if(v%4){var R=g[w.charCodeAt(v-1)]<<v%4*2|g[w.charCodeAt(v)]>>>6-v%4*2;n[m>>>2]|=R<<24-m%4*8,m++}return c.create(n,m)}E.enc.Base64={stringify:function(w){var d=w.words,g=w.sigBytes,n=this._map;w.clamp();for(var m=[],v=0;v<g;v+=3)for(var R=(d[v>>>2]>>>24-v%4*8&255)<<16|(d[v+1>>>2]>>>24-(v+1)%4*8&255)<<8|d[v+2>>>2]>>>24-(v+2)%4*8&255,k=0;k<4&&v+.75*k<g;k++)m.push(n.charAt(R>>>6*(3-k)&63));var T=n.charAt(64);if(T)for(;m.length%4;)m.push(T);return m.join("")},parse:function(w){var d=w.length,g=this._map,n=this._reverseMap;if(!n){n=this._reverseMap=[];for(var m=0;m<g.length;m++)n[g.charCodeAt(m)]=m}var v=g.charAt(64);if(v){var R=w.indexOf(v);R!==-1&&(d=R)}return _(w,d,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),P.enc.Base64)},3786:function(L,b,u){var P;L.exports=(P=u(8249),function(){var E=P,c=E.lib.WordArray;function _(w,d,g){for(var n=[],m=0,v=0;v<d;v++)if(v%4){var R=g[w.charCodeAt(v-1)]<<v%4*2|g[w.charCodeAt(v)]>>>6-v%4*2;n[m>>>2]|=R<<24-m%4*8,m++}return c.create(n,m)}E.enc.Base64url={stringify:function(w,d=!0){var g=w.words,n=w.sigBytes,m=d?this._safe_map:this._map;w.clamp();for(var v=[],R=0;R<n;R+=3)for(var k=(g[R>>>2]>>>24-R%4*8&255)<<16|(g[R+1>>>2]>>>24-(R+1)%4*8&255)<<8|g[R+2>>>2]>>>24-(R+2)%4*8&255,T=0;T<4&&R+.75*T<n;T++)v.push(m.charAt(k>>>6*(3-T)&63));var S=m.charAt(64);if(S)for(;v.length%4;)v.push(S);return v.join("")},parse:function(w,d=!0){var g=w.length,n=d?this._safe_map:this._map,m=this._reverseMap;if(!m){m=this._reverseMap=[];for(var v=0;v<n.length;v++)m[n.charCodeAt(v)]=v}var R=n.charAt(64);if(R){var k=w.indexOf(R);k!==-1&&(g=k)}return _(w,g,m)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),P.enc.Base64url)},298:function(L,b,u){var P;L.exports=(P=u(8249),function(){var E=P,c=E.lib.WordArray,_=E.enc;function w(d){return d<<8&4278255360|d>>>8&16711935}_.Utf16=_.Utf16BE={stringify:function(d){for(var g=d.words,n=d.sigBytes,m=[],v=0;v<n;v+=2){var R=g[v>>>2]>>>16-v%4*8&65535;m.push(String.fromCharCode(R))}return m.join("")},parse:function(d){for(var g=d.length,n=[],m=0;m<g;m++)n[m>>>1]|=d.charCodeAt(m)<<16-m%2*16;return c.create(n,2*g)}},_.Utf16LE={stringify:function(d){for(var g=d.words,n=d.sigBytes,m=[],v=0;v<n;v+=2){var R=w(g[v>>>2]>>>16-v%4*8&65535);m.push(String.fromCharCode(R))}return m.join("")},parse:function(d){for(var g=d.length,n=[],m=0;m<g;m++)n[m>>>1]|=w(d.charCodeAt(m)<<16-m%2*16);return c.create(n,2*g)}}}(),P.enc.Utf16)},888:function(L,b,u){var P,E,c,_,w,d,g,n;L.exports=(n=u(8249),u(2783),u(9824),E=(P=n).lib,c=E.Base,_=E.WordArray,w=P.algo,d=w.MD5,g=w.EvpKDF=c.extend({cfg:c.extend({keySize:4,hasher:d,iterations:1}),init:function(m){this.cfg=this.cfg.extend(m)},compute:function(m,v){for(var R,k=this.cfg,T=k.hasher.create(),S=_.create(),C=S.words,I=k.keySize,o=k.iterations;C.length<I;){R&&T.update(R),R=T.update(m).finalize(v),T.reset();for(var p=1;p<o;p++)R=T.finalize(R),T.reset();S.concat(R)}return S.sigBytes=4*I,S}}),P.EvpKDF=function(m,v,R){return g.create(R).compute(m,v)},n.EvpKDF)},2209:function(L,b,u){var P,E,c,_;L.exports=(_=u(8249),u(5109),E=(P=_).lib.CipherParams,c=P.enc.Hex,P.format.Hex={stringify:function(w){return w.ciphertext.toString(c)},parse:function(w){var d=c.parse(w);return E.create({ciphertext:d})}},_.format.Hex)},9824:function(L,b,u){var P,E,c,_;L.exports=(P=u(8249),c=(E=P).lib.Base,_=E.enc.Utf8,void(E.algo.HMAC=c.extend({init:function(w,d){w=this._hasher=new w.init,typeof d=="string"&&(d=_.parse(d));var g=w.blockSize,n=4*g;d.sigBytes>n&&(d=w.finalize(d)),d.clamp();for(var m=this._oKey=d.clone(),v=this._iKey=d.clone(),R=m.words,k=v.words,T=0;T<g;T++)R[T]^=1549556828,k[T]^=909522486;m.sigBytes=v.sigBytes=n,this.reset()},reset:function(){var w=this._hasher;w.reset(),w.update(this._iKey)},update:function(w){return this._hasher.update(w),this},finalize:function(w){var d=this._hasher,g=d.finalize(w);return d.reset(),d.finalize(this._oKey.clone().concat(g))}})))},1354:function(L,b,u){var P;L.exports=(P=u(8249),u(4938),u(4433),u(298),u(8269),u(3786),u(8214),u(2783),u(2153),u(7792),u(34),u(7460),u(3327),u(706),u(9824),u(2112),u(888),u(5109),u(8568),u(4242),u(9968),u(7660),u(1148),u(3615),u(2807),u(1077),u(6475),u(6991),u(2209),u(452),u(4253),u(1857),u(4454),u(3974),P)},4433:function(L,b,u){var P;L.exports=(P=u(8249),function(){if(typeof ArrayBuffer=="function"){var E=P.lib.WordArray,c=E.init,_=E.init=function(w){if(w instanceof ArrayBuffer&&(w=new Uint8Array(w)),(w instanceof Int8Array||typeof Uint8ClampedArray<"u"&&w instanceof Uint8ClampedArray||w instanceof Int16Array||w instanceof Uint16Array||w instanceof Int32Array||w instanceof Uint32Array||w instanceof Float32Array||w instanceof Float64Array)&&(w=new Uint8Array(w.buffer,w.byteOffset,w.byteLength)),w instanceof Uint8Array){for(var d=w.byteLength,g=[],n=0;n<d;n++)g[n>>>2]|=w[n]<<24-n%4*8;c.call(this,g,d)}else c.apply(this,arguments)};_.prototype=E}}(),P.lib.WordArray)},8214:function(L,b,u){var P;L.exports=(P=u(8249),function(E){var c=P,_=c.lib,w=_.WordArray,d=_.Hasher,g=c.algo,n=[];(function(){for(var S=0;S<64;S++)n[S]=4294967296*E.abs(E.sin(S+1))|0})();var m=g.MD5=d.extend({_doReset:function(){this._hash=new w.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(S,C){for(var I=0;I<16;I++){var o=C+I,p=S[o];S[o]=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8)}var i=this._hash.words,s=S[C+0],l=S[C+1],f=S[C+2],O=S[C+3],F=S[C+4],x=S[C+5],N=S[C+6],z=S[C+7],V=S[C+8],J=S[C+9],ne=S[C+10],ee=S[C+11],Q=S[C+12],oe=S[C+13],he=S[C+14],Te=S[C+15],Se=i[0],Ce=i[1],Re=i[2],Ee=i[3];Se=v(Se,Ce,Re,Ee,s,7,n[0]),Ee=v(Ee,Se,Ce,Re,l,12,n[1]),Re=v(Re,Ee,Se,Ce,f,17,n[2]),Ce=v(Ce,Re,Ee,Se,O,22,n[3]),Se=v(Se,Ce,Re,Ee,F,7,n[4]),Ee=v(Ee,Se,Ce,Re,x,12,n[5]),Re=v(Re,Ee,Se,Ce,N,17,n[6]),Ce=v(Ce,Re,Ee,Se,z,22,n[7]),Se=v(Se,Ce,Re,Ee,V,7,n[8]),Ee=v(Ee,Se,Ce,Re,J,12,n[9]),Re=v(Re,Ee,Se,Ce,ne,17,n[10]),Ce=v(Ce,Re,Ee,Se,ee,22,n[11]),Se=v(Se,Ce,Re,Ee,Q,7,n[12]),Ee=v(Ee,Se,Ce,Re,oe,12,n[13]),Re=v(Re,Ee,Se,Ce,he,17,n[14]),Se=R(Se,Ce=v(Ce,Re,Ee,Se,Te,22,n[15]),Re,Ee,l,5,n[16]),Ee=R(Ee,Se,Ce,Re,N,9,n[17]),Re=R(Re,Ee,Se,Ce,ee,14,n[18]),Ce=R(Ce,Re,Ee,Se,s,20,n[19]),Se=R(Se,Ce,Re,Ee,x,5,n[20]),Ee=R(Ee,Se,Ce,Re,ne,9,n[21]),Re=R(Re,Ee,Se,Ce,Te,14,n[22]),Ce=R(Ce,Re,Ee,Se,F,20,n[23]),Se=R(Se,Ce,Re,Ee,J,5,n[24]),Ee=R(Ee,Se,Ce,Re,he,9,n[25]),Re=R(Re,Ee,Se,Ce,O,14,n[26]),Ce=R(Ce,Re,Ee,Se,V,20,n[27]),Se=R(Se,Ce,Re,Ee,oe,5,n[28]),Ee=R(Ee,Se,Ce,Re,f,9,n[29]),Re=R(Re,Ee,Se,Ce,z,14,n[30]),Se=k(Se,Ce=R(Ce,Re,Ee,Se,Q,20,n[31]),Re,Ee,x,4,n[32]),Ee=k(Ee,Se,Ce,Re,V,11,n[33]),Re=k(Re,Ee,Se,Ce,ee,16,n[34]),Ce=k(Ce,Re,Ee,Se,he,23,n[35]),Se=k(Se,Ce,Re,Ee,l,4,n[36]),Ee=k(Ee,Se,Ce,Re,F,11,n[37]),Re=k(Re,Ee,Se,Ce,z,16,n[38]),Ce=k(Ce,Re,Ee,Se,ne,23,n[39]),Se=k(Se,Ce,Re,Ee,oe,4,n[40]),Ee=k(Ee,Se,Ce,Re,s,11,n[41]),Re=k(Re,Ee,Se,Ce,O,16,n[42]),Ce=k(Ce,Re,Ee,Se,N,23,n[43]),Se=k(Se,Ce,Re,Ee,J,4,n[44]),Ee=k(Ee,Se,Ce,Re,Q,11,n[45]),Re=k(Re,Ee,Se,Ce,Te,16,n[46]),Se=T(Se,Ce=k(Ce,Re,Ee,Se,f,23,n[47]),Re,Ee,s,6,n[48]),Ee=T(Ee,Se,Ce,Re,z,10,n[49]),Re=T(Re,Ee,Se,Ce,he,15,n[50]),Ce=T(Ce,Re,Ee,Se,x,21,n[51]),Se=T(Se,Ce,Re,Ee,Q,6,n[52]),Ee=T(Ee,Se,Ce,Re,O,10,n[53]),Re=T(Re,Ee,Se,Ce,ne,15,n[54]),Ce=T(Ce,Re,Ee,Se,l,21,n[55]),Se=T(Se,Ce,Re,Ee,V,6,n[56]),Ee=T(Ee,Se,Ce,Re,Te,10,n[57]),Re=T(Re,Ee,Se,Ce,N,15,n[58]),Ce=T(Ce,Re,Ee,Se,oe,21,n[59]),Se=T(Se,Ce,Re,Ee,F,6,n[60]),Ee=T(Ee,Se,Ce,Re,ee,10,n[61]),Re=T(Re,Ee,Se,Ce,f,15,n[62]),Ce=T(Ce,Re,Ee,Se,J,21,n[63]),i[0]=i[0]+Se|0,i[1]=i[1]+Ce|0,i[2]=i[2]+Re|0,i[3]=i[3]+Ee|0},_doFinalize:function(){var S=this._data,C=S.words,I=8*this._nDataBytes,o=8*S.sigBytes;C[o>>>5]|=128<<24-o%32;var p=E.floor(I/4294967296),i=I;C[15+(o+64>>>9<<4)]=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),C[14+(o+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),S.sigBytes=4*(C.length+1),this._process();for(var s=this._hash,l=s.words,f=0;f<4;f++){var O=l[f];l[f]=16711935&(O<<8|O>>>24)|4278255360&(O<<24|O>>>8)}return s},clone:function(){var S=d.clone.call(this);return S._hash=this._hash.clone(),S}});function v(S,C,I,o,p,i,s){var l=S+(C&I|~C&o)+p+s;return(l<<i|l>>>32-i)+C}function R(S,C,I,o,p,i,s){var l=S+(C&o|I&~o)+p+s;return(l<<i|l>>>32-i)+C}function k(S,C,I,o,p,i,s){var l=S+(C^I^o)+p+s;return(l<<i|l>>>32-i)+C}function T(S,C,I,o,p,i,s){var l=S+(I^(C|~o))+p+s;return(l<<i|l>>>32-i)+C}c.MD5=d._createHelper(m),c.HmacMD5=d._createHmacHelper(m)}(Math),P.MD5)},8568:function(L,b,u){var P;L.exports=(P=u(8249),u(5109),P.mode.CFB=function(){var E=P.lib.BlockCipherMode.extend();function c(_,w,d,g){var n,m=this._iv;m?(n=m.slice(0),this._iv=void 0):n=this._prevBlock,g.encryptBlock(n,0);for(var v=0;v<d;v++)_[w+v]^=n[v]}return E.Encryptor=E.extend({processBlock:function(_,w){var d=this._cipher,g=d.blockSize;c.call(this,_,w,g,d),this._prevBlock=_.slice(w,w+g)}}),E.Decryptor=E.extend({processBlock:function(_,w){var d=this._cipher,g=d.blockSize,n=_.slice(w,w+g);c.call(this,_,w,g,d),this._prevBlock=n}}),E}(),P.mode.CFB)},9968:function(L,b,u){var P;L.exports=(P=u(8249),u(5109),P.mode.CTRGladman=function(){var E=P.lib.BlockCipherMode.extend();function c(d){if((d>>24&255)==255){var g=d>>16&255,n=d>>8&255,m=255&d;g===255?(g=0,n===255?(n=0,m===255?m=0:++m):++n):++g,d=0,d+=g<<16,d+=n<<8,d+=m}else d+=16777216;return d}function _(d){return(d[0]=c(d[0]))===0&&(d[1]=c(d[1])),d}var w=E.Encryptor=E.extend({processBlock:function(d,g){var n=this._cipher,m=n.blockSize,v=this._iv,R=this._counter;v&&(R=this._counter=v.slice(0),this._iv=void 0),_(R);var k=R.slice(0);n.encryptBlock(k,0);for(var T=0;T<m;T++)d[g+T]^=k[T]}});return E.Decryptor=w,E}(),P.mode.CTRGladman)},4242:function(L,b,u){var P,E,c;L.exports=(c=u(8249),u(5109),c.mode.CTR=(P=c.lib.BlockCipherMode.extend(),E=P.Encryptor=P.extend({processBlock:function(_,w){var d=this._cipher,g=d.blockSize,n=this._iv,m=this._counter;n&&(m=this._counter=n.slice(0),this._iv=void 0);var v=m.slice(0);d.encryptBlock(v,0),m[g-1]=m[g-1]+1|0;for(var R=0;R<g;R++)_[w+R]^=v[R]}}),P.Decryptor=E,P),c.mode.CTR)},1148:function(L,b,u){var P,E;L.exports=(E=u(8249),u(5109),E.mode.ECB=((P=E.lib.BlockCipherMode.extend()).Encryptor=P.extend({processBlock:function(c,_){this._cipher.encryptBlock(c,_)}}),P.Decryptor=P.extend({processBlock:function(c,_){this._cipher.decryptBlock(c,_)}}),P),E.mode.ECB)},7660:function(L,b,u){var P,E,c;L.exports=(c=u(8249),u(5109),c.mode.OFB=(P=c.lib.BlockCipherMode.extend(),E=P.Encryptor=P.extend({processBlock:function(_,w){var d=this._cipher,g=d.blockSize,n=this._iv,m=this._keystream;n&&(m=this._keystream=n.slice(0),this._iv=void 0),d.encryptBlock(m,0);for(var v=0;v<g;v++)_[w+v]^=m[v]}}),P.Decryptor=E,P),c.mode.OFB)},3615:function(L,b,u){var P;L.exports=(P=u(8249),u(5109),P.pad.AnsiX923={pad:function(E,c){var _=E.sigBytes,w=4*c,d=w-_%w,g=_+d-1;E.clamp(),E.words[g>>>2]|=d<<24-g%4*8,E.sigBytes+=d},unpad:function(E){var c=255&E.words[E.sigBytes-1>>>2];E.sigBytes-=c}},P.pad.Ansix923)},2807:function(L,b,u){var P;L.exports=(P=u(8249),u(5109),P.pad.Iso10126={pad:function(E,c){var _=4*c,w=_-E.sigBytes%_;E.concat(P.lib.WordArray.random(w-1)).concat(P.lib.WordArray.create([w<<24],1))},unpad:function(E){var c=255&E.words[E.sigBytes-1>>>2];E.sigBytes-=c}},P.pad.Iso10126)},1077:function(L,b,u){var P;L.exports=(P=u(8249),u(5109),P.pad.Iso97971={pad:function(E,c){E.concat(P.lib.WordArray.create([2147483648],1)),P.pad.ZeroPadding.pad(E,c)},unpad:function(E){P.pad.ZeroPadding.unpad(E),E.sigBytes--}},P.pad.Iso97971)},6991:function(L,b,u){var P;L.exports=(P=u(8249),u(5109),P.pad.NoPadding={pad:function(){},unpad:function(){}},P.pad.NoPadding)},6475:function(L,b,u){var P;L.exports=(P=u(8249),u(5109),P.pad.ZeroPadding={pad:function(E,c){var _=4*c;E.clamp(),E.sigBytes+=_-(E.sigBytes%_||_)},unpad:function(E){var c=E.words,_=E.sigBytes-1;for(_=E.sigBytes-1;_>=0;_--)if(c[_>>>2]>>>24-_%4*8&255){E.sigBytes=_+1;break}}},P.pad.ZeroPadding)},2112:function(L,b,u){var P,E,c,_,w,d,g,n,m;L.exports=(m=u(8249),u(2783),u(9824),E=(P=m).lib,c=E.Base,_=E.WordArray,w=P.algo,d=w.SHA1,g=w.HMAC,n=w.PBKDF2=c.extend({cfg:c.extend({keySize:4,hasher:d,iterations:1}),init:function(v){this.cfg=this.cfg.extend(v)},compute:function(v,R){for(var k=this.cfg,T=g.create(k.hasher,v),S=_.create(),C=_.create([1]),I=S.words,o=C.words,p=k.keySize,i=k.iterations;I.length<p;){var s=T.update(R).finalize(C);T.reset();for(var l=s.words,f=l.length,O=s,F=1;F<i;F++){O=T.finalize(O),T.reset();for(var x=O.words,N=0;N<f;N++)l[N]^=x[N]}S.concat(s),o[0]++}return S.sigBytes=4*p,S}}),P.PBKDF2=function(v,R,k){return n.create(k).compute(v,R)},m.PBKDF2)},3974:function(L,b,u){var P;L.exports=(P=u(8249),u(8269),u(8214),u(888),u(5109),function(){var E=P,c=E.lib.StreamCipher,_=E.algo,w=[],d=[],g=[],n=_.RabbitLegacy=c.extend({_doReset:function(){var v=this._key.words,R=this.cfg.iv,k=this._X=[v[0],v[3]<<16|v[2]>>>16,v[1],v[0]<<16|v[3]>>>16,v[2],v[1]<<16|v[0]>>>16,v[3],v[2]<<16|v[1]>>>16],T=this._C=[v[2]<<16|v[2]>>>16,4294901760&v[0]|65535&v[1],v[3]<<16|v[3]>>>16,4294901760&v[1]|65535&v[2],v[0]<<16|v[0]>>>16,4294901760&v[2]|65535&v[3],v[1]<<16|v[1]>>>16,4294901760&v[3]|65535&v[0]];this._b=0;for(var S=0;S<4;S++)m.call(this);for(S=0;S<8;S++)T[S]^=k[S+4&7];if(R){var C=R.words,I=C[0],o=C[1],p=16711935&(I<<8|I>>>24)|4278255360&(I<<24|I>>>8),i=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),s=p>>>16|4294901760&i,l=i<<16|65535&p;for(T[0]^=p,T[1]^=s,T[2]^=i,T[3]^=l,T[4]^=p,T[5]^=s,T[6]^=i,T[7]^=l,S=0;S<4;S++)m.call(this)}},_doProcessBlock:function(v,R){var k=this._X;m.call(this),w[0]=k[0]^k[5]>>>16^k[3]<<16,w[1]=k[2]^k[7]>>>16^k[5]<<16,w[2]=k[4]^k[1]>>>16^k[7]<<16,w[3]=k[6]^k[3]>>>16^k[1]<<16;for(var T=0;T<4;T++)w[T]=16711935&(w[T]<<8|w[T]>>>24)|4278255360&(w[T]<<24|w[T]>>>8),v[R+T]^=w[T]},blockSize:4,ivSize:2});function m(){for(var v=this._X,R=this._C,k=0;k<8;k++)d[k]=R[k];for(R[0]=R[0]+1295307597+this._b|0,R[1]=R[1]+3545052371+(R[0]>>>0<d[0]>>>0?1:0)|0,R[2]=R[2]+886263092+(R[1]>>>0<d[1]>>>0?1:0)|0,R[3]=R[3]+1295307597+(R[2]>>>0<d[2]>>>0?1:0)|0,R[4]=R[4]+3545052371+(R[3]>>>0<d[3]>>>0?1:0)|0,R[5]=R[5]+886263092+(R[4]>>>0<d[4]>>>0?1:0)|0,R[6]=R[6]+1295307597+(R[5]>>>0<d[5]>>>0?1:0)|0,R[7]=R[7]+3545052371+(R[6]>>>0<d[6]>>>0?1:0)|0,this._b=R[7]>>>0<d[7]>>>0?1:0,k=0;k<8;k++){var T=v[k]+R[k],S=65535&T,C=T>>>16,I=((S*S>>>17)+S*C>>>15)+C*C,o=((4294901760&T)*T|0)+((65535&T)*T|0);g[k]=I^o}v[0]=g[0]+(g[7]<<16|g[7]>>>16)+(g[6]<<16|g[6]>>>16)|0,v[1]=g[1]+(g[0]<<8|g[0]>>>24)+g[7]|0,v[2]=g[2]+(g[1]<<16|g[1]>>>16)+(g[0]<<16|g[0]>>>16)|0,v[3]=g[3]+(g[2]<<8|g[2]>>>24)+g[1]|0,v[4]=g[4]+(g[3]<<16|g[3]>>>16)+(g[2]<<16|g[2]>>>16)|0,v[5]=g[5]+(g[4]<<8|g[4]>>>24)+g[3]|0,v[6]=g[6]+(g[5]<<16|g[5]>>>16)+(g[4]<<16|g[4]>>>16)|0,v[7]=g[7]+(g[6]<<8|g[6]>>>24)+g[5]|0}E.RabbitLegacy=c._createHelper(n)}(),P.RabbitLegacy)},4454:function(L,b,u){var P;L.exports=(P=u(8249),u(8269),u(8214),u(888),u(5109),function(){var E=P,c=E.lib.StreamCipher,_=E.algo,w=[],d=[],g=[],n=_.Rabbit=c.extend({_doReset:function(){for(var v=this._key.words,R=this.cfg.iv,k=0;k<4;k++)v[k]=16711935&(v[k]<<8|v[k]>>>24)|4278255360&(v[k]<<24|v[k]>>>8);var T=this._X=[v[0],v[3]<<16|v[2]>>>16,v[1],v[0]<<16|v[3]>>>16,v[2],v[1]<<16|v[0]>>>16,v[3],v[2]<<16|v[1]>>>16],S=this._C=[v[2]<<16|v[2]>>>16,4294901760&v[0]|65535&v[1],v[3]<<16|v[3]>>>16,4294901760&v[1]|65535&v[2],v[0]<<16|v[0]>>>16,4294901760&v[2]|65535&v[3],v[1]<<16|v[1]>>>16,4294901760&v[3]|65535&v[0]];for(this._b=0,k=0;k<4;k++)m.call(this);for(k=0;k<8;k++)S[k]^=T[k+4&7];if(R){var C=R.words,I=C[0],o=C[1],p=16711935&(I<<8|I>>>24)|4278255360&(I<<24|I>>>8),i=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),s=p>>>16|4294901760&i,l=i<<16|65535&p;for(S[0]^=p,S[1]^=s,S[2]^=i,S[3]^=l,S[4]^=p,S[5]^=s,S[6]^=i,S[7]^=l,k=0;k<4;k++)m.call(this)}},_doProcessBlock:function(v,R){var k=this._X;m.call(this),w[0]=k[0]^k[5]>>>16^k[3]<<16,w[1]=k[2]^k[7]>>>16^k[5]<<16,w[2]=k[4]^k[1]>>>16^k[7]<<16,w[3]=k[6]^k[3]>>>16^k[1]<<16;for(var T=0;T<4;T++)w[T]=16711935&(w[T]<<8|w[T]>>>24)|4278255360&(w[T]<<24|w[T]>>>8),v[R+T]^=w[T]},blockSize:4,ivSize:2});function m(){for(var v=this._X,R=this._C,k=0;k<8;k++)d[k]=R[k];for(R[0]=R[0]+1295307597+this._b|0,R[1]=R[1]+3545052371+(R[0]>>>0<d[0]>>>0?1:0)|0,R[2]=R[2]+886263092+(R[1]>>>0<d[1]>>>0?1:0)|0,R[3]=R[3]+1295307597+(R[2]>>>0<d[2]>>>0?1:0)|0,R[4]=R[4]+3545052371+(R[3]>>>0<d[3]>>>0?1:0)|0,R[5]=R[5]+886263092+(R[4]>>>0<d[4]>>>0?1:0)|0,R[6]=R[6]+1295307597+(R[5]>>>0<d[5]>>>0?1:0)|0,R[7]=R[7]+3545052371+(R[6]>>>0<d[6]>>>0?1:0)|0,this._b=R[7]>>>0<d[7]>>>0?1:0,k=0;k<8;k++){var T=v[k]+R[k],S=65535&T,C=T>>>16,I=((S*S>>>17)+S*C>>>15)+C*C,o=((4294901760&T)*T|0)+((65535&T)*T|0);g[k]=I^o}v[0]=g[0]+(g[7]<<16|g[7]>>>16)+(g[6]<<16|g[6]>>>16)|0,v[1]=g[1]+(g[0]<<8|g[0]>>>24)+g[7]|0,v[2]=g[2]+(g[1]<<16|g[1]>>>16)+(g[0]<<16|g[0]>>>16)|0,v[3]=g[3]+(g[2]<<8|g[2]>>>24)+g[1]|0,v[4]=g[4]+(g[3]<<16|g[3]>>>16)+(g[2]<<16|g[2]>>>16)|0,v[5]=g[5]+(g[4]<<8|g[4]>>>24)+g[3]|0,v[6]=g[6]+(g[5]<<16|g[5]>>>16)+(g[4]<<16|g[4]>>>16)|0,v[7]=g[7]+(g[6]<<8|g[6]>>>24)+g[5]|0}E.Rabbit=c._createHelper(n)}(),P.Rabbit)},1857:function(L,b,u){var P;L.exports=(P=u(8249),u(8269),u(8214),u(888),u(5109),function(){var E=P,c=E.lib.StreamCipher,_=E.algo,w=_.RC4=c.extend({_doReset:function(){for(var n=this._key,m=n.words,v=n.sigBytes,R=this._S=[],k=0;k<256;k++)R[k]=k;k=0;for(var T=0;k<256;k++){var S=k%v,C=m[S>>>2]>>>24-S%4*8&255;T=(T+R[k]+C)%256;var I=R[k];R[k]=R[T],R[T]=I}this._i=this._j=0},_doProcessBlock:function(n,m){n[m]^=d.call(this)},keySize:8,ivSize:0});function d(){for(var n=this._S,m=this._i,v=this._j,R=0,k=0;k<4;k++){v=(v+n[m=(m+1)%256])%256;var T=n[m];n[m]=n[v],n[v]=T,R|=n[(n[m]+n[v])%256]<<24-8*k}return this._i=m,this._j=v,R}E.RC4=c._createHelper(w);var g=_.RC4Drop=w.extend({cfg:w.cfg.extend({drop:192}),_doReset:function(){w._doReset.call(this);for(var n=this.cfg.drop;n>0;n--)d.call(this)}});E.RC4Drop=c._createHelper(g)}(),P.RC4)},706:function(L,b,u){var P;L.exports=(P=u(8249),function(E){var c=P,_=c.lib,w=_.WordArray,d=_.Hasher,g=c.algo,n=w.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),m=w.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),v=w.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),R=w.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),k=w.create([0,1518500249,1859775393,2400959708,2840853838]),T=w.create([1352829926,1548603684,1836072691,2053994217,0]),S=g.RIPEMD160=d.extend({_doReset:function(){this._hash=w.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(l,f){for(var O=0;O<16;O++){var F=f+O,x=l[F];l[F]=16711935&(x<<8|x>>>24)|4278255360&(x<<24|x>>>8)}var N,z,V,J,ne,ee,Q,oe,he,Te,Se,Ce=this._hash.words,Re=k.words,Ee=T.words,We=n.words,Yt=m.words,rr=v.words,yt=R.words;for(ee=N=Ce[0],Q=z=Ce[1],oe=V=Ce[2],he=J=Ce[3],Te=ne=Ce[4],O=0;O<80;O+=1)Se=N+l[f+We[O]]|0,Se+=O<16?C(z,V,J)+Re[0]:O<32?I(z,V,J)+Re[1]:O<48?o(z,V,J)+Re[2]:O<64?p(z,V,J)+Re[3]:i(z,V,J)+Re[4],Se=(Se=s(Se|=0,rr[O]))+ne|0,N=ne,ne=J,J=s(V,10),V=z,z=Se,Se=ee+l[f+Yt[O]]|0,Se+=O<16?i(Q,oe,he)+Ee[0]:O<32?p(Q,oe,he)+Ee[1]:O<48?o(Q,oe,he)+Ee[2]:O<64?I(Q,oe,he)+Ee[3]:C(Q,oe,he)+Ee[4],Se=(Se=s(Se|=0,yt[O]))+Te|0,ee=Te,Te=he,he=s(oe,10),oe=Q,Q=Se;Se=Ce[1]+V+he|0,Ce[1]=Ce[2]+J+Te|0,Ce[2]=Ce[3]+ne+ee|0,Ce[3]=Ce[4]+N+Q|0,Ce[4]=Ce[0]+z+oe|0,Ce[0]=Se},_doFinalize:function(){var l=this._data,f=l.words,O=8*this._nDataBytes,F=8*l.sigBytes;f[F>>>5]|=128<<24-F%32,f[14+(F+64>>>9<<4)]=16711935&(O<<8|O>>>24)|4278255360&(O<<24|O>>>8),l.sigBytes=4*(f.length+1),this._process();for(var x=this._hash,N=x.words,z=0;z<5;z++){var V=N[z];N[z]=16711935&(V<<8|V>>>24)|4278255360&(V<<24|V>>>8)}return x},clone:function(){var l=d.clone.call(this);return l._hash=this._hash.clone(),l}});function C(l,f,O){return l^f^O}function I(l,f,O){return l&f|~l&O}function o(l,f,O){return(l|~f)^O}function p(l,f,O){return l&O|f&~O}function i(l,f,O){return l^(f|~O)}function s(l,f){return l<<f|l>>>32-f}c.RIPEMD160=d._createHelper(S),c.HmacRIPEMD160=d._createHmacHelper(S)}(),P.RIPEMD160)},2783:function(L,b,u){var P,E,c,_,w,d,g,n;L.exports=(n=u(8249),E=(P=n).lib,c=E.WordArray,_=E.Hasher,w=P.algo,d=[],g=w.SHA1=_.extend({_doReset:function(){this._hash=new c.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(m,v){for(var R=this._hash.words,k=R[0],T=R[1],S=R[2],C=R[3],I=R[4],o=0;o<80;o++){if(o<16)d[o]=0|m[v+o];else{var p=d[o-3]^d[o-8]^d[o-14]^d[o-16];d[o]=p<<1|p>>>31}var i=(k<<5|k>>>27)+I+d[o];i+=o<20?1518500249+(T&S|~T&C):o<40?1859775393+(T^S^C):o<60?(T&S|T&C|S&C)-1894007588:(T^S^C)-899497514,I=C,C=S,S=T<<30|T>>>2,T=k,k=i}R[0]=R[0]+k|0,R[1]=R[1]+T|0,R[2]=R[2]+S|0,R[3]=R[3]+C|0,R[4]=R[4]+I|0},_doFinalize:function(){var m=this._data,v=m.words,R=8*this._nDataBytes,k=8*m.sigBytes;return v[k>>>5]|=128<<24-k%32,v[14+(k+64>>>9<<4)]=Math.floor(R/4294967296),v[15+(k+64>>>9<<4)]=R,m.sigBytes=4*v.length,this._process(),this._hash},clone:function(){var m=_.clone.call(this);return m._hash=this._hash.clone(),m}}),P.SHA1=_._createHelper(g),P.HmacSHA1=_._createHmacHelper(g),n.SHA1)},7792:function(L,b,u){var P,E,c,_,w,d;L.exports=(d=u(8249),u(2153),E=(P=d).lib.WordArray,c=P.algo,_=c.SHA256,w=c.SHA224=_.extend({_doReset:function(){this._hash=new E.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var g=_._doFinalize.call(this);return g.sigBytes-=4,g}}),P.SHA224=_._createHelper(w),P.HmacSHA224=_._createHmacHelper(w),d.SHA224)},2153:function(L,b,u){var P;L.exports=(P=u(8249),function(E){var c=P,_=c.lib,w=_.WordArray,d=_.Hasher,g=c.algo,n=[],m=[];(function(){function k(I){for(var o=E.sqrt(I),p=2;p<=o;p++)if(!(I%p))return!1;return!0}function T(I){return 4294967296*(I-(0|I))|0}for(var S=2,C=0;C<64;)k(S)&&(C<8&&(n[C]=T(E.pow(S,.5))),m[C]=T(E.pow(S,.3333333333333333)),C++),S++})();var v=[],R=g.SHA256=d.extend({_doReset:function(){this._hash=new w.init(n.slice(0))},_doProcessBlock:function(k,T){for(var S=this._hash.words,C=S[0],I=S[1],o=S[2],p=S[3],i=S[4],s=S[5],l=S[6],f=S[7],O=0;O<64;O++){if(O<16)v[O]=0|k[T+O];else{var F=v[O-15],x=(F<<25|F>>>7)^(F<<14|F>>>18)^F>>>3,N=v[O-2],z=(N<<15|N>>>17)^(N<<13|N>>>19)^N>>>10;v[O]=x+v[O-7]+z+v[O-16]}var V=C&I^C&o^I&o,J=(C<<30|C>>>2)^(C<<19|C>>>13)^(C<<10|C>>>22),ne=f+((i<<26|i>>>6)^(i<<21|i>>>11)^(i<<7|i>>>25))+(i&s^~i&l)+m[O]+v[O];f=l,l=s,s=i,i=p+ne|0,p=o,o=I,I=C,C=ne+(J+V)|0}S[0]=S[0]+C|0,S[1]=S[1]+I|0,S[2]=S[2]+o|0,S[3]=S[3]+p|0,S[4]=S[4]+i|0,S[5]=S[5]+s|0,S[6]=S[6]+l|0,S[7]=S[7]+f|0},_doFinalize:function(){var k=this._data,T=k.words,S=8*this._nDataBytes,C=8*k.sigBytes;return T[C>>>5]|=128<<24-C%32,T[14+(C+64>>>9<<4)]=E.floor(S/4294967296),T[15+(C+64>>>9<<4)]=S,k.sigBytes=4*T.length,this._process(),this._hash},clone:function(){var k=d.clone.call(this);return k._hash=this._hash.clone(),k}});c.SHA256=d._createHelper(R),c.HmacSHA256=d._createHmacHelper(R)}(Math),P.SHA256)},3327:function(L,b,u){var P;L.exports=(P=u(8249),u(4938),function(E){var c=P,_=c.lib,w=_.WordArray,d=_.Hasher,g=c.x64.Word,n=c.algo,m=[],v=[],R=[];(function(){for(var S=1,C=0,I=0;I<24;I++){m[S+5*C]=(I+1)*(I+2)/2%64;var o=(2*S+3*C)%5;S=C%5,C=o}for(S=0;S<5;S++)for(C=0;C<5;C++)v[S+5*C]=C+(2*S+3*C)%5*5;for(var p=1,i=0;i<24;i++){for(var s=0,l=0,f=0;f<7;f++){if(1&p){var O=(1<<f)-1;O<32?l^=1<<O:s^=1<<O-32}128&p?p=p<<1^113:p<<=1}R[i]=g.create(s,l)}})();var k=[];(function(){for(var S=0;S<25;S++)k[S]=g.create()})();var T=n.SHA3=d.extend({cfg:d.cfg.extend({outputLength:512}),_doReset:function(){for(var S=this._state=[],C=0;C<25;C++)S[C]=new g.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(S,C){for(var I=this._state,o=this.blockSize/2,p=0;p<o;p++){var i=S[C+2*p],s=S[C+2*p+1];i=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),(Re=I[p]).high^=s,Re.low^=i}for(var l=0;l<24;l++){for(var f=0;f<5;f++){for(var O=0,F=0,x=0;x<5;x++)O^=(Re=I[f+5*x]).high,F^=Re.low;var N=k[f];N.high=O,N.low=F}for(f=0;f<5;f++){var z=k[(f+4)%5],V=k[(f+1)%5],J=V.high,ne=V.low;for(O=z.high^(J<<1|ne>>>31),F=z.low^(ne<<1|J>>>31),x=0;x<5;x++)(Re=I[f+5*x]).high^=O,Re.low^=F}for(var ee=1;ee<25;ee++){var Q=(Re=I[ee]).high,oe=Re.low,he=m[ee];he<32?(O=Q<<he|oe>>>32-he,F=oe<<he|Q>>>32-he):(O=oe<<he-32|Q>>>64-he,F=Q<<he-32|oe>>>64-he);var Te=k[v[ee]];Te.high=O,Te.low=F}var Se=k[0],Ce=I[0];for(Se.high=Ce.high,Se.low=Ce.low,f=0;f<5;f++)for(x=0;x<5;x++){var Re=I[ee=f+5*x],Ee=k[ee],We=k[(f+1)%5+5*x],Yt=k[(f+2)%5+5*x];Re.high=Ee.high^~We.high&Yt.high,Re.low=Ee.low^~We.low&Yt.low}Re=I[0];var rr=R[l];Re.high^=rr.high,Re.low^=rr.low}},_doFinalize:function(){var S=this._data,C=S.words,I=(this._nDataBytes,8*S.sigBytes),o=32*this.blockSize;C[I>>>5]|=1<<24-I%32,C[(E.ceil((I+1)/o)*o>>>5)-1]|=128,S.sigBytes=4*C.length,this._process();for(var p=this._state,i=this.cfg.outputLength/8,s=i/8,l=[],f=0;f<s;f++){var O=p[f],F=O.high,x=O.low;F=16711935&(F<<8|F>>>24)|4278255360&(F<<24|F>>>8),x=16711935&(x<<8|x>>>24)|4278255360&(x<<24|x>>>8),l.push(x),l.push(F)}return new w.init(l,i)},clone:function(){for(var S=d.clone.call(this),C=S._state=this._state.slice(0),I=0;I<25;I++)C[I]=C[I].clone();return S}});c.SHA3=d._createHelper(T),c.HmacSHA3=d._createHmacHelper(T)}(Math),P.SHA3)},7460:function(L,b,u){var P,E,c,_,w,d,g,n;L.exports=(n=u(8249),u(4938),u(34),E=(P=n).x64,c=E.Word,_=E.WordArray,w=P.algo,d=w.SHA512,g=w.SHA384=d.extend({_doReset:function(){this._hash=new _.init([new c.init(3418070365,3238371032),new c.init(1654270250,914150663),new c.init(2438529370,812702999),new c.init(355462360,4144912697),new c.init(1731405415,4290775857),new c.init(2394180231,1750603025),new c.init(3675008525,1694076839),new c.init(1203062813,3204075428)])},_doFinalize:function(){var m=d._doFinalize.call(this);return m.sigBytes-=16,m}}),P.SHA384=d._createHelper(g),P.HmacSHA384=d._createHmacHelper(g),n.SHA384)},34:function(L,b,u){var P;L.exports=(P=u(8249),u(4938),function(){var E=P,c=E.lib.Hasher,_=E.x64,w=_.Word,d=_.WordArray,g=E.algo;function n(){return w.create.apply(w,arguments)}var m=[n(1116352408,3609767458),n(1899447441,602891725),n(3049323471,3964484399),n(3921009573,2173295548),n(961987163,4081628472),n(1508970993,3053834265),n(2453635748,2937671579),n(2870763221,3664609560),n(3624381080,2734883394),n(310598401,1164996542),n(607225278,1323610764),n(1426881987,3590304994),n(1925078388,4068182383),n(2162078206,991336113),n(2614888103,633803317),n(3248222580,3479774868),n(3835390401,2666613458),n(4022224774,944711139),n(264347078,2341262773),n(604807628,2007800933),n(770255983,1495990901),n(1249150122,1856431235),n(1555081692,3175218132),n(1996064986,2198950837),n(2554220882,3999719339),n(2821834349,766784016),n(2952996808,2566594879),n(3210313671,3203337956),n(3336571891,1034457026),n(3584528711,2466948901),n(113926993,3758326383),n(338241895,168717936),n(666307205,1188179964),n(773529912,1546045734),n(1294757372,1522805485),n(1396182291,2643833823),n(1695183700,2343527390),n(1986661051,1014477480),n(2177026350,1206759142),n(2456956037,344077627),n(2730485921,1290863460),n(2820302411,3158454273),n(3259730800,3505952657),n(3345764771,106217008),n(3516065817,3606008344),n(3600352804,1432725776),n(4094571909,1467031594),n(275423344,851169720),n(430227734,3100823752),n(506948616,1363258195),n(659060556,3750685593),n(883997877,3785050280),n(958139571,3318307427),n(1322822218,3812723403),n(1537002063,2003034995),n(1747873779,3602036899),n(1955562222,1575990012),n(2024104815,1125592928),n(2227730452,2716904306),n(2361852424,442776044),n(2428436474,593698344),n(2756734187,3733110249),n(3204031479,2999351573),n(3329325298,3815920427),n(3391569614,3928383900),n(3515267271,566280711),n(3940187606,3454069534),n(4118630271,4000239992),n(116418474,1914138554),n(174292421,2731055270),n(289380356,3203993006),n(460393269,320620315),n(685471733,587496836),n(852142971,1086792851),n(1017036298,365543100),n(1126000580,2618297676),n(1288033470,3409855158),n(1501505948,4234509866),n(1607167915,987167468),n(1816402316,1246189591)],v=[];(function(){for(var k=0;k<80;k++)v[k]=n()})();var R=g.SHA512=c.extend({_doReset:function(){this._hash=new d.init([new w.init(1779033703,4089235720),new w.init(3144134277,2227873595),new w.init(1013904242,4271175723),new w.init(2773480762,1595750129),new w.init(1359893119,2917565137),new w.init(2600822924,725511199),new w.init(528734635,4215389547),new w.init(1541459225,327033209)])},_doProcessBlock:function(k,T){for(var S=this._hash.words,C=S[0],I=S[1],o=S[2],p=S[3],i=S[4],s=S[5],l=S[6],f=S[7],O=C.high,F=C.low,x=I.high,N=I.low,z=o.high,V=o.low,J=p.high,ne=p.low,ee=i.high,Q=i.low,oe=s.high,he=s.low,Te=l.high,Se=l.low,Ce=f.high,Re=f.low,Ee=O,We=F,Yt=x,rr=N,yt=z,yr=V,Kt=J,Tt=ne,Gr=ee,ft=Q,Dt=oe,Qr=he,Gt=Te,ut=Se,_t=Ce,fr=Re,Ft=0;Ft<80;Ft++){var Qt,Br,xe=v[Ft];if(Ft<16)Br=xe.high=0|k[T+2*Ft],Qt=xe.low=0|k[T+2*Ft+1];else{var De=v[Ft-15],gr=De.high,nr=De.low,un=(gr>>>1|nr<<31)^(gr>>>8|nr<<24)^gr>>>7,On=(nr>>>1|gr<<31)^(nr>>>8|gr<<24)^(nr>>>7|gr<<25),jn=v[Ft-2],Zt=jn.high,Nr=jn.low,an=(Zt>>>19|Nr<<13)^(Zt<<3|Nr>>>29)^Zt>>>6,Wa=(Nr>>>19|Zt<<13)^(Nr<<3|Zt>>>29)^(Nr>>>6|Zt<<26),Ca=v[Ft-7],oi=Ca.high,wt=Ca.low,Fe=v[Ft-16],gt=Fe.high,Qe=Fe.low;Br=(Br=(Br=un+oi+((Qt=On+wt)>>>0<On>>>0?1:0))+an+((Qt+=Wa)>>>0<Wa>>>0?1:0))+gt+((Qt+=Qe)>>>0<Qe>>>0?1:0),xe.high=Br,xe.low=Qt}var lt,st=Gr&Dt^~Gr&Gt,ye=ft&Qr^~ft&ut,ir=Ee&Yt^Ee&yt^Yt&yt,kr=We&rr^We&yr^rr&yr,Cr=(Ee>>>28|We<<4)^(Ee<<30|We>>>2)^(Ee<<25|We>>>7),Dr=(We>>>28|Ee<<4)^(We<<30|Ee>>>2)^(We<<25|Ee>>>7),sn=(Gr>>>14|ft<<18)^(Gr>>>18|ft<<14)^(Gr<<23|ft>>>9),Ie=(ft>>>14|Gr<<18)^(ft>>>18|Gr<<14)^(ft<<23|Gr>>>9),Ot=m[Ft],bt=Ot.high,kt=Ot.low,Lr=_t+sn+((lt=fr+Ie)>>>0<fr>>>0?1:0),Ir=Dr+kr;_t=Gt,fr=ut,Gt=Dt,ut=Qr,Dt=Gr,Qr=ft,Gr=Kt+(Lr=(Lr=(Lr=Lr+st+((lt+=ye)>>>0<ye>>>0?1:0))+bt+((lt+=kt)>>>0<kt>>>0?1:0))+Br+((lt+=Qt)>>>0<Qt>>>0?1:0))+((ft=Tt+lt|0)>>>0<Tt>>>0?1:0)|0,Kt=yt,Tt=yr,yt=Yt,yr=rr,Yt=Ee,rr=We,Ee=Lr+(Cr+ir+(Ir>>>0<Dr>>>0?1:0))+((We=lt+Ir|0)>>>0<lt>>>0?1:0)|0}F=C.low=F+We,C.high=O+Ee+(F>>>0<We>>>0?1:0),N=I.low=N+rr,I.high=x+Yt+(N>>>0<rr>>>0?1:0),V=o.low=V+yr,o.high=z+yt+(V>>>0<yr>>>0?1:0),ne=p.low=ne+Tt,p.high=J+Kt+(ne>>>0<Tt>>>0?1:0),Q=i.low=Q+ft,i.high=ee+Gr+(Q>>>0<ft>>>0?1:0),he=s.low=he+Qr,s.high=oe+Dt+(he>>>0<Qr>>>0?1:0),Se=l.low=Se+ut,l.high=Te+Gt+(Se>>>0<ut>>>0?1:0),Re=f.low=Re+fr,f.high=Ce+_t+(Re>>>0<fr>>>0?1:0)},_doFinalize:function(){var k=this._data,T=k.words,S=8*this._nDataBytes,C=8*k.sigBytes;return T[C>>>5]|=128<<24-C%32,T[30+(C+128>>>10<<5)]=Math.floor(S/4294967296),T[31+(C+128>>>10<<5)]=S,k.sigBytes=4*T.length,this._process(),this._hash.toX32()},clone:function(){var k=c.clone.call(this);return k._hash=this._hash.clone(),k},blockSize:32});E.SHA512=c._createHelper(R),E.HmacSHA512=c._createHmacHelper(R)}(),P.SHA512)},4253:function(L,b,u){var P;L.exports=(P=u(8249),u(8269),u(8214),u(888),u(5109),function(){var E=P,c=E.lib,_=c.WordArray,w=c.BlockCipher,d=E.algo,g=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],n=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],m=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],v=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],R=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],k=d.DES=w.extend({_doReset:function(){for(var I=this._key.words,o=[],p=0;p<56;p++){var i=g[p]-1;o[p]=I[i>>>5]>>>31-i%32&1}for(var s=this._subKeys=[],l=0;l<16;l++){var f=s[l]=[],O=m[l];for(p=0;p<24;p++)f[p/6|0]|=o[(n[p]-1+O)%28]<<31-p%6,f[4+(p/6|0)]|=o[28+(n[p+24]-1+O)%28]<<31-p%6;for(f[0]=f[0]<<1|f[0]>>>31,p=1;p<7;p++)f[p]=f[p]>>>4*(p-1)+3;f[7]=f[7]<<5|f[7]>>>27}var F=this._invSubKeys=[];for(p=0;p<16;p++)F[p]=s[15-p]},encryptBlock:function(I,o){this._doCryptBlock(I,o,this._subKeys)},decryptBlock:function(I,o){this._doCryptBlock(I,o,this._invSubKeys)},_doCryptBlock:function(I,o,p){this._lBlock=I[o],this._rBlock=I[o+1],T.call(this,4,252645135),T.call(this,16,65535),S.call(this,2,858993459),S.call(this,8,16711935),T.call(this,1,1431655765);for(var i=0;i<16;i++){for(var s=p[i],l=this._lBlock,f=this._rBlock,O=0,F=0;F<8;F++)O|=v[F][((f^s[F])&R[F])>>>0];this._lBlock=f,this._rBlock=l^O}var x=this._lBlock;this._lBlock=this._rBlock,this._rBlock=x,T.call(this,1,1431655765),S.call(this,8,16711935),S.call(this,2,858993459),T.call(this,16,65535),T.call(this,4,252645135),I[o]=this._lBlock,I[o+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function T(I,o){var p=(this._lBlock>>>I^this._rBlock)&o;this._rBlock^=p,this._lBlock^=p<<I}function S(I,o){var p=(this._rBlock>>>I^this._lBlock)&o;this._lBlock^=p,this._rBlock^=p<<I}E.DES=w._createHelper(k);var C=d.TripleDES=w.extend({_doReset:function(){var I=this._key.words;if(I.length!==2&&I.length!==4&&I.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var o=I.slice(0,2),p=I.length<4?I.slice(0,2):I.slice(2,4),i=I.length<6?I.slice(0,2):I.slice(4,6);this._des1=k.createEncryptor(_.create(o)),this._des2=k.createEncryptor(_.create(p)),this._des3=k.createEncryptor(_.create(i))},encryptBlock:function(I,o){this._des1.encryptBlock(I,o),this._des2.decryptBlock(I,o),this._des3.encryptBlock(I,o)},decryptBlock:function(I,o){this._des3.decryptBlock(I,o),this._des2.encryptBlock(I,o),this._des1.decryptBlock(I,o)},keySize:6,ivSize:2,blockSize:2});E.TripleDES=w._createHelper(C)}(),P.TripleDES)},4938:function(L,b,u){var P;L.exports=(P=u(8249),function(E){var c=P,_=c.lib,w=_.Base,d=_.WordArray,g=c.x64={};g.Word=w.extend({init:function(n,m){this.high=n,this.low=m}}),g.WordArray=w.extend({init:function(n,m){n=this.words=n||[],this.sigBytes=m!=E?m:8*n.length},toX32:function(){for(var n=this.words,m=n.length,v=[],R=0;R<m;R++){var k=n[R];v.push(k.high),v.push(k.low)}return d.create(v,this.sigBytes)},clone:function(){for(var n=w.clone.call(this),m=n.words=this.words.slice(0),v=m.length,R=0;R<v;R++)m[R]=m[R].clone();return n}})}(),P)},1227:(L,b,u)=>{b.formatArgs=function(E){if(E[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+E[0]+(this.useColors?"%c ":" ")+"+"+L.exports.humanize(this.diff),!this.useColors)return;const c="color: "+this.color;E.splice(1,0,c,"color: inherit");let _=0,w=0;E[0].replace(/%[a-zA-Z%]/g,d=>{d!=="%%"&&(_++,d==="%c"&&(w=_))}),E.splice(w,0,c)},b.save=function(E){try{E?b.storage.setItem("debug",E):b.storage.removeItem("debug")}catch{}},b.load=function(){let E;try{E=b.storage.getItem("debug")}catch{}return!E&&typeof process<"u"&&"env"in process&&(E=r.DEBUG),E},b.useColors=function(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let E;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(E=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(E[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},b.storage=function(){try{return localStorage}catch{}}(),b.destroy=(()=>{let E=!1;return()=>{E||(E=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),b.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],b.log=console.debug||console.log||(()=>{}),L.exports=u(2447)(b);const{formatters:P}=L.exports;P.j=function(E){try{return JSON.stringify(E)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}}},2447:(L,b,u)=>{L.exports=function(P){function E(w){let d,g,n,m=null;function v(...R){if(!v.enabled)return;const k=v,T=Number(new Date),S=T-(d||T);k.diff=S,k.prev=d,k.curr=T,d=T,R[0]=E.coerce(R[0]),typeof R[0]!="string"&&R.unshift("%O");let C=0;R[0]=R[0].replace(/%([a-zA-Z%])/g,(I,o)=>{if(I==="%%")return"%";C++;const p=E.formatters[o];if(typeof p=="function"){const i=R[C];I=p.call(k,i),R.splice(C,1),C--}return I}),E.formatArgs.call(k,R),(k.log||E.log).apply(k,R)}return v.namespace=w,v.useColors=E.useColors(),v.color=E.selectColor(w),v.extend=c,v.destroy=E.destroy,Object.defineProperty(v,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(g!==E.namespaces&&(g=E.namespaces,n=E.enabled(w)),n),set:R=>{m=R}}),typeof E.init=="function"&&E.init(v),v}function c(w,d){const g=E(this.namespace+(d===void 0?":":d)+w);return g.log=this.log,g}function _(w){return w.toString().substring(2,w.toString().length-2).replace(/\.\*\?$/,"*")}return E.debug=E,E.default=E,E.coerce=function(w){return w instanceof Error?w.stack||w.message:w},E.disable=function(){const w=[...E.names.map(_),...E.skips.map(_).map(d=>"-"+d)].join(",");return E.enable(""),w},E.enable=function(w){let d;E.save(w),E.namespaces=w,E.names=[],E.skips=[];const g=(typeof w=="string"?w:"").split(/[\s,]+/),n=g.length;for(d=0;d<n;d++)g[d]&&((w=g[d].replace(/\*/g,".*?"))[0]==="-"?E.skips.push(new RegExp("^"+w.slice(1)+"$")):E.names.push(new RegExp("^"+w+"$")))},E.enabled=function(w){if(w[w.length-1]==="*")return!0;let d,g;for(d=0,g=E.skips.length;d<g;d++)if(E.skips[d].test(w))return!1;for(d=0,g=E.names.length;d<g;d++)if(E.names[d].test(w))return!0;return!1},E.humanize=u(7824),E.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(P).forEach(w=>{E[w]=P[w]}),E.names=[],E.skips=[],E.formatters={},E.selectColor=function(w){let d=0;for(let g=0;g<w.length;g++)d=(d<<5)-d+w.charCodeAt(g),d|=0;return E.colors[Math.abs(d)%E.colors.length]},E.enable(E.load()),E}},284:L=>{var b=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};L.exports=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return b()}try{return __global__||b()}finally{delete Object.prototype.__global__}}()},7187:L=>{var b,u=typeof Reflect=="object"?Reflect:null,P=u&&typeof u.apply=="function"?u.apply:function(S,C,I){return Function.prototype.apply.call(S,C,I)};b=u&&typeof u.ownKeys=="function"?u.ownKeys:Object.getOwnPropertySymbols?function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:function(S){return Object.getOwnPropertyNames(S)};var E=Number.isNaN||function(S){return S!=S};function c(){c.init.call(this)}L.exports=c,L.exports.once=function(S,C){return new Promise(function(I,o){function p(s){S.removeListener(C,i),o(s)}function i(){typeof S.removeListener=="function"&&S.removeListener("error",p),I([].slice.call(arguments))}T(S,C,i,{once:!0}),C!=="error"&&function(s,l,f){typeof s.on=="function"&&T(s,"error",l,f)}(S,p,{once:!0})})},c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var _=10;function w(S){if(typeof S!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof S)}function d(S){return S._maxListeners===void 0?c.defaultMaxListeners:S._maxListeners}function g(S,C,I,o){var p,i,s,l;if(w(I),(i=S._events)===void 0?(i=S._events=Object.create(null),S._eventsCount=0):(i.newListener!==void 0&&(S.emit("newListener",C,I.listener?I.listener:I),i=S._events),s=i[C]),s===void 0)s=i[C]=I,++S._eventsCount;else if(typeof s=="function"?s=i[C]=o?[I,s]:[s,I]:o?s.unshift(I):s.push(I),(p=d(S))>0&&s.length>p&&!s.warned){s.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(C)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=S,f.type=C,f.count=s.length,l=f,console&&console.warn&&console.warn(l)}return S}function n(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m(S,C,I){var o={fired:!1,wrapFn:void 0,target:S,type:C,listener:I},p=n.bind(o);return p.listener=I,o.wrapFn=p,p}function v(S,C,I){var o=S._events;if(o===void 0)return[];var p=o[C];return p===void 0?[]:typeof p=="function"?I?[p.listener||p]:[p]:I?function(i){for(var s=new Array(i.length),l=0;l<s.length;++l)s[l]=i[l].listener||i[l];return s}(p):k(p,p.length)}function R(S){var C=this._events;if(C!==void 0){var I=C[S];if(typeof I=="function")return 1;if(I!==void 0)return I.length}return 0}function k(S,C){for(var I=new Array(C),o=0;o<C;++o)I[o]=S[o];return I}function T(S,C,I,o){if(typeof S.on=="function")o.once?S.once(C,I):S.on(C,I);else{if(typeof S.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof S);S.addEventListener(C,function p(i){o.once&&S.removeEventListener(C,p),I(i)})}}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return _},set:function(S){if(typeof S!="number"||S<0||E(S))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+S+".");_=S}}),c.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(S){if(typeof S!="number"||S<0||E(S))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+S+".");return this._maxListeners=S,this},c.prototype.getMaxListeners=function(){return d(this)},c.prototype.emit=function(S){for(var C=[],I=1;I<arguments.length;I++)C.push(arguments[I]);var o=S==="error",p=this._events;if(p!==void 0)o=o&&p.error===void 0;else if(!o)return!1;if(o){var i;if(C.length>0&&(i=C[0]),i instanceof Error)throw i;var s=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw s.context=i,s}var l=p[S];if(l===void 0)return!1;if(typeof l=="function")P(l,this,C);else{var f=l.length,O=k(l,f);for(I=0;I<f;++I)P(O[I],this,C)}return!0},c.prototype.addListener=function(S,C){return g(this,S,C,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(S,C){return g(this,S,C,!0)},c.prototype.once=function(S,C){return w(C),this.on(S,m(this,S,C)),this},c.prototype.prependOnceListener=function(S,C){return w(C),this.prependListener(S,m(this,S,C)),this},c.prototype.removeListener=function(S,C){var I,o,p,i,s;if(w(C),(o=this._events)===void 0)return this;if((I=o[S])===void 0)return this;if(I===C||I.listener===C)--this._eventsCount==0?this._events=Object.create(null):(delete o[S],o.removeListener&&this.emit("removeListener",S,I.listener||C));else if(typeof I!="function"){for(p=-1,i=I.length-1;i>=0;i--)if(I[i]===C||I[i].listener===C){s=I[i].listener,p=i;break}if(p<0)return this;p===0?I.shift():function(l,f){for(;f+1<l.length;f++)l[f]=l[f+1];l.pop()}(I,p),I.length===1&&(o[S]=I[0]),o.removeListener!==void 0&&this.emit("removeListener",S,s||C)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(S){var C,I,o;if((I=this._events)===void 0)return this;if(I.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):I[S]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete I[S]),this;if(arguments.length===0){var p,i=Object.keys(I);for(o=0;o<i.length;++o)(p=i[o])!=="removeListener"&&this.removeAllListeners(p);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(C=I[S])=="function")this.removeListener(S,C);else if(C!==void 0)for(o=C.length-1;o>=0;o--)this.removeListener(S,C[o]);return this},c.prototype.listeners=function(S){return v(this,S,!0)},c.prototype.rawListeners=function(S){return v(this,S,!1)},c.listenerCount=function(S,C){return typeof S.listenerCount=="function"?S.listenerCount(C):R.call(S,C)},c.prototype.listenerCount=R,c.prototype.eventNames=function(){return this._eventsCount>0?b(this._events):[]}},7764:function(L,b,u){var P=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(b,"__esModule",{value:!0}),b.Logger=void 0;const E=P(u(1227)),c="h264-profile-level-id";b.Logger=class{constructor(_){_?(this._debug=(0,E.default)(`${c}:${_}`),this._warn=(0,E.default)(`${c}:WARN:${_}`),this._error=(0,E.default)(`${c}:ERROR:${_}`)):(this._debug=(0,E.default)(c),this._warn=(0,E.default)(`${c}:WARN`),this._error=(0,E.default)(`${c}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},4115:(L,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.generateProfileLevelIdStringForAnswer=b.isSameProfile=b.parseSdpProfileLevelId=b.levelToString=b.profileToString=b.profileLevelIdToString=b.parseProfileLevelId=b.ProfileLevelId=b.Level=b.Profile=void 0;const P=new(u(7764)).Logger;var E,c;(function(S){S[S.ConstrainedBaseline=1]="ConstrainedBaseline",S[S.Baseline=2]="Baseline",S[S.Main=3]="Main",S[S.ConstrainedHigh=4]="ConstrainedHigh",S[S.High=5]="High",S[S.PredictiveHigh444=6]="PredictiveHigh444"})(E||(b.Profile=E={})),function(S){S[S.L1_b=0]="L1_b",S[S.L1=10]="L1",S[S.L1_1=11]="L1_1",S[S.L1_2=12]="L1_2",S[S.L1_3=13]="L1_3",S[S.L2=20]="L2",S[S.L2_1=21]="L2_1",S[S.L2_2=22]="L2_2",S[S.L3=30]="L3",S[S.L3_1=31]="L3_1",S[S.L3_2=32]="L3_2",S[S.L4=40]="L4",S[S.L4_1=41]="L4_1",S[S.L4_2=42]="L4_2",S[S.L5=50]="L5",S[S.L5_1=51]="L5_1",S[S.L5_2=52]="L5_2"}(c||(b.Level=c={}));class _{constructor(C,I){this.profile=C,this.level=I}}b.ProfileLevelId=_;const w=new _(E.ConstrainedBaseline,c.L3_1);class d{constructor(C){this.mask=~k("x",C),this.masked_value=k("1",C)}isMatch(C){return this.masked_value===(C&this.mask)}}class g{constructor(C,I,o){this.profile_idc=C,this.profile_iop=I,this.profile=o}}const n=[new g(66,new d("x1xx0000"),E.ConstrainedBaseline),new g(77,new d("1xxx0000"),E.ConstrainedBaseline),new g(88,new d("11xx0000"),E.ConstrainedBaseline),new g(66,new d("x0xx0000"),E.Baseline),new g(88,new d("10xx0000"),E.Baseline),new g(77,new d("0x0x0000"),E.Main),new g(100,new d("00000000"),E.High),new g(100,new d("00001100"),E.ConstrainedHigh),new g(244,new d("00000000"),E.PredictiveHigh444)];function m(S){if(typeof S!="string"||S.length!==6)return;const C=parseInt(S,16);if(C===0)return;const I=255&C,o=C>>8&255,p=C>>16&255;let i;switch(I){case c.L1_1:i=16&o?c.L1_b:c.L1_1;break;case c.L1:case c.L1_2:case c.L1_3:case c.L2:case c.L2_1:case c.L2_2:case c.L3:case c.L3_1:case c.L3_2:case c.L4:case c.L4_1:case c.L4_2:case c.L5:case c.L5_1:case c.L5_2:i=I;break;default:return void P.warn(`parseProfileLevelId() | unrecognized level_idc [str:${S}, level_idc:${I}]`)}for(const s of n)if(p===s.profile_idc&&s.profile_iop.isMatch(o))return new _(s.profile,i);P.warn(`parseProfileLevelId() | unrecognized profile_idc/profile_iop combination [str:${S}, profile_idc:${p}, profile_iop:${o}]`)}function v(S){if(S.level==c.L1_b)switch(S.profile){case E.ConstrainedBaseline:return"42f00b";case E.Baseline:return"42100b";case E.Main:return"4d100b";default:return void P.warn(`profileLevelIdToString() | Level 1_b not is allowed for profile ${S.profile}`)}let C;switch(S.profile){case E.ConstrainedBaseline:C="42e0";break;case E.Baseline:C="4200";break;case E.Main:C="4d00";break;case E.ConstrainedHigh:C="640c";break;case E.High:C="6400";break;case E.PredictiveHigh444:C="f400";break;default:return void P.warn(`profileLevelIdToString() | unrecognized profile ${S.profile}`)}let I=S.level.toString(16);return I.length===1&&(I=`0${I}`),`${C}${I}`}function R(S={}){const C=S["profile-level-id"];return C?m(C):w}function k(S,C){return+(C[0]===S)<<7|+(C[1]===S)<<6|+(C[2]===S)<<5|+(C[3]===S)<<4|+(C[4]===S)<<3|+(C[5]===S)<<2|+(C[6]===S)<<1|+(C[7]===S)<<0}function T(S={}){const C=S["level-asymmetry-allowed"];return C===!0||C===1||C==="1"}b.parseProfileLevelId=m,b.profileLevelIdToString=v,b.profileToString=function(S){switch(S){case E.ConstrainedBaseline:return"ConstrainedBaseline";case E.Baseline:return"Baseline";case E.Main:return"Main";case E.ConstrainedHigh:return"ConstrainedHigh";case E.High:return"High";case E.PredictiveHigh444:return"PredictiveHigh444";default:return void P.warn(`profileToString() | unrecognized profile ${S}`)}},b.levelToString=function(S){switch(S){case c.L1_b:return"1b";case c.L1:return"1";case c.L1_1:return"1.1";case c.L1_2:return"1.2";case c.L1_3:return"1.3";case c.L2:return"2";case c.L2_1:return"2.1";case c.L2_2:return"2.2";case c.L3:return"3";case c.L3_1:return"3.1";case c.L3_2:return"3.2";case c.L4:return"4";case c.L4_1:return"4.1";case c.L4_2:return"4.2";case c.L5:return"5";case c.L5_1:return"5.1";case c.L5_2:return"5.2";default:return void P.warn(`levelToString() | unrecognized level ${S}`)}},b.parseSdpProfileLevelId=R,b.isSameProfile=function(S={},C={}){const I=R(S),o=R(C);return!!(I&&o&&I.profile===o.profile)},b.generateProfileLevelIdStringForAnswer=function(S={},C={}){if(!S["profile-level-id"]&&!C["profile-level-id"])return void P.warn("generateProfileLevelIdStringForAnswer() | profile-level-id missing in local and remote params");const I=R(S),o=R(C);if(!I)throw new TypeError("invalid local_profile_level_id");if(!o)throw new TypeError("invalid remote_profile_level_id");if(I.profile!==o.profile)throw new TypeError("H264 Profile mismatch");const p=T(S)&&T(C),i=I.level,s=o.level,l=function(x,N){return x===c.L1_b?N!==c.L1&&N!==c.L1_b:N===c.L1_b?x!==c.L1:x<N}(f=i,O=s)?f:O;var f,O;const F=p?i:l;return P.debug(`generateProfileLevelIdStringForAnswer() | result [profile:${I.profile}, level:${F}]`),v(new _(I.profile,F))}},4301:(L,b,u)=>{u(7147),L.exports=self.fetch.bind(self)},6808:(L,b,u)=>{var P,E;(function(c){(E=typeof(P=c)=="function"?P.call(b,u,b,L):P)===void 0||(L.exports=E),L.exports=c()})(function(){function c(){for(var w=0,d={};w<arguments.length;w++){var g=arguments[w];for(var n in g)d[n]=g[n]}return d}function _(w){return w.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function w(d){function g(){}function n(v,R,k){if(typeof document<"u"){typeof(k=c({path:"/"},g.defaults,k)).expires=="number"&&(k.expires=new Date(1*new Date+864e5*k.expires)),k.expires=k.expires?k.expires.toUTCString():"";try{var T=JSON.stringify(R);/^[\{\[]/.test(T)&&(R=T)}catch{}R=d.write?d.write(R,v):encodeURIComponent(String(R)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),v=encodeURIComponent(String(v)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var S="";for(var C in k)k[C]&&(S+="; "+C,k[C]!==!0&&(S+="="+k[C].split(";")[0]));return document.cookie=v+"="+R+S}}function m(v,R){if(typeof document<"u"){for(var k={},T=document.cookie?document.cookie.split("; "):[],S=0;S<T.length;S++){var C=T[S].split("="),I=C.slice(1).join("=");R||I.charAt(0)!=='"'||(I=I.slice(1,-1));try{var o=_(C[0]);if(I=(d.read||d)(I,o)||_(I),R)try{I=JSON.parse(I)}catch{}if(k[o]=I,v===o)break}catch{}}return v?k[v]:k}}return g.set=n,g.get=function(v){return m(v,!1)},g.getJSON=function(v){return m(v,!0)},g.remove=function(v,R){n(v,"",c(R,{expires:-1}))},g.defaults={},g.withConverter=w,g}(function(){})})},773:(L,b,u)=>{var P="__lodash_hash_undefined__",E="[object Function]",c="[object GeneratorFunction]",_=/^\[object .+?Constructor\]$/,w=typeof u.g=="object"&&u.g&&u.g.Object===Object&&u.g,d=typeof self=="object"&&self&&self.Object===Object&&self,g=w||d||Function("return this")(),n,m=Array.prototype,v=Function.prototype,R=Object.prototype,k=g["__core-js_shared__"],T=(n=/[^.]+$/.exec(k&&k.keys&&k.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",S=v.toString,C=R.hasOwnProperty,I=R.toString,o=RegExp("^"+S.call(C).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),p=m.splice,i=z(g,"Map"),s=z(Object,"create");function l(ne){var ee=-1,Q=ne?ne.length:0;for(this.clear();++ee<Q;){var oe=ne[ee];this.set(oe[0],oe[1])}}function f(ne){var ee=-1,Q=ne?ne.length:0;for(this.clear();++ee<Q;){var oe=ne[ee];this.set(oe[0],oe[1])}}function O(ne){var ee=-1,Q=ne?ne.length:0;for(this.clear();++ee<Q;){var oe=ne[ee];this.set(oe[0],oe[1])}}function F(ne,ee){for(var Q,oe,he=ne.length;he--;)if((Q=ne[he][0])===(oe=ee)||Q!=Q&&oe!=oe)return he;return-1}function x(ne){if(!J(ne)||(ee=ne,T&&T in ee))return!1;var ee,Q=function(oe){var he=J(oe)?I.call(oe):"";return he==E||he==c}(ne)||function(oe){var he=!1;if(oe!=null&&typeof oe.toString!="function")try{he=!!(oe+"")}catch{}return he}(ne)?o:_;return Q.test(function(oe){if(oe!=null){try{return S.call(oe)}catch{}try{return oe+""}catch{}}return""}(ne))}function N(ne,ee){var Q,oe,he=ne.__data__;return((oe=typeof(Q=ee))=="string"||oe=="number"||oe=="symbol"||oe=="boolean"?Q!=="__proto__":Q===null)?he[typeof ee=="string"?"string":"hash"]:he.map}function z(ne,ee){var Q=function(oe,he){return oe==null?void 0:oe[he]}(ne,ee);return x(Q)?Q:void 0}function V(ne,ee){if(typeof ne!="function"||ee&&typeof ee!="function")throw new TypeError("Expected a function");var Q=function(){var oe=arguments,he=ee?ee.apply(this,oe):oe[0],Te=Q.cache;if(Te.has(he))return Te.get(he);var Se=ne.apply(this,oe);return Q.cache=Te.set(he,Se),Se};return Q.cache=new(V.Cache||O),Q}function J(ne){var ee=typeof ne;return!!ne&&(ee=="object"||ee=="function")}l.prototype.clear=function(){this.__data__=s?s(null):{}},l.prototype.delete=function(ne){return this.has(ne)&&delete this.__data__[ne]},l.prototype.get=function(ne){var ee=this.__data__;if(s){var Q=ee[ne];return Q===P?void 0:Q}return C.call(ee,ne)?ee[ne]:void 0},l.prototype.has=function(ne){var ee=this.__data__;return s?ee[ne]!==void 0:C.call(ee,ne)},l.prototype.set=function(ne,ee){return this.__data__[ne]=s&&ee===void 0?P:ee,this},f.prototype.clear=function(){this.__data__=[]},f.prototype.delete=function(ne){var ee=this.__data__,Q=F(ee,ne);return!(Q<0)&&(Q==ee.length-1?ee.pop():p.call(ee,Q,1),!0)},f.prototype.get=function(ne){var ee=this.__data__,Q=F(ee,ne);return Q<0?void 0:ee[Q][1]},f.prototype.has=function(ne){return F(this.__data__,ne)>-1},f.prototype.set=function(ne,ee){var Q=this.__data__,oe=F(Q,ne);return oe<0?Q.push([ne,ee]):Q[oe][1]=ee,this},O.prototype.clear=function(){this.__data__={hash:new l,map:new(i||f),string:new l}},O.prototype.delete=function(ne){return N(this,ne).delete(ne)},O.prototype.get=function(ne){return N(this,ne).get(ne)},O.prototype.has=function(ne){return N(this,ne).has(ne)},O.prototype.set=function(ne,ee){return N(this,ne).set(ne,ee),this},V.Cache=O,L.exports=V},9514:(L,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.Consumer=void 0;const P=u(8562),E=u(4493),c=u(9992),_=new P.Logger("Consumer");class w extends E.EnhancedEventEmitter{constructor({id:g,localId:n,producerId:m,rtpReceiver:v,track:R,rtpParameters:k,appData:T}){super(),this._closed=!1,this._observer=new E.EnhancedEventEmitter,_.debug("constructor()"),this._id=g,this._localId=n,this._producerId=m,this._rtpReceiver=v,this._track=R,this._rtpParameters=k,this._paused=!R.enabled,this._appData=T||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get rtpReceiver(){return this._rtpReceiver}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get appData(){return this._appData}set appData(g){this._appData=g}get observer(){return this._observer}close(){this._closed||(_.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(_.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new c.InvalidStateError("closed");return new Promise((g,n)=>{this.safeEmit("@getstats",g,n)})}pause(){_.debug("pause()"),this._closed?_.error("pause() | Consumer closed"):this._paused?_.debug("pause() | Consumer is already paused"):(this._paused=!0,this._track.enabled=!1,this.emit("@pause"),this._observer.safeEmit("pause"))}resume(){_.debug("resume()"),this._closed?_.error("resume() | Consumer closed"):this._paused?(this._paused=!1,this._track.enabled=!0,this.emit("@resume"),this._observer.safeEmit("resume")):_.debug("resume() | Consumer is already resumed")}onTrackEnded(){_.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){try{this._track.removeEventListener("ended",this.onTrackEnded),this._track.stop()}catch{}}}b.Consumer=w},1623:(L,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.DataConsumer=void 0;const P=u(8562),E=u(4493),c=new P.Logger("DataConsumer");class _ extends E.EnhancedEventEmitter{constructor({id:d,dataProducerId:g,dataChannel:n,sctpStreamParameters:m,appData:v}){super(),this._closed=!1,this._observer=new E.EnhancedEventEmitter,c.debug("constructor()"),this._id=d,this._dataProducerId=g,this._dataChannel=n,this._sctpStreamParameters=m,this._appData=v||{},this.handleDataChannel()}get id(){return this._id}get dataProducerId(){return this._dataProducerId}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get binaryType(){return this._dataChannel.binaryType}set binaryType(d){this._dataChannel.binaryType=d}get appData(){return this._appData}set appData(d){this._appData=d}get observer(){return this._observer}close(){this._closed||(c.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(c.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(c.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",d=>{if(this._closed)return;let{error:g}=d;g||(g=new Error("unknown DataChannel error")),g.errorDetail==="sctp-failure"?c.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",g.sctpCauseCode,g.message):c.error('DataChannel "error" event: %o',g),this.safeEmit("error",g)}),this._dataChannel.addEventListener("close",()=>{this._closed||(c.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",d=>{this._closed||this.safeEmit("message",d.data)})}}b.DataConsumer=_},5504:(L,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.DataProducer=void 0;const P=u(8562),E=u(4493),c=u(9992),_=new P.Logger("DataProducer");class w extends E.EnhancedEventEmitter{constructor({id:g,dataChannel:n,sctpStreamParameters:m,appData:v}){super(),this._closed=!1,this._observer=new E.EnhancedEventEmitter,_.debug("constructor()"),this._id=g,this._dataChannel=n,this._sctpStreamParameters=m,this._appData=v||{},this.handleDataChannel()}get id(){return this._id}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get bufferedAmount(){return this._dataChannel.bufferedAmount}get bufferedAmountLowThreshold(){return this._dataChannel.bufferedAmountLowThreshold}set bufferedAmountLowThreshold(g){this._dataChannel.bufferedAmountLowThreshold=g}get appData(){return this._appData}set appData(g){this._appData=g}get observer(){return this._observer}close(){this._closed||(_.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(_.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}send(g){if(_.debug("send()"),this._closed)throw new c.InvalidStateError("closed");this._dataChannel.send(g)}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(_.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",g=>{if(this._closed)return;let{error:n}=g;n||(n=new Error("unknown DataChannel error")),n.errorDetail==="sctp-failure"?_.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",n.sctpCauseCode,n.message):_.error('DataChannel "error" event: %o',n),this.safeEmit("error",n)}),this._dataChannel.addEventListener("close",()=>{this._closed||(_.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",()=>{this._closed||_.warn('DataChannel "message" event in a DataProducer, message discarded')}),this._dataChannel.addEventListener("bufferedamountlow",()=>{this._closed||this.safeEmit("bufferedamountlow")})}}b.DataProducer=w},3120:function(L,b,u){var P=this&&this.__createBinding||(Object.create?function(x,N,z,V){V===void 0&&(V=z);var J=Object.getOwnPropertyDescriptor(N,z);J&&!("get"in J?!N.__esModule:J.writable||J.configurable)||(J={enumerable:!0,get:function(){return N[z]}}),Object.defineProperty(x,V,J)}:function(x,N,z,V){V===void 0&&(V=z),x[V]=N[z]}),E=this&&this.__setModuleDefault||(Object.create?function(x,N){Object.defineProperty(x,"default",{enumerable:!0,value:N})}:function(x,N){x.default=N}),c=this&&this.__importStar||function(x){if(x&&x.__esModule)return x;var N={};if(x!=null)for(var z in x)z!=="default"&&Object.prototype.hasOwnProperty.call(x,z)&&P(N,x,z);return E(N,x),N};Object.defineProperty(b,"__esModule",{value:!0}),b.Device=b.detectDevice=void 0;const _=u(2238),w=u(8562),d=u(4493),g=u(9992),n=c(u(3347)),m=c(u(5280)),v=u(5202),R=u(2960),k=u(6656),T=u(5372),S=u(5697),C=u(564),I=u(5180),o=u(1419),p=u(9862),i=u(2205),s=u(7392),l=u(3433),f=u(4770),O=new w.Logger("Device");function F(){var x,N,z,V;if(typeof navigator=="object"&&navigator.product==="ReactNative")return O.debug("detectDevice() | React-Native detected"),typeof RTCPeerConnection>"u"?void O.warn("detectDevice() | unsupported react-native-webrtc without RTCPeerConnection, forgot to call registerGlobals()?"):typeof RTCRtpTransceiver<"u"?(O.debug("detectDevice() | ReactNative UnifiedPlan handler chosen"),"ReactNativeUnifiedPlan"):(O.debug("detectDevice() | ReactNative PlanB handler chosen"),"ReactNative");if(typeof navigator!="object"||typeof navigator.userAgent!="string")O.warn("detectDevice() | unknown device");else{const J=navigator.userAgent,ne=new _.UAParser(J);O.debug("detectDevice() | browser detected [ua:%s, parsed:%o]",J,ne.getResult());const ee=ne.getBrowser(),Q=(x=ee.name)==null?void 0:x.toLowerCase(),oe=parseInt(ee.major??"0"),he=(N=ne.getEngine().name)==null?void 0:N.toLowerCase(),Te=ne.getOS(),Se=(z=Te.name)==null?void 0:z.toLowerCase(),Ce=parseFloat(Te.version??"0"),Re=(V=ne.getDevice().model)==null?void 0:V.toLowerCase(),Ee=Se==="ios"||Re==="ipad",We=Q&&["chrome","chromium","mobile chrome","chrome webview","chrome headless"].includes(Q),Yt=Q&&["firefox","mobile firefox","mobile focus"].includes(Q),rr=Q&&["safari","mobile safari"].includes(Q),yt=Q&&["edge"].includes(Q);if((We||yt)&&!Ee&&oe>=111)return"Chrome111";if(We&&!Ee&&oe>=74||yt&&!Ee&&oe>=88)return"Chrome74";if(We&&!Ee&&oe>=70)return"Chrome70";if(We&&!Ee&&oe>=67)return"Chrome67";if(We&&!Ee&&oe>=55)return"Chrome55";if(Yt&&!Ee&&oe>=120)return"Firefox120";if(Yt&&!Ee&&oe>=60)return"Firefox60";if(Yt&&Ee&&Ce>=14.3||rr&&oe>=12&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(rr&&oe>=11)return"Safari11";if(yt&&!Ee&&oe>=11&&oe<=18)return"Edge11";if(he==="webkit"&&Ee&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(he==="blink"){const yr=J.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(yr){const Kt=Number(yr[1]);return Kt>=111?"Chrome111":Kt>=74?"Chrome74":Kt>=70?"Chrome70":Kt>=67?"Chrome67":"Chrome55"}return"Chrome111"}O.warn("detectDevice() | browser not supported [name:%s, version:%s]",Q,oe)}}b.detectDevice=F,b.Device=class{constructor({handlerName:x,handlerFactory:N,Handler:z}={}){if(this._loaded=!1,this._observer=new d.EnhancedEventEmitter,O.debug("constructor()"),z){if(O.warn("constructor() | Handler option is DEPRECATED, use handlerName or handlerFactory instead"),typeof z!="string")throw new TypeError("non string Handler option no longer supported, use handlerFactory instead");x=z}if(x&&N)throw new TypeError("just one of handlerName or handlerInterface can be given");if(N)this._handlerFactory=N;else{if(x)O.debug("constructor() | handler given: %s",x);else{if(!(x=F()))throw new g.UnsupportedError("device not supported");O.debug("constructor() | detected handler: %s",x)}switch(x){case"Chrome111":this._handlerFactory=R.Chrome111.createFactory();break;case"Chrome74":this._handlerFactory=k.Chrome74.createFactory();break;case"Chrome70":this._handlerFactory=T.Chrome70.createFactory();break;case"Chrome67":this._handlerFactory=S.Chrome67.createFactory();break;case"Chrome55":this._handlerFactory=C.Chrome55.createFactory();break;case"Firefox120":this._handlerFactory=I.Firefox120.createFactory();break;case"Firefox60":this._handlerFactory=o.Firefox60.createFactory();break;case"Safari12":this._handlerFactory=p.Safari12.createFactory();break;case"Safari11":this._handlerFactory=i.Safari11.createFactory();break;case"Edge11":this._handlerFactory=s.Edge11.createFactory();break;case"ReactNativeUnifiedPlan":this._handlerFactory=l.ReactNativeUnifiedPlan.createFactory();break;case"ReactNative":this._handlerFactory=f.ReactNative.createFactory();break;default:throw new TypeError(`unknown handlerName "${x}"`)}}const V=this._handlerFactory();this._handlerName=V.name,V.close(),this._extendedRtpCapabilities=void 0,this._recvRtpCapabilities=void 0,this._canProduceByKind={audio:!1,video:!1},this._sctpCapabilities=void 0}get handlerName(){return this._handlerName}get loaded(){return this._loaded}get rtpCapabilities(){if(!this._loaded)throw new g.InvalidStateError("not loaded");return this._recvRtpCapabilities}get sctpCapabilities(){if(!this._loaded)throw new g.InvalidStateError("not loaded");return this._sctpCapabilities}get observer(){return this._observer}async load({routerRtpCapabilities:x}){let N;O.debug("load() [routerRtpCapabilities:%o]",x);try{if(this._loaded)throw new g.InvalidStateError("already loaded");const z=n.clone(x);m.validateRtpCapabilities(z),N=this._handlerFactory();const V=await N.getNativeRtpCapabilities();O.debug("load() | got native RTP capabilities:%o",V);const J=n.clone(V);m.validateRtpCapabilities(J),this._extendedRtpCapabilities=m.getExtendedRtpCapabilities(J,z),O.debug("load() | got extended RTP capabilities:%o",this._extendedRtpCapabilities),this._canProduceByKind.audio=m.canSend("audio",this._extendedRtpCapabilities),this._canProduceByKind.video=m.canSend("video",this._extendedRtpCapabilities),this._recvRtpCapabilities=m.getRecvRtpCapabilities(this._extendedRtpCapabilities),m.validateRtpCapabilities(this._recvRtpCapabilities),O.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),this._sctpCapabilities=await N.getNativeSctpCapabilities(),O.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),m.validateSctpCapabilities(this._sctpCapabilities),O.debug("load() succeeded"),this._loaded=!0,N.close()}catch(z){throw N&&N.close(),z}}canProduce(x){if(!this._loaded)throw new g.InvalidStateError("not loaded");if(x!=="audio"&&x!=="video")throw new TypeError(`invalid kind "${x}"`);return this._canProduceByKind[x]}createSendTransport({id:x,iceParameters:N,iceCandidates:z,dtlsParameters:V,sctpParameters:J,iceServers:ne,iceTransportPolicy:ee,additionalSettings:Q,proprietaryConstraints:oe,appData:he}){return O.debug("createSendTransport()"),this.createTransport({direction:"send",id:x,iceParameters:N,iceCandidates:z,dtlsParameters:V,sctpParameters:J,iceServers:ne,iceTransportPolicy:ee,additionalSettings:Q,proprietaryConstraints:oe,appData:he})}createRecvTransport({id:x,iceParameters:N,iceCandidates:z,dtlsParameters:V,sctpParameters:J,iceServers:ne,iceTransportPolicy:ee,additionalSettings:Q,proprietaryConstraints:oe,appData:he}){return O.debug("createRecvTransport()"),this.createTransport({direction:"recv",id:x,iceParameters:N,iceCandidates:z,dtlsParameters:V,sctpParameters:J,iceServers:ne,iceTransportPolicy:ee,additionalSettings:Q,proprietaryConstraints:oe,appData:he})}createTransport({direction:x,id:N,iceParameters:z,iceCandidates:V,dtlsParameters:J,sctpParameters:ne,iceServers:ee,iceTransportPolicy:Q,additionalSettings:oe,proprietaryConstraints:he,appData:Te}){if(!this._loaded)throw new g.InvalidStateError("not loaded");if(typeof N!="string")throw new TypeError("missing id");if(typeof z!="object")throw new TypeError("missing iceParameters");if(!Array.isArray(V))throw new TypeError("missing iceCandidates");if(typeof J!="object")throw new TypeError("missing dtlsParameters");if(ne&&typeof ne!="object")throw new TypeError("wrong sctpParameters");if(Te&&typeof Te!="object")throw new TypeError("if given, appData must be an object");const Se=new v.Transport({direction:x,id:N,iceParameters:z,iceCandidates:V,dtlsParameters:J,sctpParameters:ne,iceServers:ee,iceTransportPolicy:Q,additionalSettings:oe,proprietaryConstraints:he,appData:Te,handlerFactory:this._handlerFactory,extendedRtpCapabilities:this._extendedRtpCapabilities,canProduceByKind:this._canProduceByKind});return this._observer.safeEmit("newtransport",Se),Se}}},4493:(L,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.EnhancedEventEmitter=void 0;const P=u(7187),E=new(u(8562)).Logger("EnhancedEventEmitter");class c extends P.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}emit(w,...d){return super.emit(w,...d)}safeEmit(w,...d){const g=super.listenerCount(w);try{return super.emit(w,...d)}catch(n){return E.error("safeEmit() | event listener threw an error [eventName:%s]:%o",w,n),!!g}}on(w,d){return super.on(w,d),this}off(w,d){return super.off(w,d),this}addListener(w,d){return super.on(w,d),this}prependListener(w,d){return super.prependListener(w,d),this}once(w,d){return super.once(w,d),this}prependOnceListener(w,d){return super.prependOnceListener(w,d),this}removeListener(w,d){return super.off(w,d),this}removeAllListeners(w){return super.removeAllListeners(w),this}listenerCount(w){return super.listenerCount(w)}listeners(w){return super.listeners(w)}rawListeners(w){return super.rawListeners(w)}}b.EnhancedEventEmitter=c},8562:function(L,b,u){var P=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(b,"__esModule",{value:!0}),b.Logger=void 0;const E=P(u(1227)),c="mediasoup-client";b.Logger=class{constructor(_){_?(this._debug=(0,E.default)(`${c}:${_}`),this._warn=(0,E.default)(`${c}:WARN:${_}`),this._error=(0,E.default)(`${c}:ERROR:${_}`)):(this._debug=(0,E.default)(c),this._warn=(0,E.default)(`${c}:WARN`),this._error=(0,E.default)(`${c}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},6569:(L,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.Producer=void 0;const P=u(8562),E=u(4493),c=u(9992),_=new P.Logger("Producer");class w extends E.EnhancedEventEmitter{constructor({id:g,localId:n,rtpSender:m,track:v,rtpParameters:R,stopTracks:k,disableTrackOnPause:T,zeroRtpOnPause:S,appData:C}){super(),this._closed=!1,this._observer=new E.EnhancedEventEmitter,_.debug("constructor()"),this._id=g,this._localId=n,this._rtpSender=m,this._track=v,this._kind=v.kind,this._rtpParameters=R,this._paused=!!T&&!v.enabled,this._maxSpatialLayer=void 0,this._stopTracks=k,this._disableTrackOnPause=T,this._zeroRtpOnPause=S,this._appData=C||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get rtpSender(){return this._rtpSender}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(g){this._appData=g}get observer(){return this._observer}close(){this._closed||(_.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(_.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new c.InvalidStateError("closed");return new Promise((g,n)=>{this.safeEmit("@getstats",g,n)})}pause(){_.debug("pause()"),this._closed?_.error("pause() | Producer closed"):(this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&new Promise((g,n)=>{this.safeEmit("@pause",g,n)}).catch(()=>{}),this._observer.safeEmit("pause"))}resume(){_.debug("resume()"),this._closed?_.error("resume() | Producer closed"):(this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&new Promise((g,n)=>{this.safeEmit("@resume",g,n)}).catch(()=>{}),this._observer.safeEmit("resume"))}async replaceTrack({track:g}){if(_.debug("replaceTrack() [track:%o]",g),this._closed){if(g&&this._stopTracks)try{g.stop()}catch{}throw new c.InvalidStateError("closed")}if(g&&g.readyState==="ended")throw new c.InvalidStateError("track ended");g!==this._track?(await new Promise((n,m)=>{this.safeEmit("@replacetrack",g,n,m)}),this.destroyTrack(),this._track=g,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this.handleTrack()):_.debug("replaceTrack() | same track, ignored")}async setMaxSpatialLayer(g){if(this._closed)throw new c.InvalidStateError("closed");if(this._kind!=="video")throw new c.UnsupportedError("not a video Producer");if(typeof g!="number")throw new TypeError("invalid spatialLayer");g!==this._maxSpatialLayer&&(await new Promise((n,m)=>{this.safeEmit("@setmaxspatiallayer",g,n,m)}).catch(()=>{}),this._maxSpatialLayer=g)}async setRtpEncodingParameters(g){if(this._closed)throw new c.InvalidStateError("closed");if(typeof g!="object")throw new TypeError("invalid params");await new Promise((n,m)=>{this.safeEmit("@setrtpencodingparameters",g,n,m)})}onTrackEnded(){_.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track&&this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this.onTrackEnded),this._stopTracks&&this._track.stop()}catch{}}}b.Producer=w},4879:(L,b)=>{Object.defineProperty(b,"__esModule",{value:!0})},7669:(L,b)=>{Object.defineProperty(b,"__esModule",{value:!0})},5202:function(L,b,u){var P=this&&this.__createBinding||(Object.create?function(i,s,l,f){f===void 0&&(f=l);var O=Object.getOwnPropertyDescriptor(s,l);O&&!("get"in O?!s.__esModule:O.writable||O.configurable)||(O={enumerable:!0,get:function(){return s[l]}}),Object.defineProperty(i,f,O)}:function(i,s,l,f){f===void 0&&(f=l),i[f]=s[l]}),E=this&&this.__setModuleDefault||(Object.create?function(i,s){Object.defineProperty(i,"default",{enumerable:!0,value:s})}:function(i,s){i.default=s}),c=this&&this.__importStar||function(i){if(i&&i.__esModule)return i;var s={};if(i!=null)for(var l in i)l!=="default"&&Object.prototype.hasOwnProperty.call(i,l)&&P(s,i,l);return E(s,i),s},_=this&&this.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(b,"__esModule",{value:!0}),b.Transport=void 0;const w=u(2186),d=_(u(4375)),g=u(8562),n=u(4493),m=u(9992),v=c(u(3347)),R=c(u(5280)),k=u(6569),T=u(9514),S=u(5504),C=u(1623),I=new g.Logger("Transport");class o{constructor(s){this.consumerOptions=s,this.promise=new Promise((l,f)=>{this.resolve=l,this.reject=f})}}class p extends n.EnhancedEventEmitter{constructor({direction:s,id:l,iceParameters:f,iceCandidates:O,dtlsParameters:F,sctpParameters:x,iceServers:N,iceTransportPolicy:z,additionalSettings:V,proprietaryConstraints:J,appData:ne,handlerFactory:ee,extendedRtpCapabilities:Q,canProduceByKind:oe}){super(),this._closed=!1,this._iceGatheringState="new",this._connectionState="new",this._producers=new Map,this._consumers=new Map,this._dataProducers=new Map,this._dataConsumers=new Map,this._probatorConsumerCreated=!1,this._awaitQueue=new w.AwaitQueue,this._pendingConsumerTasks=[],this._consumerCreationInProgress=!1,this._pendingPauseConsumers=new Map,this._consumerPauseInProgress=!1,this._pendingResumeConsumers=new Map,this._consumerResumeInProgress=!1,this._pendingCloseConsumers=new Map,this._consumerCloseInProgress=!1,this._observer=new n.EnhancedEventEmitter,I.debug("constructor() [id:%s, direction:%s]",l,s),this._id=l,this._direction=s,this._extendedRtpCapabilities=Q,this._canProduceByKind=oe,this._maxSctpMessageSize=x?x.maxMessageSize:null;const he=v.clone(V)||{};delete he.iceServers,delete he.iceTransportPolicy,delete he.bundlePolicy,delete he.rtcpMuxPolicy,delete he.sdpSemantics,this._handler=ee(),this._handler.run({direction:s,iceParameters:f,iceCandidates:O,dtlsParameters:F,sctpParameters:x,iceServers:N,iceTransportPolicy:z,additionalSettings:he,proprietaryConstraints:J,extendedRtpCapabilities:Q}),this._appData=ne||{},this.handleHandler()}get id(){return this._id}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get iceGatheringState(){return this._iceGatheringState}get connectionState(){return this._connectionState}get appData(){return this._appData}set appData(s){this._appData=s}get observer(){return this._observer}close(){if(!this._closed){I.debug("close()"),this._closed=!0,this._awaitQueue.stop(),this._handler.close(),this._connectionState="closed";for(const s of this._producers.values())s.transportClosed();this._producers.clear();for(const s of this._consumers.values())s.transportClosed();this._consumers.clear();for(const s of this._dataProducers.values())s.transportClosed();this._dataProducers.clear();for(const s of this._dataConsumers.values())s.transportClosed();this._dataConsumers.clear(),this._observer.safeEmit("close")}}async getStats(){if(this._closed)throw new m.InvalidStateError("closed");return this._handler.getTransportStats()}async restartIce({iceParameters:s}){if(I.debug("restartIce()"),this._closed)throw new m.InvalidStateError("closed");if(!s)throw new TypeError("missing iceParameters");return this._awaitQueue.push(async()=>await this._handler.restartIce(s),"transport.restartIce()")}async updateIceServers({iceServers:s}={}){if(I.debug("updateIceServers()"),this._closed)throw new m.InvalidStateError("closed");if(!Array.isArray(s))throw new TypeError("missing iceServers");return this._awaitQueue.push(async()=>this._handler.updateIceServers(s),"transport.updateIceServers()")}async produce({track:s,encodings:l,codecOptions:f,codec:O,stopTracks:F=!0,disableTrackOnPause:x=!0,zeroRtpOnPause:N=!1,appData:z={}}={}){if(I.debug("produce() [track:%o]",s),this._closed)throw new m.InvalidStateError("closed");if(!s)throw new TypeError("missing track");if(this._direction!=="send")throw new m.UnsupportedError("not a sending Transport");if(!this._canProduceByKind[s.kind])throw new m.UnsupportedError(`cannot produce ${s.kind}`);if(s.readyState==="ended")throw new m.InvalidStateError("track ended");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if(z&&typeof z!="object")throw new TypeError("if given, appData must be an object");return this._awaitQueue.push(async()=>{let V;if(l&&!Array.isArray(l))throw TypeError("encodings must be an array");l&&l.length===0?V=void 0:l&&(V=l.map(Q=>{const oe={active:!0};return Q.active===!1&&(oe.active=!1),typeof Q.dtx=="boolean"&&(oe.dtx=Q.dtx),typeof Q.scalabilityMode=="string"&&(oe.scalabilityMode=Q.scalabilityMode),typeof Q.scaleResolutionDownBy=="number"&&(oe.scaleResolutionDownBy=Q.scaleResolutionDownBy),typeof Q.maxBitrate=="number"&&(oe.maxBitrate=Q.maxBitrate),typeof Q.maxFramerate=="number"&&(oe.maxFramerate=Q.maxFramerate),typeof Q.adaptivePtime=="boolean"&&(oe.adaptivePtime=Q.adaptivePtime),typeof Q.priority=="string"&&(oe.priority=Q.priority),typeof Q.networkPriority=="string"&&(oe.networkPriority=Q.networkPriority),oe}));const{localId:J,rtpParameters:ne,rtpSender:ee}=await this._handler.send({track:s,encodings:V,codecOptions:f,codec:O});try{R.validateRtpParameters(ne);const{id:Q}=await new Promise((he,Te)=>{this.safeEmit("produce",{kind:s.kind,rtpParameters:ne,appData:z},he,Te)}),oe=new k.Producer({id:Q,localId:J,rtpSender:ee,track:s,rtpParameters:ne,stopTracks:F,disableTrackOnPause:x,zeroRtpOnPause:N,appData:z});return this._producers.set(oe.id,oe),this.handleProducer(oe),this._observer.safeEmit("newproducer",oe),oe}catch(Q){throw this._handler.stopSending(J).catch(()=>{}),Q}},"transport.produce()").catch(V=>{if(F)try{s.stop()}catch{}throw V})}async consume({id:s,producerId:l,kind:f,rtpParameters:O,streamId:F,appData:x={}}){if(I.debug("consume()"),this._closed)throw new m.InvalidStateError("closed");if(this._direction!=="recv")throw new m.UnsupportedError("not a receiving Transport");if(typeof s!="string")throw new TypeError("missing id");if(typeof l!="string")throw new TypeError("missing producerId");if(f!=="audio"&&f!=="video")throw new TypeError(`invalid kind '${f}'`);if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(x&&typeof x!="object")throw new TypeError("if given, appData must be an object");const N=v.clone(O);if(!R.canReceive(N,this._extendedRtpCapabilities))throw new m.UnsupportedError("cannot consume this Producer");const z=new o({id:s,producerId:l,kind:f,rtpParameters:N,streamId:F,appData:x});return this._pendingConsumerTasks.push(z),(0,d.default)(()=>{this._closed||this._consumerCreationInProgress===!1&&this.createPendingConsumers()}),z.promise}async produceData({ordered:s=!0,maxPacketLifeTime:l,maxRetransmits:f,label:O="",protocol:F="",appData:x={}}={}){if(I.debug("produceData()"),this._closed)throw new m.InvalidStateError("closed");if(this._direction!=="send")throw new m.UnsupportedError("not a sending Transport");if(!this._maxSctpMessageSize)throw new m.UnsupportedError("SCTP not enabled by remote Transport");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("producedata")===0)throw new TypeError('no "producedata" listener set into this transport');if(x&&typeof x!="object")throw new TypeError("if given, appData must be an object");return(l||f)&&(s=!1),this._awaitQueue.push(async()=>{const{dataChannel:N,sctpStreamParameters:z}=await this._handler.sendDataChannel({ordered:s,maxPacketLifeTime:l,maxRetransmits:f,label:O,protocol:F});R.validateSctpStreamParameters(z);const{id:V}=await new Promise((ne,ee)=>{this.safeEmit("producedata",{sctpStreamParameters:z,label:O,protocol:F,appData:x},ne,ee)}),J=new S.DataProducer({id:V,dataChannel:N,sctpStreamParameters:z,appData:x});return this._dataProducers.set(J.id,J),this.handleDataProducer(J),this._observer.safeEmit("newdataproducer",J),J},"transport.produceData()")}async consumeData({id:s,dataProducerId:l,sctpStreamParameters:f,label:O="",protocol:F="",appData:x={}}){if(I.debug("consumeData()"),this._closed)throw new m.InvalidStateError("closed");if(this._direction!=="recv")throw new m.UnsupportedError("not a receiving Transport");if(!this._maxSctpMessageSize)throw new m.UnsupportedError("SCTP not enabled by remote Transport");if(typeof s!="string")throw new TypeError("missing id");if(typeof l!="string")throw new TypeError("missing dataProducerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(x&&typeof x!="object")throw new TypeError("if given, appData must be an object");const N=v.clone(f);return R.validateSctpStreamParameters(N),this._awaitQueue.push(async()=>{const{dataChannel:z}=await this._handler.receiveDataChannel({sctpStreamParameters:N,label:O,protocol:F}),V=new C.DataConsumer({id:s,dataProducerId:l,dataChannel:z,sctpStreamParameters:N,appData:x});return this._dataConsumers.set(V.id,V),this.handleDataConsumer(V),this._observer.safeEmit("newdataconsumer",V),V},"transport.consumeData()")}async createPendingConsumers(){this._consumerCreationInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingConsumerTasks.length===0)return void I.debug("createPendingConsumers() | there is no Consumer to be created");const s=[...this._pendingConsumerTasks];let l;this._pendingConsumerTasks=[];const f=[];for(const O of s){const{id:F,kind:x,rtpParameters:N,streamId:z}=O.consumerOptions;f.push({trackId:F,kind:x,rtpParameters:N,streamId:z})}try{const O=await this._handler.receive(f);for(let F=0;F<O.length;++F){const x=s[F],N=O[F],{id:z,producerId:V,kind:J,rtpParameters:ne,appData:ee}=x.consumerOptions,{localId:Q,rtpReceiver:oe,track:he}=N,Te=new T.Consumer({id:z,localId:Q,producerId:V,rtpReceiver:oe,track:he,rtpParameters:ne,appData:ee});this._consumers.set(Te.id,Te),this.handleConsumer(Te),this._probatorConsumerCreated||l||J!=="video"||(l=Te),this._observer.safeEmit("newconsumer",Te),x.resolve(Te)}}catch(O){for(const F of s)F.reject(O)}if(l)try{const O=R.generateProbatorRtpParameters(l.rtpParameters);await this._handler.receive([{trackId:"probator",kind:"video",rtpParameters:O}]),I.debug("createPendingConsumers() | Consumer for RTP probation created"),this._probatorConsumerCreated=!0}catch(O){I.error("createPendingConsumers() | failed to create Consumer for RTP probation:%o",O)}},"transport.createPendingConsumers()").then(()=>{this._consumerCreationInProgress=!1,this._pendingConsumerTasks.length>0&&this.createPendingConsumers()}).catch(()=>{})}pausePendingConsumers(){this._consumerPauseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingPauseConsumers.size===0)return void I.debug("pausePendingConsumers() | there is no Consumer to be paused");const s=Array.from(this._pendingPauseConsumers.values());this._pendingPauseConsumers.clear();try{const l=s.map(f=>f.localId);await this._handler.pauseReceiving(l)}catch(l){I.error("pausePendingConsumers() | failed to pause Consumers:",l)}},"transport.pausePendingConsumers").then(()=>{this._consumerPauseInProgress=!1,this._pendingPauseConsumers.size>0&&this.pausePendingConsumers()}).catch(()=>{})}resumePendingConsumers(){this._consumerResumeInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingResumeConsumers.size===0)return void I.debug("resumePendingConsumers() | there is no Consumer to be resumed");const s=Array.from(this._pendingResumeConsumers.values());this._pendingResumeConsumers.clear();try{const l=s.map(f=>f.localId);await this._handler.resumeReceiving(l)}catch(l){I.error("resumePendingConsumers() | failed to resume Consumers:",l)}},"transport.resumePendingConsumers").then(()=>{this._consumerResumeInProgress=!1,this._pendingResumeConsumers.size>0&&this.resumePendingConsumers()}).catch(()=>{})}closePendingConsumers(){this._consumerCloseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingCloseConsumers.size===0)return void I.debug("closePendingConsumers() | there is no Consumer to be closed");const s=Array.from(this._pendingCloseConsumers.values());this._pendingCloseConsumers.clear();try{await this._handler.stopReceiving(s.map(l=>l.localId))}catch(l){I.error("closePendingConsumers() | failed to close Consumers:",l)}},"transport.closePendingConsumers").then(()=>{this._consumerCloseInProgress=!1,this._pendingCloseConsumers.size>0&&this.closePendingConsumers()}).catch(()=>{})}handleHandler(){const s=this._handler;s.on("@connect",({dtlsParameters:l},f,O)=>{this._closed?O(new m.InvalidStateError("closed")):this.safeEmit("connect",{dtlsParameters:l},f,O)}),s.on("@icegatheringstatechange",l=>{l!==this._iceGatheringState&&(I.debug("ICE gathering state changed to %s",l),this._iceGatheringState=l,this._closed||this.safeEmit("icegatheringstatechange",l))}),s.on("@connectionstatechange",l=>{l!==this._connectionState&&(I.debug("connection state changed to %s",l),this._connectionState=l,this._closed||this.safeEmit("connectionstatechange",l))})}handleProducer(s){s.on("@close",()=>{this._producers.delete(s.id),this._closed||this._awaitQueue.push(async()=>await this._handler.stopSending(s.localId),"producer @close event").catch(l=>I.warn("producer.close() failed:%o",l))}),s.on("@pause",(l,f)=>{this._awaitQueue.push(async()=>await this._handler.pauseSending(s.localId),"producer @pause event").then(l).catch(f)}),s.on("@resume",(l,f)=>{this._awaitQueue.push(async()=>await this._handler.resumeSending(s.localId),"producer @resume event").then(l).catch(f)}),s.on("@replacetrack",(l,f,O)=>{this._awaitQueue.push(async()=>await this._handler.replaceTrack(s.localId,l),"producer @replacetrack event").then(f).catch(O)}),s.on("@setmaxspatiallayer",(l,f,O)=>{this._awaitQueue.push(async()=>await this._handler.setMaxSpatialLayer(s.localId,l),"producer @setmaxspatiallayer event").then(f).catch(O)}),s.on("@setrtpencodingparameters",(l,f,O)=>{this._awaitQueue.push(async()=>await this._handler.setRtpEncodingParameters(s.localId,l),"producer @setrtpencodingparameters event").then(f).catch(O)}),s.on("@getstats",(l,f)=>{if(this._closed)return f(new m.InvalidStateError("closed"));this._handler.getSenderStats(s.localId).then(l).catch(f)})}handleConsumer(s){s.on("@close",()=>{this._consumers.delete(s.id),this._pendingPauseConsumers.delete(s.id),this._pendingResumeConsumers.delete(s.id),this._closed||(this._pendingCloseConsumers.set(s.id,s),this._consumerCloseInProgress===!1&&this.closePendingConsumers())}),s.on("@pause",()=>{this._pendingResumeConsumers.has(s.id)&&this._pendingResumeConsumers.delete(s.id),this._pendingPauseConsumers.set(s.id,s),(0,d.default)(()=>{this._closed||this._consumerPauseInProgress===!1&&this.pausePendingConsumers()})}),s.on("@resume",()=>{this._pendingPauseConsumers.has(s.id)&&this._pendingPauseConsumers.delete(s.id),this._pendingResumeConsumers.set(s.id,s),(0,d.default)(()=>{this._closed||this._consumerResumeInProgress===!1&&this.resumePendingConsumers()})}),s.on("@getstats",(l,f)=>{if(this._closed)return f(new m.InvalidStateError("closed"));this._handler.getReceiverStats(s.localId).then(l).catch(f)})}handleDataProducer(s){s.on("@close",()=>{this._dataProducers.delete(s.id)})}handleDataConsumer(s){s.on("@close",()=>{this._dataConsumers.delete(s.id)})}}b.Transport=p},9992:(L,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.InvalidStateError=b.UnsupportedError=void 0;class u extends Error{constructor(c){super(c),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,u):this.stack=new Error(c).stack}}b.UnsupportedError=u;class P extends Error{constructor(c){super(c),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,P):this.stack=new Error(c).stack}}b.InvalidStateError=P},2960:function(L,b,u){var P=this&&this.__createBinding||(Object.create?function(p,i,s,l){l===void 0&&(l=s);var f=Object.getOwnPropertyDescriptor(i,s);f&&!("get"in f?!i.__esModule:f.writable||f.configurable)||(f={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(p,l,f)}:function(p,i,s,l){l===void 0&&(l=s),p[l]=i[s]}),E=this&&this.__setModuleDefault||(Object.create?function(p,i){Object.defineProperty(p,"default",{enumerable:!0,value:i})}:function(p,i){p.default=i}),c=this&&this.__importStar||function(p){if(p&&p.__esModule)return p;var i={};if(p!=null)for(var s in p)s!=="default"&&Object.prototype.hasOwnProperty.call(p,s)&&P(i,p,s);return E(i,p),i};Object.defineProperty(b,"__esModule",{value:!0}),b.Chrome111=void 0;const _=c(u(766)),w=u(8562),d=c(u(3347)),g=c(u(5280)),n=c(u(2267)),m=c(u(9072)),v=c(u(8954)),R=u(9992),k=u(9316),T=u(7910),S=u(2770),C=new w.Logger("Chrome111"),I={OS:1024,MIS:1024};class o extends k.HandlerInterface{static createFactory(){return()=>new o}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome111"}close(){if(C.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){C.debug("getNativeRtpCapabilities()");const i=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{i.addTransceiver("audio"),i.addTransceiver("video");const s=await i.createOffer();try{i.close()}catch{}const l=_.parse(s.sdp),f=n.extractRtpCapabilities({sdpObject:l});return v.addNackSuppportForOpus(f),f}catch(s){try{i.close()}catch{}throw s}}async getNativeSctpCapabilities(){return C.debug("getNativeSctpCapabilities()"),{numStreams:I}}run({direction:i,iceParameters:s,iceCandidates:l,dtlsParameters:f,sctpParameters:O,iceServers:F,iceTransportPolicy:x,additionalSettings:N,proprietaryConstraints:z,extendedRtpCapabilities:V}){this.assertNotClosed(),C.debug("run()"),this._direction=i,this._remoteSdp=new T.RemoteSdp({iceParameters:s,iceCandidates:l,dtlsParameters:f,sctpParameters:O}),this._sendingRtpParametersByKind={audio:g.getSendingRtpParameters("audio",V),video:g.getSendingRtpParameters("video",V)},this._sendingRemoteRtpParametersByKind={audio:g.getSendingRemoteRtpParameters("audio",V),video:g.getSendingRemoteRtpParameters("video",V)},f.role&&f.role!=="auto"&&(this._forcedLocalDtlsRole=f.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:F||[],iceTransportPolicy:x||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...N},z),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(C.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(i){this.assertNotClosed(),C.debug("updateIceServers()");const s=this._pc.getConfiguration();s.iceServers=i,this._pc.setConfiguration(s)}async restartIce(i){if(this.assertNotClosed(),C.debug("restartIce()"),this._remoteSdp.updateIceParameters(i),this._transportReady)if(this._direction==="send"){const s=await this._pc.createOffer({iceRestart:!0});C.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const l={type:"answer",sdp:this._remoteSdp.getSdp()};C.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l)}else{const s={type:"offer",sdp:this._remoteSdp.getSdp()};C.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);const l=await this._pc.createAnswer();C.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:i,encodings:s,codecOptions:l,codec:f}){if(this.assertNotClosed(),this.assertSendDirection(),C.debug("send() [kind:%s, track.id:%s]",i.kind,i.id),s&&s.length>1){let Q=1;for(const oe of s){const he=oe.scalabilityMode?(0,S.parse)(oe.scalabilityMode).temporalLayers:3;he>Q&&(Q=he)}s.forEach((oe,he)=>{oe.rid=`r${he}`,oe.scalabilityMode=`L1T${Q}`})}const O=d.clone(this._sendingRtpParametersByKind[i.kind]);O.codecs=g.reduceCodecs(O.codecs,f);const F=d.clone(this._sendingRemoteRtpParametersByKind[i.kind]);F.codecs=g.reduceCodecs(F.codecs,f);const x=this._remoteSdp.getNextMediaSectionIdx(),N=this._pc.addTransceiver(i,{direction:"sendonly",streams:[this._sendStream],sendEncodings:s}),z=await this._pc.createOffer();let V=_.parse(z.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:V}),C.debug("send() | calling pc.setLocalDescription() [offer:%o]",z),await this._pc.setLocalDescription(z);const J=N.mid;O.mid=J,V=_.parse(this._pc.localDescription.sdp);const ne=V.media[x.idx];if(O.rtcp.cname=n.getCname({offerMediaObject:ne}),s)if(s.length===1){const Q=m.getRtpEncodings({offerMediaObject:ne});Object.assign(Q[0],s[0]),O.encodings=Q}else O.encodings=s;else O.encodings=m.getRtpEncodings({offerMediaObject:ne});this._remoteSdp.send({offerMediaObject:ne,reuseMid:x.reuseMid,offerRtpParameters:O,answerRtpParameters:F,codecOptions:l,extmapAllowMixed:!0});const ee={type:"answer",sdp:this._remoteSdp.getSdp()};return C.debug("send() | calling pc.setRemoteDescription() [answer:%o]",ee),await this._pc.setRemoteDescription(ee),this._mapMidTransceiver.set(J,N),{localId:J,rtpParameters:O,rtpSender:N.sender}}async stopSending(i){if(this.assertSendDirection(),C.debug("stopSending() [localId:%s]",i),this._closed)return;const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");if(s.sender.replaceTrack(null),this._pc.removeTrack(s.sender),this._remoteSdp.closeMediaSection(s.mid))try{s.stop()}catch{}const l=await this._pc.createOffer();C.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const f={type:"answer",sdp:this._remoteSdp.getSdp()};C.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f),this._mapMidTransceiver.delete(i)}async pauseSending(i){this.assertNotClosed(),this.assertSendDirection(),C.debug("pauseSending() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="inactive",this._remoteSdp.pauseMediaSection(i);const l=await this._pc.createOffer();C.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const f={type:"answer",sdp:this._remoteSdp.getSdp()};C.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f)}async resumeSending(i){this.assertNotClosed(),this.assertSendDirection(),C.debug("resumeSending() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(this._remoteSdp.resumeSendingMediaSection(i),!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="sendonly";const l=await this._pc.createOffer();C.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const f={type:"answer",sdp:this._remoteSdp.getSdp()};C.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f)}async replaceTrack(i,s){this.assertNotClosed(),this.assertSendDirection(),s?C.debug("replaceTrack() [localId:%s, track.id:%s]",i,s.id):C.debug("replaceTrack() [localId:%s, no track]",i);const l=this._mapMidTransceiver.get(i);if(!l)throw new Error("associated RTCRtpTransceiver not found");await l.sender.replaceTrack(s)}async setMaxSpatialLayer(i,s){this.assertNotClosed(),this.assertSendDirection(),C.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",i,s);const l=this._mapMidTransceiver.get(i);if(!l)throw new Error("associated RTCRtpTransceiver not found");const f=l.sender.getParameters();f.encodings.forEach((x,N)=>{x.active=N<=s}),await l.sender.setParameters(f),this._remoteSdp.muxMediaSectionSimulcast(i,f.encodings);const O=await this._pc.createOffer();C.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O);const F={type:"answer",sdp:this._remoteSdp.getSdp()};C.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",F),await this._pc.setRemoteDescription(F)}async setRtpEncodingParameters(i,s){this.assertNotClosed(),this.assertSendDirection(),C.debug("setRtpEncodingParameters() [localId:%s, params:%o]",i,s);const l=this._mapMidTransceiver.get(i);if(!l)throw new Error("associated RTCRtpTransceiver not found");const f=l.sender.getParameters();f.encodings.forEach((x,N)=>{f.encodings[N]={...x,...s}}),await l.sender.setParameters(f),this._remoteSdp.muxMediaSectionSimulcast(i,f.encodings);const O=await this._pc.createOffer();C.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O);const F={type:"answer",sdp:this._remoteSdp.getSdp()};C.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",F),await this._pc.setRemoteDescription(F)}async getSenderStats(i){this.assertNotClosed(),this.assertSendDirection();const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");return s.sender.getStats()}async sendDataChannel({ordered:i,maxPacketLifeTime:s,maxRetransmits:l,label:f,protocol:O}){this.assertNotClosed(),this.assertSendDirection();const F={negotiated:!0,id:this._nextSendSctpStreamId,ordered:i,maxPacketLifeTime:s,maxRetransmits:l,protocol:O};C.debug("sendDataChannel() [options:%o]",F);const x=this._pc.createDataChannel(f,F);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%I.MIS,!this._hasDataChannelMediaSection){const N=await this._pc.createOffer(),z=_.parse(N.sdp),V=z.media.find(ne=>ne.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:z}),C.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N),this._remoteSdp.sendSctpAssociation({offerMediaObject:V});const J={type:"answer",sdp:this._remoteSdp.getSdp()};C.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",J),await this._pc.setRemoteDescription(J),this._hasDataChannelMediaSection=!0}return{dataChannel:x,sctpStreamParameters:{streamId:F.id,ordered:F.ordered,maxPacketLifeTime:F.maxPacketLifeTime,maxRetransmits:F.maxRetransmits}}}async receive(i){this.assertNotClosed(),this.assertRecvDirection();const s=[],l=new Map;for(const x of i){const{trackId:N,kind:z,rtpParameters:V,streamId:J}=x;C.debug("receive() [trackId:%s, kind:%s]",N,z);const ne=V.mid||String(this._mapMidTransceiver.size);l.set(N,ne),this._remoteSdp.receive({mid:ne,kind:z,offerRtpParameters:V,streamId:J||V.rtcp.cname,trackId:N})}const f={type:"offer",sdp:this._remoteSdp.getSdp()};C.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);let O=await this._pc.createAnswer();const F=_.parse(O.sdp);for(const x of i){const{trackId:N,rtpParameters:z}=x,V=l.get(N),J=F.media.find(ne=>String(ne.mid)===V);n.applyCodecParameters({offerRtpParameters:z,answerMediaObject:J})}O={type:"answer",sdp:_.write(F)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:F}),C.debug("receive() | calling pc.setLocalDescription() [answer:%o]",O),await this._pc.setLocalDescription(O);for(const x of i){const{trackId:N}=x,z=l.get(N),V=this._pc.getTransceivers().find(J=>J.mid===z);if(!V)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(z,V),s.push({localId:z,track:V.receiver.track,rtpReceiver:V.receiver})}return s}async stopReceiving(i){if(this.assertRecvDirection(),this._closed)return;for(const f of i){C.debug("stopReceiving() [localId:%s]",f);const O=this._mapMidTransceiver.get(f);if(!O)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(O.mid)}const s={type:"offer",sdp:this._remoteSdp.getSdp()};C.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);const l=await this._pc.createAnswer();C.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l);for(const f of i)this._mapMidTransceiver.delete(f)}async pauseReceiving(i){this.assertNotClosed(),this.assertRecvDirection();for(const f of i){C.debug("pauseReceiving() [localId:%s]",f);const O=this._mapMidTransceiver.get(f);if(!O)throw new Error("associated RTCRtpTransceiver not found");O.direction="inactive",this._remoteSdp.pauseMediaSection(f)}const s={type:"offer",sdp:this._remoteSdp.getSdp()};C.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);const l=await this._pc.createAnswer();C.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}async resumeReceiving(i){this.assertNotClosed(),this.assertRecvDirection();for(const f of i){C.debug("resumeReceiving() [localId:%s]",f);const O=this._mapMidTransceiver.get(f);if(!O)throw new Error("associated RTCRtpTransceiver not found");O.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(f)}const s={type:"offer",sdp:this._remoteSdp.getSdp()};C.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);const l=await this._pc.createAnswer();C.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}async getReceiverStats(i){this.assertNotClosed(),this.assertRecvDirection();const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");return s.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:i,label:s,protocol:l}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:f,ordered:O,maxPacketLifeTime:F,maxRetransmits:x}=i,N={negotiated:!0,id:f,ordered:O,maxPacketLifeTime:F,maxRetransmits:x,protocol:l};C.debug("receiveDataChannel() [options:%o]",N);const z=this._pc.createDataChannel(s,N);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const V={type:"offer",sdp:this._remoteSdp.getSdp()};C.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",V),await this._pc.setRemoteDescription(V);const J=await this._pc.createAnswer();if(!this._transportReady){const ne=_.parse(J.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:ne})}C.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",J),await this._pc.setLocalDescription(J),this._hasDataChannelMediaSection=!0}return{dataChannel:z}}async setupTransport({localDtlsRole:i,localSdpObject:s}){s||(s=_.parse(this._pc.localDescription.sdp));const l=n.extractDtlsParameters({sdpObject:s});l.role=i,this._remoteSdp.updateDtlsRole(i==="client"?"server":"client"),await new Promise((f,O)=>{this.safeEmit("@connect",{dtlsParameters:l},f,O)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new R.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}b.Chrome111=o},564:function(L,b,u){var P=this&&this.__createBinding||(Object.create?function(I,o,p,i){i===void 0&&(i=p);var s=Object.getOwnPropertyDescriptor(o,p);s&&!("get"in s?!o.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return o[p]}}),Object.defineProperty(I,i,s)}:function(I,o,p,i){i===void 0&&(i=p),I[i]=o[p]}),E=this&&this.__setModuleDefault||(Object.create?function(I,o){Object.defineProperty(I,"default",{enumerable:!0,value:o})}:function(I,o){I.default=o}),c=this&&this.__importStar||function(I){if(I&&I.__esModule)return I;var o={};if(I!=null)for(var p in I)p!=="default"&&Object.prototype.hasOwnProperty.call(I,p)&&P(o,I,p);return E(o,I),o};Object.defineProperty(b,"__esModule",{value:!0}),b.Chrome55=void 0;const _=c(u(766)),w=u(8562),d=u(9992),g=c(u(3347)),n=c(u(5280)),m=c(u(2267)),v=c(u(9875)),R=u(9316),k=u(7910),T=new w.Logger("Chrome55"),S={OS:1024,MIS:1024};class C extends R.HandlerInterface{static createFactory(){return()=>new C}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdTrack=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome55"}close(){if(T.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){T.debug("getNativeRtpCapabilities()");const o=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const p=await o.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{o.close()}catch{}const i=_.parse(p.sdp);return m.extractRtpCapabilities({sdpObject:i})}catch(p){try{o.close()}catch{}throw p}}async getNativeSctpCapabilities(){return T.debug("getNativeSctpCapabilities()"),{numStreams:S}}run({direction:o,iceParameters:p,iceCandidates:i,dtlsParameters:s,sctpParameters:l,iceServers:f,iceTransportPolicy:O,additionalSettings:F,proprietaryConstraints:x,extendedRtpCapabilities:N}){T.debug("run()"),this._direction=o,this._remoteSdp=new k.RemoteSdp({iceParameters:p,iceCandidates:i,dtlsParameters:s,sctpParameters:l,planB:!0}),this._sendingRtpParametersByKind={audio:n.getSendingRtpParameters("audio",N),video:n.getSendingRtpParameters("video",N)},this._sendingRemoteRtpParametersByKind={audio:n.getSendingRemoteRtpParameters("audio",N),video:n.getSendingRemoteRtpParameters("video",N)},s.role&&s.role!=="auto"&&(this._forcedLocalDtlsRole=s.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:f||[],iceTransportPolicy:O||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...F},x),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(T.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(o){T.debug("updateIceServers()");const p=this._pc.getConfiguration();p.iceServers=o,this._pc.setConfiguration(p)}async restartIce(o){if(T.debug("restartIce()"),this._remoteSdp.updateIceParameters(o),this._transportReady)if(this._direction==="send"){const p=await this._pc.createOffer({iceRestart:!0});T.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const i={type:"answer",sdp:this._remoteSdp.getSdp()};T.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}else{const p={type:"offer",sdp:this._remoteSdp.getSdp()};T.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const i=await this._pc.createAnswer();T.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i)}}async getTransportStats(){return this._pc.getStats()}async send({track:o,encodings:p,codecOptions:i,codec:s}){this.assertSendDirection(),T.debug("send() [kind:%s, track.id:%s]",o.kind,o.id),s&&T.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(o),this._pc.addStream(this._sendStream);let l,f=await this._pc.createOffer(),O=_.parse(f.sdp);const F=g.clone(this._sendingRtpParametersByKind[o.kind]);F.codecs=n.reduceCodecs(F.codecs);const x=g.clone(this._sendingRemoteRtpParametersByKind[o.kind]);if(x.codecs=n.reduceCodecs(x.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O}),o.kind==="video"&&p&&p.length>1&&(T.debug("send() | enabling simulcast"),O=_.parse(f.sdp),l=O.media.find(V=>V.type==="video"),v.addLegacySimulcast({offerMediaObject:l,track:o,numStreams:p.length}),f={type:"offer",sdp:_.write(O)}),T.debug("send() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f),O=_.parse(this._pc.localDescription.sdp),l=O.media.find(V=>V.type===o.kind),F.rtcp.cname=m.getCname({offerMediaObject:l}),F.encodings=v.getRtpEncodings({offerMediaObject:l,track:o}),p)for(let V=0;V<F.encodings.length;++V)p[V]&&Object.assign(F.encodings[V],p[V]);if(F.encodings.length>1&&F.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const V of F.encodings)V.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:l,offerRtpParameters:F,answerRtpParameters:x,codecOptions:i});const N={type:"answer",sdp:this._remoteSdp.getSdp()};T.debug("send() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N);const z=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(z,o),{localId:z,rtpParameters:F}}async stopSending(o){this.assertSendDirection(),T.debug("stopSending() [localId:%s]",o);const p=this._mapSendLocalIdTrack.get(o);if(!p)throw new Error("track not found");this._mapSendLocalIdTrack.delete(o),this._sendStream.removeTrack(p),this._pc.addStream(this._sendStream);const i=await this._pc.createOffer();T.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",i);try{await this._pc.setLocalDescription(i)}catch(l){if(this._sendStream.getTracks().length===0)return void T.warn("stopSending() | ignoring expected error due no sending tracks: %s",l.toString());throw l}if(this._pc.signalingState==="stable")return;const s={type:"answer",sdp:this._remoteSdp.getSdp()};T.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async pauseSending(o){}async resumeSending(o){}async replaceTrack(o,p){throw new d.UnsupportedError("not implemented")}async setMaxSpatialLayer(o,p){throw new d.UnsupportedError(" not implemented")}async setRtpEncodingParameters(o,p){throw new d.UnsupportedError("not supported")}async getSenderStats(o){throw new d.UnsupportedError("not implemented")}async sendDataChannel({ordered:o,maxPacketLifeTime:p,maxRetransmits:i,label:s,protocol:l}){this.assertSendDirection();const f={negotiated:!0,id:this._nextSendSctpStreamId,ordered:o,maxPacketLifeTime:p,maxRetransmitTime:p,maxRetransmits:i,protocol:l};T.debug("sendDataChannel() [options:%o]",f);const O=this._pc.createDataChannel(s,f);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%S.MIS,!this._hasDataChannelMediaSection){const F=await this._pc.createOffer(),x=_.parse(F.sdp),N=x.media.find(V=>V.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:x}),T.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",F),await this._pc.setLocalDescription(F),this._remoteSdp.sendSctpAssociation({offerMediaObject:N});const z={type:"answer",sdp:this._remoteSdp.getSdp()};T.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",z),await this._pc.setRemoteDescription(z),this._hasDataChannelMediaSection=!0}return{dataChannel:O,sctpStreamParameters:{streamId:f.id,ordered:f.ordered,maxPacketLifeTime:f.maxPacketLifeTime,maxRetransmits:f.maxRetransmits}}}async receive(o){this.assertRecvDirection();const p=[];for(const f of o){const{trackId:O,kind:F,rtpParameters:x,streamId:N}=f;T.debug("receive() [trackId:%s, kind:%s]",O,F);const z=F;this._remoteSdp.receive({mid:z,kind:F,offerRtpParameters:x,streamId:N||x.rtcp.cname,trackId:O})}const i={type:"offer",sdp:this._remoteSdp.getSdp()};T.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);let s=await this._pc.createAnswer();const l=_.parse(s.sdp);for(const f of o){const{kind:O,rtpParameters:F}=f,x=O,N=l.media.find(z=>String(z.mid)===x);m.applyCodecParameters({offerRtpParameters:F,answerMediaObject:N})}s={type:"answer",sdp:_.write(l)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:l}),T.debug("receive() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const f of o){const{kind:O,trackId:F,rtpParameters:x}=f,N=O,z=F,V=f.streamId||x.rtcp.cname,J=this._pc.getRemoteStreams().find(ne=>ne.id===V).getTrackById(z);if(!J)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(z,{mid:N,rtpParameters:x}),p.push({localId:z,track:J})}return p}async stopReceiving(o){this.assertRecvDirection();for(const s of o){T.debug("stopReceiving() [localId:%s]",s);const{mid:l,rtpParameters:f}=this._mapRecvLocalIdInfo.get(s)||{};this._mapRecvLocalIdInfo.delete(s),this._remoteSdp.planBStopReceiving({mid:l,offerRtpParameters:f})}const p={type:"offer",sdp:this._remoteSdp.getSdp()};T.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const i=await this._pc.createAnswer();T.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i)}async pauseReceiving(o){}async resumeReceiving(o){}async getReceiverStats(o){throw new d.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:o,label:p,protocol:i}){this.assertRecvDirection();const{streamId:s,ordered:l,maxPacketLifeTime:f,maxRetransmits:O}=o,F={negotiated:!0,id:s,ordered:l,maxPacketLifeTime:f,maxRetransmitTime:f,maxRetransmits:O,protocol:i};T.debug("receiveDataChannel() [options:%o]",F);const x=this._pc.createDataChannel(p,F);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const N={type:"offer",sdp:this._remoteSdp.getSdp()};T.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",N),await this._pc.setRemoteDescription(N);const z=await this._pc.createAnswer();if(!this._transportReady){const V=_.parse(z.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:V})}T.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",z),await this._pc.setLocalDescription(z),this._hasDataChannelMediaSection=!0}return{dataChannel:x}}async setupTransport({localDtlsRole:o,localSdpObject:p}){p||(p=_.parse(this._pc.localDescription.sdp));const i=m.extractDtlsParameters({sdpObject:p});i.role=o,this._remoteSdp.updateDtlsRole(o==="client"?"server":"client"),await new Promise((s,l)=>{this.safeEmit("@connect",{dtlsParameters:i},s,l)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}b.Chrome55=C},5697:function(L,b,u){var P=this&&this.__createBinding||(Object.create?function(C,I,o,p){p===void 0&&(p=o);var i=Object.getOwnPropertyDescriptor(I,o);i&&!("get"in i?!I.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return I[o]}}),Object.defineProperty(C,p,i)}:function(C,I,o,p){p===void 0&&(p=o),C[p]=I[o]}),E=this&&this.__setModuleDefault||(Object.create?function(C,I){Object.defineProperty(C,"default",{enumerable:!0,value:I})}:function(C,I){C.default=I}),c=this&&this.__importStar||function(C){if(C&&C.__esModule)return C;var I={};if(C!=null)for(var o in C)o!=="default"&&Object.prototype.hasOwnProperty.call(C,o)&&P(I,C,o);return E(I,C),I};Object.defineProperty(b,"__esModule",{value:!0}),b.Chrome67=void 0;const _=c(u(766)),w=u(8562),d=c(u(3347)),g=c(u(5280)),n=c(u(2267)),m=c(u(9875)),v=u(9316),R=u(7910),k=new w.Logger("Chrome67"),T={OS:1024,MIS:1024};class S extends v.HandlerInterface{static createFactory(){return()=>new S}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdRtpSender=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome67"}close(){if(k.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){k.debug("getNativeRtpCapabilities()");const I=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const o=await I.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{I.close()}catch{}const p=_.parse(o.sdp);return n.extractRtpCapabilities({sdpObject:p})}catch(o){try{I.close()}catch{}throw o}}async getNativeSctpCapabilities(){return k.debug("getNativeSctpCapabilities()"),{numStreams:T}}run({direction:I,iceParameters:o,iceCandidates:p,dtlsParameters:i,sctpParameters:s,iceServers:l,iceTransportPolicy:f,additionalSettings:O,proprietaryConstraints:F,extendedRtpCapabilities:x}){k.debug("run()"),this._direction=I,this._remoteSdp=new R.RemoteSdp({iceParameters:o,iceCandidates:p,dtlsParameters:i,sctpParameters:s,planB:!0}),this._sendingRtpParametersByKind={audio:g.getSendingRtpParameters("audio",x),video:g.getSendingRtpParameters("video",x)},this._sendingRemoteRtpParametersByKind={audio:g.getSendingRemoteRtpParameters("audio",x),video:g.getSendingRemoteRtpParameters("video",x)},i.role&&i.role!=="auto"&&(this._forcedLocalDtlsRole=i.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:l||[],iceTransportPolicy:f||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...O},F),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(k.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(I){k.debug("updateIceServers()");const o=this._pc.getConfiguration();o.iceServers=I,this._pc.setConfiguration(o)}async restartIce(I){if(k.debug("restartIce()"),this._remoteSdp.updateIceParameters(I),this._transportReady)if(this._direction==="send"){const o=await this._pc.createOffer({iceRestart:!0});k.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",o),await this._pc.setLocalDescription(o);const p={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}else{const o={type:"offer",sdp:this._remoteSdp.getSdp()};k.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",o),await this._pc.setRemoteDescription(o);const p=await this._pc.createAnswer();k.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p)}}async getTransportStats(){return this._pc.getStats()}async send({track:I,encodings:o,codecOptions:p,codec:i}){this.assertSendDirection(),k.debug("send() [kind:%s, track.id:%s]",I.kind,I.id),i&&k.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(I),this._pc.addTrack(I,this._sendStream);let s,l=await this._pc.createOffer(),f=_.parse(l.sdp);const O=d.clone(this._sendingRtpParametersByKind[I.kind]);O.codecs=g.reduceCodecs(O.codecs);const F=d.clone(this._sendingRemoteRtpParametersByKind[I.kind]);if(F.codecs=g.reduceCodecs(F.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:f}),I.kind==="video"&&o&&o.length>1&&(k.debug("send() | enabling simulcast"),f=_.parse(l.sdp),s=f.media.find(V=>V.type==="video"),m.addLegacySimulcast({offerMediaObject:s,track:I,numStreams:o.length}),l={type:"offer",sdp:_.write(f)}),k.debug("send() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),f=_.parse(this._pc.localDescription.sdp),s=f.media.find(V=>V.type===I.kind),O.rtcp.cname=n.getCname({offerMediaObject:s}),O.encodings=m.getRtpEncodings({offerMediaObject:s,track:I}),o)for(let V=0;V<O.encodings.length;++V)o[V]&&Object.assign(O.encodings[V],o[V]);if(O.encodings.length>1&&O.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const V of O.encodings)V.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:s,offerRtpParameters:O,answerRtpParameters:F,codecOptions:p});const x={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("send() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x);const N=String(this._nextSendLocalId);this._nextSendLocalId++;const z=this._pc.getSenders().find(V=>V.track===I);return this._mapSendLocalIdRtpSender.set(N,z),{localId:N,rtpParameters:O,rtpSender:z}}async stopSending(I){this.assertSendDirection(),k.debug("stopSending() [localId:%s]",I);const o=this._mapSendLocalIdRtpSender.get(I);if(!o)throw new Error("associated RTCRtpSender not found");this._pc.removeTrack(o),o.track&&this._sendStream.removeTrack(o.track),this._mapSendLocalIdRtpSender.delete(I);const p=await this._pc.createOffer();k.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",p);try{await this._pc.setLocalDescription(p)}catch(s){if(this._sendStream.getTracks().length===0)return void k.warn("stopSending() | ignoring expected error due no sending tracks: %s",s.toString());throw s}if(this._pc.signalingState==="stable")return;const i={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async pauseSending(I){}async resumeSending(I){}async replaceTrack(I,o){this.assertSendDirection(),o?k.debug("replaceTrack() [localId:%s, track.id:%s]",I,o.id):k.debug("replaceTrack() [localId:%s, no track]",I);const p=this._mapSendLocalIdRtpSender.get(I);if(!p)throw new Error("associated RTCRtpSender not found");const i=p.track;await p.replaceTrack(o),i&&this._sendStream.removeTrack(i),o&&this._sendStream.addTrack(o)}async setMaxSpatialLayer(I,o){this.assertSendDirection(),k.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",I,o);const p=this._mapSendLocalIdRtpSender.get(I);if(!p)throw new Error("associated RTCRtpSender not found");const i=p.getParameters();i.encodings.forEach((s,l)=>{s.active=l<=o}),await p.setParameters(i)}async setRtpEncodingParameters(I,o){this.assertSendDirection(),k.debug("setRtpEncodingParameters() [localId:%s, params:%o]",I,o);const p=this._mapSendLocalIdRtpSender.get(I);if(!p)throw new Error("associated RTCRtpSender not found");const i=p.getParameters();i.encodings.forEach((s,l)=>{i.encodings[l]={...s,...o}}),await p.setParameters(i)}async getSenderStats(I){this.assertSendDirection();const o=this._mapSendLocalIdRtpSender.get(I);if(!o)throw new Error("associated RTCRtpSender not found");return o.getStats()}async sendDataChannel({ordered:I,maxPacketLifeTime:o,maxRetransmits:p,label:i,protocol:s}){this.assertSendDirection();const l={negotiated:!0,id:this._nextSendSctpStreamId,ordered:I,maxPacketLifeTime:o,maxRetransmitTime:o,maxRetransmits:p,protocol:s};k.debug("sendDataChannel() [options:%o]",l);const f=this._pc.createDataChannel(i,l);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%T.MIS,!this._hasDataChannelMediaSection){const O=await this._pc.createOffer(),F=_.parse(O.sdp),x=F.media.find(z=>z.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:F}),k.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O),this._remoteSdp.sendSctpAssociation({offerMediaObject:x});const N={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N),this._hasDataChannelMediaSection=!0}return{dataChannel:f,sctpStreamParameters:{streamId:l.id,ordered:l.ordered,maxPacketLifeTime:l.maxPacketLifeTime,maxRetransmits:l.maxRetransmits}}}async receive(I){this.assertRecvDirection();const o=[];for(const l of I){const{trackId:f,kind:O,rtpParameters:F,streamId:x}=l;k.debug("receive() [trackId:%s, kind:%s]",f,O);const N=O;this._remoteSdp.receive({mid:N,kind:O,offerRtpParameters:F,streamId:x||F.rtcp.cname,trackId:f})}const p={type:"offer",sdp:this._remoteSdp.getSdp()};k.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);let i=await this._pc.createAnswer();const s=_.parse(i.sdp);for(const l of I){const{kind:f,rtpParameters:O}=l,F=f,x=s.media.find(N=>String(N.mid)===F);n.applyCodecParameters({offerRtpParameters:O,answerMediaObject:x})}i={type:"answer",sdp:_.write(s)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:s}),k.debug("receive() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i);for(const l of I){const{kind:f,trackId:O,rtpParameters:F}=l,x=O,N=f,z=this._pc.getReceivers().find(V=>V.track&&V.track.id===x);if(!z)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(x,{mid:N,rtpParameters:F,rtpReceiver:z}),o.push({localId:x,track:z.track,rtpReceiver:z})}return o}async stopReceiving(I){this.assertRecvDirection();for(const i of I){k.debug("stopReceiving() [localId:%s]",i);const{mid:s,rtpParameters:l}=this._mapRecvLocalIdInfo.get(i)||{};this._mapRecvLocalIdInfo.delete(i),this._remoteSdp.planBStopReceiving({mid:s,offerRtpParameters:l})}const o={type:"offer",sdp:this._remoteSdp.getSdp()};k.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",o),await this._pc.setRemoteDescription(o);const p=await this._pc.createAnswer();k.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p)}async pauseReceiving(I){}async resumeReceiving(I){}async getReceiverStats(I){this.assertRecvDirection();const{rtpReceiver:o}=this._mapRecvLocalIdInfo.get(I)||{};if(!o)throw new Error("associated RTCRtpReceiver not found");return o.getStats()}async receiveDataChannel({sctpStreamParameters:I,label:o,protocol:p}){this.assertRecvDirection();const{streamId:i,ordered:s,maxPacketLifeTime:l,maxRetransmits:f}=I,O={negotiated:!0,id:i,ordered:s,maxPacketLifeTime:l,maxRetransmitTime:l,maxRetransmits:f,protocol:p};k.debug("receiveDataChannel() [options:%o]",O);const F=this._pc.createDataChannel(o,O);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const x={type:"offer",sdp:this._remoteSdp.getSdp()};k.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);const N=await this._pc.createAnswer();if(!this._transportReady){const z=_.parse(N.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:z})}k.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setLocalDescription(N),this._hasDataChannelMediaSection=!0}return{dataChannel:F}}async setupTransport({localDtlsRole:I,localSdpObject:o}){o||(o=_.parse(this._pc.localDescription.sdp));const p=n.extractDtlsParameters({sdpObject:o});p.role=I,this._remoteSdp.updateDtlsRole(I==="client"?"server":"client"),await new Promise((i,s)=>{this.safeEmit("@connect",{dtlsParameters:p},i,s)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}b.Chrome67=S},5372:function(L,b,u){var P=this&&this.__createBinding||(Object.create?function(I,o,p,i){i===void 0&&(i=p);var s=Object.getOwnPropertyDescriptor(o,p);s&&!("get"in s?!o.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return o[p]}}),Object.defineProperty(I,i,s)}:function(I,o,p,i){i===void 0&&(i=p),I[i]=o[p]}),E=this&&this.__setModuleDefault||(Object.create?function(I,o){Object.defineProperty(I,"default",{enumerable:!0,value:o})}:function(I,o){I.default=o}),c=this&&this.__importStar||function(I){if(I&&I.__esModule)return I;var o={};if(I!=null)for(var p in I)p!=="default"&&Object.prototype.hasOwnProperty.call(I,p)&&P(o,I,p);return E(o,I),o};Object.defineProperty(b,"__esModule",{value:!0}),b.Chrome70=void 0;const _=c(u(766)),w=u(8562),d=c(u(3347)),g=c(u(5280)),n=c(u(2267)),m=c(u(9072)),v=u(9316),R=u(7910),k=u(2770),T=new w.Logger("Chrome70"),S={OS:1024,MIS:1024};class C extends v.HandlerInterface{static createFactory(){return()=>new C}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome70"}close(){if(T.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){T.debug("getNativeRtpCapabilities()");const o=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{o.addTransceiver("audio"),o.addTransceiver("video");const p=await o.createOffer();try{o.close()}catch{}const i=_.parse(p.sdp);return n.extractRtpCapabilities({sdpObject:i})}catch(p){try{o.close()}catch{}throw p}}async getNativeSctpCapabilities(){return T.debug("getNativeSctpCapabilities()"),{numStreams:S}}run({direction:o,iceParameters:p,iceCandidates:i,dtlsParameters:s,sctpParameters:l,iceServers:f,iceTransportPolicy:O,additionalSettings:F,proprietaryConstraints:x,extendedRtpCapabilities:N}){T.debug("run()"),this._direction=o,this._remoteSdp=new R.RemoteSdp({iceParameters:p,iceCandidates:i,dtlsParameters:s,sctpParameters:l}),this._sendingRtpParametersByKind={audio:g.getSendingRtpParameters("audio",N),video:g.getSendingRtpParameters("video",N)},this._sendingRemoteRtpParametersByKind={audio:g.getSendingRemoteRtpParameters("audio",N),video:g.getSendingRemoteRtpParameters("video",N)},s.role&&s.role!=="auto"&&(this._forcedLocalDtlsRole=s.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:f||[],iceTransportPolicy:O||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...F},x),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(T.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(o){T.debug("updateIceServers()");const p=this._pc.getConfiguration();p.iceServers=o,this._pc.setConfiguration(p)}async restartIce(o){if(T.debug("restartIce()"),this._remoteSdp.updateIceParameters(o),this._transportReady)if(this._direction==="send"){const p=await this._pc.createOffer({iceRestart:!0});T.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const i={type:"answer",sdp:this._remoteSdp.getSdp()};T.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}else{const p={type:"offer",sdp:this._remoteSdp.getSdp()};T.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const i=await this._pc.createAnswer();T.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i)}}async getTransportStats(){return this._pc.getStats()}async send({track:o,encodings:p,codecOptions:i,codec:s}){this.assertSendDirection(),T.debug("send() [kind:%s, track.id:%s]",o.kind,o.id);const l=d.clone(this._sendingRtpParametersByKind[o.kind]);l.codecs=g.reduceCodecs(l.codecs,s);const f=d.clone(this._sendingRemoteRtpParametersByKind[o.kind]);f.codecs=g.reduceCodecs(f.codecs,s);const O=this._remoteSdp.getNextMediaSectionIdx(),F=this._pc.addTransceiver(o,{direction:"sendonly",streams:[this._sendStream]});let x,N=await this._pc.createOffer(),z=_.parse(N.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:z}),p&&p.length>1&&(T.debug("send() | enabling legacy simulcast"),z=_.parse(N.sdp),x=z.media[O.idx],m.addLegacySimulcast({offerMediaObject:x,numStreams:p.length}),N={type:"offer",sdp:_.write(z)});let V=!1;const J=(0,k.parse)((p||[{}])[0].scalabilityMode);if(p&&p.length===1&&J.spatialLayers>1&&l.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(T.debug("send() | enabling legacy simulcast for VP9 SVC"),V=!0,z=_.parse(N.sdp),x=z.media[O.idx],m.addLegacySimulcast({offerMediaObject:x,numStreams:J.spatialLayers}),N={type:"offer",sdp:_.write(z)}),T.debug("send() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N),p){T.debug("send() | applying given encodings");const Q=F.sender.getParameters();for(let oe=0;oe<(Q.encodings||[]).length;++oe){const he=Q.encodings[oe],Te=p[oe];if(!Te)break;Q.encodings[oe]=Object.assign(he,Te)}await F.sender.setParameters(Q)}const ne=F.mid;if(l.mid=ne,z=_.parse(this._pc.localDescription.sdp),x=z.media[O.idx],l.rtcp.cname=n.getCname({offerMediaObject:x}),l.encodings=m.getRtpEncodings({offerMediaObject:x}),p)for(let Q=0;Q<l.encodings.length;++Q)p[Q]&&Object.assign(l.encodings[Q],p[Q]);if(V&&(l.encodings=[l.encodings[0]]),l.encodings.length>1&&(l.codecs[0].mimeType.toLowerCase()==="video/vp8"||l.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const Q of l.encodings)Q.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:x,reuseMid:O.reuseMid,offerRtpParameters:l,answerRtpParameters:f,codecOptions:i});const ee={type:"answer",sdp:this._remoteSdp.getSdp()};return T.debug("send() | calling pc.setRemoteDescription() [answer:%o]",ee),await this._pc.setRemoteDescription(ee),this._mapMidTransceiver.set(ne,F),{localId:ne,rtpParameters:l,rtpSender:F.sender}}async stopSending(o){this.assertSendDirection(),T.debug("stopSending() [localId:%s]",o);const p=this._mapMidTransceiver.get(o);if(!p)throw new Error("associated RTCRtpTransceiver not found");if(p.sender.replaceTrack(null),this._pc.removeTrack(p.sender),this._remoteSdp.closeMediaSection(p.mid))try{p.stop()}catch{}const i=await this._pc.createOffer();T.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const s={type:"answer",sdp:this._remoteSdp.getSdp()};T.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this._mapMidTransceiver.delete(o)}async pauseSending(o){}async resumeSending(o){}async replaceTrack(o,p){this.assertSendDirection(),p?T.debug("replaceTrack() [localId:%s, track.id:%s]",o,p.id):T.debug("replaceTrack() [localId:%s, no track]",o);const i=this._mapMidTransceiver.get(o);if(!i)throw new Error("associated RTCRtpTransceiver not found");await i.sender.replaceTrack(p)}async setMaxSpatialLayer(o,p){this.assertSendDirection(),T.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",o,p);const i=this._mapMidTransceiver.get(o);if(!i)throw new Error("associated RTCRtpTransceiver not found");const s=i.sender.getParameters();s.encodings.forEach((O,F)=>{O.active=F<=p}),await i.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(o,s.encodings);const l=await this._pc.createOffer();T.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const f={type:"answer",sdp:this._remoteSdp.getSdp()};T.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f)}async setRtpEncodingParameters(o,p){this.assertSendDirection(),T.debug("setRtpEncodingParameters() [localId:%s, params:%o]",o,p);const i=this._mapMidTransceiver.get(o);if(!i)throw new Error("associated RTCRtpTransceiver not found");const s=i.sender.getParameters();s.encodings.forEach((O,F)=>{s.encodings[F]={...O,...p}}),await i.sender.setParameters(s),this._remoteSdp.muxMediaSectionSimulcast(o,s.encodings);const l=await this._pc.createOffer();T.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const f={type:"answer",sdp:this._remoteSdp.getSdp()};T.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f)}async getSenderStats(o){this.assertSendDirection();const p=this._mapMidTransceiver.get(o);if(!p)throw new Error("associated RTCRtpTransceiver not found");return p.sender.getStats()}async sendDataChannel({ordered:o,maxPacketLifeTime:p,maxRetransmits:i,label:s,protocol:l}){this.assertSendDirection();const f={negotiated:!0,id:this._nextSendSctpStreamId,ordered:o,maxPacketLifeTime:p,maxRetransmitTime:p,maxRetransmits:i,protocol:l};T.debug("sendDataChannel() [options:%o]",f);const O=this._pc.createDataChannel(s,f);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%S.MIS,!this._hasDataChannelMediaSection){const F=await this._pc.createOffer(),x=_.parse(F.sdp),N=x.media.find(V=>V.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:x}),T.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",F),await this._pc.setLocalDescription(F),this._remoteSdp.sendSctpAssociation({offerMediaObject:N});const z={type:"answer",sdp:this._remoteSdp.getSdp()};T.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",z),await this._pc.setRemoteDescription(z),this._hasDataChannelMediaSection=!0}return{dataChannel:O,sctpStreamParameters:{streamId:f.id,ordered:f.ordered,maxPacketLifeTime:f.maxPacketLifeTime,maxRetransmits:f.maxRetransmits}}}async receive(o){this.assertRecvDirection();const p=[],i=new Map;for(const O of o){const{trackId:F,kind:x,rtpParameters:N,streamId:z}=O;T.debug("receive() [trackId:%s, kind:%s]",F,x);const V=N.mid||String(this._mapMidTransceiver.size);i.set(F,V),this._remoteSdp.receive({mid:V,kind:x,offerRtpParameters:N,streamId:z||N.rtcp.cname,trackId:F})}const s={type:"offer",sdp:this._remoteSdp.getSdp()};T.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);let l=await this._pc.createAnswer();const f=_.parse(l.sdp);for(const O of o){const{trackId:F,rtpParameters:x}=O,N=i.get(F),z=f.media.find(V=>String(V.mid)===N);n.applyCodecParameters({offerRtpParameters:x,answerMediaObject:z})}l={type:"answer",sdp:_.write(f)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:f}),T.debug("receive() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l);for(const O of o){const{trackId:F}=O,x=i.get(F),N=this._pc.getTransceivers().find(z=>z.mid===x);if(!N)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(x,N),p.push({localId:x,track:N.receiver.track,rtpReceiver:N.receiver})}return p}async stopReceiving(o){this.assertRecvDirection();for(const s of o){T.debug("stopReceiving() [localId:%s]",s);const l=this._mapMidTransceiver.get(s);if(!l)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(l.mid)}const p={type:"offer",sdp:this._remoteSdp.getSdp()};T.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const i=await this._pc.createAnswer();T.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i);for(const s of o)this._mapMidTransceiver.delete(s)}async pauseReceiving(o){}async resumeReceiving(o){}async getReceiverStats(o){this.assertRecvDirection();const p=this._mapMidTransceiver.get(o);if(!p)throw new Error("associated RTCRtpTransceiver not found");return p.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:o,label:p,protocol:i}){this.assertRecvDirection();const{streamId:s,ordered:l,maxPacketLifeTime:f,maxRetransmits:O}=o,F={negotiated:!0,id:s,ordered:l,maxPacketLifeTime:f,maxRetransmitTime:f,maxRetransmits:O,protocol:i};T.debug("receiveDataChannel() [options:%o]",F);const x=this._pc.createDataChannel(p,F);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const N={type:"offer",sdp:this._remoteSdp.getSdp()};T.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",N),await this._pc.setRemoteDescription(N);const z=await this._pc.createAnswer();if(!this._transportReady){const V=_.parse(z.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:V})}T.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",z),await this._pc.setLocalDescription(z),this._hasDataChannelMediaSection=!0}return{dataChannel:x}}async setupTransport({localDtlsRole:o,localSdpObject:p}){p||(p=_.parse(this._pc.localDescription.sdp));const i=n.extractDtlsParameters({sdpObject:p});i.role=o,this._remoteSdp.updateDtlsRole(o==="client"?"server":"client"),await new Promise((s,l)=>{this.safeEmit("@connect",{dtlsParameters:i},s,l)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}b.Chrome70=C},6656:function(L,b,u){var P=this&&this.__createBinding||(Object.create?function(p,i,s,l){l===void 0&&(l=s);var f=Object.getOwnPropertyDescriptor(i,s);f&&!("get"in f?!i.__esModule:f.writable||f.configurable)||(f={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(p,l,f)}:function(p,i,s,l){l===void 0&&(l=s),p[l]=i[s]}),E=this&&this.__setModuleDefault||(Object.create?function(p,i){Object.defineProperty(p,"default",{enumerable:!0,value:i})}:function(p,i){p.default=i}),c=this&&this.__importStar||function(p){if(p&&p.__esModule)return p;var i={};if(p!=null)for(var s in p)s!=="default"&&Object.prototype.hasOwnProperty.call(p,s)&&P(i,p,s);return E(i,p),i};Object.defineProperty(b,"__esModule",{value:!0}),b.Chrome74=void 0;const _=c(u(766)),w=u(8562),d=c(u(3347)),g=c(u(5280)),n=c(u(2267)),m=c(u(9072)),v=c(u(8954)),R=u(9992),k=u(9316),T=u(7910),S=u(2770),C=new w.Logger("Chrome74"),I={OS:1024,MIS:1024};class o extends k.HandlerInterface{static createFactory(){return()=>new o}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome74"}close(){if(C.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){C.debug("getNativeRtpCapabilities()");const i=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{i.addTransceiver("audio"),i.addTransceiver("video");const s=await i.createOffer();try{i.close()}catch{}const l=_.parse(s.sdp),f=n.extractRtpCapabilities({sdpObject:l});return v.addNackSuppportForOpus(f),f}catch(s){try{i.close()}catch{}throw s}}async getNativeSctpCapabilities(){return C.debug("getNativeSctpCapabilities()"),{numStreams:I}}run({direction:i,iceParameters:s,iceCandidates:l,dtlsParameters:f,sctpParameters:O,iceServers:F,iceTransportPolicy:x,additionalSettings:N,proprietaryConstraints:z,extendedRtpCapabilities:V}){C.debug("run()"),this._direction=i,this._remoteSdp=new T.RemoteSdp({iceParameters:s,iceCandidates:l,dtlsParameters:f,sctpParameters:O}),this._sendingRtpParametersByKind={audio:g.getSendingRtpParameters("audio",V),video:g.getSendingRtpParameters("video",V)},this._sendingRemoteRtpParametersByKind={audio:g.getSendingRemoteRtpParameters("audio",V),video:g.getSendingRemoteRtpParameters("video",V)},f.role&&f.role!=="auto"&&(this._forcedLocalDtlsRole=f.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:F||[],iceTransportPolicy:x||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...N},z),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(C.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(i){this.assertNotClosed(),C.debug("updateIceServers()");const s=this._pc.getConfiguration();s.iceServers=i,this._pc.setConfiguration(s)}async restartIce(i){if(this.assertNotClosed(),C.debug("restartIce()"),this._remoteSdp.updateIceParameters(i),this._transportReady)if(this._direction==="send"){const s=await this._pc.createOffer({iceRestart:!0});C.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const l={type:"answer",sdp:this._remoteSdp.getSdp()};C.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l)}else{const s={type:"offer",sdp:this._remoteSdp.getSdp()};C.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);const l=await this._pc.createAnswer();C.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:i,encodings:s,codecOptions:l,codec:f}){this.assertNotClosed(),this.assertSendDirection(),C.debug("send() [kind:%s, track.id:%s]",i.kind,i.id),s&&s.length>1&&s.forEach((he,Te)=>{he.rid=`r${Te}`});const O=d.clone(this._sendingRtpParametersByKind[i.kind]);O.codecs=g.reduceCodecs(O.codecs,f);const F=d.clone(this._sendingRemoteRtpParametersByKind[i.kind]);F.codecs=g.reduceCodecs(F.codecs,f);const x=this._remoteSdp.getNextMediaSectionIdx(),N=this._pc.addTransceiver(i,{direction:"sendonly",streams:[this._sendStream],sendEncodings:s});let z,V=await this._pc.createOffer(),J=_.parse(V.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:J});let ne=!1;const ee=(0,S.parse)((s||[{}])[0].scalabilityMode);s&&s.length===1&&ee.spatialLayers>1&&O.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(C.debug("send() | enabling legacy simulcast for VP9 SVC"),ne=!0,J=_.parse(V.sdp),z=J.media[x.idx],m.addLegacySimulcast({offerMediaObject:z,numStreams:ee.spatialLayers}),V={type:"offer",sdp:_.write(J)}),C.debug("send() | calling pc.setLocalDescription() [offer:%o]",V),await this._pc.setLocalDescription(V);const Q=N.mid;if(O.mid=Q,J=_.parse(this._pc.localDescription.sdp),z=J.media[x.idx],O.rtcp.cname=n.getCname({offerMediaObject:z}),s)if(s.length===1){let he=m.getRtpEncodings({offerMediaObject:z});Object.assign(he[0],s[0]),ne&&(he=[he[0]]),O.encodings=he}else O.encodings=s;else O.encodings=m.getRtpEncodings({offerMediaObject:z});if(O.encodings.length>1&&(O.codecs[0].mimeType.toLowerCase()==="video/vp8"||O.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const he of O.encodings)he.scalabilityMode?he.scalabilityMode=`L1T${ee.temporalLayers}`:he.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:z,reuseMid:x.reuseMid,offerRtpParameters:O,answerRtpParameters:F,codecOptions:l,extmapAllowMixed:!0});const oe={type:"answer",sdp:this._remoteSdp.getSdp()};return C.debug("send() | calling pc.setRemoteDescription() [answer:%o]",oe),await this._pc.setRemoteDescription(oe),this._mapMidTransceiver.set(Q,N),{localId:Q,rtpParameters:O,rtpSender:N.sender}}async stopSending(i){if(this.assertSendDirection(),C.debug("stopSending() [localId:%s]",i),this._closed)return;const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");if(s.sender.replaceTrack(null),this._pc.removeTrack(s.sender),this._remoteSdp.closeMediaSection(s.mid))try{s.stop()}catch{}const l=await this._pc.createOffer();C.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const f={type:"answer",sdp:this._remoteSdp.getSdp()};C.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f),this._mapMidTransceiver.delete(i)}async pauseSending(i){this.assertNotClosed(),this.assertSendDirection(),C.debug("pauseSending() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="inactive",this._remoteSdp.pauseMediaSection(i);const l=await this._pc.createOffer();C.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const f={type:"answer",sdp:this._remoteSdp.getSdp()};C.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f)}async resumeSending(i){this.assertNotClosed(),this.assertSendDirection(),C.debug("resumeSending() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(this._remoteSdp.resumeSendingMediaSection(i),!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="sendonly";const l=await this._pc.createOffer();C.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const f={type:"answer",sdp:this._remoteSdp.getSdp()};C.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f)}async replaceTrack(i,s){this.assertNotClosed(),this.assertSendDirection(),s?C.debug("replaceTrack() [localId:%s, track.id:%s]",i,s.id):C.debug("replaceTrack() [localId:%s, no track]",i);const l=this._mapMidTransceiver.get(i);if(!l)throw new Error("associated RTCRtpTransceiver not found");await l.sender.replaceTrack(s)}async setMaxSpatialLayer(i,s){this.assertNotClosed(),this.assertSendDirection(),C.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",i,s);const l=this._mapMidTransceiver.get(i);if(!l)throw new Error("associated RTCRtpTransceiver not found");const f=l.sender.getParameters();f.encodings.forEach((x,N)=>{x.active=N<=s}),await l.sender.setParameters(f),this._remoteSdp.muxMediaSectionSimulcast(i,f.encodings);const O=await this._pc.createOffer();C.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O);const F={type:"answer",sdp:this._remoteSdp.getSdp()};C.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",F),await this._pc.setRemoteDescription(F)}async setRtpEncodingParameters(i,s){this.assertNotClosed(),this.assertSendDirection(),C.debug("setRtpEncodingParameters() [localId:%s, params:%o]",i,s);const l=this._mapMidTransceiver.get(i);if(!l)throw new Error("associated RTCRtpTransceiver not found");const f=l.sender.getParameters();f.encodings.forEach((x,N)=>{f.encodings[N]={...x,...s}}),await l.sender.setParameters(f),this._remoteSdp.muxMediaSectionSimulcast(i,f.encodings);const O=await this._pc.createOffer();C.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O);const F={type:"answer",sdp:this._remoteSdp.getSdp()};C.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",F),await this._pc.setRemoteDescription(F)}async getSenderStats(i){this.assertNotClosed(),this.assertSendDirection();const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");return s.sender.getStats()}async sendDataChannel({ordered:i,maxPacketLifeTime:s,maxRetransmits:l,label:f,protocol:O}){this.assertNotClosed(),this.assertSendDirection();const F={negotiated:!0,id:this._nextSendSctpStreamId,ordered:i,maxPacketLifeTime:s,maxRetransmits:l,protocol:O};C.debug("sendDataChannel() [options:%o]",F);const x=this._pc.createDataChannel(f,F);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%I.MIS,!this._hasDataChannelMediaSection){const N=await this._pc.createOffer(),z=_.parse(N.sdp),V=z.media.find(ne=>ne.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:z}),C.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N),this._remoteSdp.sendSctpAssociation({offerMediaObject:V});const J={type:"answer",sdp:this._remoteSdp.getSdp()};C.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",J),await this._pc.setRemoteDescription(J),this._hasDataChannelMediaSection=!0}return{dataChannel:x,sctpStreamParameters:{streamId:F.id,ordered:F.ordered,maxPacketLifeTime:F.maxPacketLifeTime,maxRetransmits:F.maxRetransmits}}}async receive(i){this.assertNotClosed(),this.assertRecvDirection();const s=[],l=new Map;for(const x of i){const{trackId:N,kind:z,rtpParameters:V,streamId:J}=x;C.debug("receive() [trackId:%s, kind:%s]",N,z);const ne=V.mid||String(this._mapMidTransceiver.size);l.set(N,ne),this._remoteSdp.receive({mid:ne,kind:z,offerRtpParameters:V,streamId:J||V.rtcp.cname,trackId:N})}const f={type:"offer",sdp:this._remoteSdp.getSdp()};C.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);let O=await this._pc.createAnswer();const F=_.parse(O.sdp);for(const x of i){const{trackId:N,rtpParameters:z}=x,V=l.get(N),J=F.media.find(ne=>String(ne.mid)===V);n.applyCodecParameters({offerRtpParameters:z,answerMediaObject:J})}O={type:"answer",sdp:_.write(F)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:F}),C.debug("receive() | calling pc.setLocalDescription() [answer:%o]",O),await this._pc.setLocalDescription(O);for(const x of i){const{trackId:N}=x,z=l.get(N),V=this._pc.getTransceivers().find(J=>J.mid===z);if(!V)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(z,V),s.push({localId:z,track:V.receiver.track,rtpReceiver:V.receiver})}return s}async stopReceiving(i){if(this.assertRecvDirection(),this._closed)return;for(const f of i){C.debug("stopReceiving() [localId:%s]",f);const O=this._mapMidTransceiver.get(f);if(!O)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(O.mid)}const s={type:"offer",sdp:this._remoteSdp.getSdp()};C.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);const l=await this._pc.createAnswer();C.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l);for(const f of i)this._mapMidTransceiver.delete(f)}async pauseReceiving(i){this.assertNotClosed(),this.assertRecvDirection();for(const f of i){C.debug("pauseReceiving() [localId:%s]",f);const O=this._mapMidTransceiver.get(f);if(!O)throw new Error("associated RTCRtpTransceiver not found");O.direction="inactive",this._remoteSdp.pauseMediaSection(f)}const s={type:"offer",sdp:this._remoteSdp.getSdp()};C.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);const l=await this._pc.createAnswer();C.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}async resumeReceiving(i){this.assertNotClosed(),this.assertRecvDirection();for(const f of i){C.debug("resumeReceiving() [localId:%s]",f);const O=this._mapMidTransceiver.get(f);if(!O)throw new Error("associated RTCRtpTransceiver not found");O.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(f)}const s={type:"offer",sdp:this._remoteSdp.getSdp()};C.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);const l=await this._pc.createAnswer();C.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}async getReceiverStats(i){this.assertNotClosed(),this.assertRecvDirection();const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");return s.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:i,label:s,protocol:l}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:f,ordered:O,maxPacketLifeTime:F,maxRetransmits:x}=i,N={negotiated:!0,id:f,ordered:O,maxPacketLifeTime:F,maxRetransmits:x,protocol:l};C.debug("receiveDataChannel() [options:%o]",N);const z=this._pc.createDataChannel(s,N);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const V={type:"offer",sdp:this._remoteSdp.getSdp()};C.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",V),await this._pc.setRemoteDescription(V);const J=await this._pc.createAnswer();if(!this._transportReady){const ne=_.parse(J.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:ne})}C.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",J),await this._pc.setLocalDescription(J),this._hasDataChannelMediaSection=!0}return{dataChannel:z}}async setupTransport({localDtlsRole:i,localSdpObject:s}){s||(s=_.parse(this._pc.localDescription.sdp));const l=n.extractDtlsParameters({sdpObject:s});l.role=i,this._remoteSdp.updateDtlsRole(i==="client"?"server":"client"),await new Promise((f,O)=>{this.safeEmit("@connect",{dtlsParameters:l},f,O)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new R.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}b.Chrome74=o},7392:function(L,b,u){var P=this&&this.__createBinding||(Object.create?function(k,T,S,C){C===void 0&&(C=S);var I=Object.getOwnPropertyDescriptor(T,S);I&&!("get"in I?!T.__esModule:I.writable||I.configurable)||(I={enumerable:!0,get:function(){return T[S]}}),Object.defineProperty(k,C,I)}:function(k,T,S,C){C===void 0&&(C=S),k[C]=T[S]}),E=this&&this.__setModuleDefault||(Object.create?function(k,T){Object.defineProperty(k,"default",{enumerable:!0,value:T})}:function(k,T){k.default=T}),c=this&&this.__importStar||function(k){if(k&&k.__esModule)return k;var T={};if(k!=null)for(var S in k)S!=="default"&&Object.prototype.hasOwnProperty.call(k,S)&&P(T,k,S);return E(T,k),T};Object.defineProperty(b,"__esModule",{value:!0}),b.Edge11=void 0;const _=u(8562),w=u(9992),d=c(u(3347)),g=c(u(5280)),n=c(u(3635)),m=u(9316),v=new _.Logger("Edge11");class R extends m.HandlerInterface{static createFactory(){return()=>new R}constructor(){super(),this._rtpSenders=new Map,this._rtpReceivers=new Map,this._nextSendLocalId=0,this._transportReady=!1}get name(){return"Edge11"}close(){v.debug("close()");try{this._iceGatherer.close()}catch{}try{this._iceTransport.stop()}catch{}try{this._dtlsTransport.stop()}catch{}for(const T of this._rtpSenders.values())try{T.stop()}catch{}for(const T of this._rtpReceivers.values())try{T.stop()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){return v.debug("getNativeRtpCapabilities()"),n.getCapabilities()}async getNativeSctpCapabilities(){return v.debug("getNativeSctpCapabilities()"),{numStreams:{OS:0,MIS:0}}}run({direction:T,iceParameters:S,iceCandidates:C,dtlsParameters:I,sctpParameters:o,iceServers:p,iceTransportPolicy:i,additionalSettings:s,proprietaryConstraints:l,extendedRtpCapabilities:f}){v.debug("run()"),this._sendingRtpParametersByKind={audio:g.getSendingRtpParameters("audio",f),video:g.getSendingRtpParameters("video",f)},this._remoteIceParameters=S,this._remoteIceCandidates=C,this._remoteDtlsParameters=I,this._cname=`CNAME-${d.generateRandomNumber()}`,this.setIceGatherer({iceServers:p,iceTransportPolicy:i}),this.setIceTransport(),this.setDtlsTransport()}async updateIceServers(T){throw new w.UnsupportedError("not supported")}async restartIce(T){if(v.debug("restartIce()"),this._remoteIceParameters=T,this._transportReady){v.debug("restartIce() | calling iceTransport.start()"),this._iceTransport.start(this._iceGatherer,T,"controlling");for(const S of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(S);this._iceTransport.addRemoteCandidate({})}}async getTransportStats(){return this._iceTransport.getStats()}async send({track:T,encodings:S,codecOptions:C,codec:I}){v.debug("send() [kind:%s, track.id:%s]",T.kind,T.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),v.debug("send() | calling new RTCRtpSender()");const o=new RTCRtpSender(T,this._dtlsTransport),p=d.clone(this._sendingRtpParametersByKind[T.kind]);p.codecs=g.reduceCodecs(p.codecs,I);const i=p.codecs.some(f=>/.+\/rtx$/i.test(f.mimeType));S||(S=[{}]);for(const f of S)f.ssrc=d.generateRandomNumber(),i&&(f.rtx={ssrc:d.generateRandomNumber()});p.encodings=S,p.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const s=n.mangleRtpParameters(p);v.debug("send() | calling rtpSender.send() [params:%o]",s),await o.send(s);const l=String(this._nextSendLocalId);return this._nextSendLocalId++,this._rtpSenders.set(l,o),{localId:l,rtpParameters:p,rtpSender:o}}async stopSending(T){v.debug("stopSending() [localId:%s]",T);const S=this._rtpSenders.get(T);if(!S)throw new Error("RTCRtpSender not found");this._rtpSenders.delete(T);try{v.debug("stopSending() | calling rtpSender.stop()"),S.stop()}catch(C){throw v.warn("stopSending() | rtpSender.stop() failed:%o",C),C}}async pauseSending(T){}async resumeSending(T){}async replaceTrack(T,S){S?v.debug("replaceTrack() [localId:%s, track.id:%s]",T,S.id):v.debug("replaceTrack() [localId:%s, no track]",T);const C=this._rtpSenders.get(T);if(!C)throw new Error("RTCRtpSender not found");C.setTrack(S)}async setMaxSpatialLayer(T,S){v.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",T,S);const C=this._rtpSenders.get(T);if(!C)throw new Error("RTCRtpSender not found");const I=C.getParameters();I.encodings.forEach((o,p)=>{o.active=p<=S}),await C.setParameters(I)}async setRtpEncodingParameters(T,S){v.debug("setRtpEncodingParameters() [localId:%s, params:%o]",T,S);const C=this._rtpSenders.get(T);if(!C)throw new Error("RTCRtpSender not found");const I=C.getParameters();I.encodings.forEach((o,p)=>{I.encodings[p]={...o,...S}}),await C.setParameters(I)}async getSenderStats(T){const S=this._rtpSenders.get(T);if(!S)throw new Error("RTCRtpSender not found");return S.getStats()}async sendDataChannel(T){throw new w.UnsupportedError("not implemented")}async receive(T){const S=[];for(const C of T){const{trackId:I,kind:o}=C;v.debug("receive() [trackId:%s, kind:%s]",I,o)}this._transportReady||await this.setupTransport({localDtlsRole:"server"});for(const C of T){const{trackId:I,kind:o,rtpParameters:p}=C;v.debug("receive() | calling new RTCRtpReceiver()");const i=new RTCRtpReceiver(this._dtlsTransport,o);i.addEventListener("error",f=>{v.error('rtpReceiver "error" event [event:%o]',f)});const s=n.mangleRtpParameters(p);v.debug("receive() | calling rtpReceiver.receive() [params:%o]",s),await i.receive(s);const l=I;this._rtpReceivers.set(l,i),S.push({localId:l,track:i.track,rtpReceiver:i})}return S}async stopReceiving(T){for(const S of T){v.debug("stopReceiving() [localId:%s]",S);const C=this._rtpReceivers.get(S);if(!C)throw new Error("RTCRtpReceiver not found");this._rtpReceivers.delete(S);try{v.debug("stopReceiving() | calling rtpReceiver.stop()"),C.stop()}catch(I){v.warn("stopReceiving() | rtpReceiver.stop() failed:%o",I)}}}async pauseReceiving(T){}async resumeReceiving(T){}async getReceiverStats(T){const S=this._rtpReceivers.get(T);if(!S)throw new Error("RTCRtpReceiver not found");return S.getStats()}async receiveDataChannel(T){throw new w.UnsupportedError("not implemented")}setIceGatherer({iceServers:T,iceTransportPolicy:S}){const C=new RTCIceGatherer({iceServers:T||[],gatherPolicy:S||"all"});C.addEventListener("error",I=>{v.error('iceGatherer "error" event [event:%o]',I)});try{C.gather()}catch(I){v.debug("setIceGatherer() | iceGatherer.gather() failed: %s",I.toString())}this._iceGatherer=C}setIceTransport(){const T=new RTCIceTransport(this._iceGatherer);T.addEventListener("statechange",()=>{switch(T.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}),T.addEventListener("icestatechange",()=>{switch(T.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}),T.addEventListener("candidatepairchange",S=>{v.debug('iceTransport "candidatepairchange" event [pair:%o]',S.pair)}),this._iceTransport=T}setDtlsTransport(){const T=new RTCDtlsTransport(this._iceTransport);T.addEventListener("statechange",()=>{v.debug('dtlsTransport "statechange" event [state:%s]',T.state)}),T.addEventListener("dtlsstatechange",()=>{v.debug('dtlsTransport "dtlsstatechange" event [state:%s]',T.state),T.state==="closed"&&this.emit("@connectionstatechange","closed")}),T.addEventListener("error",S=>{v.error('dtlsTransport "error" event [event:%o]',S)}),this._dtlsTransport=T}async setupTransport({localDtlsRole:T}){v.debug("setupTransport()");const S=this._dtlsTransport.getLocalParameters();S.role=T,await new Promise((C,I)=>{this.safeEmit("@connect",{dtlsParameters:S},C,I)}),this._iceTransport.start(this._iceGatherer,this._remoteIceParameters,"controlling");for(const C of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(C);this._iceTransport.addRemoteCandidate({}),this._remoteDtlsParameters.fingerprints=this._remoteDtlsParameters.fingerprints.filter(C=>C.algorithm==="sha-256"||C.algorithm==="sha-384"||C.algorithm==="sha-512"),this._dtlsTransport.start(this._remoteDtlsParameters),this._transportReady=!0}}b.Edge11=R},5180:function(L,b,u){var P=this&&this.__createBinding||(Object.create?function(o,p,i,s){s===void 0&&(s=i);var l=Object.getOwnPropertyDescriptor(p,i);l&&!("get"in l?!p.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return p[i]}}),Object.defineProperty(o,s,l)}:function(o,p,i,s){s===void 0&&(s=i),o[s]=p[i]}),E=this&&this.__setModuleDefault||(Object.create?function(o,p){Object.defineProperty(o,"default",{enumerable:!0,value:p})}:function(o,p){o.default=p}),c=this&&this.__importStar||function(o){if(o&&o.__esModule)return o;var p={};if(o!=null)for(var i in o)i!=="default"&&Object.prototype.hasOwnProperty.call(o,i)&&P(p,o,i);return E(p,o),p};Object.defineProperty(b,"__esModule",{value:!0}),b.Firefox120=void 0;const _=c(u(766)),w=u(8562),d=u(9992),g=c(u(3347)),n=c(u(5280)),m=c(u(2267)),v=c(u(9072)),R=u(9316),k=u(7910),T=u(2770),S=new w.Logger("Firefox120"),C={OS:16,MIS:2048};class I extends R.HandlerInterface{static createFactory(){return()=>new I}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Firefox120"}close(){if(S.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){S.debug("getNativeRtpCapabilities()");const p=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),i=document.createElement("canvas");i.getContext("2d");const s=i.captureStream().getVideoTracks()[0];try{p.addTransceiver("audio",{direction:"sendrecv"}),p.addTransceiver(s,{direction:"sendrecv",sendEncodings:[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}]});const l=await p.createOffer();try{i.remove()}catch{}try{s.stop()}catch{}try{p.close()}catch{}const f=_.parse(l.sdp);return m.extractRtpCapabilities({sdpObject:f})}catch(l){try{i.remove()}catch{}try{s.stop()}catch{}try{p.close()}catch{}throw l}}async getNativeSctpCapabilities(){return S.debug("getNativeSctpCapabilities()"),{numStreams:C}}run({direction:p,iceParameters:i,iceCandidates:s,dtlsParameters:l,sctpParameters:f,iceServers:O,iceTransportPolicy:F,additionalSettings:x,proprietaryConstraints:N,extendedRtpCapabilities:z}){this.assertNotClosed(),S.debug("run()"),this._direction=p,this._remoteSdp=new k.RemoteSdp({iceParameters:i,iceCandidates:s,dtlsParameters:l,sctpParameters:f}),this._sendingRtpParametersByKind={audio:n.getSendingRtpParameters("audio",z),video:n.getSendingRtpParameters("video",z)},this._sendingRemoteRtpParametersByKind={audio:n.getSendingRemoteRtpParameters("audio",z),video:n.getSendingRemoteRtpParameters("video",z)},this._pc=new RTCPeerConnection({iceServers:O||[],iceTransportPolicy:F||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...x},N),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(S.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(p){throw this.assertNotClosed(),new d.UnsupportedError("not supported")}async restartIce(p){if(this.assertNotClosed(),S.debug("restartIce()"),this._remoteSdp.updateIceParameters(p),this._transportReady)if(this._direction==="send"){const i=await this._pc.createOffer({iceRestart:!0});S.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const s={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}else{const i={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const s=await this._pc.createAnswer();S.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:p,encodings:i,codecOptions:s,codec:l}){this.assertNotClosed(),this.assertSendDirection(),S.debug("send() [kind:%s, track.id:%s]",p.kind,p.id),i&&i.length>1&&i.forEach((ee,Q)=>{ee.rid=`r${Q}`});const f=g.clone(this._sendingRtpParametersByKind[p.kind]);f.codecs=n.reduceCodecs(f.codecs,l);const O=g.clone(this._sendingRemoteRtpParametersByKind[p.kind]);O.codecs=n.reduceCodecs(O.codecs,l);const F=this._pc.addTransceiver(p,{direction:"sendonly",streams:[this._sendStream],sendEncodings:i}),x=await this._pc.createOffer();let N=_.parse(x.sdp);this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:N});const z=(0,T.parse)((i||[{}])[0].scalabilityMode);S.debug("send() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const V=F.mid;f.mid=V,N=_.parse(this._pc.localDescription.sdp);const J=N.media[N.media.length-1];if(f.rtcp.cname=m.getCname({offerMediaObject:J}),i)if(i.length===1){const ee=v.getRtpEncodings({offerMediaObject:J});Object.assign(ee[0],i[0]),f.encodings=ee}else f.encodings=i;else f.encodings=v.getRtpEncodings({offerMediaObject:J});if(f.encodings.length>1&&(f.codecs[0].mimeType.toLowerCase()==="video/vp8"||f.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const ee of f.encodings)ee.scalabilityMode?ee.scalabilityMode=`L1T${z.temporalLayers}`:ee.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:J,offerRtpParameters:f,answerRtpParameters:O,codecOptions:s,extmapAllowMixed:!0});const ne={type:"answer",sdp:this._remoteSdp.getSdp()};return S.debug("send() | calling pc.setRemoteDescription() [answer:%o]",ne),await this._pc.setRemoteDescription(ne),this._mapMidTransceiver.set(V,F),{localId:V,rtpParameters:f,rtpSender:F.sender}}async stopSending(p){if(this.assertSendDirection(),S.debug("stopSending() [localId:%s]",p),this._closed)return;const i=this._mapMidTransceiver.get(p);if(!i)throw new Error("associated transceiver not found");i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),this._remoteSdp.disableMediaSection(i.mid);const s=await this._pc.createOffer();S.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const l={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l),this._mapMidTransceiver.delete(p)}async pauseSending(p){this.assertNotClosed(),this.assertSendDirection(),S.debug("pauseSending() [localId:%s]",p);const i=this._mapMidTransceiver.get(p);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",this._remoteSdp.pauseMediaSection(p);const s=await this._pc.createOffer();S.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const l={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l)}async resumeSending(p){this.assertNotClosed(),this.assertSendDirection(),S.debug("resumeSending() [localId:%s]",p);const i=this._mapMidTransceiver.get(p);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(p);const s=await this._pc.createOffer();S.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const l={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l)}async replaceTrack(p,i){this.assertNotClosed(),this.assertSendDirection(),i?S.debug("replaceTrack() [localId:%s, track.id:%s]",p,i.id):S.debug("replaceTrack() [localId:%s, no track]",p);const s=this._mapMidTransceiver.get(p);if(!s)throw new Error("associated RTCRtpTransceiver not found");await s.sender.replaceTrack(i)}async setMaxSpatialLayer(p,i){this.assertNotClosed(),this.assertSendDirection(),S.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",p,i);const s=this._mapMidTransceiver.get(p);if(!s)throw new Error("associated transceiver not found");const l=s.sender.getParameters();l.encodings.forEach((F,x)=>{F.active=x<=i}),await s.sender.setParameters(l),this._remoteSdp.muxMediaSectionSimulcast(p,l.encodings);const f=await this._pc.createOffer();S.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f);const O={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async setRtpEncodingParameters(p,i){this.assertNotClosed(),this.assertSendDirection(),S.debug("setRtpEncodingParameters() [localId:%s, params:%o]",p,i);const s=this._mapMidTransceiver.get(p);if(!s)throw new Error("associated RTCRtpTransceiver not found");const l=s.sender.getParameters();l.encodings.forEach((F,x)=>{l.encodings[x]={...F,...i}}),await s.sender.setParameters(l),this._remoteSdp.muxMediaSectionSimulcast(p,l.encodings);const f=await this._pc.createOffer();S.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f);const O={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async getSenderStats(p){this.assertNotClosed(),this.assertSendDirection();const i=this._mapMidTransceiver.get(p);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async sendDataChannel({ordered:p,maxPacketLifeTime:i,maxRetransmits:s,label:l,protocol:f}){this.assertNotClosed(),this.assertSendDirection();const O={negotiated:!0,id:this._nextSendSctpStreamId,ordered:p,maxPacketLifeTime:i,maxRetransmits:s,protocol:f};S.debug("sendDataChannel() [options:%o]",O);const F=this._pc.createDataChannel(l,O);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%C.MIS,!this._hasDataChannelMediaSection){const x=await this._pc.createOffer(),N=_.parse(x.sdp),z=N.media.find(J=>J.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:N}),S.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x),this._remoteSdp.sendSctpAssociation({offerMediaObject:z});const V={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",V),await this._pc.setRemoteDescription(V),this._hasDataChannelMediaSection=!0}return{dataChannel:F,sctpStreamParameters:{streamId:O.id,ordered:O.ordered,maxPacketLifeTime:O.maxPacketLifeTime,maxRetransmits:O.maxRetransmits}}}async receive(p){this.assertNotClosed(),this.assertRecvDirection();const i=[],s=new Map;for(const F of p){const{trackId:x,kind:N,rtpParameters:z,streamId:V}=F;S.debug("receive() [trackId:%s, kind:%s]",x,N);const J=z.mid||String(this._mapMidTransceiver.size);s.set(x,J),this._remoteSdp.receive({mid:J,kind:N,offerRtpParameters:z,streamId:V||z.rtcp.cname,trackId:x})}const l={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);let f=await this._pc.createAnswer();const O=_.parse(f.sdp);for(const F of p){const{trackId:x,rtpParameters:N}=F,z=s.get(x),V=O.media.find(J=>String(J.mid)===z);m.applyCodecParameters({offerRtpParameters:N,answerMediaObject:V}),f={type:"answer",sdp:_.write(O)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:O}),S.debug("receive() | calling pc.setLocalDescription() [answer:%o]",f),await this._pc.setLocalDescription(f);for(const F of p){const{trackId:x}=F,N=s.get(x),z=this._pc.getTransceivers().find(V=>V.mid===N);if(!z)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(N,z),i.push({localId:N,track:z.receiver.track,rtpReceiver:z.receiver})}return i}async stopReceiving(p){if(this.assertRecvDirection(),this._closed)return;for(const l of p){S.debug("stopReceiving() [localId:%s]",l);const f=this._mapMidTransceiver.get(l);if(!f)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(f.mid)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const s=await this._pc.createAnswer();S.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const l of p)this._mapMidTransceiver.delete(l)}async pauseReceiving(p){this.assertNotClosed(),this.assertRecvDirection();for(const l of p){S.debug("pauseReceiving() [localId:%s]",l);const f=this._mapMidTransceiver.get(l);if(!f)throw new Error("associated RTCRtpTransceiver not found");f.direction="inactive",this._remoteSdp.pauseMediaSection(l)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const s=await this._pc.createAnswer();S.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s)}async resumeReceiving(p){this.assertNotClosed(),this.assertRecvDirection();for(const l of p){S.debug("resumeReceiving() [localId:%s]",l);const f=this._mapMidTransceiver.get(l);if(!f)throw new Error("associated RTCRtpTransceiver not found");f.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(l)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const s=await this._pc.createAnswer();S.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s)}async getReceiverStats(p){this.assertRecvDirection();const i=this._mapMidTransceiver.get(p);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:p,label:i,protocol:s}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:l,ordered:f,maxPacketLifeTime:O,maxRetransmits:F}=p,x={negotiated:!0,id:l,ordered:f,maxPacketLifeTime:O,maxRetransmits:F,protocol:s};S.debug("receiveDataChannel() [options:%o]",x);const N=this._pc.createDataChannel(i,x);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const z={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",z),await this._pc.setRemoteDescription(z);const V=await this._pc.createAnswer();if(!this._transportReady){const J=_.parse(V.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:J})}S.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",V),await this._pc.setLocalDescription(V),this._hasDataChannelMediaSection=!0}return{dataChannel:N}}async setupTransport({localDtlsRole:p,localSdpObject:i}){i||(i=_.parse(this._pc.localDescription.sdp));const s=m.extractDtlsParameters({sdpObject:i});s.role=p,this._remoteSdp.updateDtlsRole(p==="client"?"server":"client"),await new Promise((l,f)=>{this.safeEmit("@connect",{dtlsParameters:s},l,f)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new d.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}b.Firefox120=I},1419:function(L,b,u){var P=this&&this.__createBinding||(Object.create?function(o,p,i,s){s===void 0&&(s=i);var l=Object.getOwnPropertyDescriptor(p,i);l&&!("get"in l?!p.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return p[i]}}),Object.defineProperty(o,s,l)}:function(o,p,i,s){s===void 0&&(s=i),o[s]=p[i]}),E=this&&this.__setModuleDefault||(Object.create?function(o,p){Object.defineProperty(o,"default",{enumerable:!0,value:p})}:function(o,p){o.default=p}),c=this&&this.__importStar||function(o){if(o&&o.__esModule)return o;var p={};if(o!=null)for(var i in o)i!=="default"&&Object.prototype.hasOwnProperty.call(o,i)&&P(p,o,i);return E(p,o),p};Object.defineProperty(b,"__esModule",{value:!0}),b.Firefox60=void 0;const _=c(u(766)),w=u(8562),d=u(9992),g=c(u(3347)),n=c(u(5280)),m=c(u(2267)),v=c(u(9072)),R=u(9316),k=u(7910),T=u(2770),S=new w.Logger("Firefox60"),C={OS:16,MIS:2048};class I extends R.HandlerInterface{static createFactory(){return()=>new I}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Firefox60"}close(){if(S.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){S.debug("getNativeRtpCapabilities()");const p=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),i=document.createElement("canvas");i.getContext("2d");const s=i.captureStream().getVideoTracks()[0];try{p.addTransceiver("audio",{direction:"sendrecv"});const l=p.addTransceiver(s,{direction:"sendrecv"}),f=l.sender.getParameters(),O=[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}];f.encodings=O,await l.sender.setParameters(f);const F=await p.createOffer();try{i.remove()}catch{}try{s.stop()}catch{}try{p.close()}catch{}const x=_.parse(F.sdp);return m.extractRtpCapabilities({sdpObject:x})}catch(l){try{i.remove()}catch{}try{s.stop()}catch{}try{p.close()}catch{}throw l}}async getNativeSctpCapabilities(){return S.debug("getNativeSctpCapabilities()"),{numStreams:C}}run({direction:p,iceParameters:i,iceCandidates:s,dtlsParameters:l,sctpParameters:f,iceServers:O,iceTransportPolicy:F,additionalSettings:x,proprietaryConstraints:N,extendedRtpCapabilities:z}){this.assertNotClosed(),S.debug("run()"),this._direction=p,this._remoteSdp=new k.RemoteSdp({iceParameters:i,iceCandidates:s,dtlsParameters:l,sctpParameters:f}),this._sendingRtpParametersByKind={audio:n.getSendingRtpParameters("audio",z),video:n.getSendingRtpParameters("video",z)},this._sendingRemoteRtpParametersByKind={audio:n.getSendingRemoteRtpParameters("audio",z),video:n.getSendingRemoteRtpParameters("video",z)},this._pc=new RTCPeerConnection({iceServers:O||[],iceTransportPolicy:F||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...x},N),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(S.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(p){throw this.assertNotClosed(),new d.UnsupportedError("not supported")}async restartIce(p){if(this.assertNotClosed(),S.debug("restartIce()"),this._remoteSdp.updateIceParameters(p),this._transportReady)if(this._direction==="send"){const i=await this._pc.createOffer({iceRestart:!0});S.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);const s={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}else{const i={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const s=await this._pc.createAnswer();S.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:p,encodings:i,codecOptions:s,codec:l}){this.assertNotClosed(),this.assertSendDirection(),S.debug("send() [kind:%s, track.id:%s]",p.kind,p.id),i&&(i=g.clone(i)).length>1&&(i.forEach((ee,Q)=>{ee.rid=`r${Q}`}),i.reverse());const f=g.clone(this._sendingRtpParametersByKind[p.kind]);f.codecs=n.reduceCodecs(f.codecs,l);const O=g.clone(this._sendingRemoteRtpParametersByKind[p.kind]);O.codecs=n.reduceCodecs(O.codecs,l);const F=this._pc.addTransceiver(p,{direction:"sendonly",streams:[this._sendStream]});if(i){const ee=F.sender.getParameters();ee.encodings=i,await F.sender.setParameters(ee)}const x=await this._pc.createOffer();let N=_.parse(x.sdp);this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:N});const z=(0,T.parse)((i||[{}])[0].scalabilityMode);S.debug("send() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x);const V=F.mid;f.mid=V,N=_.parse(this._pc.localDescription.sdp);const J=N.media[N.media.length-1];if(f.rtcp.cname=m.getCname({offerMediaObject:J}),i)if(i.length===1){const ee=v.getRtpEncodings({offerMediaObject:J});Object.assign(ee[0],i[0]),f.encodings=ee}else f.encodings=i.reverse();else f.encodings=v.getRtpEncodings({offerMediaObject:J});if(f.encodings.length>1&&(f.codecs[0].mimeType.toLowerCase()==="video/vp8"||f.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const ee of f.encodings)ee.scalabilityMode?ee.scalabilityMode=`L1T${z.temporalLayers}`:ee.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:J,offerRtpParameters:f,answerRtpParameters:O,codecOptions:s,extmapAllowMixed:!0});const ne={type:"answer",sdp:this._remoteSdp.getSdp()};return S.debug("send() | calling pc.setRemoteDescription() [answer:%o]",ne),await this._pc.setRemoteDescription(ne),this._mapMidTransceiver.set(V,F),{localId:V,rtpParameters:f,rtpSender:F.sender}}async stopSending(p){if(this.assertSendDirection(),S.debug("stopSending() [localId:%s]",p),this._closed)return;const i=this._mapMidTransceiver.get(p);if(!i)throw new Error("associated transceiver not found");i.sender.replaceTrack(null),this._pc.removeTrack(i.sender),this._remoteSdp.disableMediaSection(i.mid);const s=await this._pc.createOffer();S.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const l={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l),this._mapMidTransceiver.delete(p)}async pauseSending(p){this.assertNotClosed(),this.assertSendDirection(),S.debug("pauseSending() [localId:%s]",p);const i=this._mapMidTransceiver.get(p);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="inactive",this._remoteSdp.pauseMediaSection(p);const s=await this._pc.createOffer();S.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const l={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l)}async resumeSending(p){this.assertNotClosed(),this.assertSendDirection(),S.debug("resumeSending() [localId:%s]",p);const i=this._mapMidTransceiver.get(p);if(!i)throw new Error("associated RTCRtpTransceiver not found");i.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(p);const s=await this._pc.createOffer();S.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const l={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l)}async replaceTrack(p,i){this.assertNotClosed(),this.assertSendDirection(),i?S.debug("replaceTrack() [localId:%s, track.id:%s]",p,i.id):S.debug("replaceTrack() [localId:%s, no track]",p);const s=this._mapMidTransceiver.get(p);if(!s)throw new Error("associated RTCRtpTransceiver not found");await s.sender.replaceTrack(i)}async setMaxSpatialLayer(p,i){this.assertNotClosed(),this.assertSendDirection(),S.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",p,i);const s=this._mapMidTransceiver.get(p);if(!s)throw new Error("associated transceiver not found");const l=s.sender.getParameters();i=l.encodings.length-1-i,l.encodings.forEach((F,x)=>{F.active=x>=i}),await s.sender.setParameters(l),this._remoteSdp.muxMediaSectionSimulcast(p,l.encodings);const f=await this._pc.createOffer();S.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f);const O={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async setRtpEncodingParameters(p,i){this.assertNotClosed(),this.assertSendDirection(),S.debug("setRtpEncodingParameters() [localId:%s, params:%o]",p,i);const s=this._mapMidTransceiver.get(p);if(!s)throw new Error("associated RTCRtpTransceiver not found");const l=s.sender.getParameters();l.encodings.forEach((F,x)=>{l.encodings[x]={...F,...i}}),await s.sender.setParameters(l),this._remoteSdp.muxMediaSectionSimulcast(p,l.encodings);const f=await this._pc.createOffer();S.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f);const O={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",O),await this._pc.setRemoteDescription(O)}async getSenderStats(p){this.assertNotClosed(),this.assertSendDirection();const i=this._mapMidTransceiver.get(p);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.sender.getStats()}async sendDataChannel({ordered:p,maxPacketLifeTime:i,maxRetransmits:s,label:l,protocol:f}){this.assertNotClosed(),this.assertSendDirection();const O={negotiated:!0,id:this._nextSendSctpStreamId,ordered:p,maxPacketLifeTime:i,maxRetransmits:s,protocol:f};S.debug("sendDataChannel() [options:%o]",O);const F=this._pc.createDataChannel(l,O);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%C.MIS,!this._hasDataChannelMediaSection){const x=await this._pc.createOffer(),N=_.parse(x.sdp),z=N.media.find(J=>J.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:N}),S.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",x),await this._pc.setLocalDescription(x),this._remoteSdp.sendSctpAssociation({offerMediaObject:z});const V={type:"answer",sdp:this._remoteSdp.getSdp()};S.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",V),await this._pc.setRemoteDescription(V),this._hasDataChannelMediaSection=!0}return{dataChannel:F,sctpStreamParameters:{streamId:O.id,ordered:O.ordered,maxPacketLifeTime:O.maxPacketLifeTime,maxRetransmits:O.maxRetransmits}}}async receive(p){this.assertNotClosed(),this.assertRecvDirection();const i=[],s=new Map;for(const F of p){const{trackId:x,kind:N,rtpParameters:z,streamId:V}=F;S.debug("receive() [trackId:%s, kind:%s]",x,N);const J=z.mid||String(this._mapMidTransceiver.size);s.set(x,J),this._remoteSdp.receive({mid:J,kind:N,offerRtpParameters:z,streamId:V||z.rtcp.cname,trackId:x})}const l={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);let f=await this._pc.createAnswer();const O=_.parse(f.sdp);for(const F of p){const{trackId:x,rtpParameters:N}=F,z=s.get(x),V=O.media.find(J=>String(J.mid)===z);m.applyCodecParameters({offerRtpParameters:N,answerMediaObject:V}),f={type:"answer",sdp:_.write(O)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:O}),S.debug("receive() | calling pc.setLocalDescription() [answer:%o]",f),await this._pc.setLocalDescription(f);for(const F of p){const{trackId:x}=F,N=s.get(x),z=this._pc.getTransceivers().find(V=>V.mid===N);if(!z)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(N,z),i.push({localId:N,track:z.receiver.track,rtpReceiver:z.receiver})}return i}async stopReceiving(p){if(this.assertRecvDirection(),this._closed)return;for(const l of p){S.debug("stopReceiving() [localId:%s]",l);const f=this._mapMidTransceiver.get(l);if(!f)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(f.mid)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const s=await this._pc.createAnswer();S.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s);for(const l of p)this._mapMidTransceiver.delete(l)}async pauseReceiving(p){this.assertNotClosed(),this.assertRecvDirection();for(const l of p){S.debug("pauseReceiving() [localId:%s]",l);const f=this._mapMidTransceiver.get(l);if(!f)throw new Error("associated RTCRtpTransceiver not found");f.direction="inactive",this._remoteSdp.pauseMediaSection(l)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const s=await this._pc.createAnswer();S.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s)}async resumeReceiving(p){this.assertNotClosed(),this.assertRecvDirection();for(const l of p){S.debug("resumeReceiving() [localId:%s]",l);const f=this._mapMidTransceiver.get(l);if(!f)throw new Error("associated RTCRtpTransceiver not found");f.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(l)}const i={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);const s=await this._pc.createAnswer();S.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s)}async getReceiverStats(p){this.assertRecvDirection();const i=this._mapMidTransceiver.get(p);if(!i)throw new Error("associated RTCRtpTransceiver not found");return i.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:p,label:i,protocol:s}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:l,ordered:f,maxPacketLifeTime:O,maxRetransmits:F}=p,x={negotiated:!0,id:l,ordered:f,maxPacketLifeTime:O,maxRetransmits:F,protocol:s};S.debug("receiveDataChannel() [options:%o]",x);const N=this._pc.createDataChannel(i,x);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const z={type:"offer",sdp:this._remoteSdp.getSdp()};S.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",z),await this._pc.setRemoteDescription(z);const V=await this._pc.createAnswer();if(!this._transportReady){const J=_.parse(V.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:J})}S.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",V),await this._pc.setLocalDescription(V),this._hasDataChannelMediaSection=!0}return{dataChannel:N}}async setupTransport({localDtlsRole:p,localSdpObject:i}){i||(i=_.parse(this._pc.localDescription.sdp));const s=m.extractDtlsParameters({sdpObject:i});s.role=p,this._remoteSdp.updateDtlsRole(p==="client"?"server":"client"),await new Promise((l,f)=>{this.safeEmit("@connect",{dtlsParameters:s},l,f)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new d.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}b.Firefox60=I},9316:(L,b,u)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.HandlerInterface=void 0;const P=u(4493);class E extends P.EnhancedEventEmitter{constructor(){super()}}b.HandlerInterface=E},4770:function(L,b,u){var P=this&&this.__createBinding||(Object.create?function(I,o,p,i){i===void 0&&(i=p);var s=Object.getOwnPropertyDescriptor(o,p);s&&!("get"in s?!o.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return o[p]}}),Object.defineProperty(I,i,s)}:function(I,o,p,i){i===void 0&&(i=p),I[i]=o[p]}),E=this&&this.__setModuleDefault||(Object.create?function(I,o){Object.defineProperty(I,"default",{enumerable:!0,value:o})}:function(I,o){I.default=o}),c=this&&this.__importStar||function(I){if(I&&I.__esModule)return I;var o={};if(I!=null)for(var p in I)p!=="default"&&Object.prototype.hasOwnProperty.call(I,p)&&P(o,I,p);return E(o,I),o};Object.defineProperty(b,"__esModule",{value:!0}),b.ReactNative=void 0;const _=c(u(766)),w=u(8562),d=u(9992),g=c(u(3347)),n=c(u(5280)),m=c(u(2267)),v=c(u(9875)),R=u(9316),k=u(7910),T=new w.Logger("ReactNative"),S={OS:1024,MIS:1024};class C extends R.HandlerInterface{static createFactory(){return()=>new C}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdTrack=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"ReactNative"}close(){if(T.debug("close()"),this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){T.debug("getNativeRtpCapabilities()");const o=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const p=await o.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{o.close()}catch{}const i=_.parse(p.sdp);return m.extractRtpCapabilities({sdpObject:i})}catch(p){try{o.close()}catch{}throw p}}async getNativeSctpCapabilities(){return T.debug("getNativeSctpCapabilities()"),{numStreams:S}}run({direction:o,iceParameters:p,iceCandidates:i,dtlsParameters:s,sctpParameters:l,iceServers:f,iceTransportPolicy:O,additionalSettings:F,proprietaryConstraints:x,extendedRtpCapabilities:N}){T.debug("run()"),this._direction=o,this._remoteSdp=new k.RemoteSdp({iceParameters:p,iceCandidates:i,dtlsParameters:s,sctpParameters:l,planB:!0}),this._sendingRtpParametersByKind={audio:n.getSendingRtpParameters("audio",N),video:n.getSendingRtpParameters("video",N)},this._sendingRemoteRtpParametersByKind={audio:n.getSendingRemoteRtpParameters("audio",N),video:n.getSendingRemoteRtpParameters("video",N)},s.role&&s.role!=="auto"&&(this._forcedLocalDtlsRole=s.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:f||[],iceTransportPolicy:O||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...F},x),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(T.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(o){T.debug("updateIceServers()");const p=this._pc.getConfiguration();p.iceServers=o,this._pc.setConfiguration(p)}async restartIce(o){if(T.debug("restartIce()"),this._remoteSdp.updateIceParameters(o),this._transportReady)if(this._direction==="send"){const p=await this._pc.createOffer({iceRestart:!0});T.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",p),await this._pc.setLocalDescription(p);const i={type:"answer",sdp:this._remoteSdp.getSdp()};T.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}else{const p={type:"offer",sdp:this._remoteSdp.getSdp()};T.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const i=await this._pc.createAnswer();T.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i)}}async getTransportStats(){return this._pc.getStats()}async send({track:o,encodings:p,codecOptions:i,codec:s}){this.assertSendDirection(),T.debug("send() [kind:%s, track.id:%s]",o.kind,o.id),s&&T.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(o),this._pc.addStream(this._sendStream);let l,f=await this._pc.createOffer(),O=_.parse(f.sdp);const F=g.clone(this._sendingRtpParametersByKind[o.kind]);F.codecs=n.reduceCodecs(F.codecs);const x=g.clone(this._sendingRemoteRtpParametersByKind[o.kind]);if(x.codecs=n.reduceCodecs(x.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:O}),o.kind==="video"&&p&&p.length>1&&(T.debug("send() | enabling simulcast"),O=_.parse(f.sdp),l=O.media.find(V=>V.type==="video"),v.addLegacySimulcast({offerMediaObject:l,track:o,numStreams:p.length}),f={type:"offer",sdp:_.write(O)}),T.debug("send() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f),O=_.parse(this._pc.localDescription.sdp),l=O.media.find(V=>V.type===o.kind),F.rtcp.cname=m.getCname({offerMediaObject:l}),F.encodings=v.getRtpEncodings({offerMediaObject:l,track:o}),p)for(let V=0;V<F.encodings.length;++V)p[V]&&Object.assign(F.encodings[V],p[V]);if(F.encodings.length>1&&(F.codecs[0].mimeType.toLowerCase()==="video/vp8"||F.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const V of F.encodings)V.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:l,offerRtpParameters:F,answerRtpParameters:x,codecOptions:i});const N={type:"answer",sdp:this._remoteSdp.getSdp()};T.debug("send() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N);const z=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(z,o),{localId:z,rtpParameters:F}}async stopSending(o){this.assertSendDirection(),T.debug("stopSending() [localId:%s]",o);const p=this._mapSendLocalIdTrack.get(o);if(!p)throw new Error("track not found");this._mapSendLocalIdTrack.delete(o),this._sendStream.removeTrack(p),this._pc.addStream(this._sendStream);const i=await this._pc.createOffer();T.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",i);try{await this._pc.setLocalDescription(i)}catch(l){if(this._sendStream.getTracks().length===0)return void T.warn("stopSending() | ignoring expected error due no sending tracks: %s",l.toString());throw l}if(this._pc.signalingState==="stable")return;const s={type:"answer",sdp:this._remoteSdp.getSdp()};T.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async pauseSending(o){}async resumeSending(o){}async replaceTrack(o,p){throw new d.UnsupportedError("not implemented")}async setMaxSpatialLayer(o,p){throw new d.UnsupportedError("not implemented")}async setRtpEncodingParameters(o,p){throw new d.UnsupportedError("not implemented")}async getSenderStats(o){throw new d.UnsupportedError("not implemented")}async sendDataChannel({ordered:o,maxPacketLifeTime:p,maxRetransmits:i,label:s,protocol:l}){this.assertSendDirection();const f={negotiated:!0,id:this._nextSendSctpStreamId,ordered:o,maxPacketLifeTime:p,maxRetransmitTime:p,maxRetransmits:i,protocol:l};T.debug("sendDataChannel() [options:%o]",f);const O=this._pc.createDataChannel(s,f);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%S.MIS,!this._hasDataChannelMediaSection){const F=await this._pc.createOffer(),x=_.parse(F.sdp),N=x.media.find(V=>V.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:x}),T.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",F),await this._pc.setLocalDescription(F),this._remoteSdp.sendSctpAssociation({offerMediaObject:N});const z={type:"answer",sdp:this._remoteSdp.getSdp()};T.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",z),await this._pc.setRemoteDescription(z),this._hasDataChannelMediaSection=!0}return{dataChannel:O,sctpStreamParameters:{streamId:f.id,ordered:f.ordered,maxPacketLifeTime:f.maxPacketLifeTime,maxRetransmits:f.maxRetransmits}}}async receive(o){this.assertRecvDirection();const p=[],i=new Map;for(const O of o){const{trackId:F,kind:x,rtpParameters:N}=O;T.debug("receive() [trackId:%s, kind:%s]",F,x);const z=x;let V=O.streamId||N.rtcp.cname;T.debug("receive() | forcing a random remote streamId to avoid well known bug in react-native-webrtc"),V+=`-hack-${g.generateRandomNumber()}`,i.set(F,V),this._remoteSdp.receive({mid:z,kind:x,offerRtpParameters:N,streamId:V,trackId:F})}const s={type:"offer",sdp:this._remoteSdp.getSdp()};T.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);let l=await this._pc.createAnswer();const f=_.parse(l.sdp);for(const O of o){const{kind:F,rtpParameters:x}=O,N=F,z=f.media.find(V=>String(V.mid)===N);m.applyCodecParameters({offerRtpParameters:x,answerMediaObject:z})}l={type:"answer",sdp:_.write(f)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:f}),T.debug("receive() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l);for(const O of o){const{kind:F,trackId:x,rtpParameters:N}=O,z=x,V=F,J=i.get(x),ne=this._pc.getRemoteStreams().find(ee=>ee.id===J).getTrackById(z);if(!ne)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(z,{mid:V,rtpParameters:N}),p.push({localId:z,track:ne})}return p}async stopReceiving(o){this.assertRecvDirection();for(const s of o){T.debug("stopReceiving() [localId:%s]",s);const{mid:l,rtpParameters:f}=this._mapRecvLocalIdInfo.get(s)||{};this._mapRecvLocalIdInfo.delete(s),this._remoteSdp.planBStopReceiving({mid:l,offerRtpParameters:f})}const p={type:"offer",sdp:this._remoteSdp.getSdp()};T.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);const i=await this._pc.createAnswer();T.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i)}async pauseReceiving(o){}async resumeReceiving(o){}async getReceiverStats(o){throw new d.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:o,label:p,protocol:i}){this.assertRecvDirection();const{streamId:s,ordered:l,maxPacketLifeTime:f,maxRetransmits:O}=o,F={negotiated:!0,id:s,ordered:l,maxPacketLifeTime:f,maxRetransmitTime:f,maxRetransmits:O,protocol:i};T.debug("receiveDataChannel() [options:%o]",F);const x=this._pc.createDataChannel(p,F);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const N={type:"offer",sdp:this._remoteSdp.getSdp()};T.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",N),await this._pc.setRemoteDescription(N);const z=await this._pc.createAnswer();if(!this._transportReady){const V=_.parse(z.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:V})}T.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",z),await this._pc.setLocalDescription(z),this._hasDataChannelMediaSection=!0}return{dataChannel:x}}async setupTransport({localDtlsRole:o,localSdpObject:p}){p||(p=_.parse(this._pc.localDescription.sdp));const i=m.extractDtlsParameters({sdpObject:p});i.role=o,this._remoteSdp.updateDtlsRole(o==="client"?"server":"client"),await new Promise((s,l)=>{this.safeEmit("@connect",{dtlsParameters:i},s,l)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}b.ReactNative=C},3433:function(L,b,u){var P=this&&this.__createBinding||(Object.create?function(p,i,s,l){l===void 0&&(l=s);var f=Object.getOwnPropertyDescriptor(i,s);f&&!("get"in f?!i.__esModule:f.writable||f.configurable)||(f={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(p,l,f)}:function(p,i,s,l){l===void 0&&(l=s),p[l]=i[s]}),E=this&&this.__setModuleDefault||(Object.create?function(p,i){Object.defineProperty(p,"default",{enumerable:!0,value:i})}:function(p,i){p.default=i}),c=this&&this.__importStar||function(p){if(p&&p.__esModule)return p;var i={};if(p!=null)for(var s in p)s!=="default"&&Object.prototype.hasOwnProperty.call(p,s)&&P(i,p,s);return E(i,p),i};Object.defineProperty(b,"__esModule",{value:!0}),b.ReactNativeUnifiedPlan=void 0;const _=c(u(766)),w=u(8562),d=c(u(3347)),g=c(u(5280)),n=c(u(2267)),m=c(u(9072)),v=c(u(8954)),R=u(9992),k=u(9316),T=u(7910),S=u(2770),C=new w.Logger("ReactNativeUnifiedPlan"),I={OS:1024,MIS:1024};class o extends k.HandlerInterface{static createFactory(){return()=>new o}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"ReactNativeUnifiedPlan"}close(){if(C.debug("close()"),!this._closed){if(this._closed=!0,this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){C.debug("getNativeRtpCapabilities()");const i=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{i.addTransceiver("audio"),i.addTransceiver("video");const s=await i.createOffer();try{i.close()}catch{}const l=_.parse(s.sdp),f=n.extractRtpCapabilities({sdpObject:l});return v.addNackSuppportForOpus(f),f}catch(s){try{i.close()}catch{}throw s}}async getNativeSctpCapabilities(){return C.debug("getNativeSctpCapabilities()"),{numStreams:I}}run({direction:i,iceParameters:s,iceCandidates:l,dtlsParameters:f,sctpParameters:O,iceServers:F,iceTransportPolicy:x,additionalSettings:N,proprietaryConstraints:z,extendedRtpCapabilities:V}){this.assertNotClosed(),C.debug("run()"),this._direction=i,this._remoteSdp=new T.RemoteSdp({iceParameters:s,iceCandidates:l,dtlsParameters:f,sctpParameters:O}),this._sendingRtpParametersByKind={audio:g.getSendingRtpParameters("audio",V),video:g.getSendingRtpParameters("video",V)},this._sendingRemoteRtpParametersByKind={audio:g.getSendingRemoteRtpParameters("audio",V),video:g.getSendingRemoteRtpParameters("video",V)},f.role&&f.role!=="auto"&&(this._forcedLocalDtlsRole=f.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:F||[],iceTransportPolicy:x||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...N},z),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(C.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(i){this.assertNotClosed(),C.debug("updateIceServers()");const s=this._pc.getConfiguration();s.iceServers=i,this._pc.setConfiguration(s)}async restartIce(i){if(this.assertNotClosed(),C.debug("restartIce()"),this._remoteSdp.updateIceParameters(i),this._transportReady)if(this._direction==="send"){const s=await this._pc.createOffer({iceRestart:!0});C.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const l={type:"answer",sdp:this._remoteSdp.getSdp()};C.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l)}else{const s={type:"offer",sdp:this._remoteSdp.getSdp()};C.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);const l=await this._pc.createAnswer();C.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:i,encodings:s,codecOptions:l,codec:f}){this.assertNotClosed(),this.assertSendDirection(),C.debug("send() [kind:%s, track.id:%s]",i.kind,i.id),s&&s.length>1&&s.forEach((he,Te)=>{he.rid=`r${Te}`});const O=d.clone(this._sendingRtpParametersByKind[i.kind]);O.codecs=g.reduceCodecs(O.codecs,f);const F=d.clone(this._sendingRemoteRtpParametersByKind[i.kind]);F.codecs=g.reduceCodecs(F.codecs,f);const x=this._remoteSdp.getNextMediaSectionIdx(),N=this._pc.addTransceiver(i,{direction:"sendonly",streams:[this._sendStream],sendEncodings:s});let z,V=await this._pc.createOffer(),J=_.parse(V.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:J});let ne=!1;const ee=(0,S.parse)((s||[{}])[0].scalabilityMode);s&&s.length===1&&ee.spatialLayers>1&&O.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(C.debug("send() | enabling legacy simulcast for VP9 SVC"),ne=!0,J=_.parse(V.sdp),z=J.media[x.idx],m.addLegacySimulcast({offerMediaObject:z,numStreams:ee.spatialLayers}),V={type:"offer",sdp:_.write(J)}),C.debug("send() | calling pc.setLocalDescription() [offer:%o]",V),await this._pc.setLocalDescription(V);let Q=N.mid??void 0;if(Q||C.warn("send() | missing transceiver.mid (bug in react-native-webrtc, using a workaround"),O.mid=Q,J=_.parse(this._pc.localDescription.sdp),z=J.media[x.idx],O.rtcp.cname=n.getCname({offerMediaObject:z}),s)if(s.length===1){let he=m.getRtpEncodings({offerMediaObject:z});Object.assign(he[0],s[0]),ne&&(he=[he[0]]),O.encodings=he}else O.encodings=s;else O.encodings=m.getRtpEncodings({offerMediaObject:z});if(O.encodings.length>1&&(O.codecs[0].mimeType.toLowerCase()==="video/vp8"||O.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const he of O.encodings)he.scalabilityMode?he.scalabilityMode=`L1T${ee.temporalLayers}`:he.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:z,reuseMid:x.reuseMid,offerRtpParameters:O,answerRtpParameters:F,codecOptions:l,extmapAllowMixed:!0});const oe={type:"answer",sdp:this._remoteSdp.getSdp()};return C.debug("send() | calling pc.setRemoteDescription() [answer:%o]",oe),await this._pc.setRemoteDescription(oe),Q||(Q=N.mid,O.mid=Q),this._mapMidTransceiver.set(Q,N),{localId:Q,rtpParameters:O,rtpSender:N.sender}}async stopSending(i){if(this.assertSendDirection(),this._closed)return;C.debug("stopSending() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");if(s.sender.replaceTrack(null),this._pc.removeTrack(s.sender),this._remoteSdp.closeMediaSection(s.mid))try{s.stop()}catch{}const l=await this._pc.createOffer();C.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const f={type:"answer",sdp:this._remoteSdp.getSdp()};C.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f),this._mapMidTransceiver.delete(i)}async pauseSending(i){this.assertNotClosed(),this.assertSendDirection(),C.debug("pauseSending() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="inactive",this._remoteSdp.pauseMediaSection(i);const l=await this._pc.createOffer();C.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const f={type:"answer",sdp:this._remoteSdp.getSdp()};C.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f)}async resumeSending(i){this.assertNotClosed(),this.assertSendDirection(),C.debug("resumeSending() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(this._remoteSdp.resumeSendingMediaSection(i),!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="sendonly";const l=await this._pc.createOffer();C.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const f={type:"answer",sdp:this._remoteSdp.getSdp()};C.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f)}async replaceTrack(i,s){this.assertNotClosed(),this.assertSendDirection(),s?C.debug("replaceTrack() [localId:%s, track.id:%s]",i,s.id):C.debug("replaceTrack() [localId:%s, no track]",i);const l=this._mapMidTransceiver.get(i);if(!l)throw new Error("associated RTCRtpTransceiver not found");await l.sender.replaceTrack(s)}async setMaxSpatialLayer(i,s){this.assertNotClosed(),this.assertSendDirection(),C.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",i,s);const l=this._mapMidTransceiver.get(i);if(!l)throw new Error("associated RTCRtpTransceiver not found");const f=l.sender.getParameters();f.encodings.forEach((x,N)=>{x.active=N<=s}),await l.sender.setParameters(f),this._remoteSdp.muxMediaSectionSimulcast(i,f.encodings);const O=await this._pc.createOffer();C.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O);const F={type:"answer",sdp:this._remoteSdp.getSdp()};C.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",F),await this._pc.setRemoteDescription(F)}async setRtpEncodingParameters(i,s){this.assertNotClosed(),this.assertSendDirection(),C.debug("setRtpEncodingParameters() [localId:%s, params:%o]",i,s);const l=this._mapMidTransceiver.get(i);if(!l)throw new Error("associated RTCRtpTransceiver not found");const f=l.sender.getParameters();f.encodings.forEach((x,N)=>{f.encodings[N]={...x,...s}}),await l.sender.setParameters(f),this._remoteSdp.muxMediaSectionSimulcast(i,f.encodings);const O=await this._pc.createOffer();C.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O);const F={type:"answer",sdp:this._remoteSdp.getSdp()};C.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",F),await this._pc.setRemoteDescription(F)}async getSenderStats(i){this.assertNotClosed(),this.assertSendDirection();const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");return s.sender.getStats()}async sendDataChannel({ordered:i,maxPacketLifeTime:s,maxRetransmits:l,label:f,protocol:O}){this.assertNotClosed(),this.assertSendDirection();const F={negotiated:!0,id:this._nextSendSctpStreamId,ordered:i,maxPacketLifeTime:s,maxRetransmits:l,protocol:O};C.debug("sendDataChannel() [options:%o]",F);const x=this._pc.createDataChannel(f,F);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%I.MIS,!this._hasDataChannelMediaSection){const N=await this._pc.createOffer(),z=_.parse(N.sdp),V=z.media.find(ne=>ne.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:z}),C.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N),this._remoteSdp.sendSctpAssociation({offerMediaObject:V});const J={type:"answer",sdp:this._remoteSdp.getSdp()};C.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",J),await this._pc.setRemoteDescription(J),this._hasDataChannelMediaSection=!0}return{dataChannel:x,sctpStreamParameters:{streamId:F.id,ordered:F.ordered,maxPacketLifeTime:F.maxPacketLifeTime,maxRetransmits:F.maxRetransmits}}}async receive(i){this.assertNotClosed(),this.assertRecvDirection();const s=[],l=new Map;for(const x of i){const{trackId:N,kind:z,rtpParameters:V,streamId:J}=x;C.debug("receive() [trackId:%s, kind:%s]",N,z);const ne=V.mid||String(this._mapMidTransceiver.size);l.set(N,ne),this._remoteSdp.receive({mid:ne,kind:z,offerRtpParameters:V,streamId:J||V.rtcp.cname,trackId:N})}const f={type:"offer",sdp:this._remoteSdp.getSdp()};C.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);let O=await this._pc.createAnswer();const F=_.parse(O.sdp);for(const x of i){const{trackId:N,rtpParameters:z}=x,V=l.get(N),J=F.media.find(ne=>String(ne.mid)===V);n.applyCodecParameters({offerRtpParameters:z,answerMediaObject:J})}O={type:"answer",sdp:_.write(F)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:F}),C.debug("receive() | calling pc.setLocalDescription() [answer:%o]",O),await this._pc.setLocalDescription(O);for(const x of i){const{trackId:N}=x,z=l.get(N),V=this._pc.getTransceivers().find(J=>J.mid===z);if(!V)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(z,V),s.push({localId:z,track:V.receiver.track,rtpReceiver:V.receiver})}return s}async stopReceiving(i){if(this.assertRecvDirection(),this._closed)return;for(const f of i){C.debug("stopReceiving() [localId:%s]",f);const O=this._mapMidTransceiver.get(f);if(!O)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(O.mid)}const s={type:"offer",sdp:this._remoteSdp.getSdp()};C.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);const l=await this._pc.createAnswer();C.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l);for(const f of i)this._mapMidTransceiver.delete(f)}async pauseReceiving(i){this.assertNotClosed(),this.assertRecvDirection();for(const f of i){C.debug("pauseReceiving() [localId:%s]",f);const O=this._mapMidTransceiver.get(f);if(!O)throw new Error("associated RTCRtpTransceiver not found");O.direction="inactive",this._remoteSdp.pauseMediaSection(f)}const s={type:"offer",sdp:this._remoteSdp.getSdp()};C.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);const l=await this._pc.createAnswer();C.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}async resumeReceiving(i){this.assertNotClosed(),this.assertRecvDirection();for(const f of i){C.debug("resumeReceiving() [localId:%s]",f);const O=this._mapMidTransceiver.get(f);if(!O)throw new Error("associated RTCRtpTransceiver not found");O.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(f)}const s={type:"offer",sdp:this._remoteSdp.getSdp()};C.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);const l=await this._pc.createAnswer();C.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}async getReceiverStats(i){this.assertNotClosed(),this.assertRecvDirection();const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");return s.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:i,label:s,protocol:l}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:f,ordered:O,maxPacketLifeTime:F,maxRetransmits:x}=i,N={negotiated:!0,id:f,ordered:O,maxPacketLifeTime:F,maxRetransmits:x,protocol:l};C.debug("receiveDataChannel() [options:%o]",N);const z=this._pc.createDataChannel(s,N);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const V={type:"offer",sdp:this._remoteSdp.getSdp()};C.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",V),await this._pc.setRemoteDescription(V);const J=await this._pc.createAnswer();if(!this._transportReady){const ne=_.parse(J.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:ne})}C.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",J),await this._pc.setLocalDescription(J),this._hasDataChannelMediaSection=!0}return{dataChannel:z}}async setupTransport({localDtlsRole:i,localSdpObject:s}){s||(s=_.parse(this._pc.localDescription.sdp));const l=n.extractDtlsParameters({sdpObject:s});l.role=i,this._remoteSdp.updateDtlsRole(i==="client"?"server":"client"),await new Promise((f,O)=>{this.safeEmit("@connect",{dtlsParameters:l},f,O)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new R.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}b.ReactNativeUnifiedPlan=o},2205:function(L,b,u){var P=this&&this.__createBinding||(Object.create?function(C,I,o,p){p===void 0&&(p=o);var i=Object.getOwnPropertyDescriptor(I,o);i&&!("get"in i?!I.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return I[o]}}),Object.defineProperty(C,p,i)}:function(C,I,o,p){p===void 0&&(p=o),C[p]=I[o]}),E=this&&this.__setModuleDefault||(Object.create?function(C,I){Object.defineProperty(C,"default",{enumerable:!0,value:I})}:function(C,I){C.default=I}),c=this&&this.__importStar||function(C){if(C&&C.__esModule)return C;var I={};if(C!=null)for(var o in C)o!=="default"&&Object.prototype.hasOwnProperty.call(C,o)&&P(I,C,o);return E(I,C),I};Object.defineProperty(b,"__esModule",{value:!0}),b.Safari11=void 0;const _=c(u(766)),w=u(8562),d=c(u(3347)),g=c(u(5280)),n=c(u(2267)),m=c(u(9875)),v=u(9316),R=u(7910),k=new w.Logger("Safari11"),T={OS:1024,MIS:1024};class S extends v.HandlerInterface{static createFactory(){return()=>new S}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdRtpSender=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Safari11"}close(){if(k.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){k.debug("getNativeRtpCapabilities()");const I=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const o=await I.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{I.close()}catch{}const p=_.parse(o.sdp);return n.extractRtpCapabilities({sdpObject:p})}catch(o){try{I.close()}catch{}throw o}}async getNativeSctpCapabilities(){return k.debug("getNativeSctpCapabilities()"),{numStreams:T}}run({direction:I,iceParameters:o,iceCandidates:p,dtlsParameters:i,sctpParameters:s,iceServers:l,iceTransportPolicy:f,additionalSettings:O,proprietaryConstraints:F,extendedRtpCapabilities:x}){k.debug("run()"),this._direction=I,this._remoteSdp=new R.RemoteSdp({iceParameters:o,iceCandidates:p,dtlsParameters:i,sctpParameters:s,planB:!0}),this._sendingRtpParametersByKind={audio:g.getSendingRtpParameters("audio",x),video:g.getSendingRtpParameters("video",x)},this._sendingRemoteRtpParametersByKind={audio:g.getSendingRemoteRtpParameters("audio",x),video:g.getSendingRemoteRtpParameters("video",x)},i.role&&i.role!=="auto"&&(this._forcedLocalDtlsRole=i.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:l||[],iceTransportPolicy:f||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...O},F),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(k.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(I){k.debug("updateIceServers()");const o=this._pc.getConfiguration();o.iceServers=I,this._pc.setConfiguration(o)}async restartIce(I){if(k.debug("restartIce()"),this._remoteSdp.updateIceParameters(I),this._transportReady)if(this._direction==="send"){const o=await this._pc.createOffer({iceRestart:!0});k.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",o),await this._pc.setLocalDescription(o);const p={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",p),await this._pc.setRemoteDescription(p)}else{const o={type:"offer",sdp:this._remoteSdp.getSdp()};k.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",o),await this._pc.setRemoteDescription(o);const p=await this._pc.createAnswer();k.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p)}}async getTransportStats(){return this._pc.getStats()}async send({track:I,encodings:o,codecOptions:p,codec:i}){this.assertSendDirection(),k.debug("send() [kind:%s, track.id:%s]",I.kind,I.id),i&&k.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(I),this._pc.addTrack(I,this._sendStream);let s,l=await this._pc.createOffer(),f=_.parse(l.sdp);const O=d.clone(this._sendingRtpParametersByKind[I.kind]);O.codecs=g.reduceCodecs(O.codecs);const F=d.clone(this._sendingRemoteRtpParametersByKind[I.kind]);if(F.codecs=g.reduceCodecs(F.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:f}),I.kind==="video"&&o&&o.length>1&&(k.debug("send() | enabling simulcast"),f=_.parse(l.sdp),s=f.media.find(V=>V.type==="video"),m.addLegacySimulcast({offerMediaObject:s,track:I,numStreams:o.length}),l={type:"offer",sdp:_.write(f)}),k.debug("send() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),f=_.parse(this._pc.localDescription.sdp),s=f.media.find(V=>V.type===I.kind),O.rtcp.cname=n.getCname({offerMediaObject:s}),O.encodings=m.getRtpEncodings({offerMediaObject:s,track:I}),o)for(let V=0;V<O.encodings.length;++V)o[V]&&Object.assign(O.encodings[V],o[V]);if(O.encodings.length>1&&O.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const V of O.encodings)V.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:s,offerRtpParameters:O,answerRtpParameters:F,codecOptions:p});const x={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("send() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x);const N=String(this._nextSendLocalId);this._nextSendLocalId++;const z=this._pc.getSenders().find(V=>V.track===I);return this._mapSendLocalIdRtpSender.set(N,z),{localId:N,rtpParameters:O,rtpSender:z}}async stopSending(I){this.assertSendDirection();const o=this._mapSendLocalIdRtpSender.get(I);if(!o)throw new Error("associated RTCRtpSender not found");o.track&&this._sendStream.removeTrack(o.track),this._mapSendLocalIdRtpSender.delete(I);const p=await this._pc.createOffer();k.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",p);try{await this._pc.setLocalDescription(p)}catch(s){if(this._sendStream.getTracks().length===0)return void k.warn("stopSending() | ignoring expected error due no sending tracks: %s",s.toString());throw s}if(this._pc.signalingState==="stable")return;const i={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async pauseSending(I){}async resumeSending(I){}async replaceTrack(I,o){this.assertSendDirection(),o?k.debug("replaceTrack() [localId:%s, track.id:%s]",I,o.id):k.debug("replaceTrack() [localId:%s, no track]",I);const p=this._mapSendLocalIdRtpSender.get(I);if(!p)throw new Error("associated RTCRtpSender not found");const i=p.track;await p.replaceTrack(o),i&&this._sendStream.removeTrack(i),o&&this._sendStream.addTrack(o)}async setMaxSpatialLayer(I,o){this.assertSendDirection(),k.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",I,o);const p=this._mapSendLocalIdRtpSender.get(I);if(!p)throw new Error("associated RTCRtpSender not found");const i=p.getParameters();i.encodings.forEach((s,l)=>{s.active=l<=o}),await p.setParameters(i)}async setRtpEncodingParameters(I,o){this.assertSendDirection(),k.debug("setRtpEncodingParameters() [localId:%s, params:%o]",I,o);const p=this._mapSendLocalIdRtpSender.get(I);if(!p)throw new Error("associated RTCRtpSender not found");const i=p.getParameters();i.encodings.forEach((s,l)=>{i.encodings[l]={...s,...o}}),await p.setParameters(i)}async getSenderStats(I){this.assertSendDirection();const o=this._mapSendLocalIdRtpSender.get(I);if(!o)throw new Error("associated RTCRtpSender not found");return o.getStats()}async sendDataChannel({ordered:I,maxPacketLifeTime:o,maxRetransmits:p,label:i,protocol:s}){this.assertSendDirection();const l={negotiated:!0,id:this._nextSendSctpStreamId,ordered:I,maxPacketLifeTime:o,maxRetransmits:p,protocol:s};k.debug("sendDataChannel() [options:%o]",l);const f=this._pc.createDataChannel(i,l);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%T.MIS,!this._hasDataChannelMediaSection){const O=await this._pc.createOffer(),F=_.parse(O.sdp),x=F.media.find(z=>z.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:F}),k.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O),this._remoteSdp.sendSctpAssociation({offerMediaObject:x});const N={type:"answer",sdp:this._remoteSdp.getSdp()};k.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N),this._hasDataChannelMediaSection=!0}return{dataChannel:f,sctpStreamParameters:{streamId:l.id,ordered:l.ordered,maxPacketLifeTime:l.maxPacketLifeTime,maxRetransmits:l.maxRetransmits}}}async receive(I){this.assertRecvDirection();const o=[];for(const l of I){const{trackId:f,kind:O,rtpParameters:F,streamId:x}=l;k.debug("receive() [trackId:%s, kind:%s]",f,O);const N=O;this._remoteSdp.receive({mid:N,kind:O,offerRtpParameters:F,streamId:x||F.rtcp.cname,trackId:f})}const p={type:"offer",sdp:this._remoteSdp.getSdp()};k.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",p),await this._pc.setRemoteDescription(p);let i=await this._pc.createAnswer();const s=_.parse(i.sdp);for(const l of I){const{kind:f,rtpParameters:O}=l,F=f,x=s.media.find(N=>String(N.mid)===F);n.applyCodecParameters({offerRtpParameters:O,answerMediaObject:x})}i={type:"answer",sdp:_.write(s)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:s}),k.debug("receive() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i);for(const l of I){const{kind:f,trackId:O,rtpParameters:F}=l,x=f,N=O,z=this._pc.getReceivers().find(V=>V.track&&V.track.id===N);if(!z)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(N,{mid:x,rtpParameters:F,rtpReceiver:z}),o.push({localId:N,track:z.track,rtpReceiver:z})}return o}async stopReceiving(I){this.assertRecvDirection();for(const i of I){k.debug("stopReceiving() [localId:%s]",i);const{mid:s,rtpParameters:l}=this._mapRecvLocalIdInfo.get(i)||{};this._mapRecvLocalIdInfo.delete(i),this._remoteSdp.planBStopReceiving({mid:s,offerRtpParameters:l})}const o={type:"offer",sdp:this._remoteSdp.getSdp()};k.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",o),await this._pc.setRemoteDescription(o);const p=await this._pc.createAnswer();k.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p)}async getReceiverStats(I){this.assertRecvDirection();const{rtpReceiver:o}=this._mapRecvLocalIdInfo.get(I)||{};if(!o)throw new Error("associated RTCRtpReceiver not found");return o.getStats()}async pauseReceiving(I){}async resumeReceiving(I){}async receiveDataChannel({sctpStreamParameters:I,label:o,protocol:p}){this.assertRecvDirection();const{streamId:i,ordered:s,maxPacketLifeTime:l,maxRetransmits:f}=I,O={negotiated:!0,id:i,ordered:s,maxPacketLifeTime:l,maxRetransmits:f,protocol:p};k.debug("receiveDataChannel() [options:%o]",O);const F=this._pc.createDataChannel(o,O);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const x={type:"offer",sdp:this._remoteSdp.getSdp()};k.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",x),await this._pc.setRemoteDescription(x);const N=await this._pc.createAnswer();if(!this._transportReady){const z=_.parse(N.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:z})}k.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setLocalDescription(N),this._hasDataChannelMediaSection=!0}return{dataChannel:F}}async setupTransport({localDtlsRole:I,localSdpObject:o}){o||(o=_.parse(this._pc.localDescription.sdp));const p=n.extractDtlsParameters({sdpObject:o});p.role=I,this._remoteSdp.updateDtlsRole(I==="client"?"server":"client"),await new Promise((i,s)=>{this.safeEmit("@connect",{dtlsParameters:p},i,s)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}b.Safari11=S},9862:function(L,b,u){var P=this&&this.__createBinding||(Object.create?function(p,i,s,l){l===void 0&&(l=s);var f=Object.getOwnPropertyDescriptor(i,s);f&&!("get"in f?!i.__esModule:f.writable||f.configurable)||(f={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(p,l,f)}:function(p,i,s,l){l===void 0&&(l=s),p[l]=i[s]}),E=this&&this.__setModuleDefault||(Object.create?function(p,i){Object.defineProperty(p,"default",{enumerable:!0,value:i})}:function(p,i){p.default=i}),c=this&&this.__importStar||function(p){if(p&&p.__esModule)return p;var i={};if(p!=null)for(var s in p)s!=="default"&&Object.prototype.hasOwnProperty.call(p,s)&&P(i,p,s);return E(i,p),i};Object.defineProperty(b,"__esModule",{value:!0}),b.Safari12=void 0;const _=c(u(766)),w=u(8562),d=c(u(3347)),g=c(u(5280)),n=c(u(2267)),m=c(u(9072)),v=c(u(8954)),R=u(9992),k=u(9316),T=u(7910),S=u(2770),C=new w.Logger("Safari12"),I={OS:1024,MIS:1024};class o extends k.HandlerInterface{static createFactory(){return()=>new o}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Safari12"}close(){if(C.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){C.debug("getNativeRtpCapabilities()");const i=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{i.addTransceiver("audio"),i.addTransceiver("video");const s=await i.createOffer();try{i.close()}catch{}const l=_.parse(s.sdp),f=n.extractRtpCapabilities({sdpObject:l});return v.addNackSuppportForOpus(f),f}catch(s){try{i.close()}catch{}throw s}}async getNativeSctpCapabilities(){return C.debug("getNativeSctpCapabilities()"),{numStreams:I}}run({direction:i,iceParameters:s,iceCandidates:l,dtlsParameters:f,sctpParameters:O,iceServers:F,iceTransportPolicy:x,additionalSettings:N,proprietaryConstraints:z,extendedRtpCapabilities:V}){this.assertNotClosed(),C.debug("run()"),this._direction=i,this._remoteSdp=new T.RemoteSdp({iceParameters:s,iceCandidates:l,dtlsParameters:f,sctpParameters:O}),this._sendingRtpParametersByKind={audio:g.getSendingRtpParameters("audio",V),video:g.getSendingRtpParameters("video",V)},this._sendingRemoteRtpParametersByKind={audio:g.getSendingRemoteRtpParameters("audio",V),video:g.getSendingRemoteRtpParameters("video",V)},f.role&&f.role!=="auto"&&(this._forcedLocalDtlsRole=f.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:F||[],iceTransportPolicy:x||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...N},z),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(C.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(i){this.assertNotClosed(),C.debug("updateIceServers()");const s=this._pc.getConfiguration();s.iceServers=i,this._pc.setConfiguration(s)}async restartIce(i){if(this.assertNotClosed(),C.debug("restartIce()"),this._remoteSdp.updateIceParameters(i),this._transportReady)if(this._direction==="send"){const s=await this._pc.createOffer({iceRestart:!0});C.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s);const l={type:"answer",sdp:this._remoteSdp.getSdp()};C.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l)}else{const s={type:"offer",sdp:this._remoteSdp.getSdp()};C.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);const l=await this._pc.createAnswer();C.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:i,encodings:s,codecOptions:l,codec:f}){this.assertNotClosed(),this.assertSendDirection(),C.debug("send() [kind:%s, track.id:%s]",i.kind,i.id);const O=d.clone(this._sendingRtpParametersByKind[i.kind]);O.codecs=g.reduceCodecs(O.codecs,f);const F=d.clone(this._sendingRemoteRtpParametersByKind[i.kind]);F.codecs=g.reduceCodecs(F.codecs,f);const x=this._remoteSdp.getNextMediaSectionIdx(),N=this._pc.addTransceiver(i,{direction:"sendonly",streams:[this._sendStream]});let z,V=await this._pc.createOffer(),J=_.parse(V.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:J});const ne=(0,S.parse)((s||[{}])[0].scalabilityMode);s&&s.length>1&&(C.debug("send() | enabling legacy simulcast"),J=_.parse(V.sdp),z=J.media[x.idx],m.addLegacySimulcast({offerMediaObject:z,numStreams:s.length}),V={type:"offer",sdp:_.write(J)}),C.debug("send() | calling pc.setLocalDescription() [offer:%o]",V),await this._pc.setLocalDescription(V);const ee=N.mid;if(O.mid=ee,J=_.parse(this._pc.localDescription.sdp),z=J.media[x.idx],O.rtcp.cname=n.getCname({offerMediaObject:z}),O.encodings=m.getRtpEncodings({offerMediaObject:z}),s)for(let oe=0;oe<O.encodings.length;++oe)s[oe]&&Object.assign(O.encodings[oe],s[oe]);if(O.encodings.length>1&&(O.codecs[0].mimeType.toLowerCase()==="video/vp8"||O.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const oe of O.encodings)oe.scalabilityMode?oe.scalabilityMode=`L1T${ne.temporalLayers}`:oe.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:z,reuseMid:x.reuseMid,offerRtpParameters:O,answerRtpParameters:F,codecOptions:l});const Q={type:"answer",sdp:this._remoteSdp.getSdp()};return C.debug("send() | calling pc.setRemoteDescription() [answer:%o]",Q),await this._pc.setRemoteDescription(Q),this._mapMidTransceiver.set(ee,N),{localId:ee,rtpParameters:O,rtpSender:N.sender}}async stopSending(i){if(this.assertSendDirection(),this._closed)return;C.debug("stopSending() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");if(s.sender.replaceTrack(null),this._pc.removeTrack(s.sender),this._remoteSdp.closeMediaSection(s.mid))try{s.stop()}catch{}const l=await this._pc.createOffer();C.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const f={type:"answer",sdp:this._remoteSdp.getSdp()};C.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f),this._mapMidTransceiver.delete(i)}async pauseSending(i){this.assertNotClosed(),this.assertSendDirection(),C.debug("pauseSending() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="inactive",this._remoteSdp.pauseMediaSection(i);const l=await this._pc.createOffer();C.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const f={type:"answer",sdp:this._remoteSdp.getSdp()};C.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f)}async resumeSending(i){this.assertNotClosed(),this.assertSendDirection(),C.debug("resumeSending() [localId:%s]",i);const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");s.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(i);const l=await this._pc.createOffer();C.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const f={type:"answer",sdp:this._remoteSdp.getSdp()};C.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",f),await this._pc.setRemoteDescription(f)}async replaceTrack(i,s){this.assertNotClosed(),this.assertSendDirection(),s?C.debug("replaceTrack() [localId:%s, track.id:%s]",i,s.id):C.debug("replaceTrack() [localId:%s, no track]",i);const l=this._mapMidTransceiver.get(i);if(!l)throw new Error("associated RTCRtpTransceiver not found");await l.sender.replaceTrack(s)}async setMaxSpatialLayer(i,s){this.assertNotClosed(),this.assertSendDirection(),C.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",i,s);const l=this._mapMidTransceiver.get(i);if(!l)throw new Error("associated RTCRtpTransceiver not found");const f=l.sender.getParameters();f.encodings.forEach((x,N)=>{x.active=N<=s}),await l.sender.setParameters(f),this._remoteSdp.muxMediaSectionSimulcast(i,f.encodings);const O=await this._pc.createOffer();C.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O);const F={type:"answer",sdp:this._remoteSdp.getSdp()};C.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",F),await this._pc.setRemoteDescription(F)}async setRtpEncodingParameters(i,s){this.assertNotClosed(),this.assertSendDirection(),C.debug("setRtpEncodingParameters() [localId:%s, params:%o]",i,s);const l=this._mapMidTransceiver.get(i);if(!l)throw new Error("associated RTCRtpTransceiver not found");const f=l.sender.getParameters();f.encodings.forEach((x,N)=>{f.encodings[N]={...x,...s}}),await l.sender.setParameters(f),this._remoteSdp.muxMediaSectionSimulcast(i,f.encodings);const O=await this._pc.createOffer();C.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",O),await this._pc.setLocalDescription(O);const F={type:"answer",sdp:this._remoteSdp.getSdp()};C.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",F),await this._pc.setRemoteDescription(F)}async getSenderStats(i){this.assertNotClosed(),this.assertSendDirection();const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");return s.sender.getStats()}async sendDataChannel({ordered:i,maxPacketLifeTime:s,maxRetransmits:l,label:f,protocol:O}){this.assertNotClosed(),this.assertSendDirection();const F={negotiated:!0,id:this._nextSendSctpStreamId,ordered:i,maxPacketLifeTime:s,maxRetransmits:l,protocol:O};C.debug("sendDataChannel() [options:%o]",F);const x=this._pc.createDataChannel(f,F);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%I.MIS,!this._hasDataChannelMediaSection){const N=await this._pc.createOffer(),z=_.parse(N.sdp),V=z.media.find(ne=>ne.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:z}),C.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N),this._remoteSdp.sendSctpAssociation({offerMediaObject:V});const J={type:"answer",sdp:this._remoteSdp.getSdp()};C.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",J),await this._pc.setRemoteDescription(J),this._hasDataChannelMediaSection=!0}return{dataChannel:x,sctpStreamParameters:{streamId:F.id,ordered:F.ordered,maxPacketLifeTime:F.maxPacketLifeTime,maxRetransmits:F.maxRetransmits}}}async receive(i){this.assertNotClosed(),this.assertRecvDirection();const s=[],l=new Map;for(const x of i){const{trackId:N,kind:z,rtpParameters:V,streamId:J}=x;C.debug("receive() [trackId:%s, kind:%s]",N,z);const ne=V.mid||String(this._mapMidTransceiver.size);l.set(N,ne),this._remoteSdp.receive({mid:ne,kind:z,offerRtpParameters:V,streamId:J||V.rtcp.cname,trackId:N})}const f={type:"offer",sdp:this._remoteSdp.getSdp()};C.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",f),await this._pc.setRemoteDescription(f);let O=await this._pc.createAnswer();const F=_.parse(O.sdp);for(const x of i){const{trackId:N,rtpParameters:z}=x,V=l.get(N),J=F.media.find(ne=>String(ne.mid)===V);n.applyCodecParameters({offerRtpParameters:z,answerMediaObject:J})}O={type:"answer",sdp:_.write(F)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:F}),C.debug("receive() | calling pc.setLocalDescription() [answer:%o]",O),await this._pc.setLocalDescription(O);for(const x of i){const{trackId:N}=x,z=l.get(N),V=this._pc.getTransceivers().find(J=>J.mid===z);if(!V)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(z,V),s.push({localId:z,track:V.receiver.track,rtpReceiver:V.receiver})}return s}async stopReceiving(i){if(this.assertRecvDirection(),this._closed)return;for(const f of i){C.debug("stopReceiving() [localId:%s]",f);const O=this._mapMidTransceiver.get(f);if(!O)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(O.mid)}const s={type:"offer",sdp:this._remoteSdp.getSdp()};C.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);const l=await this._pc.createAnswer();C.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l);for(const f of i)this._mapMidTransceiver.delete(f)}async pauseReceiving(i){this.assertNotClosed(),this.assertRecvDirection();for(const f of i){C.debug("pauseReceiving() [localId:%s]",f);const O=this._mapMidTransceiver.get(f);if(!O)throw new Error("associated RTCRtpTransceiver not found");O.direction="inactive",this._remoteSdp.pauseMediaSection(f)}const s={type:"offer",sdp:this._remoteSdp.getSdp()};C.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);const l=await this._pc.createAnswer();C.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}async resumeReceiving(i){this.assertNotClosed(),this.assertRecvDirection();for(const f of i){C.debug("resumeReceiving() [localId:%s]",f);const O=this._mapMidTransceiver.get(f);if(!O)throw new Error("associated RTCRtpTransceiver not found");O.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(f)}const s={type:"offer",sdp:this._remoteSdp.getSdp()};C.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",s),await this._pc.setRemoteDescription(s);const l=await this._pc.createAnswer();C.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}async getReceiverStats(i){this.assertNotClosed(),this.assertRecvDirection();const s=this._mapMidTransceiver.get(i);if(!s)throw new Error("associated RTCRtpTransceiver not found");return s.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:i,label:s,protocol:l}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:f,ordered:O,maxPacketLifeTime:F,maxRetransmits:x}=i,N={negotiated:!0,id:f,ordered:O,maxPacketLifeTime:F,maxRetransmits:x,protocol:l};C.debug("receiveDataChannel() [options:%o]",N);const z=this._pc.createDataChannel(s,N);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const V={type:"offer",sdp:this._remoteSdp.getSdp()};C.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",V),await this._pc.setRemoteDescription(V);const J=await this._pc.createAnswer();if(!this._transportReady){const ne=_.parse(J.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:ne})}C.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",J),await this._pc.setLocalDescription(J),this._hasDataChannelMediaSection=!0}return{dataChannel:z}}async setupTransport({localDtlsRole:i,localSdpObject:s}){s||(s=_.parse(this._pc.localDescription.sdp));const l=n.extractDtlsParameters({sdpObject:s});l.role=i,this._remoteSdp.updateDtlsRole(i==="client"?"server":"client"),await new Promise((f,O)=>{this.safeEmit("@connect",{dtlsParameters:l},f,O)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new R.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}b.Safari12=o},3635:function(L,b,u){var P=this&&this.__createBinding||(Object.create?function(w,d,g,n){n===void 0&&(n=g);var m=Object.getOwnPropertyDescriptor(d,g);m&&!("get"in m?!d.__esModule:m.writable||m.configurable)||(m={enumerable:!0,get:function(){return d[g]}}),Object.defineProperty(w,n,m)}:function(w,d,g,n){n===void 0&&(n=g),w[n]=d[g]}),E=this&&this.__setModuleDefault||(Object.create?function(w,d){Object.defineProperty(w,"default",{enumerable:!0,value:d})}:function(w,d){w.default=d}),c=this&&this.__importStar||function(w){if(w&&w.__esModule)return w;var d={};if(w!=null)for(var g in w)g!=="default"&&Object.prototype.hasOwnProperty.call(w,g)&&P(d,w,g);return E(d,w),d};Object.defineProperty(b,"__esModule",{value:!0}),b.mangleRtpParameters=b.getCapabilities=void 0;const _=c(u(3347));b.getCapabilities=function(){const w=RTCRtpReceiver.getCapabilities(),d=_.clone(w);for(const g of d.codecs??[]){if(g.channels=g.numChannels,delete g.numChannels,g.mimeType=g.mimeType||`${g.kind}/${g.name}`,g.parameters){const n=g.parameters;n.apt&&(n.apt=Number(n.apt)),n["packetization-mode"]&&(n["packetization-mode"]=Number(n["packetization-mode"]))}for(const n of g.rtcpFeedback||[])n.parameter||(n.parameter="")}return d},b.mangleRtpParameters=function(w){const d=_.clone(w);d.mid&&(d.muxId=d.mid,delete d.mid);for(const g of d.codecs)g.channels&&(g.numChannels=g.channels,delete g.channels),g.mimeType&&!g.name&&(g.name=g.mimeType.split("/")[1]),delete g.mimeType;return d}},8954:(L,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.addNackSuppportForOpus=void 0,b.addNackSuppportForOpus=function(u){var P;for(const E of u.codecs||[])E.mimeType.toLowerCase()!=="audio/opus"&&E.mimeType.toLowerCase()!=="audio/multiopus"||(P=E.rtcpFeedback)!=null&&P.some(c=>c.type==="nack"&&!c.parameter)||(E.rtcpFeedback||(E.rtcpFeedback=[]),E.rtcpFeedback.push({type:"nack"}))}},6698:function(L,b,u){var P=this&&this.__createBinding||(Object.create?function(n,m,v,R){R===void 0&&(R=v);var k=Object.getOwnPropertyDescriptor(m,v);k&&!("get"in k?!m.__esModule:k.writable||k.configurable)||(k={enumerable:!0,get:function(){return m[v]}}),Object.defineProperty(n,R,k)}:function(n,m,v,R){R===void 0&&(R=v),n[R]=m[v]}),E=this&&this.__setModuleDefault||(Object.create?function(n,m){Object.defineProperty(n,"default",{enumerable:!0,value:m})}:function(n,m){n.default=m}),c=this&&this.__importStar||function(n){if(n&&n.__esModule)return n;var m={};if(n!=null)for(var v in n)v!=="default"&&Object.prototype.hasOwnProperty.call(n,v)&&P(m,n,v);return E(m,n),m};Object.defineProperty(b,"__esModule",{value:!0}),b.OfferMediaSection=b.AnswerMediaSection=b.MediaSection=void 0;const _=c(u(766)),w=c(u(3347));class d{constructor({iceParameters:m,iceCandidates:v,dtlsParameters:R,planB:k=!1}){if(this._mediaObject={},this._planB=k,m&&this.setIceParameters(m),v){this._mediaObject.candidates=[];for(const T of v){const S={component:1};S.foundation=T.foundation,S.ip=T.address??T.ip,S.port=T.port,S.priority=T.priority,S.transport=T.protocol,S.type=T.type,T.tcpType&&(S.tcptype=T.tcpType),this._mediaObject.candidates.push(S)}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}R&&this.setDtlsRole(R.role)}get mid(){return String(this._mediaObject.mid)}get closed(){return this._mediaObject.port===0}getObject(){return this._mediaObject}setIceParameters(m){this._mediaObject.iceUfrag=m.usernameFragment,this._mediaObject.icePwd=m.password}pause(){this._mediaObject.direction="inactive"}disable(){this.pause(),delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}close(){this.disable(),this._mediaObject.port=0}}b.MediaSection=d,b.AnswerMediaSection=class extends d{constructor({iceParameters:n,iceCandidates:m,dtlsParameters:v,sctpParameters:R,plainRtpParameters:k,planB:T=!1,offerMediaObject:S,offerRtpParameters:C,answerRtpParameters:I,codecOptions:o,extmapAllowMixed:p=!1}){switch(super({iceParameters:n,iceCandidates:m,dtlsParameters:v,planB:T}),this._mediaObject.mid=String(S.mid),this._mediaObject.type=S.type,this._mediaObject.protocol=S.protocol,k?(this._mediaObject.connection={ip:k.ip,version:k.ipVersion},this._mediaObject.port=k.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.port=7),S.type){case"audio":case"video":this._mediaObject.direction="recvonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[];for(const i of I.codecs){const s={payload:i.payloadType,codec:g(i),rate:i.clockRate};i.channels>1&&(s.encoding=i.channels),this._mediaObject.rtp.push(s);const l=w.clone(i.parameters)??{};let f=w.clone(i.rtcpFeedback)??[];if(o){const{opusStereo:F,opusFec:x,opusDtx:N,opusMaxPlaybackRate:z,opusMaxAverageBitrate:V,opusPtime:J,opusNack:ne,videoGoogleStartBitrate:ee,videoGoogleMaxBitrate:Q,videoGoogleMinBitrate:oe}=o,he=C.codecs.find(Te=>Te.payloadType===i.payloadType);switch(i.mimeType.toLowerCase()){case"audio/opus":case"audio/multiopus":F!==void 0&&(he.parameters["sprop-stereo"]=F?1:0,l.stereo=F?1:0),x!==void 0&&(he.parameters.useinbandfec=x?1:0,l.useinbandfec=x?1:0),N!==void 0&&(he.parameters.usedtx=N?1:0,l.usedtx=N?1:0),z!==void 0&&(l.maxplaybackrate=z),V!==void 0&&(l.maxaveragebitrate=V),J!==void 0&&(he.parameters.ptime=J,l.ptime=J),ne||(he.rtcpFeedback=he.rtcpFeedback.filter(Te=>Te.type!=="nack"||Te.parameter),f=f.filter(Te=>Te.type!=="nack"||Te.parameter));break;case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":ee!==void 0&&(l["x-google-start-bitrate"]=ee),Q!==void 0&&(l["x-google-max-bitrate"]=Q),oe!==void 0&&(l["x-google-min-bitrate"]=oe)}}const O={payload:i.payloadType,config:""};for(const F of Object.keys(l))O.config&&(O.config+=";"),O.config+=`${F}=${l[F]}`;O.config&&this._mediaObject.fmtp.push(O);for(const F of f)this._mediaObject.rtcpFb.push({payload:i.payloadType,type:F.type,subtype:F.parameter})}this._mediaObject.payloads=I.codecs.map(i=>i.payloadType).join(" "),this._mediaObject.ext=[];for(const i of I.headerExtensions)(S.ext||[]).some(s=>s.uri===i.uri)&&this._mediaObject.ext.push({uri:i.uri,value:i.id});if(p&&S.extmapAllowMixed==="extmap-allow-mixed"&&(this._mediaObject.extmapAllowMixed="extmap-allow-mixed"),S.simulcast){this._mediaObject.simulcast={dir1:"recv",list1:S.simulcast.list1},this._mediaObject.rids=[];for(const i of S.rids||[])i.direction==="send"&&this._mediaObject.rids.push({id:i.id,direction:"recv"})}else if(S.simulcast_03){this._mediaObject.simulcast_03={value:S.simulcast_03.value.replace(/send/g,"recv")},this._mediaObject.rids=[];for(const i of S.rids||[])i.direction==="send"&&this._mediaObject.rids.push({id:i.id,direction:"recv"})}this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize",this._planB&&this._mediaObject.type==="video"&&(this._mediaObject.xGoogleFlag="conference");break;case"application":typeof S.sctpPort=="number"?(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=R.port,this._mediaObject.maxMessageSize=R.maxMessageSize):S.sctpmap&&(this._mediaObject.payloads=R.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:R.port,maxMessageSize:R.maxMessageSize})}}setDtlsRole(n){switch(n){case"client":this._mediaObject.setup="active";break;case"server":this._mediaObject.setup="passive";break;case"auto":this._mediaObject.setup="actpass"}}resume(){this._mediaObject.direction="recvonly"}muxSimulcastStreams(n){var k;if(!this._mediaObject.simulcast||!this._mediaObject.simulcast.list1)return;const m={};for(const T of n)T.rid&&(m[T.rid]=T);const v=this._mediaObject.simulcast.list1,R=_.parseSimulcastStreamList(v);for(const T of R)for(const S of T)S.paused=!((k=m[S.scid])!=null&&k.active);this._mediaObject.simulcast.list1=R.map(T=>T.map(S=>`${S.paused?"~":""}${S.scid}`).join(",")).join(";")}};function g(n){const m=new RegExp("^(audio|video)/(.+)","i").exec(n.mimeType);if(!m)throw new TypeError("invalid codec.mimeType");return m[2]}b.OfferMediaSection=class extends d{constructor({iceParameters:n,iceCandidates:m,dtlsParameters:v,sctpParameters:R,plainRtpParameters:k,planB:T=!1,mid:S,kind:C,offerRtpParameters:I,streamId:o,trackId:p,oldDataChannelSpec:i=!1}){switch(super({iceParameters:n,iceCandidates:m,dtlsParameters:v,planB:T}),this._mediaObject.mid=String(S),this._mediaObject.type=C,k?(this._mediaObject.connection={ip:k.ip,version:k.ipVersion},this._mediaObject.protocol="RTP/AVP",this._mediaObject.port=k.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.protocol=R?"UDP/DTLS/SCTP":"UDP/TLS/RTP/SAVPF",this._mediaObject.port=7),C){case"audio":case"video":{this._mediaObject.direction="sendonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[],this._planB||(this._mediaObject.msid=`${o||"-"} ${p}`);for(const O of I.codecs){const F={payload:O.payloadType,codec:g(O),rate:O.clockRate};O.channels>1&&(F.encoding=O.channels),this._mediaObject.rtp.push(F);const x={payload:O.payloadType,config:""};for(const N of Object.keys(O.parameters))x.config&&(x.config+=";"),x.config+=`${N}=${O.parameters[N]}`;x.config&&this._mediaObject.fmtp.push(x);for(const N of O.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:O.payloadType,type:N.type,subtype:N.parameter})}this._mediaObject.payloads=I.codecs.map(O=>O.payloadType).join(" "),this._mediaObject.ext=[];for(const O of I.headerExtensions)this._mediaObject.ext.push({uri:O.uri,value:O.id});this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";const s=I.encodings[0],l=s.ssrc,f=s.rtx&&s.rtx.ssrc?s.rtx.ssrc:void 0;this._mediaObject.ssrcs=[],this._mediaObject.ssrcGroups=[],I.rtcp.cname&&this._mediaObject.ssrcs.push({id:l,attribute:"cname",value:I.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:l,attribute:"msid",value:`${o||"-"} ${p}`}),f&&(I.rtcp.cname&&this._mediaObject.ssrcs.push({id:f,attribute:"cname",value:I.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:f,attribute:"msid",value:`${o||"-"} ${p}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${l} ${f}`}));break}case"application":i?(this._mediaObject.payloads=R.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:R.port,maxMessageSize:R.maxMessageSize}):(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=R.port,this._mediaObject.maxMessageSize=R.maxMessageSize)}}setDtlsRole(n){this._mediaObject.setup="actpass"}resume(){this._mediaObject.direction="sendonly"}planBReceive({offerRtpParameters:n,streamId:m,trackId:v}){const R=n.encodings[0],k=R.ssrc,T=R.rtx&&R.rtx.ssrc?R.rtx.ssrc:void 0,S=this._mediaObject.payloads.split(" ");for(const C of n.codecs){if(S.includes(String(C.payloadType)))continue;const I={payload:C.payloadType,codec:g(C),rate:C.clockRate};C.channels>1&&(I.encoding=C.channels),this._mediaObject.rtp.push(I);const o={payload:C.payloadType,config:""};for(const p of Object.keys(C.parameters))o.config&&(o.config+=";"),o.config+=`${p}=${C.parameters[p]}`;o.config&&this._mediaObject.fmtp.push(o);for(const p of C.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:C.payloadType,type:p.type,subtype:p.parameter})}this._mediaObject.payloads+=` ${n.codecs.filter(C=>!this._mediaObject.payloads.includes(C.payloadType)).map(C=>C.payloadType).join(" ")}`,this._mediaObject.payloads=this._mediaObject.payloads.trim(),n.rtcp.cname&&this._mediaObject.ssrcs.push({id:k,attribute:"cname",value:n.rtcp.cname}),this._mediaObject.ssrcs.push({id:k,attribute:"msid",value:`${m||"-"} ${v}`}),T&&(n.rtcp.cname&&this._mediaObject.ssrcs.push({id:T,attribute:"cname",value:n.rtcp.cname}),this._mediaObject.ssrcs.push({id:T,attribute:"msid",value:`${m||"-"} ${v}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${k} ${T}`}))}planBStopReceiving({offerRtpParameters:n}){const m=n.encodings[0],v=m.ssrc,R=m.rtx&&m.rtx.ssrc?m.rtx.ssrc:void 0;this._mediaObject.ssrcs=this._mediaObject.ssrcs.filter(k=>k.id!==v&&k.id!==R),R&&(this._mediaObject.ssrcGroups=this._mediaObject.ssrcGroups.filter(k=>k.ssrcs!==`${v} ${R}`))}}},7910:function(L,b,u){var P=this&&this.__createBinding||(Object.create?function(n,m,v,R){R===void 0&&(R=v);var k=Object.getOwnPropertyDescriptor(m,v);k&&!("get"in k?!m.__esModule:k.writable||k.configurable)||(k={enumerable:!0,get:function(){return m[v]}}),Object.defineProperty(n,R,k)}:function(n,m,v,R){R===void 0&&(R=v),n[R]=m[v]}),E=this&&this.__setModuleDefault||(Object.create?function(n,m){Object.defineProperty(n,"default",{enumerable:!0,value:m})}:function(n,m){n.default=m}),c=this&&this.__importStar||function(n){if(n&&n.__esModule)return n;var m={};if(n!=null)for(var v in n)v!=="default"&&Object.prototype.hasOwnProperty.call(n,v)&&P(m,n,v);return E(m,n),m};Object.defineProperty(b,"__esModule",{value:!0}),b.RemoteSdp=void 0;const _=c(u(766)),w=u(8562),d=u(6698),g=new w.Logger("RemoteSdp");b.RemoteSdp=class{constructor({iceParameters:n,iceCandidates:m,dtlsParameters:v,sctpParameters:R,plainRtpParameters:k,planB:T=!1}){if(this._mediaSections=[],this._midToIndex=new Map,this._iceParameters=n,this._iceCandidates=m,this._dtlsParameters=v,this._sctpParameters=R,this._plainRtpParameters=k,this._planB=T,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:1e4,sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},n&&n.iceLite&&(this._sdpObject.icelite="ice-lite"),v){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};const S=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:v.fingerprints[S-1].algorithm,hash:v.fingerprints[S-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}k&&(this._sdpObject.origin.address=k.ip,this._sdpObject.origin.ipVer=k.ipVersion)}updateIceParameters(n){g.debug("updateIceParameters() [iceParameters:%o]",n),this._iceParameters=n,this._sdpObject.icelite=n.iceLite?"ice-lite":void 0;for(const m of this._mediaSections)m.setIceParameters(n)}updateDtlsRole(n){g.debug("updateDtlsRole() [role:%s]",n),this._dtlsParameters.role=n;for(const m of this._mediaSections)m.setDtlsRole(n)}getNextMediaSectionIdx(){for(let n=0;n<this._mediaSections.length;++n){const m=this._mediaSections[n];if(m.closed)return{idx:n,reuseMid:m.mid}}return{idx:this._mediaSections.length}}send({offerMediaObject:n,reuseMid:m,offerRtpParameters:v,answerRtpParameters:R,codecOptions:k,extmapAllowMixed:T=!1}){const S=new d.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,offerMediaObject:n,offerRtpParameters:v,answerRtpParameters:R,codecOptions:k,extmapAllowMixed:T});m?this._replaceMediaSection(S,m):this._midToIndex.has(S.mid)?this._replaceMediaSection(S):this._addMediaSection(S)}receive({mid:n,kind:m,offerRtpParameters:v,streamId:R,trackId:k}){const T=this._midToIndex.get(n);let S;if(T!==void 0&&(S=this._mediaSections[T]),S)S.planBReceive({offerRtpParameters:v,streamId:R,trackId:k}),this._replaceMediaSection(S);else{S=new d.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,mid:n,kind:m,offerRtpParameters:v,streamId:R,trackId:k});const C=this._mediaSections.find(I=>I.closed);C?this._replaceMediaSection(S,C.mid):this._addMediaSection(S)}}pauseMediaSection(n){this._findMediaSection(n).pause()}resumeSendingMediaSection(n){this._findMediaSection(n).resume()}resumeReceivingMediaSection(n){this._findMediaSection(n).resume()}disableMediaSection(n){this._findMediaSection(n).disable()}closeMediaSection(n){const m=this._findMediaSection(n);return n===this._firstMid?(g.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",n),this.disableMediaSection(n),!1):(m.close(),this._regenerateBundleMids(),!0)}muxMediaSectionSimulcast(n,m){const v=this._findMediaSection(n);v.muxSimulcastStreams(m),this._replaceMediaSection(v)}planBStopReceiving({mid:n,offerRtpParameters:m}){const v=this._findMediaSection(n);v.planBStopReceiving({offerRtpParameters:m}),this._replaceMediaSection(v)}sendSctpAssociation({offerMediaObject:n}){const m=new d.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:n});this._addMediaSection(m)}receiveSctpAssociation({oldDataChannelSpec:n=!1}={}){const m=new d.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application",oldDataChannelSpec:n});this._addMediaSection(m)}getSdp(){return this._sdpObject.origin.sessionVersion++,_.write(this._sdpObject)}_addMediaSection(n){this._firstMid||(this._firstMid=n.mid),this._mediaSections.push(n),this._midToIndex.set(n.mid,this._mediaSections.length-1),this._sdpObject.media.push(n.getObject()),this._regenerateBundleMids()}_replaceMediaSection(n,m){if(typeof m=="string"){const v=this._midToIndex.get(m);if(v===void 0)throw new Error(`no media section found for reuseMid '${m}'`);const R=this._mediaSections[v];this._mediaSections[v]=n,this._midToIndex.delete(R.mid),this._midToIndex.set(n.mid,v),this._sdpObject.media[v]=n.getObject(),this._regenerateBundleMids()}else{const v=this._midToIndex.get(n.mid);if(v===void 0)throw new Error(`no media section found with mid '${n.mid}'`);this._mediaSections[v]=n,this._sdpObject.media[v]=n.getObject()}}_findMediaSection(n){const m=this._midToIndex.get(n);if(m===void 0)throw new Error(`no media section found with mid '${n}'`);return this._mediaSections[m]}_regenerateBundleMids(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter(n=>!n.closed).map(n=>n.mid).join(" "))}}},2267:function(L,b,u){var P=this&&this.__createBinding||(Object.create?function(w,d,g,n){n===void 0&&(n=g);var m=Object.getOwnPropertyDescriptor(d,g);m&&!("get"in m?!d.__esModule:m.writable||m.configurable)||(m={enumerable:!0,get:function(){return d[g]}}),Object.defineProperty(w,n,m)}:function(w,d,g,n){n===void 0&&(n=g),w[n]=d[g]}),E=this&&this.__setModuleDefault||(Object.create?function(w,d){Object.defineProperty(w,"default",{enumerable:!0,value:d})}:function(w,d){w.default=d}),c=this&&this.__importStar||function(w){if(w&&w.__esModule)return w;var d={};if(w!=null)for(var g in w)g!=="default"&&Object.prototype.hasOwnProperty.call(w,g)&&P(d,w,g);return E(d,w),d};Object.defineProperty(b,"__esModule",{value:!0}),b.applyCodecParameters=b.getCname=b.extractDtlsParameters=b.extractRtpCapabilities=void 0;const _=c(u(766));b.extractRtpCapabilities=function({sdpObject:w}){const d=new Map,g=[];let n=!1,m=!1;for(const v of w.media){const R=v.type;switch(R){case"audio":if(n)continue;n=!0;break;case"video":if(m)continue;m=!0;break;default:continue}for(const k of v.rtp){const T={kind:R,mimeType:`${R}/${k.codec}`,preferredPayloadType:k.payload,clockRate:k.rate,channels:k.encoding,parameters:{},rtcpFeedback:[]};d.set(T.preferredPayloadType,T)}for(const k of v.fmtp||[]){const T=_.parseParams(k.config),S=d.get(k.payload);S&&(T&&T.hasOwnProperty("profile-level-id")&&(T["profile-level-id"]=String(T["profile-level-id"])),S.parameters=T)}for(const k of v.rtcpFb||[]){const T={type:k.type,parameter:k.subtype};if(T.parameter||delete T.parameter,k.payload!=="*"){const S=d.get(k.payload);if(!S)continue;S.rtcpFeedback.push(T)}else for(const S of d.values())S.kind!==R||/.+\/rtx$/i.test(S.mimeType)||S.rtcpFeedback.push(T)}for(const k of v.ext||[]){if(k["encrypt-uri"])continue;const T={kind:R,uri:k.uri,preferredId:k.value};g.push(T)}}return{codecs:Array.from(d.values()),headerExtensions:g}},b.extractDtlsParameters=function({sdpObject:w}){let d,g=w.setup,n=w.fingerprint;if(!g||!n){const m=(w.media||[]).find(v=>v.port!==0);m&&(g??(g=m.setup),n??(n=m.fingerprint))}if(!g)throw new Error("no a=setup found at SDP session or media level");if(!n)throw new Error("no a=fingerprint found at SDP session or media level");switch(g){case"active":d="client";break;case"passive":d="server";break;case"actpass":d="auto"}return{role:d,fingerprints:[{algorithm:n.type,value:n.hash}]}},b.getCname=function({offerMediaObject:w}){const d=(w.ssrcs||[]).find(g=>g.attribute==="cname");return d?d.value:""},b.applyCodecParameters=function({offerRtpParameters:w,answerMediaObject:d}){for(const g of w.codecs){const n=g.mimeType.toLowerCase();if(n!=="audio/opus"||!(d.rtp||[]).find(R=>R.payload===g.payloadType))continue;d.fmtp=d.fmtp||[];let m=d.fmtp.find(R=>R.payload===g.payloadType);m||(m={payload:g.payloadType,config:""},d.fmtp.push(m));const v=_.parseParams(m.config);switch(n){case"audio/opus":{const R=g.parameters["sprop-stereo"];R!==void 0&&(v.stereo=R?1:0);break}}m.config="";for(const R of Object.keys(v))m.config&&(m.config+=";"),m.config+=`${R}=${v[R]}`}}},9875:(L,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.addLegacySimulcast=b.getRtpEncodings=void 0,b.getRtpEncodings=function({offerMediaObject:u,track:P}){const E=new Set;for(const w of u.ssrcs||[])if(w.attribute==="msid"&&w.value.split(" ")[1]===P.id){const d=w.id;E.add(d)}if(E.size===0)throw new Error(`a=ssrc line with msid information not found [track.id:${P.id}]`);const c=new Map;for(const w of u.ssrcGroups||[]){if(w.semantics!=="FID")continue;let[d,g]=w.ssrcs.split(/\s+/);d=Number(d),g=Number(g),E.has(d)&&(E.delete(d),E.delete(g),c.set(d,g))}for(const w of E)c.set(w,null);const _=[];for(const[w,d]of c){const g={ssrc:w};d&&(g.rtx={ssrc:d}),_.push(g)}return _},b.addLegacySimulcast=function({offerMediaObject:u,track:P,numStreams:E}){if(E<=1)throw new TypeError("numStreams must be greater than 1");let c,_,w;if(!(u.ssrcs||[]).find(v=>v.attribute!=="msid"?!1:v.value.split(" ")[1]===P.id&&(c=v.id,w=v.value.split(" ")[0],!0)))throw new Error(`a=ssrc line with msid information not found [track.id:${P.id}]`);(u.ssrcGroups||[]).some(v=>{if(v.semantics!=="FID")return!1;const R=v.ssrcs.split(/\s+/);return Number(R[0])===c&&(_=Number(R[1]),!0)});const d=u.ssrcs.find(v=>v.attribute==="cname"&&v.id===c);if(!d)throw new Error(`a=ssrc line with cname information not found [track.id:${P.id}]`);const g=d.value,n=[],m=[];for(let v=0;v<E;++v)n.push(c+v),_&&m.push(_+v);u.ssrcGroups=u.ssrcGroups||[],u.ssrcs=u.ssrcs||[],u.ssrcGroups.push({semantics:"SIM",ssrcs:n.join(" ")});for(let v=0;v<n.length;++v){const R=n[v];u.ssrcs.push({id:R,attribute:"cname",value:g}),u.ssrcs.push({id:R,attribute:"msid",value:`${w} ${P.id}`})}for(let v=0;v<m.length;++v){const R=n[v],k=m[v];u.ssrcs.push({id:k,attribute:"cname",value:g}),u.ssrcs.push({id:k,attribute:"msid",value:`${w} ${P.id}`}),u.ssrcGroups.push({semantics:"FID",ssrcs:`${R} ${k}`})}}},9072:(L,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.addLegacySimulcast=b.getRtpEncodings=void 0,b.getRtpEncodings=function({offerMediaObject:u}){const P=new Set;for(const _ of u.ssrcs||[]){const w=_.id;P.add(w)}if(P.size===0)throw new Error("no a=ssrc lines found");const E=new Map;for(const _ of u.ssrcGroups||[]){if(_.semantics!=="FID")continue;let[w,d]=_.ssrcs.split(/\s+/);w=Number(w),d=Number(d),P.has(w)&&(P.delete(w),P.delete(d),E.set(w,d))}for(const _ of P)E.set(_,null);const c=[];for(const[_,w]of E){const d={ssrc:_};w&&(d.rtx={ssrc:w}),c.push(d)}return c},b.addLegacySimulcast=function({offerMediaObject:u,numStreams:P}){if(P<=1)throw new TypeError("numStreams must be greater than 1");const E=(u.ssrcs||[]).find(R=>R.attribute==="msid");if(!E)throw new Error("a=ssrc line with msid information not found");const[c,_]=E.value.split(" "),w=E.id;let d;(u.ssrcGroups||[]).some(R=>{if(R.semantics!=="FID")return!1;const k=R.ssrcs.split(/\s+/);return Number(k[0])===w&&(d=Number(k[1]),!0)});const g=u.ssrcs.find(R=>R.attribute==="cname");if(!g)throw new Error("a=ssrc line with cname information not found");const n=g.value,m=[],v=[];for(let R=0;R<P;++R)m.push(w+R),d&&v.push(d+R);u.ssrcGroups=[],u.ssrcs=[],u.ssrcGroups.push({semantics:"SIM",ssrcs:m.join(" ")});for(let R=0;R<m.length;++R){const k=m[R];u.ssrcs.push({id:k,attribute:"cname",value:n}),u.ssrcs.push({id:k,attribute:"msid",value:`${c} ${_}`})}for(let R=0;R<v.length;++R){const k=m[R],T=v[R];u.ssrcs.push({id:T,attribute:"cname",value:n}),u.ssrcs.push({id:T,attribute:"msid",value:`${c} ${_}`}),u.ssrcGroups.push({semantics:"FID",ssrcs:`${k} ${T}`})}}},960:function(L,b,u){var P=this&&this.__createBinding||(Object.create?function(m,v,R,k){k===void 0&&(k=R);var T=Object.getOwnPropertyDescriptor(v,R);T&&!("get"in T?!v.__esModule:T.writable||T.configurable)||(T={enumerable:!0,get:function(){return v[R]}}),Object.defineProperty(m,k,T)}:function(m,v,R,k){k===void 0&&(k=R),m[k]=v[R]}),E=this&&this.__setModuleDefault||(Object.create?function(m,v){Object.defineProperty(m,"default",{enumerable:!0,value:v})}:function(m,v){m.default=v}),c=this&&this.__importStar||function(m){if(m&&m.__esModule)return m;var v={};if(m!=null)for(var R in m)R!=="default"&&Object.prototype.hasOwnProperty.call(m,R)&&P(v,m,R);return E(v,m),v},_=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(b,"__esModule",{value:!0}),b.debug=b.parseScalabilityMode=b.detectDevice=b.Device=b.version=b.types=void 0;const w=_(u(1227));b.debug=w.default;const d=u(3120);Object.defineProperty(b,"Device",{enumerable:!0,get:function(){return d.Device}}),Object.defineProperty(b,"detectDevice",{enumerable:!0,get:function(){return d.detectDevice}});const g=c(u(53));b.types=g,b.version="3.7.7";var n=u(2770);Object.defineProperty(b,"parseScalabilityMode",{enumerable:!0,get:function(){return n.parse}})},5280:function(L,b,u){var P=this&&this.__createBinding||(Object.create?function(o,p,i,s){s===void 0&&(s=i);var l=Object.getOwnPropertyDescriptor(p,i);l&&!("get"in l?!p.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return p[i]}}),Object.defineProperty(o,s,l)}:function(o,p,i,s){s===void 0&&(s=i),o[s]=p[i]}),E=this&&this.__setModuleDefault||(Object.create?function(o,p){Object.defineProperty(o,"default",{enumerable:!0,value:p})}:function(o,p){o.default=p}),c=this&&this.__importStar||function(o){if(o&&o.__esModule)return o;var p={};if(o!=null)for(var i in o)i!=="default"&&Object.prototype.hasOwnProperty.call(o,i)&&P(p,o,i);return E(p,o),p};Object.defineProperty(b,"__esModule",{value:!0}),b.canReceive=b.canSend=b.generateProbatorRtpParameters=b.reduceCodecs=b.getSendingRemoteRtpParameters=b.getSendingRtpParameters=b.getRecvRtpCapabilities=b.getExtendedRtpCapabilities=b.validateSctpCapabilities=b.validateSctpStreamParameters=b.validateRtpParameters=b.validateRtpCapabilities=void 0;const _=c(u(4115)),w=c(u(3347));function d(o){if(typeof o!="object")throw new TypeError("params is not an object");if(o.mid&&typeof o.mid!="string")throw new TypeError("params.mid is not a string");if(!Array.isArray(o.codecs))throw new TypeError("missing params.codecs");for(const p of o.codecs)v(p);if(o.headerExtensions&&!Array.isArray(o.headerExtensions))throw new TypeError("params.headerExtensions is not an array");o.headerExtensions||(o.headerExtensions=[]);for(const p of o.headerExtensions)R(p);if(o.encodings&&!Array.isArray(o.encodings))throw new TypeError("params.encodings is not an array");o.encodings||(o.encodings=[]);for(const p of o.encodings)k(p);if(o.rtcp&&typeof o.rtcp!="object")throw new TypeError("params.rtcp is not an object");o.rtcp||(o.rtcp={}),function(p){if(typeof p!="object")throw new TypeError("rtcp is not an object");if(p.cname&&typeof p.cname!="string")throw new TypeError("invalid rtcp.cname");p.reducedSize&&typeof p.reducedSize=="boolean"||(p.reducedSize=!0)}(o.rtcp)}function g(o){const p=new RegExp("^(audio|video)/(.+)","i");if(typeof o!="object")throw new TypeError("codec is not an object");if(!o.mimeType||typeof o.mimeType!="string")throw new TypeError("missing codec.mimeType");const i=p.exec(o.mimeType);if(!i)throw new TypeError("invalid codec.mimeType");if(o.kind=i[1].toLowerCase(),o.preferredPayloadType&&typeof o.preferredPayloadType!="number")throw new TypeError("invalid codec.preferredPayloadType");if(typeof o.clockRate!="number")throw new TypeError("missing codec.clockRate");o.kind==="audio"?typeof o.channels!="number"&&(o.channels=1):delete o.channels,o.parameters&&typeof o.parameters=="object"||(o.parameters={});for(const s of Object.keys(o.parameters)){let l=o.parameters[s];if(l===void 0&&(o.parameters[s]="",l=""),typeof l!="string"&&typeof l!="number")throw new TypeError(`invalid codec parameter [key:${s}s, value:${l}]`);if(s==="apt"&&typeof l!="number")throw new TypeError("invalid codec apt parameter")}o.rtcpFeedback&&Array.isArray(o.rtcpFeedback)||(o.rtcpFeedback=[]);for(const s of o.rtcpFeedback)n(s)}function n(o){if(typeof o!="object")throw new TypeError("fb is not an object");if(!o.type||typeof o.type!="string")throw new TypeError("missing fb.type");o.parameter&&typeof o.parameter=="string"||(o.parameter="")}function m(o){if(typeof o!="object")throw new TypeError("ext is not an object");if(o.kind!=="audio"&&o.kind!=="video")throw new TypeError("invalid ext.kind");if(!o.uri||typeof o.uri!="string")throw new TypeError("missing ext.uri");if(typeof o.preferredId!="number")throw new TypeError("missing ext.preferredId");if(o.preferredEncrypt&&typeof o.preferredEncrypt!="boolean")throw new TypeError("invalid ext.preferredEncrypt");if(o.preferredEncrypt||(o.preferredEncrypt=!1),o.direction&&typeof o.direction!="string")throw new TypeError("invalid ext.direction");o.direction||(o.direction="sendrecv")}function v(o){const p=new RegExp("^(audio|video)/(.+)","i");if(typeof o!="object")throw new TypeError("codec is not an object");if(!o.mimeType||typeof o.mimeType!="string")throw new TypeError("missing codec.mimeType");const i=p.exec(o.mimeType);if(!i)throw new TypeError("invalid codec.mimeType");if(typeof o.payloadType!="number")throw new TypeError("missing codec.payloadType");if(typeof o.clockRate!="number")throw new TypeError("missing codec.clockRate");i[1].toLowerCase()==="audio"?typeof o.channels!="number"&&(o.channels=1):delete o.channels,o.parameters&&typeof o.parameters=="object"||(o.parameters={});for(const s of Object.keys(o.parameters)){let l=o.parameters[s];if(l===void 0&&(o.parameters[s]="",l=""),typeof l!="string"&&typeof l!="number")throw new TypeError(`invalid codec parameter [key:${s}s, value:${l}]`);if(s==="apt"&&typeof l!="number")throw new TypeError("invalid codec apt parameter")}o.rtcpFeedback&&Array.isArray(o.rtcpFeedback)||(o.rtcpFeedback=[]);for(const s of o.rtcpFeedback)n(s)}function R(o){if(typeof o!="object")throw new TypeError("ext is not an object");if(!o.uri||typeof o.uri!="string")throw new TypeError("missing ext.uri");if(typeof o.id!="number")throw new TypeError("missing ext.id");if(o.encrypt&&typeof o.encrypt!="boolean")throw new TypeError("invalid ext.encrypt");o.encrypt||(o.encrypt=!1),o.parameters&&typeof o.parameters=="object"||(o.parameters={});for(const p of Object.keys(o.parameters)){let i=o.parameters[p];if(i===void 0&&(o.parameters[p]="",i=""),typeof i!="string"&&typeof i!="number")throw new TypeError("invalid header extension parameter")}}function k(o){if(typeof o!="object")throw new TypeError("encoding is not an object");if(o.ssrc&&typeof o.ssrc!="number")throw new TypeError("invalid encoding.ssrc");if(o.rid&&typeof o.rid!="string")throw new TypeError("invalid encoding.rid");if(o.rtx&&typeof o.rtx!="object")throw new TypeError("invalid encoding.rtx");if(o.rtx&&typeof o.rtx.ssrc!="number")throw new TypeError("missing encoding.rtx.ssrc");if(o.dtx&&typeof o.dtx=="boolean"||(o.dtx=!1),o.scalabilityMode&&typeof o.scalabilityMode!="string")throw new TypeError("invalid encoding.scalabilityMode")}function T(o){return!!o&&/.+\/rtx$/i.test(o.mimeType)}function S(o,p,{strict:i=!1,modify:s=!1}={}){const l=o.mimeType.toLowerCase();if(l!==p.mimeType.toLowerCase()||o.clockRate!==p.clockRate||o.channels!==p.channels)return!1;switch(l){case"video/h264":if(i){if((o.parameters["packetization-mode"]||0)!==(p.parameters["packetization-mode"]||0)||!_.isSameProfile(o.parameters,p.parameters))return!1;let f;try{f=_.generateProfileLevelIdStringForAnswer(o.parameters,p.parameters)}catch{return!1}s&&(f?(o.parameters["profile-level-id"]=f,p.parameters["profile-level-id"]=f):(delete o.parameters["profile-level-id"],delete p.parameters["profile-level-id"]))}break;case"video/vp9":if(i&&(o.parameters["profile-id"]||0)!==(p.parameters["profile-id"]||0))return!1}return!0}function C(o,p){return(!o.kind||!p.kind||o.kind===p.kind)&&o.uri===p.uri}function I(o,p){const i=[];for(const s of o.rtcpFeedback||[]){const l=(p.rtcpFeedback||[]).find(f=>f.type===s.type&&(f.parameter===s.parameter||!f.parameter&&!s.parameter));l&&i.push(l)}return i}b.validateRtpCapabilities=function(o){if(typeof o!="object")throw new TypeError("caps is not an object");if(o.codecs&&!Array.isArray(o.codecs))throw new TypeError("caps.codecs is not an array");o.codecs||(o.codecs=[]);for(const p of o.codecs)g(p);if(o.headerExtensions&&!Array.isArray(o.headerExtensions))throw new TypeError("caps.headerExtensions is not an array");o.headerExtensions||(o.headerExtensions=[]);for(const p of o.headerExtensions)m(p)},b.validateRtpParameters=d,b.validateSctpStreamParameters=function(o){if(typeof o!="object")throw new TypeError("params is not an object");if(typeof o.streamId!="number")throw new TypeError("missing params.streamId");let p=!1;if(typeof o.ordered=="boolean"?p=!0:o.ordered=!0,o.maxPacketLifeTime&&typeof o.maxPacketLifeTime!="number")throw new TypeError("invalid params.maxPacketLifeTime");if(o.maxRetransmits&&typeof o.maxRetransmits!="number")throw new TypeError("invalid params.maxRetransmits");if(o.maxPacketLifeTime&&o.maxRetransmits)throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(p&&o.ordered&&(o.maxPacketLifeTime||o.maxRetransmits))throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(p||!o.maxPacketLifeTime&&!o.maxRetransmits||(o.ordered=!1),o.label&&typeof o.label!="string")throw new TypeError("invalid params.label");if(o.protocol&&typeof o.protocol!="string")throw new TypeError("invalid params.protocol")},b.validateSctpCapabilities=function(o){if(typeof o!="object")throw new TypeError("caps is not an object");if(!o.numStreams||typeof o.numStreams!="object")throw new TypeError("missing caps.numStreams");(function(p){if(typeof p!="object")throw new TypeError("numStreams is not an object");if(typeof p.OS!="number")throw new TypeError("missing numStreams.OS");if(typeof p.MIS!="number")throw new TypeError("missing numStreams.MIS")})(o.numStreams)},b.getExtendedRtpCapabilities=function(o,p){const i={codecs:[],headerExtensions:[]};for(const s of p.codecs||[]){if(T(s))continue;const l=(o.codecs||[]).find(O=>S(O,s,{strict:!0,modify:!0}));if(!l)continue;const f={mimeType:l.mimeType,kind:l.kind,clockRate:l.clockRate,channels:l.channels,localPayloadType:l.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:s.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:l.parameters,remoteParameters:s.parameters,rtcpFeedback:I(l,s)};i.codecs.push(f)}for(const s of i.codecs){const l=o.codecs.find(O=>T(O)&&O.parameters.apt===s.localPayloadType),f=p.codecs.find(O=>T(O)&&O.parameters.apt===s.remotePayloadType);l&&f&&(s.localRtxPayloadType=l.preferredPayloadType,s.remoteRtxPayloadType=f.preferredPayloadType)}for(const s of p.headerExtensions){const l=o.headerExtensions.find(O=>C(O,s));if(!l)continue;const f={kind:s.kind,uri:s.uri,sendId:l.preferredId,recvId:s.preferredId,encrypt:l.preferredEncrypt,direction:"sendrecv"};switch(s.direction){case"sendrecv":f.direction="sendrecv";break;case"recvonly":f.direction="sendonly";break;case"sendonly":f.direction="recvonly";break;case"inactive":f.direction="inactive"}i.headerExtensions.push(f)}return i},b.getRecvRtpCapabilities=function(o){const p={codecs:[],headerExtensions:[]};for(const i of o.codecs){const s={mimeType:i.mimeType,kind:i.kind,preferredPayloadType:i.remotePayloadType,clockRate:i.clockRate,channels:i.channels,parameters:i.localParameters,rtcpFeedback:i.rtcpFeedback};if(p.codecs.push(s),!i.remoteRtxPayloadType)continue;const l={mimeType:`${i.kind}/rtx`,kind:i.kind,preferredPayloadType:i.remoteRtxPayloadType,clockRate:i.clockRate,parameters:{apt:i.remotePayloadType},rtcpFeedback:[]};p.codecs.push(l)}for(const i of o.headerExtensions){if(i.direction!=="sendrecv"&&i.direction!=="recvonly")continue;const s={kind:i.kind,uri:i.uri,preferredId:i.recvId,preferredEncrypt:i.encrypt,direction:i.direction};p.headerExtensions.push(s)}return p},b.getSendingRtpParameters=function(o,p){const i={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const s of p.codecs){if(s.kind!==o)continue;const l={mimeType:s.mimeType,payloadType:s.localPayloadType,clockRate:s.clockRate,channels:s.channels,parameters:s.localParameters,rtcpFeedback:s.rtcpFeedback};if(i.codecs.push(l),s.localRtxPayloadType){const f={mimeType:`${s.kind}/rtx`,payloadType:s.localRtxPayloadType,clockRate:s.clockRate,parameters:{apt:s.localPayloadType},rtcpFeedback:[]};i.codecs.push(f)}}for(const s of p.headerExtensions){if(s.kind&&s.kind!==o||s.direction!=="sendrecv"&&s.direction!=="sendonly")continue;const l={uri:s.uri,id:s.sendId,encrypt:s.encrypt,parameters:{}};i.headerExtensions.push(l)}return i},b.getSendingRemoteRtpParameters=function(o,p){const i={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const s of p.codecs){if(s.kind!==o)continue;const l={mimeType:s.mimeType,payloadType:s.localPayloadType,clockRate:s.clockRate,channels:s.channels,parameters:s.remoteParameters,rtcpFeedback:s.rtcpFeedback};if(i.codecs.push(l),s.localRtxPayloadType){const f={mimeType:`${s.kind}/rtx`,payloadType:s.localRtxPayloadType,clockRate:s.clockRate,parameters:{apt:s.localPayloadType},rtcpFeedback:[]};i.codecs.push(f)}}for(const s of p.headerExtensions){if(s.kind&&s.kind!==o||s.direction!=="sendrecv"&&s.direction!=="sendonly")continue;const l={uri:s.uri,id:s.sendId,encrypt:s.encrypt,parameters:{}};i.headerExtensions.push(l)}if(i.headerExtensions.some(s=>s.uri==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"))for(const s of i.codecs)s.rtcpFeedback=(s.rtcpFeedback||[]).filter(l=>l.type!=="goog-remb");else if(i.headerExtensions.some(s=>s.uri==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"))for(const s of i.codecs)s.rtcpFeedback=(s.rtcpFeedback||[]).filter(l=>l.type!=="transport-cc");else for(const s of i.codecs)s.rtcpFeedback=(s.rtcpFeedback||[]).filter(l=>l.type!=="transport-cc"&&l.type!=="goog-remb");return i},b.reduceCodecs=function(o,p){const i=[];if(p){for(let s=0;s<o.length;++s)if(S(o[s],p,{strict:!0})){i.push(o[s]),T(o[s+1])&&i.push(o[s+1]);break}if(i.length===0)throw new TypeError("no matching codec found")}else i.push(o[0]),T(o[1])&&i.push(o[1]);return i},b.generateProbatorRtpParameters=function(o){d(o=w.clone(o));const p={mid:"probator",codecs:[],headerExtensions:[],encodings:[{ssrc:1234}],rtcp:{cname:"probator"}};return p.codecs.push(o.codecs[0]),p.codecs[0].payloadType=127,p.headerExtensions=o.headerExtensions,p},b.canSend=function(o,p){return p.codecs.some(i=>i.kind===o)},b.canReceive=function(o,p){if(d(o),o.codecs.length===0)return!1;const i=o.codecs[0];return p.codecs.some(s=>s.remotePayloadType===i.payloadType)}},2770:(L,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.parse=void 0;const u=new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})");b.parse=function(P){const E=u.exec(P||"");return E?{spatialLayers:Number(E[1]),temporalLayers:Number(E[2])}:{spatialLayers:1,temporalLayers:1}}},53:function(L,b,u){var P=this&&this.__createBinding||(Object.create?function(c,_,w,d){d===void 0&&(d=w);var g=Object.getOwnPropertyDescriptor(_,w);g&&!("get"in g?!_.__esModule:g.writable||g.configurable)||(g={enumerable:!0,get:function(){return _[w]}}),Object.defineProperty(c,d,g)}:function(c,_,w,d){d===void 0&&(d=w),c[d]=_[w]}),E=this&&this.__exportStar||function(c,_){for(var w in c)w==="default"||Object.prototype.hasOwnProperty.call(_,w)||P(_,c,w)};Object.defineProperty(b,"__esModule",{value:!0}),E(u(3120),b),E(u(5202),b),E(u(6569),b),E(u(9514),b),E(u(5504),b),E(u(1623),b),E(u(4879),b),E(u(7669),b),E(u(9316),b),E(u(9992),b)},3347:(L,b)=>{Object.defineProperty(b,"__esModule",{value:!0}),b.deepFreeze=b.generateRandomNumber=b.clone=void 0,b.clone=function(u){return u===void 0?void 0:Number.isNaN(u)?NaN:typeof structuredClone=="function"?structuredClone(u):JSON.parse(JSON.stringify(u))},b.generateRandomNumber=function(){return Math.round(1e7*Math.random())},b.deepFreeze=function u(P){const E=Reflect.ownKeys(P);for(const c of E){const _=P[c];(_&&typeof _=="object"||typeof _=="function")&&u(_)}return Object.freeze(P)}},7824:L=>{var b=1e3,u=60*b,P=60*u,E=24*P,c=7*E,_=365.25*E;function w(d,g,n,m){var v=g>=1.5*n;return Math.round(d/n)+" "+m+(v?"s":"")}L.exports=function(d,g){g=g||{};var n=typeof d;if(n==="string"&&d.length>0)return function(m){if(!((m=String(m)).length>100)){var v=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(m);if(v){var R=parseFloat(v[1]);switch((v[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return R*_;case"weeks":case"week":case"w":return R*c;case"days":case"day":case"d":return R*E;case"hours":case"hour":case"hrs":case"hr":case"h":return R*P;case"minutes":case"minute":case"mins":case"min":case"m":return R*u;case"seconds":case"second":case"secs":case"sec":case"s":return R*b;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return R;default:return}}}}(d);if(n==="number"&&isFinite(d))return g.long?function(m){var v=Math.abs(m);return v>=E?w(m,v,E,"day"):v>=P?w(m,v,P,"hour"):v>=u?w(m,v,u,"minute"):v>=b?w(m,v,b,"second"):m+" ms"}(d):function(m){var v=Math.abs(m);return v>=E?Math.round(m/E)+"d":v>=P?Math.round(m/P)+"h":v>=u?Math.round(m/u)+"m":v>=b?Math.round(m/b)+"s":m+"ms"}(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))}},7576:(L,b,u)=>{const{EventEmitter:P}=u(7187),E=u(3417);L.exports=class extends P{constructor(c){super(),this.setMaxListeners(1/0),this._logger=c||new E("EnhancedEventEmitter")}safeEmit(c,..._){try{this.emit(c,..._)}catch(w){this._logger.error("safeEmit() | event listener threw an error [event:%s]:%o",c,w)}}async safeEmitAsPromise(c,..._){return new Promise((w,d)=>{this.safeEmit(c,..._,w,d)})}}},3417:(L,b,u)=>{const P=u(1227),E="protoo-client";L.exports=class{constructor(c){c?(this._debug=P(`${E}:${c}`),this._warn=P(`${E}:WARN:${c}`),this._error=P(`${E}:ERROR:${c}`)):(this._debug=P(E),this._warn=P(`${E}:WARN`),this._error=P(`${E}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},6508:(L,b,u)=>{const P=u(3417),{generateRandomNumber:E}=u(5654),c=new P("Message");L.exports=class{static parse(_){let w;const d={};try{w=JSON.parse(_)}catch(g){return void c.error("parse() | invalid JSON: %s",g)}if(typeof w=="object"&&!Array.isArray(w)){if(w.request){if(d.request=!0,typeof w.method!="string")return void c.error("parse() | missing/invalid method field");if(typeof w.id!="number")return void c.error("parse() | missing/invalid id field");d.id=w.id,d.method=w.method,d.data=w.data||{}}else if(w.response){if(d.response=!0,typeof w.id!="number")return void c.error("parse() | missing/invalid id field");d.id=w.id,w.ok?(d.ok=!0,d.data=w.data||{}):(d.ok=!1,d.errorCode=w.errorCode,d.errorReason=w.errorReason)}else{if(!w.notification)return void c.error("parse() | missing request/response field");if(d.notification=!0,typeof w.method!="string")return void c.error("parse() | missing/invalid method field");d.method=w.method,d.data=w.data||{}}return d}c.error("parse() | not an object")}static createRequest(_,w){return{request:!0,id:E(),method:_,data:w||{}}}static createSuccessResponse(_,w){return{response:!0,id:_.id,ok:!0,data:w||{}}}static createErrorResponse(_,w,d){return{response:!0,id:_.id,ok:!1,errorCode:w,errorReason:d}}static createNotification(_,w){return{notification:!0,method:_,data:w||{}}}}},7502:(L,b,u)=>{const P=u(3417),E=u(7576),c=u(6508),_=new P("Peer");L.exports=class extends E{constructor(w){super(_),_.debug("constructor()"),this._closed=!1,this._transport=w,this._connected=!1,this._data={},this._sents=new Map,this._handleTransport()}get closed(){return this._closed}get connected(){return this._connected}get data(){return this._data}set data(w){throw new Error("cannot override data object")}close(){if(!this._closed){_.debug("close()"),this._closed=!0,this._connected=!1,this._transport.close();for(const w of this._sents.values())w.close();this.safeEmit("close")}}async request(w,d){const g=c.createRequest(w,d);return this._logger.debug("request() [method:%s, id:%s]",w,g.id),await this._transport.send(g),new Promise((n,m)=>{const v=1500*(15+.1*this._sents.size),R={id:g.id,method:g.method,resolve:k=>{this._sents.delete(g.id)&&(clearTimeout(R.timer),n(k))},reject:k=>{this._sents.delete(g.id)&&(clearTimeout(R.timer),m(k))},timer:setTimeout(()=>{this._sents.delete(g.id)&&m(new Error("request timeout"))},v),close:()=>{clearTimeout(R.timer),m(new Error("peer closed"))}};this._sents.set(g.id,R)})}async notify(w,d){const g=c.createNotification(w,d);this._logger.debug("notify() [method:%s]",w),await this._transport.send(g)}_handleTransport(){if(this._transport.closed)return this._closed=!0,void setTimeout(()=>{this._closed||(this._connected=!1,this.safeEmit("close"))});this._transport.on("open",()=>{this._closed||(_.debug('emit "open"'),this._connected=!0,this.safeEmit("open"))}),this._transport.on("disconnected",()=>{this._closed||(_.debug('emit "disconnected"'),this._connected=!1,this.safeEmit("disconnected"))}),this._transport.on("failed",w=>{this._closed||(_.debug('emit "failed" [currentAttempt:%s]',w),this._connected=!1,this.safeEmit("failed",w))}),this._transport.on("close",()=>{this._closed||(this._closed=!0,_.debug('emit "close"'),this._connected=!1,this.safeEmit("close"))}),this._transport.on("message",w=>{w.request?this._handleRequest(w):w.response?this._handleResponse(w):w.notification&&this._handleNotification(w)})}_handleRequest(w){try{this.emit("request",w,d=>{const g=c.createSuccessResponse(w,d);this._transport.send(g).catch(()=>{})},(d,g)=>{d instanceof Error?(g=d.message,d=500):typeof d=="number"&&g instanceof Error&&(g=g.message);const n=c.createErrorResponse(w,d,g);this._transport.send(n).catch(()=>{})})}catch(d){const g=c.createErrorResponse(w,500,String(d));this._transport.send(g).catch(()=>{})}}_handleResponse(w){const d=this._sents.get(w.id);if(d)if(w.ok)d.resolve(w.data);else{const g=new Error(w.errorReason);g.code=w.errorCode,d.reject(g)}else _.error("received response does not match any sent request [id:%s]",w.id)}_handleNotification(w){this.safeEmit("notification",w)}}},9293:(L,b,u)=>{u(7002);const P=u(7502),E=u(2165);b._z=P,b.qo=E},2165:(L,b,u)=>{const P=u(5840).w3cwebsocket,E=u(9353),c=u(3417),_=u(7576),w=u(6508),d={retries:10,factor:2,minTimeout:1e3,maxTimeout:8e3},g=new c("WebSocketTransport");L.exports=class extends _{constructor(n,m){super(g),g.debug("constructor() [url:%s, options:%o]",n,m),this._closed=!1,this._url=n,this._options=m||{},this._ws=null,this._runWebSocket()}get closed(){return this._closed}close(){if(!this._closed){g.debug("close()"),this._closed=!0,this.safeEmit("close");try{this._ws.onopen=null,this._ws.onclose=null,this._ws.onerror=null,this._ws.onmessage=null,this._ws.close()}catch(n){g.error("close() | error closing the WebSocket: %o",n)}}}async send(n){if(this._closed)throw new Error("transport closed");try{this._ws.send(JSON.stringify(n))}catch(m){throw g.warn("send() failed:%o",m),m}}_runWebSocket(){const n=E.operation(this._options.retry||d);let m=!1;n.attempt(v=>{this._closed?n.stop():(g.debug("_runWebSocket() [currentAttempt:%s]",v),this._ws=new P(this._url,"protoo",this._options.origin,this._options.headers,this._options.requestOptions,this._options.clientConfig),this._ws.onopen=()=>{this._closed||(m=!0,this.safeEmit("open"))},this._ws.onclose=R=>{if(!this._closed){if(g.warn('WebSocket "close" event [wasClean:%s, code:%s, reason:"%s"]',R.wasClean,R.code,R.reason),R.code!==4e3){if(m)return n.stop(),this.safeEmit("disconnected"),this._closed?void 0:void this._runWebSocket();if(this.safeEmit("failed",v),this._closed||n.retry(!0))return}this._closed=!0,this.safeEmit("close")}},this._ws.onerror=()=>{this._closed||g.error('WebSocket "error" event')},this._ws.onmessage=R=>{if(this._closed)return;const k=w.parse(R.data);k&&(this.listenerCount("message")!==0?this.safeEmit("message",k):g.error('no listeners for WebSocket "message" event, ignoring received message'))})})}}},5654:(L,b)=>{b.generateRandomNumber=function(){return Math.round(1e7*Math.random())}},4375:(L,b,u)=>{let P;L.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:u.g):E=>(P||(P=Promise.resolve())).then(E).catch(c=>setTimeout(()=>{throw c},0))},3196:L=>{L.exports=function(b){var u,P,E="",c=(b=function(w){return w||(w={}),{length:w.length||8,numeric:typeof w.numeric!="boolean"||w.numeric,letters:typeof w.letters!="boolean"||w.letters,special:typeof w.special=="boolean"&&w.special,exclude:Array.isArray(w.exclude)?w.exclude:[]}}(b)).length,_=(b.exclude,function(w){var d="";w.numeric&&(d+="0123456789"),w.letters&&(d+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"),w.special&&(d+="!$%^&*()_+|~-=`{}[]:;<>?,./");for(var g=0;g<=w.exclude.length;g++)d=d.replace(w.exclude[g],"");return d}(b));for(u=1;u<=c;u++)E+=_.substring(P=Math.floor(Math.random()*_.length),P+1);return E}},5666:L=>{var b=function(u){var P,E=Object.prototype,c=E.hasOwnProperty,_=typeof Symbol=="function"?Symbol:{},w=_.iterator||"@@iterator",d=_.asyncIterator||"@@asyncIterator",g=_.toStringTag||"@@toStringTag";function n(ee,Q,oe){return Object.defineProperty(ee,Q,{value:oe,enumerable:!0,configurable:!0,writable:!0}),ee[Q]}try{n({},"")}catch{n=function(Q,oe,he){return Q[oe]=he}}function m(ee,Q,oe,he){var Te=Q&&Q.prototype instanceof I?Q:I,Se=Object.create(Te.prototype),Ce=new V(he||[]);return Se._invoke=function(Re,Ee,We){var Yt=R;return function(rr,yt){if(Yt===T)throw new Error("Generator is already running");if(Yt===S){if(rr==="throw")throw yt;return ne()}for(We.method=rr,We.arg=yt;;){var yr=We.delegate;if(yr){var Kt=x(yr,We);if(Kt){if(Kt===C)continue;return Kt}}if(We.method==="next")We.sent=We._sent=We.arg;else if(We.method==="throw"){if(Yt===R)throw Yt=S,We.arg;We.dispatchException(We.arg)}else We.method==="return"&&We.abrupt("return",We.arg);Yt=T;var Tt=v(Re,Ee,We);if(Tt.type==="normal"){if(Yt=We.done?S:k,Tt.arg===C)continue;return{value:Tt.arg,done:We.done}}Tt.type==="throw"&&(Yt=S,We.method="throw",We.arg=Tt.arg)}}}(ee,oe,Ce),Se}function v(ee,Q,oe){try{return{type:"normal",arg:ee.call(Q,oe)}}catch(he){return{type:"throw",arg:he}}}u.wrap=m;var R="suspendedStart",k="suspendedYield",T="executing",S="completed",C={};function I(){}function o(){}function p(){}var i={};n(i,w,function(){return this});var s=Object.getPrototypeOf,l=s&&s(s(J([])));l&&l!==E&&c.call(l,w)&&(i=l);var f=p.prototype=I.prototype=Object.create(i);function O(ee){["next","throw","return"].forEach(function(Q){n(ee,Q,function(oe){return this._invoke(Q,oe)})})}function F(ee,Q){function oe(Te,Se,Ce,Re){var Ee=v(ee[Te],ee,Se);if(Ee.type!=="throw"){var We=Ee.arg,Yt=We.value;return Yt&&typeof Yt=="object"&&c.call(Yt,"__await")?Q.resolve(Yt.__await).then(function(rr){oe("next",rr,Ce,Re)},function(rr){oe("throw",rr,Ce,Re)}):Q.resolve(Yt).then(function(rr){We.value=rr,Ce(We)},function(rr){return oe("throw",rr,Ce,Re)})}Re(Ee.arg)}var he;this._invoke=function(Te,Se){function Ce(){return new Q(function(Re,Ee){oe(Te,Se,Re,Ee)})}return he=he?he.then(Ce,Ce):Ce()}}function x(ee,Q){var oe=ee.iterator[Q.method];if(oe===P){if(Q.delegate=null,Q.method==="throw"){if(ee.iterator.return&&(Q.method="return",Q.arg=P,x(ee,Q),Q.method==="throw"))return C;Q.method="throw",Q.arg=new TypeError("The iterator does not provide a 'throw' method")}return C}var he=v(oe,ee.iterator,Q.arg);if(he.type==="throw")return Q.method="throw",Q.arg=he.arg,Q.delegate=null,C;var Te=he.arg;return Te?Te.done?(Q[ee.resultName]=Te.value,Q.next=ee.nextLoc,Q.method!=="return"&&(Q.method="next",Q.arg=P),Q.delegate=null,C):Te:(Q.method="throw",Q.arg=new TypeError("iterator result is not an object"),Q.delegate=null,C)}function N(ee){var Q={tryLoc:ee[0]};1 in ee&&(Q.catchLoc=ee[1]),2 in ee&&(Q.finallyLoc=ee[2],Q.afterLoc=ee[3]),this.tryEntries.push(Q)}function z(ee){var Q=ee.completion||{};Q.type="normal",delete Q.arg,ee.completion=Q}function V(ee){this.tryEntries=[{tryLoc:"root"}],ee.forEach(N,this),this.reset(!0)}function J(ee){if(ee){var Q=ee[w];if(Q)return Q.call(ee);if(typeof ee.next=="function")return ee;if(!isNaN(ee.length)){var oe=-1,he=function Te(){for(;++oe<ee.length;)if(c.call(ee,oe))return Te.value=ee[oe],Te.done=!1,Te;return Te.value=P,Te.done=!0,Te};return he.next=he}}return{next:ne}}function ne(){return{value:P,done:!0}}return o.prototype=p,n(f,"constructor",p),n(p,"constructor",o),o.displayName=n(p,g,"GeneratorFunction"),u.isGeneratorFunction=function(ee){var Q=typeof ee=="function"&&ee.constructor;return!!Q&&(Q===o||(Q.displayName||Q.name)==="GeneratorFunction")},u.mark=function(ee){return Object.setPrototypeOf?Object.setPrototypeOf(ee,p):(ee.__proto__=p,n(ee,g,"GeneratorFunction")),ee.prototype=Object.create(f),ee},u.awrap=function(ee){return{__await:ee}},O(F.prototype),n(F.prototype,d,function(){return this}),u.AsyncIterator=F,u.async=function(ee,Q,oe,he,Te){Te===void 0&&(Te=Promise);var Se=new F(m(ee,Q,oe,he),Te);return u.isGeneratorFunction(Q)?Se:Se.next().then(function(Ce){return Ce.done?Ce.value:Se.next()})},O(f),n(f,g,"Generator"),n(f,w,function(){return this}),n(f,"toString",function(){return"[object Generator]"}),u.keys=function(ee){var Q=[];for(var oe in ee)Q.push(oe);return Q.reverse(),function he(){for(;Q.length;){var Te=Q.pop();if(Te in ee)return he.value=Te,he.done=!1,he}return he.done=!0,he}},u.values=J,V.prototype={constructor:V,reset:function(ee){if(this.prev=0,this.next=0,this.sent=this._sent=P,this.done=!1,this.delegate=null,this.method="next",this.arg=P,this.tryEntries.forEach(z),!ee)for(var Q in this)Q.charAt(0)==="t"&&c.call(this,Q)&&!isNaN(+Q.slice(1))&&(this[Q]=P)},stop:function(){this.done=!0;var ee=this.tryEntries[0].completion;if(ee.type==="throw")throw ee.arg;return this.rval},dispatchException:function(ee){if(this.done)throw ee;var Q=this;function oe(Ee,We){return Se.type="throw",Se.arg=ee,Q.next=Ee,We&&(Q.method="next",Q.arg=P),!!We}for(var he=this.tryEntries.length-1;he>=0;--he){var Te=this.tryEntries[he],Se=Te.completion;if(Te.tryLoc==="root")return oe("end");if(Te.tryLoc<=this.prev){var Ce=c.call(Te,"catchLoc"),Re=c.call(Te,"finallyLoc");if(Ce&&Re){if(this.prev<Te.catchLoc)return oe(Te.catchLoc,!0);if(this.prev<Te.finallyLoc)return oe(Te.finallyLoc)}else if(Ce){if(this.prev<Te.catchLoc)return oe(Te.catchLoc,!0)}else{if(!Re)throw new Error("try statement without catch or finally");if(this.prev<Te.finallyLoc)return oe(Te.finallyLoc)}}}},abrupt:function(ee,Q){for(var oe=this.tryEntries.length-1;oe>=0;--oe){var he=this.tryEntries[oe];if(he.tryLoc<=this.prev&&c.call(he,"finallyLoc")&&this.prev<he.finallyLoc){var Te=he;break}}Te&&(ee==="break"||ee==="continue")&&Te.tryLoc<=Q&&Q<=Te.finallyLoc&&(Te=null);var Se=Te?Te.completion:{};return Se.type=ee,Se.arg=Q,Te?(this.method="next",this.next=Te.finallyLoc,C):this.complete(Se)},complete:function(ee,Q){if(ee.type==="throw")throw ee.arg;return ee.type==="break"||ee.type==="continue"?this.next=ee.arg:ee.type==="return"?(this.rval=this.arg=ee.arg,this.method="return",this.next="end"):ee.type==="normal"&&Q&&(this.next=Q),C},finish:function(ee){for(var Q=this.tryEntries.length-1;Q>=0;--Q){var oe=this.tryEntries[Q];if(oe.finallyLoc===ee)return this.complete(oe.completion,oe.afterLoc),z(oe),C}},catch:function(ee){for(var Q=this.tryEntries.length-1;Q>=0;--Q){var oe=this.tryEntries[Q];if(oe.tryLoc===ee){var he=oe.completion;if(he.type==="throw"){var Te=he.arg;z(oe)}return Te}}throw new Error("illegal catch attempt")},delegateYield:function(ee,Q,oe){return this.delegate={iterator:J(ee),resultName:Q,nextLoc:oe},this.method==="next"&&(this.arg=P),C}},u}(L.exports);try{regeneratorRuntime=b}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=b:Function("r","regeneratorRuntime = r")(b)}},9353:(L,b,u)=>{L.exports=u(1846)},1846:(L,b,u)=>{var P=u(1960);b.operation=function(E){var c=b.timeouts(E);return new P(c,{forever:E&&E.forever,unref:E&&E.unref,maxRetryTime:E&&E.maxRetryTime})},b.timeouts=function(E){if(E instanceof Array)return[].concat(E);var c={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var _ in E)c[_]=E[_];if(c.minTimeout>c.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var w=[],d=0;d<c.retries;d++)w.push(this.createTimeout(d,c));return E&&E.forever&&!w.length&&w.push(this.createTimeout(d,c)),w.sort(function(g,n){return g-n}),w},b.createTimeout=function(E,c){var _=c.randomize?Math.random()+1:1,w=Math.round(_*c.minTimeout*Math.pow(c.factor,E));return w=Math.min(w,c.maxTimeout)},b.wrap=function(E,c,_){if(c instanceof Array&&(_=c,c=null),!_)for(var w in _=[],E)typeof E[w]=="function"&&_.push(w);for(var d=0;d<_.length;d++){var g=_[d],n=E[g];E[g]=(function(m){var v=b.operation(c),R=Array.prototype.slice.call(arguments,1),k=R.pop();R.push(function(T){v.retry(T)||(T&&(arguments[0]=v.mainError()),k.apply(this,arguments))}),v.attempt(function(){m.apply(E,R)})}).bind(E,n),E[g].options=c}}},1960:L=>{function b(u,P){typeof P=="boolean"&&(P={forever:P}),this._originalTimeouts=JSON.parse(JSON.stringify(u)),this._timeouts=u,this._options=P||{},this._maxRetryTime=P&&P.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}L.exports=b,b.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts},b.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timeouts=[],this._cachedTimeouts=null},b.prototype.retry=function(u){if(this._timeout&&clearTimeout(this._timeout),!u)return!1;var P=new Date().getTime();if(u&&P-this._operationStart>=this._maxRetryTime)return this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(u);var E=this._timeouts.shift();if(E===void 0){if(!this._cachedTimeouts)return!1;this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),E=this._timeouts.shift()}var c=this,_=setTimeout(function(){c._attempts++,c._operationTimeoutCb&&(c._timeout=setTimeout(function(){c._operationTimeoutCb(c._attempts)},c._operationTimeout),c._options.unref&&c._timeout.unref()),c._fn(c._attempts)},E);return this._options.unref&&_.unref(),!0},b.prototype.attempt=function(u,P){this._fn=u,P&&(P.timeout&&(this._operationTimeout=P.timeout),P.cb&&(this._operationTimeoutCb=P.cb));var E=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){E._operationTimeoutCb()},E._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},b.prototype.try=function(u){console.log("Using RetryOperation.try() is deprecated"),this.attempt(u)},b.prototype.start=function(u){console.log("Using RetryOperation.start() is deprecated"),this.attempt(u)},b.prototype.start=b.prototype.try,b.prototype.errors=function(){return this._errors},b.prototype.attempts=function(){return this._attempts},b.prototype.mainError=function(){if(this._errors.length===0)return null;for(var u={},P=null,E=0,c=0;c<this._errors.length;c++){var _=this._errors[c],w=_.message,d=(u[w]||0)+1;u[w]=d,d>=E&&(P=_,E=d)}return P}},6692:L=>{var b=L.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(u){return u.encoding?"rtpmap:%d %s/%s/%s":u.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(u){return u.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(u){return u.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(u){return"extmap:%d"+(u.direction?"/%s":"%v")+(u["encrypt-uri"]?" %s":"%v")+" %s"+(u.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(u){return u.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(u){var P="candidate:%s %d %s %d %s %d typ %s";return P+=u.raddr!=null?" raddr %s rport %d":"%v%v",P+=u.tcptype!=null?" tcptype %s":"%v",u.generation!=null&&(P+=" generation %d"),P+=u["network-id"]!=null?" network-id %d":"%v",P+=u["network-cost"]!=null?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(u){var P="ssrc:%d";return u.attribute!=null&&(P+=" %s",u.value!=null&&(P+=":%s")),P}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(u){return u.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(u){return u.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(u){return"imageattr:%s %s %s"+(u.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(u){return"simulcast:%s %s"+(u.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(u){return"ts-refclk:%s"+(u.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(u){var P="mediaclk:";return P+=u.id!=null?"id=%s %s":"%v%s",P+=u.mediaClockValue!=null?"=%s":"",P+=u.rateNumerator!=null?" rate=%s":"",P+=u.rateDenominator!=null?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(b).forEach(function(u){b[u].forEach(function(P){P.reg||(P.reg=/(.*)/),P.format||(P.format="%s")})})},766:(L,b,u)=>{var P=u(962),E=u(5776);b.write=E,b.parse=P.parse,b.parseParams=P.parseParams,b.parseFmtpConfig=P.parseFmtpConfig,b.parsePayloads=P.parsePayloads,b.parseRemoteCandidates=P.parseRemoteCandidates,b.parseImageAttributes=P.parseImageAttributes,b.parseSimulcastStreamList=P.parseSimulcastStreamList},962:(L,b,u)=>{var P=function(d){return String(Number(d))===d?Number(d):d},E=function(d,g,n){var m=d.name&&d.names;d.push&&!g[d.push]?g[d.push]=[]:m&&!g[d.name]&&(g[d.name]={});var v=d.push?{}:m?g[d.name]:g;(function(R,k,T,S){if(S&&!T)k[S]=P(R[1]);else for(var C=0;C<T.length;C+=1)R[C+1]!=null&&(k[T[C]]=P(R[C+1]))})(n.match(d.reg),v,d.names,d.name),d.push&&g[d.push].push(v)},c=u(6692),_=RegExp.prototype.test.bind(/^([a-z])=(.*)/);b.parse=function(d){var g={},n=[],m=g;return d.split(/(\r\n|\r|\n)/).filter(_).forEach(function(v){var R=v[0],k=v.slice(2);R==="m"&&(n.push({rtp:[],fmtp:[]}),m=n[n.length-1]);for(var T=0;T<(c[R]||[]).length;T+=1){var S=c[R][T];if(S.reg.test(k))return E(S,m,k)}}),g.media=n,g};var w=function(d,g){var n=g.split(/=(.+)/,2);return n.length===2?d[n[0]]=P(n[1]):n.length===1&&g.length>1&&(d[n[0]]=void 0),d};b.parseParams=function(d){return d.split(/;\s?/).reduce(w,{})},b.parseFmtpConfig=b.parseParams,b.parsePayloads=function(d){return d.toString().split(" ").map(Number)},b.parseRemoteCandidates=function(d){for(var g=[],n=d.split(" ").map(P),m=0;m<n.length;m+=3)g.push({component:n[m],ip:n[m+1],port:n[m+2]});return g},b.parseImageAttributes=function(d){return d.split(" ").map(function(g){return g.substring(1,g.length-1).split(",").reduce(w,{})})},b.parseSimulcastStreamList=function(d){return d.split(";").map(function(g){return g.split(",").map(function(n){var m,v=!1;return n[0]!=="~"?m=P(n):(m=P(n.substring(1,n.length)),v=!0),{scid:m,paused:v}})})}},5776:(L,b,u)=>{var P=u(6692),E=/%[sdv%]/g,c=function(g){var n=1,m=arguments,v=m.length;return g.replace(E,function(R){if(n>=v)return R;var k=m[n];switch(n+=1,R){case"%%":return"%";case"%s":return String(k);case"%d":return Number(k);case"%v":return""}})},_=function(g,n,m){var v=[g+"="+(n.format instanceof Function?n.format(n.push?m:m[n.name]):n.format)];if(n.names)for(var R=0;R<n.names.length;R+=1){var k=n.names[R];n.name?v.push(m[n.name][k]):v.push(m[n.names[R]])}else v.push(m[n.name]);return c.apply(null,v)},w=["v","o","s","i","u","e","p","c","b","t","r","z","a"],d=["i","c","b","a"];L.exports=function(g,n){n=n||{},g.version==null&&(g.version=0),g.name==null&&(g.name=" "),g.media.forEach(function(k){k.payloads==null&&(k.payloads="")});var m=n.outerOrder||w,v=n.innerOrder||d,R=[];return m.forEach(function(k){P[k].forEach(function(T){T.name in g&&g[T.name]!=null?R.push(_(k,T,g)):T.push in g&&g[T.push]!=null&&g[T.push].forEach(function(S){R.push(_(k,T,S))})})}),g.media.forEach(function(k){R.push(_("m",P.m[0],k)),v.forEach(function(T){P[T].forEach(function(S){S.name in k&&k[S.name]!=null?R.push(_(T,S,k)):S.push in k&&k[S.push]!=null&&k[S.push].forEach(function(C){R.push(_(T,S,C))})})})}),R.join(`\r
`)+`\r
`}},2238:function(L,b,u){var P;(function(E,c){var _="function",w="undefined",d="object",g="string",n="major",m="model",v="name",R="type",k="vendor",T="version",S="architecture",C="console",I="mobile",o="tablet",p="smarttv",i="wearable",s="embedded",l="Amazon",f="Apple",O="ASUS",F="BlackBerry",x="Firefox",N="Google",z="Huawei",V="LG",J="Microsoft",ne="Motorola",ee="Opera",Q="Samsung",oe="Sharp",he="Sony",Te="Xiaomi",Se="Zebra",Ce="Facebook",Re="Chromium OS",Ee="Mac OS",We=function(Gt){for(var ut={},_t=0;_t<Gt.length;_t++)ut[Gt[_t].toUpperCase()]=Gt[_t];return ut},Yt=function(Gt,ut){return typeof Gt===g&&rr(ut).indexOf(rr(Gt))!==-1},rr=function(Gt){return Gt.toLowerCase()},yt=function(Gt,ut){if(typeof Gt===g)return Gt=Gt.replace(/^\s\s*/,""),typeof ut===w?Gt:Gt.substring(0,500)},yr=function(Gt,ut){for(var _t,fr,Ft,Qt,Br,xe,De=0;De<ut.length&&!Br;){var gr=ut[De],nr=ut[De+1];for(_t=fr=0;_t<gr.length&&!Br&&gr[_t];)if(Br=gr[_t++].exec(Gt))for(Ft=0;Ft<nr.length;Ft++)xe=Br[++fr],typeof(Qt=nr[Ft])===d&&Qt.length>0?Qt.length===2?typeof Qt[1]==_?this[Qt[0]]=Qt[1].call(this,xe):this[Qt[0]]=Qt[1]:Qt.length===3?typeof Qt[1]!==_||Qt[1].exec&&Qt[1].test?this[Qt[0]]=xe?xe.replace(Qt[1],Qt[2]):c:this[Qt[0]]=xe?Qt[1].call(this,xe,Qt[2]):c:Qt.length===4&&(this[Qt[0]]=xe?Qt[3].call(this,xe.replace(Qt[1],Qt[2])):c):this[Qt]=xe||c;De+=2}},Kt=function(Gt,ut){for(var _t in ut)if(typeof ut[_t]===d&&ut[_t].length>0){for(var fr=0;fr<ut[_t].length;fr++)if(Yt(ut[_t][fr],Gt))return _t==="?"?c:_t}else if(Yt(ut[_t],Gt))return _t==="?"?c:_t;return ut.hasOwnProperty("*")?ut["*"]:Gt},Tt={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Gr={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[T,[v,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[T,[v,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[v,T],[/opios[\/ ]+([\w\.]+)/i],[T,[v,"Opera Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[T,[v,"Opera GX"]],[/\bopr\/([\w\.]+)/i],[T,[v,ee]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[T,[v,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[v,T],[/quark(?:pc)?\/([-\w\.]+)/i],[T,[v,"Quark"]],[/\bddg\/([\w\.]+)/i],[T,[v,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[T,[v,"UCBrowser"]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[T,[v,"WeChat"]],[/konqueror\/([\w\.]+)/i],[T,[v,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[T,[v,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[T,[v,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[T,[v,"Smart Lenovo Browser"]],[/(avast|avg)\/([\w\.]+)/i],[[v,/(.+)/,"$1 Secure Browser"],T],[/\bfocus\/([\w\.]+)/i],[T,[v,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[T,[v,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[T,[v,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[T,[v,"Dolphin"]],[/coast\/([\w\.]+)/i],[T,[v,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[T,[v,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[T,[v,x]],[/\bqihu|(qi?ho?o?|360)browser/i],[[v,"360 Browser"]],[/\b(qq)\/([\w\.]+)/i],[[v,/(.+)/,"$1Browser"],T],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[v,/(.+)/,"$1 Browser"],T],[/samsungbrowser\/([\w\.]+)/i],[T,[v,"Samsung Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[v,/_/g," "],T],[/metasr[\/ ]?([\d\.]+)/i],[T,[v,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[v,"Sogou Mobile"],T],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[v,T],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[v],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[v,Ce],T],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[v,T],[/\bgsa\/([\w\.]+) .*safari\//i],[T,[v,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[T,[v,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[T,[v,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[v,"Chrome WebView"],T],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[T,[v,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[v,T],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[T,[v,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[T,v],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[v,[T,Kt,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[v,T],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[v,"Netscape"],T],[/(wolvic)\/([\w\.]+)/i],[v,T],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[T,[v,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[v,[T,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[v,[T,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[S,"amd64"]],[/(ia32(?=;))/i],[[S,rr]],[/((?:i[346]|x)86)[;\)]/i],[[S,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[S,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[S,"armhf"]],[/windows (ce|mobile); ppc;/i],[[S,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[S,/ower/,"",rr]],[/(sun4\w)[;\)]/i],[[S,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[S,rr]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[m,[k,Q],[R,o]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[m,[k,Q],[R,I]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[m,[k,f],[R,I]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[m,[k,f],[R,o]],[/(macintosh);/i],[m,[k,f]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[m,[k,oe],[R,I]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[m,[k,z],[R,o]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[m,[k,z],[R,I]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[m,/_/g," "],[k,Te],[R,I]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[m,/_/g," "],[k,Te],[R,o]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[m,[k,"OPPO"],[R,I]],[/\b(opd2\d{3}a?) bui/i],[m,[k,"OPPO"],[R,o]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[m,[k,"Vivo"],[R,I]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[m,[k,"Realme"],[R,I]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[m,[k,ne],[R,I]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[m,[k,ne],[R,o]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[m,[k,V],[R,o]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[m,[k,V],[R,I]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[m,[k,"Lenovo"],[R,o]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[m,/_/g," "],[k,"Nokia"],[R,I]],[/(pixel c)\b/i],[m,[k,N],[R,o]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[m,[k,N],[R,I]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[m,[k,he],[R,I]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[m,"Xperia Tablet"],[k,he],[R,o]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[m,[k,"OnePlus"],[R,I]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[m,[k,l],[R,o]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[m,/(.+)/g,"Fire Phone $1"],[k,l],[R,I]],[/(playbook);[-\w\),; ]+(rim)/i],[m,k,[R,o]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[m,[k,F],[R,I]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[m,[k,O],[R,o]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[m,[k,O],[R,I]],[/(nexus 9)/i],[m,[k,"HTC"],[R,o]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[k,[m,/_/g," "],[R,I]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[m,[k,"TCL"],[R,o]],[/(itel) ((\w+))/i],[[k,rr],m,[R,Kt,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[m,[k,"Acer"],[R,o]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[m,[k,"Meizu"],[R,I]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[m,[k,"Ulefone"],[R,I]],[/droid.+; (a(?:015|06[35]|142p?))/i],[m,[k,"Nothing"],[R,I]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[k,m,[R,I]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[k,m,[R,o]],[/(surface duo)/i],[m,[k,J],[R,o]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[m,[k,"Fairphone"],[R,I]],[/(u304aa)/i],[m,[k,"AT&T"],[R,I]],[/\bsie-(\w*)/i],[m,[k,"Siemens"],[R,I]],[/\b(rct\w+) b/i],[m,[k,"RCA"],[R,o]],[/\b(venue[\d ]{2,7}) b/i],[m,[k,"Dell"],[R,o]],[/\b(q(?:mv|ta)\w+) b/i],[m,[k,"Verizon"],[R,o]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[m,[k,"Barnes & Noble"],[R,o]],[/\b(tm\d{3}\w+) b/i],[m,[k,"NuVision"],[R,o]],[/\b(k88) b/i],[m,[k,"ZTE"],[R,o]],[/\b(nx\d{3}j) b/i],[m,[k,"ZTE"],[R,I]],[/\b(gen\d{3}) b.+49h/i],[m,[k,"Swiss"],[R,I]],[/\b(zur\d{3}) b/i],[m,[k,"Swiss"],[R,o]],[/\b((zeki)?tb.*\b) b/i],[m,[k,"Zeki"],[R,o]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[k,"Dragon Touch"],m,[R,o]],[/\b(ns-?\w{0,9}) b/i],[m,[k,"Insignia"],[R,o]],[/\b((nxa|next)-?\w{0,9}) b/i],[m,[k,"NextBook"],[R,o]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[k,"Voice"],m,[R,I]],[/\b(lvtel\-)?(v1[12]) b/i],[[k,"LvTel"],m,[R,I]],[/\b(ph-1) /i],[m,[k,"Essential"],[R,I]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[m,[k,"Envizen"],[R,o]],[/\b(trio[-\w\. ]+) b/i],[m,[k,"MachSpeed"],[R,o]],[/\btu_(1491) b/i],[m,[k,"Rotor"],[R,o]],[/(shield[\w ]+) b/i],[m,[k,"Nvidia"],[R,o]],[/(sprint) (\w+)/i],[k,m,[R,I]],[/(kin\.[onetw]{3})/i],[[m,/\./g," "],[k,J],[R,I]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[m,[k,Se],[R,o]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[m,[k,Se],[R,I]],[/smart-tv.+(samsung)/i],[k,[R,p]],[/hbbtv.+maple;(\d+)/i],[[m,/^/,"SmartTV"],[k,Q],[R,p]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[k,V],[R,p]],[/(apple) ?tv/i],[k,[m,"Apple TV"],[R,p]],[/crkey/i],[[m,"Chromecast"],[k,N],[R,p]],[/droid.+aft(\w+)( bui|\))/i],[m,[k,l],[R,p]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[m,[k,oe],[R,p]],[/(bravia[\w ]+)( bui|\))/i],[m,[k,he],[R,p]],[/(mitv-\w{5}) bui/i],[m,[k,Te],[R,p]],[/Hbbtv.*(technisat) (.*);/i],[k,m,[R,p]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[k,yt],[m,yt],[R,p]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[R,p]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[k,m,[R,C]],[/droid.+; (shield) bui/i],[m,[k,"Nvidia"],[R,C]],[/(playstation [345portablevi]+)/i],[m,[k,he],[R,C]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[m,[k,J],[R,C]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[m,[k,Q],[R,i]],[/((pebble))app/i],[k,m,[R,i]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[m,[k,f],[R,i]],[/droid.+; (glass) \d/i],[m,[k,N],[R,i]],[/droid.+; (wt63?0{2,3})\)/i],[m,[k,Se],[R,i]],[/(quest( \d| pro)?)/i],[m,[k,Ce],[R,i]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[k,[R,s]],[/(aeobc)\b/i],[m,[k,l],[R,s]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[m,[R,I]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[m,[R,o]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[R,o]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[R,I]],[/(android[-\w\. ]{0,9});.+buil/i],[m,[k,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[T,[v,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[T,[v,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[v,T],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[T,v]],os:[[/microsoft (windows) (vista|xp)/i],[v,T],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[v,[T,Kt,Tt]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[T,Kt,Tt],[v,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[T,/_/g,"."],[v,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[v,Ee],[T,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[T,v],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[v,T],[/\(bb(10);/i],[T,[v,F]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[T,[v,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[T,[v,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[T,[v,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[T,[v,"watchOS"]],[/crkey\/([\d\.]+)/i],[T,[v,"Chromecast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[v,Re],T],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[v,T],[/(sunos) ?([\w\.\d]*)/i],[[v,"Solaris"],T],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[v,T]]},ft=function(Gt,ut){if(typeof Gt===d&&(ut=Gt,Gt=c),!(this instanceof ft))return new ft(Gt,ut).getResult();var _t=typeof E!==w&&E.navigator?E.navigator:c,fr=Gt||(_t&&_t.userAgent?_t.userAgent:""),Ft=_t&&_t.userAgentData?_t.userAgentData:c,Qt=ut?function(xe,De){var gr={};for(var nr in xe)De[nr]&&De[nr].length%2==0?gr[nr]=De[nr].concat(xe[nr]):gr[nr]=xe[nr];return gr}(Gr,ut):Gr,Br=_t&&_t.userAgent==fr;return this.getBrowser=function(){var xe,De={};return De.name=c,De.version=c,yr.call(De,fr,Qt.browser),De.major=typeof(xe=De.version)===g?xe.replace(/[^\d\.]/g,"").split(".")[0]:c,Br&&_t&&_t.brave&&typeof _t.brave.isBrave==_&&(De.name="Brave"),De},this.getCPU=function(){var xe={};return xe.architecture=c,yr.call(xe,fr,Qt.cpu),xe},this.getDevice=function(){var xe={};return xe.vendor=c,xe.model=c,xe.type=c,yr.call(xe,fr,Qt.device),Br&&!xe.type&&Ft&&Ft.mobile&&(xe.type=I),Br&&xe.model=="Macintosh"&&_t&&typeof _t.standalone!==w&&_t.maxTouchPoints&&_t.maxTouchPoints>2&&(xe.model="iPad",xe.type=o),xe},this.getEngine=function(){var xe={};return xe.name=c,xe.version=c,yr.call(xe,fr,Qt.engine),xe},this.getOS=function(){var xe={};return xe.name=c,xe.version=c,yr.call(xe,fr,Qt.os),Br&&!xe.name&&Ft&&Ft.platform&&Ft.platform!="Unknown"&&(xe.name=Ft.platform.replace(/chrome os/i,Re).replace(/macos/i,Ee)),xe},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return fr},this.setUA=function(xe){return fr=typeof xe===g&&xe.length>500?yt(xe,500):xe,this},this.setUA(fr),this};ft.VERSION="1.0.39",ft.BROWSER=We([v,T,n]),ft.CPU=We([S]),ft.DEVICE=We([m,k,R,C,I,p,o,i,s]),ft.ENGINE=ft.OS=We([v,T]),typeof b!==w?(L.exports&&(b=L.exports=ft),b.UAParser=ft):u.amdO?(P=(function(){return ft}).call(b,u,b,L))===c||(L.exports=P):typeof E!==w&&(E.UAParser=ft);var Dt=typeof E!==w&&(E.jQuery||E.Zepto);if(Dt&&!Dt.ua){var Qr=new ft;Dt.ua=Qr.getResult(),Dt.ua.get=function(){return Qr.getUA()},Dt.ua.set=function(Gt){Qr.setUA(Gt);var ut=Qr.getResult();for(var _t in ut)Dt.ua[_t]=ut[_t]}}})(typeof window=="object"?window:this)},5840:(L,b,u)=>{var P;if(typeof globalThis=="object")P=globalThis;else try{P=u(284)}catch{}finally{if(P||typeof window>"u"||(P=window),!P)throw new Error("Could not determine global this")}var E=P.WebSocket||P.MozWebSocket,c=u(9387);function _(w,d){return d?new E(w,d):new E(w)}E&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(w){Object.defineProperty(_,w,{get:function(){return E[w]}})}),L.exports={w3cwebsocket:E?_:null,version:c}},9387:(L,b,u)=>{L.exports=u(9794).version},7147:(L,b,u)=>{u.r(b),u.d(b,{DOMException:()=>O,Headers:()=>k,Request:()=>i,Response:()=>l,fetch:()=>F});var P=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||u.g!==void 0&&u.g||{},E="URLSearchParams"in P,c="Symbol"in P&&"iterator"in Symbol,_="FileReader"in P&&"Blob"in P&&function(){try{return new Blob,!0}catch{return!1}}(),w="FormData"in P,d="ArrayBuffer"in P;if(d)var g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],n=ArrayBuffer.isView||function(x){return x&&g.indexOf(Object.prototype.toString.call(x))>-1};function m(x){if(typeof x!="string"&&(x=String(x)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(x)||x==="")throw new TypeError('Invalid character in header field name: "'+x+'"');return x.toLowerCase()}function v(x){return typeof x!="string"&&(x=String(x)),x}function R(x){var N={next:function(){var z=x.shift();return{done:z===void 0,value:z}}};return c&&(N[Symbol.iterator]=function(){return N}),N}function k(x){this.map={},x instanceof k?x.forEach(function(N,z){this.append(z,N)},this):Array.isArray(x)?x.forEach(function(N){if(N.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+N.length);this.append(N[0],N[1])},this):x&&Object.getOwnPropertyNames(x).forEach(function(N){this.append(N,x[N])},this)}function T(x){if(!x._noBody)return x.bodyUsed?Promise.reject(new TypeError("Already read")):void(x.bodyUsed=!0)}function S(x){return new Promise(function(N,z){x.onload=function(){N(x.result)},x.onerror=function(){z(x.error)}})}function C(x){var N=new FileReader,z=S(N);return N.readAsArrayBuffer(x),z}function I(x){if(x.slice)return x.slice(0);var N=new Uint8Array(x.byteLength);return N.set(new Uint8Array(x)),N.buffer}function o(){return this.bodyUsed=!1,this._initBody=function(x){var N;this.bodyUsed=this.bodyUsed,this._bodyInit=x,x?typeof x=="string"?this._bodyText=x:_&&Blob.prototype.isPrototypeOf(x)?this._bodyBlob=x:w&&FormData.prototype.isPrototypeOf(x)?this._bodyFormData=x:E&&URLSearchParams.prototype.isPrototypeOf(x)?this._bodyText=x.toString():d&&_&&(N=x)&&DataView.prototype.isPrototypeOf(N)?(this._bodyArrayBuffer=I(x.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):d&&(ArrayBuffer.prototype.isPrototypeOf(x)||n(x))?this._bodyArrayBuffer=I(x):this._bodyText=x=Object.prototype.toString.call(x):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof x=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):E&&URLSearchParams.prototype.isPrototypeOf(x)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},_&&(this.blob=function(){var x=T(this);if(x)return x;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var x=T(this);return x||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(_)return this.blob().then(C);throw new Error("could not read as ArrayBuffer")},this.text=function(){var x,N,z,V,J,ne=T(this);if(ne)return ne;if(this._bodyBlob)return x=this._bodyBlob,N=new FileReader,z=S(N),V=/charset=([A-Za-z0-9_-]+)/.exec(x.type),J=V?V[1]:"utf-8",N.readAsText(x,J),z;if(this._bodyArrayBuffer)return Promise.resolve(function(ee){for(var Q=new Uint8Array(ee),oe=new Array(Q.length),he=0;he<Q.length;he++)oe[he]=String.fromCharCode(Q[he]);return oe.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},w&&(this.formData=function(){return this.text().then(s)}),this.json=function(){return this.text().then(JSON.parse)},this}k.prototype.append=function(x,N){x=m(x),N=v(N);var z=this.map[x];this.map[x]=z?z+", "+N:N},k.prototype.delete=function(x){delete this.map[m(x)]},k.prototype.get=function(x){return x=m(x),this.has(x)?this.map[x]:null},k.prototype.has=function(x){return this.map.hasOwnProperty(m(x))},k.prototype.set=function(x,N){this.map[m(x)]=v(N)},k.prototype.forEach=function(x,N){for(var z in this.map)this.map.hasOwnProperty(z)&&x.call(N,this.map[z],z,this)},k.prototype.keys=function(){var x=[];return this.forEach(function(N,z){x.push(z)}),R(x)},k.prototype.values=function(){var x=[];return this.forEach(function(N){x.push(N)}),R(x)},k.prototype.entries=function(){var x=[];return this.forEach(function(N,z){x.push([z,N])}),R(x)},c&&(k.prototype[Symbol.iterator]=k.prototype.entries);var p=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function i(x,N){if(!(this instanceof i))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var z,V,J=(N=N||{}).body;if(x instanceof i){if(x.bodyUsed)throw new TypeError("Already read");this.url=x.url,this.credentials=x.credentials,N.headers||(this.headers=new k(x.headers)),this.method=x.method,this.mode=x.mode,this.signal=x.signal,J||x._bodyInit==null||(J=x._bodyInit,x.bodyUsed=!0)}else this.url=String(x);if(this.credentials=N.credentials||this.credentials||"same-origin",!N.headers&&this.headers||(this.headers=new k(N.headers)),this.method=(z=N.method||this.method||"GET",V=z.toUpperCase(),p.indexOf(V)>-1?V:z),this.mode=N.mode||this.mode||null,this.signal=N.signal||this.signal||function(){if("AbortController"in P)return new AbortController().signal}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&J)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(J),!(this.method!=="GET"&&this.method!=="HEAD"||N.cache!=="no-store"&&N.cache!=="no-cache")){var ne=/([?&])_=[^&]*/;ne.test(this.url)?this.url=this.url.replace(ne,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function s(x){var N=new FormData;return x.trim().split("&").forEach(function(z){if(z){var V=z.split("="),J=V.shift().replace(/\+/g," "),ne=V.join("=").replace(/\+/g," ");N.append(decodeURIComponent(J),decodeURIComponent(ne))}}),N}function l(x,N){if(!(this instanceof l))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(N||(N={}),this.type="default",this.status=N.status===void 0?200:N.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=N.statusText===void 0?"":""+N.statusText,this.headers=new k(N.headers),this.url=N.url||"",this._initBody(x)}i.prototype.clone=function(){return new i(this,{body:this._bodyInit})},o.call(i.prototype),o.call(l.prototype),l.prototype.clone=function(){return new l(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new k(this.headers),url:this.url})},l.error=function(){var x=new l(null,{status:200,statusText:""});return x.ok=!1,x.status=0,x.type="error",x};var f=[301,302,303,307,308];l.redirect=function(x,N){if(f.indexOf(N)===-1)throw new RangeError("Invalid status code");return new l(null,{status:N,headers:{location:x}})};var O=P.DOMException;try{new O}catch{(O=function(N,z){this.message=N,this.name=z;var V=Error(N);this.stack=V.stack}).prototype=Object.create(Error.prototype),O.prototype.constructor=O}function F(x,N){return new Promise(function(z,V){var J=new i(x,N);if(J.signal&&J.signal.aborted)return V(new O("Aborted","AbortError"));var ne=new XMLHttpRequest;function ee(){ne.abort()}if(ne.onload=function(){var oe,he,Te={statusText:ne.statusText,headers:(oe=ne.getAllResponseHeaders()||"",he=new k,oe.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(Ce){return Ce.indexOf(`
`)===0?Ce.substr(1,Ce.length):Ce}).forEach(function(Ce){var Re=Ce.split(":"),Ee=Re.shift().trim();if(Ee){var We=Re.join(":").trim();try{he.append(Ee,We)}catch(Yt){console.warn("Response "+Yt.message)}}}),he)};J.url.indexOf("file://")===0&&(ne.status<200||ne.status>599)?Te.status=200:Te.status=ne.status,Te.url="responseURL"in ne?ne.responseURL:Te.headers.get("X-Request-URL");var Se="response"in ne?ne.response:ne.responseText;setTimeout(function(){z(new l(Se,Te))},0)},ne.onerror=function(){setTimeout(function(){V(new TypeError("Network request failed"))},0)},ne.ontimeout=function(){setTimeout(function(){V(new TypeError("Network request timed out"))},0)},ne.onabort=function(){setTimeout(function(){V(new O("Aborted","AbortError"))},0)},ne.open(J.method,function(oe){try{return oe===""&&P.location.href?P.location.href:oe}catch{return oe}}(J.url),!0),J.credentials==="include"?ne.withCredentials=!0:J.credentials==="omit"&&(ne.withCredentials=!1),"responseType"in ne&&(_?ne.responseType="blob":d&&(ne.responseType="arraybuffer")),N&&typeof N.headers=="object"&&!(N.headers instanceof k||P.Headers&&N.headers instanceof P.Headers)){var Q=[];Object.getOwnPropertyNames(N.headers).forEach(function(oe){Q.push(m(oe)),ne.setRequestHeader(oe,v(N.headers[oe]))}),J.headers.forEach(function(oe,he){Q.indexOf(he)===-1&&ne.setRequestHeader(he,oe)})}else J.headers.forEach(function(oe,he){ne.setRequestHeader(he,oe)});J.signal&&(J.signal.addEventListener("abort",ee),ne.onreadystatechange=function(){ne.readyState===4&&J.signal.removeEventListener("abort",ee)}),ne.send(J._bodyInit===void 0?null:J._bodyInit)})}F.polyfill=!0,P.fetch||(P.fetch=F,P.Headers=k,P.Request=i,P.Response=l)},2480:()=>{},907:(L,b,u)=>{function P(E,c){(c==null||c>E.length)&&(c=E.length);for(var _=0,w=new Array(c);_<c;_++)w[_]=E[_];return w}u.d(b,{Z:()=>P})},5861:(L,b,u)=>{function P(c,_,w,d,g,n,m){try{var v=c[n](m),R=v.value}catch(k){return void w(k)}v.done?_(R):Promise.resolve(R).then(d,g)}function E(c){return function(){var _=this,w=arguments;return new Promise(function(d,g){var n=c.apply(_,w);function m(R){P(n,d,g,m,v,"next",R)}function v(R){P(n,d,g,m,v,"throw",R)}m(void 0)})}}u.d(b,{Z:()=>E})},5671:(L,b,u)=>{function P(E,c){if(!(E instanceof c))throw new TypeError("Cannot call a class as a function")}u.d(b,{Z:()=>P})},3144:(L,b,u)=>{function P(c,_){for(var w=0;w<_.length;w++){var d=_[w];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(c,d.key,d)}}function E(c,_,w){return _&&P(c.prototype,_),w&&P(c,w),Object.defineProperty(c,"prototype",{writable:!1}),c}u.d(b,{Z:()=>E})},4942:(L,b,u)=>{function P(E,c,_){return c in E?Object.defineProperty(E,c,{value:_,enumerable:!0,configurable:!0,writable:!0}):E[c]=_,E}u.d(b,{Z:()=>P})},885:(L,b,u)=>{u.d(b,{Z:()=>E});var P=u(181);function E(c,_){return function(w){if(Array.isArray(w))return w}(c)||function(w,d){var g=w==null?null:typeof Symbol<"u"&&w[Symbol.iterator]||w["@@iterator"];if(g!=null){var n,m,v=[],R=!0,k=!1;try{for(g=g.call(w);!(R=(n=g.next()).done)&&(v.push(n.value),!d||v.length!==d);R=!0);}catch(T){k=!0,m=T}finally{try{R||g.return==null||g.return()}finally{if(k)throw m}}return v}}(c,_)||(0,P.Z)(c,_)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},2982:(L,b,u)=>{u.d(b,{Z:()=>c});var P=u(907),E=u(181);function c(_){return function(w){if(Array.isArray(w))return(0,P.Z)(w)}(_)||function(w){if(typeof Symbol<"u"&&w[Symbol.iterator]!=null||w["@@iterator"]!=null)return Array.from(w)}(_)||(0,E.Z)(_)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},1002:(L,b,u)=>{function P(E){return P=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},P(E)}u.d(b,{Z:()=>P})},181:(L,b,u)=>{u.d(b,{Z:()=>E});var P=u(907);function E(c,_){if(c){if(typeof c=="string")return(0,P.Z)(c,_);var w=Object.prototype.toString.call(c).slice(8,-1);return w==="Object"&&c.constructor&&(w=c.constructor.name),w==="Map"||w==="Set"?Array.from(c):w==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w)?(0,P.Z)(c,_):void 0}}},7002:L=>{L.exports=JSON.parse('{"name":"protoo-client","version":"4.0.6","description":"protoo JavaScript client module","author":"Iñaki Baz Castillo <ibc@aliax.net>","homepage":"https://protoo.versatica.com","license":"MIT","repository":{"type":"git","url":"https://github.com/ibc/protoo.git"},"main":"lib/index.js","keywords":["nodejs","browser","websocket"],"engines":{"node":">=8.0.0"},"scripts":{"lint":"eslint -c .eslintrc.js lib"},"dependencies":{"debug":"^4.3.1","events":"^3.2.0","retry":"^0.12.0"},"devDependencies":{"eslint":"^5.16.0"},"optionalDependencies":{"websocket":"^1.0.33"}}')},9794:L=>{L.exports={version:"1.0.34"}}},h={};function y(L){var b=h[L];if(b!==void 0)return b.exports;var u=h[L]={exports:{}};return a[L].call(u.exports,u,u.exports,y),u.exports}y.amdO={},y.n=L=>{var b=L&&L.__esModule?()=>L.default:()=>L;return y.d(b,{a:b}),b},y.d=(L,b)=>{for(var u in b)y.o(b,u)&&!y.o(L,u)&&Object.defineProperty(L,u,{enumerable:!0,get:b[u]})},y.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),y.o=(L,b)=>Object.prototype.hasOwnProperty.call(L,b),y.r=L=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(L,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(L,"__esModule",{value:!0})};var j={};return(()=>{y.r(j),y.d(j,{CameraDeviceInfo:()=>vo,DeviceInfo:()=>ds,MicrophoneDeviceInfo:()=>_o,VideoSDK:()=>Pc,ZujoSDK:()=>s_});var L=y(1002),b=y(5861),u=y(5671),P=y(3144),E=y(4942),c=y(7757),_=y.n(c),w=y(1206),d=y.n(w);function g(D,M){var A=Object.keys(D);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(D);M&&($=$.filter(function(X){return Object.getOwnPropertyDescriptor(D,X).enumerable})),A.push.apply(A,$)}return A}function n(D){for(var M=1;M<arguments.length;M++){var A=arguments[M]!=null?arguments[M]:{};M%2?g(Object(A),!0).forEach(function($){(0,E.Z)(D,$,A[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(A)):g(Object(A)).forEach(function($){Object.defineProperty(D,$,Object.getOwnPropertyDescriptor(A,$))})}return D}function m(D){return"Minified Redux error #"+D+"; visit https://redux.js.org/Errors?code="+D+" for the full message or use the non-minified dev environment for full errors. "}var v=typeof Symbol=="function"&&Symbol.observable||"@@observable",R=function(){return Math.random().toString(36).substring(7).split("").join(".")},k={INIT:"@@redux/INIT"+R(),REPLACE:"@@redux/REPLACE"+R(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+R()}};function T(D){if(typeof D!="object"||D===null)return!1;for(var M=D;Object.getPrototypeOf(M)!==null;)M=Object.getPrototypeOf(M);return Object.getPrototypeOf(D)===M}function S(D,M,A){var $;if(typeof M=="function"&&typeof A=="function"||typeof A=="function"&&typeof arguments[3]=="function")throw new Error(m(0));if(typeof M=="function"&&A===void 0&&(A=M,M=void 0),A!==void 0){if(typeof A!="function")throw new Error(m(1));return A(S)(D,M)}if(typeof D!="function")throw new Error(m(2));var X=D,ce=M,ae=[],le=ae,pe=!1;function G(){le===ae&&(le=ae.slice())}function Z(){if(pe)throw new Error(m(3));return ce}function te(Me){if(typeof Me!="function")throw new Error(m(4));if(pe)throw new Error(m(5));var ke=!0;return G(),le.push(Me),function(){if(ke){if(pe)throw new Error(m(6));ke=!1,G();var Ne=le.indexOf(Me);le.splice(Ne,1),ae=null}}}function Y(Me){if(!T(Me))throw new Error(m(7));if(Me.type===void 0)throw new Error(m(8));if(pe)throw new Error(m(9));try{pe=!0,ce=X(ce,Me)}finally{pe=!1}for(var ke=ae=le,Ne=0;Ne<ke.length;Ne++)(0,ke[Ne])();return Me}function ve(Me){if(typeof Me!="function")throw new Error(m(10));X=Me,Y({type:k.REPLACE})}function Be(){var Me,ke=te;return(Me={subscribe:function(Ne){if(typeof Ne!="object"||Ne===null)throw new Error(m(11));function de(){Ne.next&&Ne.next(Z())}return de(),{unsubscribe:ke(de)}}})[v]=function(){return this},Me}return Y({type:k.INIT}),($={dispatch:Y,subscribe:te,getState:Z,replaceReducer:ve})[v]=Be,$}function C(){for(var D=arguments.length,M=new Array(D),A=0;A<D;A++)M[A]=arguments[A];return M.length===0?function($){return $}:M.length===1?M[0]:M.reduce(function($,X){return function(){return $(X.apply(void 0,arguments))}})}function I(){for(var D=arguments.length,M=new Array(D),A=0;A<D;A++)M[A]=arguments[A];return function($){return function(){var X=$.apply(void 0,arguments),ce=function(){throw new Error(m(15))},ae={getState:X.getState,dispatch:function(){return ce.apply(void 0,arguments)}},le=M.map(function(pe){return pe(ae)});return ce=C.apply(void 0,le)(X.dispatch),n(n({},X),{},{dispatch:ce})}}}function o(D){return function(M){var A=M.dispatch,$=M.getState;return function(X){return function(ce){return typeof ce=="function"?ce(A,$,D):X(ce)}}}}var p=o();p.withExtraArgument=o;const i=p;var s=y(3196),l=y.n(s);function f(D,M){var A=Object.keys(D);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(D);M&&($=$.filter(function(X){return Object.getOwnPropertyDescriptor(D,X).enumerable})),A.push.apply(A,$)}return A}function O(D){for(var M=1;M<arguments.length;M++){var A=arguments[M]!=null?arguments[M]:{};M%2?f(Object(A),!0).forEach(function($){(0,E.Z)(D,$,A[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(A)):f(Object(A)).forEach(function($){Object.defineProperty(D,$,Object.getOwnPropertyDescriptor(A,$))})}return D}var F={url:null,state:"new",activeSpeakerId:null,statsPeerId:null,faceDetection:!1};const x=function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:F,M=arguments.length>1?arguments[1]:void 0;switch(M.type){case"SET_ROOM_URL":var A=M.payload.url;return O(O({},D),{},{url:A});case"SET_ROOM_STATE":var $=M.payload.state;return O(O({},D),{},$==="connected"?{state:$}:{state:$,activeSpeakerId:null,statsPeerId:null});case"SET_ROOM_ACTIVE_SPEAKER":var X=M.payload.peerId;return O(O({},D),{},{activeSpeakerId:X});case"SET_ROOM_STATS_PEER_ID":var ce=M.payload.peerId;return D.statsPeerId===ce?O(O({},D),{},{statsPeerId:null}):O(O({},D),{},{statsPeerId:ce});case"SET_FACE_DETECTION":var ae=M.payload;return O(O({},D),{},{faceDetection:ae});case"REMOVE_PEER":var le=M.payload.peerId,pe=O({},D);return le&&le===D.activeSpeakerId&&(pe.activeSpeakerId=null),le&&le===D.statsPeerId&&(pe.statsPeerId=null),pe;default:return D}};function N(D,M){var A=Object.keys(D);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(D);M&&($=$.filter(function(X){return Object.getOwnPropertyDescriptor(D,X).enumerable})),A.push.apply(A,$)}return A}function z(D){for(var M=1;M<arguments.length;M++){var A=arguments[M]!=null?arguments[M]:{};M%2?N(Object(A),!0).forEach(function($){(0,E.Z)(D,$,A[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(A)):N(Object(A)).forEach(function($){Object.defineProperty(D,$,Object.getOwnPropertyDescriptor(A,$))})}return D}var V={id:null,displayName:null,displayNameSet:!1,device:null,canSendMic:!1,canSendWebcam:!1,canChangeWebcam:!1,webcamInProgress:!1,shareInProgress:!1,audioOnly:!1,audioOnlyInProgress:!1,audioMuted:!1,restartIceInProgress:!1};const J=function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:V,M=arguments.length>1?arguments[1]:void 0;switch(M.type){case"SET_ROOM_STATE":var A=M.payload.state;return A==="closed"?z(z({},D),{},{webcamInProgress:!1,shareInProgress:!1,audioOnly:!1,audioOnlyInProgress:!1,audioMuted:!1,restartIceInProgress:!1}):D;case"SET_ME":var $=M.payload,X=$.peerId,ce=$.displayName,ae=$.displayNameSet,le=$.device;return z(z({},D),{},{id:X,displayName:ce,displayNameSet:ae,device:le});case"SET_MEDIA_CAPABILITIES":var pe=M.payload,G=pe.canSendMic,Z=pe.canSendWebcam;return z(z({},D),{},{canSendMic:G,canSendWebcam:Z});case"SET_CAN_CHANGE_WEBCAM":var te=M.payload;return z(z({},D),{},{canChangeWebcam:te});case"SET_WEBCAM_IN_PROGRESS":var Y=M.payload.flag;return z(z({},D),{},{webcamInProgress:Y});case"SET_SHARE_IN_PROGRESS":var ve=M.payload.flag;return z(z({},D),{},{shareInProgress:ve});case"SET_DISPLAY_NAME":var Be=M.payload.displayName;return Be||(Be=D.displayName),z(z({},D),{},{displayName:Be,displayNameSet:!0});case"SET_AUDIO_ONLY_STATE":var Me=M.payload.enabled;return z(z({},D),{},{audioOnly:Me});case"SET_AUDIO_ONLY_IN_PROGRESS":var ke=M.payload.flag;return z(z({},D),{},{audioOnlyInProgress:ke});case"SET_AUDIO_MUTED_STATE":var Ne=M.payload.enabled;return z(z({},D),{},{audioMuted:Ne});case"SET_RESTART_ICE_IN_PROGRESS":var de=M.payload.flag;return z(z({},D),{},{restartIceInProgress:de});default:return D}};function ne(D,M){var A=Object.keys(D);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(D);M&&($=$.filter(function(X){return Object.getOwnPropertyDescriptor(D,X).enumerable})),A.push.apply(A,$)}return A}function ee(D){for(var M=1;M<arguments.length;M++){var A=arguments[M]!=null?arguments[M]:{};M%2?ne(Object(A),!0).forEach(function($){(0,E.Z)(D,$,A[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(A)):ne(Object(A)).forEach(function($){Object.defineProperty(D,$,Object.getOwnPropertyDescriptor(A,$))})}return D}var Q={};const oe=function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Q,M=arguments.length>1?arguments[1]:void 0;switch(M.type){case"SET_ROOM_STATE":var A=M.payload.state;return A==="closed"?{}:D;case"ADD_PRODUCER":var $=M.payload.producer;return ee(ee({},D),{},(0,E.Z)({},$.id,$));case"REMOVE_PRODUCER":var X=M.payload.producerId,ce=ee({},D);return delete ce[X],ce;case"SET_PRODUCER_PAUSED":var ae=M.payload.producerId,le=D[ae],pe=ee(ee({},le),{},{paused:!0});return ee(ee({},D),{},(0,E.Z)({},ae,pe));case"SET_PRODUCER_RESUMED":var G=M.payload.producerId,Z=D[G],te=ee(ee({},Z),{},{paused:!1});return ee(ee({},D),{},(0,E.Z)({},G,te));case"SET_PRODUCER_TRACK":var Y=M.payload,ve=Y.producerId,Be=Y.track,Me=D[ve],ke=ee(ee({},Me),{},{track:Be});return ee(ee({},D),{},(0,E.Z)({},ve,ke));case"SET_PRODUCER_SCORE":var Ne=M.payload,de=Ne.producerId,ge=Ne.score,Ve=D[de];if(!Ve)return D;var Ge=ee(ee({},Ve),{},{score:ge});return ee(ee({},D),{},(0,E.Z)({},de,Ge));default:return D}};function he(D,M){var A=Object.keys(D);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(D);M&&($=$.filter(function(X){return Object.getOwnPropertyDescriptor(D,X).enumerable})),A.push.apply(A,$)}return A}function Te(D){for(var M=1;M<arguments.length;M++){var A=arguments[M]!=null?arguments[M]:{};M%2?he(Object(A),!0).forEach(function($){(0,E.Z)(D,$,A[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(A)):he(Object(A)).forEach(function($){Object.defineProperty(D,$,Object.getOwnPropertyDescriptor(A,$))})}return D}var Se={};const Ce=function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Se,M=arguments.length>1?arguments[1]:void 0;switch(M.type){case"SET_ROOM_STATE":var A=M.payload.state;return A==="closed"?{}:D;case"ADD_DATA_PRODUCER":var $=M.payload.dataProducer;return Te(Te({},D),{},(0,E.Z)({},$.id,$));case"REMOVE_DATA_PRODUCER":var X=M.payload.dataProducerId,ce=Te({},D);return delete ce[X],ce;default:return D}};var Re=y(2982);function Ee(D,M){var A=Object.keys(D);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(D);M&&($=$.filter(function(X){return Object.getOwnPropertyDescriptor(D,X).enumerable})),A.push.apply(A,$)}return A}function We(D){for(var M=1;M<arguments.length;M++){var A=arguments[M]!=null?arguments[M]:{};M%2?Ee(Object(A),!0).forEach(function($){(0,E.Z)(D,$,A[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(A)):Ee(Object(A)).forEach(function($){Object.defineProperty(D,$,Object.getOwnPropertyDescriptor(A,$))})}return D}var Yt={};function rr(D,M){var A=Object.keys(D);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(D);M&&($=$.filter(function(X){return Object.getOwnPropertyDescriptor(D,X).enumerable})),A.push.apply(A,$)}return A}function yt(D){for(var M=1;M<arguments.length;M++){var A=arguments[M]!=null?arguments[M]:{};M%2?rr(Object(A),!0).forEach(function($){(0,E.Z)(D,$,A[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(A)):rr(Object(A)).forEach(function($){Object.defineProperty(D,$,Object.getOwnPropertyDescriptor(A,$))})}return D}var yr={};function Kt(D,M){var A=Object.keys(D);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(D);M&&($=$.filter(function(X){return Object.getOwnPropertyDescriptor(D,X).enumerable})),A.push.apply(A,$)}return A}function Tt(D){for(var M=1;M<arguments.length;M++){var A=arguments[M]!=null?arguments[M]:{};M%2?Kt(Object(A),!0).forEach(function($){(0,E.Z)(D,$,A[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(A)):Kt(Object(A)).forEach(function($){Object.defineProperty(D,$,Object.getOwnPropertyDescriptor(A,$))})}return D}var Gr={},ft=[];const Dt=function(D){for(var M=Object.keys(D),A={},$=0;$<M.length;$++){var X=M[$];typeof D[X]=="function"&&(A[X]=D[X])}var ce,ae=Object.keys(A);try{(function(le){Object.keys(le).forEach(function(pe){var G=le[pe];if(G(void 0,{type:k.INIT})===void 0)throw new Error(m(12));if(G(void 0,{type:k.PROBE_UNKNOWN_ACTION()})===void 0)throw new Error(m(13))})})(A)}catch(le){ce=le}return function(le,pe){if(le===void 0&&(le={}),ce)throw ce;for(var G=!1,Z={},te=0;te<ae.length;te++){var Y=ae[te],ve=A[Y],Be=le[Y],Me=ve(Be,pe);if(Me===void 0)throw pe&&pe.type,new Error(m(14));Z[Y]=Me,G=G||Me!==Be}return(G=G||ae.length!==Object.keys(le).length)?Z:le}}({room:x,me:J,producers:oe,dataProducers:Ce,peers:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Yt,M=arguments.length>1?arguments[1]:void 0;switch(M.type){case"SET_ROOM_STATE":var A=M.payload.state;return A==="closed"?{}:D;case"ADD_PEER":var $=M.payload.peer;return We(We({},D),{},(0,E.Z)({},$.id,$));case"REMOVE_PEER":var X=M.payload.peerId,ce=We({},D);return delete ce[X],ce;case"SET_PEER_DISPLAY_NAME":var ae=M.payload,le=ae.displayName,pe=ae.peerId,G=D[pe];if(!G)throw new Error("no Peer found");var Z=We(We({},G),{},{displayName:le});return We(We({},D),{},(0,E.Z)({},Z.id,Z));case"ADD_CONSUMER":var te=M.payload,Y=te.consumer,ve=te.peerId,Be=D[ve];if(!Be)return We({},D);var Me=[].concat((0,Re.Z)(Be.consumers),[Y.id]),ke=We(We({},Be),{},{consumers:Me});return We(We({},D),{},(0,E.Z)({},ke.id,ke));case"REMOVE_CONSUMER":var Ne=M.payload,de=Ne.consumerId,ge=Ne.peerId,Ve=D[ge];if(!Ve)return D;var Ge=Ve.consumers.indexOf(de);if(Ge===-1)throw new Error("Consumer not found");var ot=Ve.consumers.slice();ot.splice(Ge,1);var pt=We(We({},Ve),{},{consumers:ot});return We(We({},D),{},(0,E.Z)({},pt.id,pt));case"ADD_DATA_CONSUMER":var ht=M.payload,Ct=ht.dataConsumer,je=ht.peerId;if(!je)return D;var jt=D[je];if(!jt)return We({},D);var Pn=[].concat((0,Re.Z)(jt.dataConsumers),[Ct.id]),mt=We(We({},jt),{},{dataConsumers:Pn});return We(We({},D),{},(0,E.Z)({},mt.id,mt));case"REMOVE_DATA_CONSUMER":var bn=M.payload,Ya=bn.dataConsumerId,Xa=bn.peerId;if(!Xa)return D;var Ta=D[Xa];if(!Ta)return D;var pn=Ta.dataConsumers.indexOf(Ya);if(pn===-1)throw new Error("DataConsumer not found");var gs=Ta.dataConsumers.slice();gs.splice(pn,1);var Qs=We(We({},Ta),{},{dataConsumers:gs});return We(We({},D),{},(0,E.Z)({},Qs.id,Qs));default:return D}},consumers:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:yr,M=arguments.length>1?arguments[1]:void 0;switch(M.type){case"SET_ROOM_STATE":var A=M.payload.state;return A==="closed"?{}:D;case"ADD_CONSUMER":var $=M.payload.consumer;return yt(yt({},D),{},(0,E.Z)({},$.id,$));case"REMOVE_CONSUMER":var X=M.payload.consumerId,ce=yt({},D);return delete ce[X],ce;case"SET_CONSUMER_PAUSED":var ae,le=M.payload,pe=le.consumerId,G=le.originator,Z=D[pe];return ae=yt(yt({},Z),{},G==="local"?{locallyPaused:!0}:{remotelyPaused:!0}),yt(yt({},D),{},(0,E.Z)({},pe,ae));case"SET_CONSUMER_RESUMED":var te,Y=M.payload,ve=Y.consumerId,Be=Y.originator,Me=D[ve];return te=yt(yt({},Me),{},Be==="local"?{locallyPaused:!1}:{remotelyPaused:!1}),yt(yt({},D),{},(0,E.Z)({},ve,te));case"SET_CONSUMER_CURRENT_LAYERS":var ke=M.payload,Ne=ke.consumerId,de=ke.spatialLayer,ge=ke.temporalLayer,Ve=D[Ne],Ge=yt(yt({},Ve),{},{currentSpatialLayer:de,currentTemporalLayer:ge});return yt(yt({},D),{},(0,E.Z)({},Ne,Ge));case"SET_CONSUMER_PREFERRED_LAYERS":var ot=M.payload,pt=ot.consumerId,ht=ot.spatialLayer,Ct=ot.temporalLayer,je=D[pt],jt=yt(yt({},je),{},{preferredSpatialLayer:ht,preferredTemporalLayer:Ct});return yt(yt({},D),{},(0,E.Z)({},pt,jt));case"SET_CONSUMER_PRIORITY":var Pn=M.payload,mt=Pn.consumerId,bn=Pn.priority,Ya=D[mt],Xa=yt(yt({},Ya),{},{priority:bn});return yt(yt({},D),{},(0,E.Z)({},mt,Xa));case"SET_CONSUMER_TRACK":var Ta=M.payload,pn=Ta.consumerId,gs=Ta.track,Qs=D[pn],Vl=yt(yt({},Qs),{},{track:gs});return yt(yt({},D),{},(0,E.Z)({},pn,Vl));case"SET_CONSUMER_SCORE":var Oc=M.payload,$l=Oc.consumerId,Gl=Oc.score,Zl=D[$l];if(!Zl)return D;var o_=yt(yt({},Zl),{},{score:Gl});return yt(yt({},D),{},(0,E.Z)({},$l,o_));default:return D}},dataConsumers:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Gr,M=arguments.length>1?arguments[1]:void 0;switch(M.type){case"SET_ROOM_STATE":var A=M.payload.state;return A==="closed"?{}:D;case"ADD_DATA_CONSUMER":var $=M.payload.dataConsumer;return Tt(Tt({},D),{},(0,E.Z)({},$.id,$));case"REMOVE_DATA_CONSUMER":var X=M.payload.dataConsumerId,ce=Tt({},D);return delete ce[X],ce;default:return D}},notifications:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ft,M=arguments.length>1?arguments[1]:void 0;switch(M.type){case"ADD_NOTIFICATION":var A=M.payload.notification;return[].concat((0,Re.Z)(D),[A]);case"REMOVE_NOTIFICATION":var $=M.payload.notificationId;return D.filter(function(X){return X.id!==$});case"REMOVE_ALL_NOTIFICATIONS":return[];default:return D}}});var Qr=y(3003);function Gt(D,M,A){if(!M.has(D))throw new TypeError("attempted to "+A+" private field on non-instance");return M.get(D)}function ut(D,M){return function(A,$){return $.get?$.get.call(A):$.value}(D,Gt(D,M,"get"))}function _t(D,M,A){return function($,X,ce){if(X.set)X.set.call($,ce);else{if(!X.writable)throw new TypeError("attempted to set read only private field");X.value=ce}}(D,Gt(D,M,"set"),A),A}var fr=y(7187),Ft=y(885),Qt=(y(3003).default,(0,P.Z)(function D(){(0,u.Z)(this,D),this.roomClient=null})),Br=new(function(){function D(){(0,u.Z)(this,D),D.instance||(D.instance=new Qt)}return(0,P.Z)(D,[{key:"getInstance",value:function(){return D.instance}}]),D}());Object.freeze(Br);var xe=Br.getInstance(),De=function(){function D(M){(0,u.Z)(this,D),this.id=M.id,this.kind=M.track.kind,this.codec=M.codec,this.track=M.track,this.producerOrConsumer=M.instance,M.appData&&M.appData.share===!0&&M.track.kind==="video"&&(this.kind="share"),M.appData&&M.appData.share===!0&&M.track.kind==="audio"&&(this.kind="shareAudio")}return(0,P.Z)(D,[{key:"pause",value:function(){xe.roomClient._pauseConsumer(this.producerOrConsumer)}},{key:"resume",value:function(){xe.roomClient._resumeConsumer(this.producerOrConsumer)}},{key:"paused",get:function(){return this.producerOrConsumer.paused}}]),D}();function gr(D,M){var A=typeof Symbol<"u"&&D[Symbol.iterator]||D["@@iterator"];if(!A){if(Array.isArray(D)||(A=function(pe,G){if(pe){if(typeof pe=="string")return nr(pe,G);var Z=Object.prototype.toString.call(pe).slice(8,-1);if(Z==="Object"&&pe.constructor&&(Z=pe.constructor.name),Z==="Map"||Z==="Set")return Array.from(pe);if(Z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Z))return nr(pe,G)}}(D))||M){A&&(D=A);var $=0,X=function(){};return{s:X,n:function(){return $>=D.length?{done:!0}:{done:!1,value:D[$++]}},e:function(pe){throw pe},f:X}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ce,ae=!0,le=!1;return{s:function(){A=A.call(D)},n:function(){var pe=A.next();return ae=pe.done,pe},e:function(pe){le=!0,ce=pe},f:function(){try{ae||A.return==null||A.return()}finally{if(le)throw ce}}}}function nr(D,M){(M==null||M>D.length)&&(M=D.length);for(var A=0,$=new Array(M);A<M;A++)$[A]=D[A];return $}var un="stream-enabled",On="stream-disabled",jn="media-status-changed",Zt="video-quality-changed",Nr=function(){function D(ae){var le=this;(0,u.Z)(this,D),(0,E.Z)(this,"captureImage",(0,b.Z)(_().mark(function pe(){var G,Z,te,Y,ve,Be,Me,ke,Ne=arguments;return _().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:G=Ne.length>0&&Ne[0]!==void 0?Ne[0]:{},Z=G.height,te=G.width,de.prev=1,Y=(0,Re.Z)(le.streams.values()),ve=gr(Y),de.prev=4,ve.s();case 6:if((Be=ve.n()).done){de.next=21;break}if((Me=Be.value).kind!="video"){de.next=19;break}return de.prev=9,de.delegateYield(_().mark(function ge(){var Ve,Ge,ot,pt;return _().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:return(Ve=new MediaStream).addTrack(Me.track),(Ge=document.createElement("video")).srcObject=Ve,Ge.playsInline=!0,(ot=document.createElement("canvas")).id="canvasId",ht.next=9,new Promise(function(Ct,je){Ge.addEventListener("loadeddata",(0,b.Z)(_().mark(function jt(){var Pn,mt,bn,Ya,Xa,Ta;return _().wrap(function(pn){for(;;)switch(pn.prev=pn.next){case 0:return Pn=Ge.videoWidth,mt=Ge.videoHeight,bn=16/9,Z==null&&te==null&&(Z=mt,te=Pn),Z==null&&Z==null||(Z<=0||Z>mt)&&(Z=mt),te==null&&te==null||(te<=0||te>Pn)&&(te=Pn),Z==null&&(Z=te/bn),te==null&&(te=Z*bn),ot.width=te,ot.height=Z,pn.prev=9,pn.next=12,Ge.play();case 12:document.body.appendChild(Ge),Ya=(ot.width-Pn*bn)/2,Xa=(ot.height-mt*bn)/2,ot.getContext("2d").clearRect(0,0,Ya/2,Xa/2),ot.getContext("2d").drawImage(Ge,0,0),Ta=ot.toDataURL("image/jpeg").split(";base64,")[1],document.body.appendChild(ot),document.body.removeChild(ot),document.body.removeChild(Ge),Ct(Ta),pn.next=28;break;case 24:pn.prev=24,pn.t0=pn.catch(9),je(pn.t0),console.log("error in video",pn.t0);case 28:case"end":return pn.stop()}},jt,null,[[9,24]])})))});case 9:return pt=ht.sent,ht.abrupt("return",{v:pt});case 11:case"end":return ht.stop()}},ge)})(),"t0",11);case 11:if(ke=de.t0,(0,L.Z)(ke)!=="object"){de.next=14;break}return de.abrupt("return",ke.v);case 14:de.next=19;break;case 16:de.prev=16,de.t1=de.catch(9),console.error("err on image capture",de.t1);case 19:de.next=6;break;case 21:de.next=26;break;case 23:de.prev=23,de.t2=de.catch(4),ve.e(de.t2);case 26:return de.prev=26,ve.f(),de.finish(26);case 29:throw new Error("Camera must be on to capture an image");case 32:de.prev=32,de.t3=de.catch(1),console.error("Error in captureImage::",de.t3),xe.roomClient._videosdkLogs&&xe.roomClient._videosdkLogs.pushLogs({logText:"Error on image capture",logType:"ERROR",attributes:{error:de.t3.message}});case 36:case"end":return de.stop()}},pe,null,[[1,32],[4,23,26,29],[9,16]])}))),this.id=ae.id,this.displayName=ae.displayName,this.streams=new Map,this.quality="low",this.local=ae.local||!1,this.pinState={cam:!1,share:!1},this.webcamOn=!1,this.micOn=!1,this.mode=ae.mode,this.metaData=ae.metaData,this.eventEmitter=new fr.EventEmitter}var M,A,$,X,ce;return(0,P.Z)(D,[{key:"_setPinState",value:function(ae){ae.cam!=null&&(this.pinState.cam=ae.cam),ae.share!=null&&(this.pinState.share=ae.share)}},{key:"remove",value:function(){xe.roomClient.removePeer(this.id)}},{key:"enableMic",value:function(){xe.roomClient.enablePeerMic(this.id)}},{key:"disableMic",value:function(){xe.roomClient.disablePeerMic(this.id)}},{key:"enableWebcam",value:function(){xe.roomClient.enablePeerWebcam(this.id)}},{key:"disableWebcam",value:function(){xe.roomClient.disablePeerWebcam(this.id)}},{key:"addStream",value:function(ae){this.streams.set(ae.id,ae),ae.kind!=="video"||this.local||xe.roomClient.setConsumerQuality(ae.id,this.quality),this.eventEmitter.emit(un,ae)}},{key:"updateStream",value:function(ae){this.streams.set(ae.id,ae),this.eventEmitter.emit(un,ae)}},{key:"deleteStream",value:function(ae){var le=this.streams.get(ae);if(le!=null)return this.streams.delete(ae),this.eventEmitter.emit(On,le),le}},{key:"updateParticipantMediaState",value:function(ae,le){ae=="audio"?this.micOn=le:ae=="video"&&(this.webcamOn=le),this.eventEmitter.emit(jn,{peerId:this.id,kind:ae,newStatus:le})}},{key:"videoQualityChanged",value:function(ae,le){this.eventEmitter.emit(Zt,{peerId:this.id,prevQuality:ae,currentQuality:le})}},{key:"setQuality",value:function(ae){this.quality===ae||this.local||(this.quality=ae,(0,Re.Z)(this.streams.entries()).forEach(function(le){var pe=le[1];pe.kind==="video"&&xe.roomClient.setConsumerQuality(pe.id,ae)}))}},{key:"setViewPort",value:function(ae,le){(0,Re.Z)(this.streams.entries()).forEach(function(pe){var G=pe[1];G.kind==="video"&&xe.roomClient.setViewPort(G.producerOrConsumer,ae,le)})}},{key:"pin",value:function(ae){switch(ae){case"SHARE_AND_CAM":case void 0:this._setPinState({cam:!0,share:!0});break;case"CAM":this._setPinState({cam:!0});break;case"SHARE":this._setPinState({share:!0});break;default:throw new Error("Unknown pin type")}xe.roomClient.pinStateChange({peerId:this.id,state:this.pinState})}},{key:"unpin",value:function(ae){switch(ae){case"SHARE_AND_CAM":case void 0:this._setPinState({cam:!1,share:!1});break;case"CAM":this._setPinState({cam:!1});break;case"SHARE":this._setPinState({share:!1});break;default:throw new Error("Unknown unpin type")}xe.roomClient.pinStateChange({peerId:this.id,state:this.pinState})}},{key:"switchTo",value:(ce=(0,b.Z)(_().mark(function ae(le){var pe,G,Z;return _().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return pe=le.meetingId,G=le.payload,Z=le.token,te.next=3,xe.roomClient.switchPeerRoom({peerId:this.id,roomId:pe,payload:G,token:Z});case 3:case"end":return te.stop()}},ae,this)})),function(ae){return ce.apply(this,arguments)})},{key:"getVideoStats",value:(X=(0,b.Z)(_().mark(function ae(){var le,pe,G,Z,te;return _().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(!this.local){Y.next=6;break}return Y.next=3,xe.roomClient.getVideoRemoteStats();case 3:return Y.abrupt("return",Y.sent);case 6:le=(0,Re.Z)(this.streams.entries()),pe=gr(le),Y.prev=8,pe.s();case 10:if((G=pe.n()).done){Y.next=18;break}if(Z=(0,Ft.Z)(G.value,2),te=Z[0],Z[1].kind!="video"){Y.next=16;break}return Y.next=15,xe.roomClient.getConsumerRemoteStats(te);case 15:return Y.abrupt("return",Y.sent);case 16:Y.next=10;break;case 18:Y.next=23;break;case 20:Y.prev=20,Y.t0=Y.catch(8),pe.e(Y.t0);case 23:return Y.prev=23,pe.f(),Y.finish(23);case 26:case"end":return Y.stop()}},ae,this,[[8,20,23,26]])})),function(){return X.apply(this,arguments)})},{key:"getShareStats",value:($=(0,b.Z)(_().mark(function ae(){var le,pe,G,Z,te;return _().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(!this.local){Y.next=6;break}return Y.next=3,xe.roomClient.getShareRemoteStats();case 3:return Y.abrupt("return",Y.sent);case 6:le=(0,Re.Z)(this.streams.entries()),pe=gr(le),Y.prev=8,pe.s();case 10:if((G=pe.n()).done){Y.next=18;break}if(Z=(0,Ft.Z)(G.value,2),te=Z[0],Z[1].kind!="share"){Y.next=16;break}return Y.next=15,xe.roomClient.getConsumerRemoteStats(te);case 15:return Y.abrupt("return",Y.sent);case 16:Y.next=10;break;case 18:Y.next=23;break;case 20:Y.prev=20,Y.t0=Y.catch(8),pe.e(Y.t0);case 23:return Y.prev=23,pe.f(),Y.finish(23);case 26:case"end":return Y.stop()}},ae,this,[[8,20,23,26]])})),function(){return $.apply(this,arguments)})},{key:"getShareAudioStats",value:(A=(0,b.Z)(_().mark(function ae(){var le,pe,G,Z,te;return _().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(!this.local){Y.next=6;break}return Y.next=3,xe.roomClient.getShareAudioRemoteStats();case 3:return Y.abrupt("return",Y.sent);case 6:le=(0,Re.Z)(this.streams.entries()),pe=gr(le),Y.prev=8,pe.s();case 10:if((G=pe.n()).done){Y.next=18;break}if(Z=(0,Ft.Z)(G.value,2),te=Z[0],Z[1].kind!="shareAudio"){Y.next=16;break}return Y.next=15,xe.roomClient.getConsumerRemoteStats(te);case 15:return Y.abrupt("return",Y.sent);case 16:Y.next=10;break;case 18:Y.next=23;break;case 20:Y.prev=20,Y.t0=Y.catch(8),pe.e(Y.t0);case 23:return Y.prev=23,pe.f(),Y.finish(23);case 26:case"end":return Y.stop()}},ae,this,[[8,20,23,26]])})),function(){return A.apply(this,arguments)})},{key:"getAudioStats",value:(M=(0,b.Z)(_().mark(function ae(){var le,pe,G,Z,te;return _().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(this.micOn){Y.next=2;break}return Y.abrupt("return",[]);case 2:if(!this.local){Y.next=8;break}return Y.next=5,xe.roomClient.getAudioRemoteStats();case 5:return Y.abrupt("return",Y.sent);case 8:le=(0,Re.Z)(this.streams.entries()),pe=gr(le),Y.prev=10,pe.s();case 12:if((G=pe.n()).done){Y.next=20;break}if(Z=(0,Ft.Z)(G.value,2),te=Z[0],Z[1].kind!="audio"){Y.next=18;break}return Y.next=17,xe.roomClient.getConsumerRemoteStats(te);case 17:return Y.abrupt("return",Y.sent);case 18:Y.next=12;break;case 20:Y.next=25;break;case 22:Y.prev=22,Y.t0=Y.catch(10),pe.e(Y.t0);case 25:return Y.prev=25,pe.f(),Y.finish(25);case 28:case"end":return Y.stop()}},ae,this,[[10,22,25,28]])})),function(){return M.apply(this,arguments)})},{key:"consumeMicStreams",value:function(){xe.roomClient.consumeMicStreams(this.id)}},{key:"consumeWebcamStreams",value:function(){xe.roomClient.consumeWebcamStreams(this.id)}},{key:"stopConsumingWebcamStreams",value:function(){xe.roomClient.stopConsumingWebcamStreams(this.id)}},{key:"stopConsumingMicStreams",value:function(){xe.roomClient.stopConsumingMicStreams(this.id)}},{key:"on",value:function(ae,le){switch(ae){case un:case On:case jn:case Zt:this.eventEmitter.on(ae,le);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(ae,le){switch(ae){case un:case On:case jn:case Zt:this.eventEmitter.off(ae,le);break;default:throw new Error("Invalid event type")}}}]),D}();function an(D){if(D===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D}function Wa(D,M){return Wa=Object.setPrototypeOf||function(A,$){return A.__proto__=$,A},Wa(D,M)}function Ca(D,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(D,"prototype",{value:Object.create(M&&M.prototype,{constructor:{value:D,writable:!0,configurable:!0}}),writable:!1}),M&&Wa(D,M)}function oi(D,M){if(M&&((0,L.Z)(M)==="object"||typeof M=="function"))return M;if(M!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return an(D)}function wt(D){return wt=Object.setPrototypeOf?Object.getPrototypeOf:function(M){return M.__proto__||Object.getPrototypeOf(M)},wt(D)}var Fe={CHARACTER_SPEAKING:"CHARACTER_SPEAKING",CHARACTER_THINKING:"CHARACTER_THINKING",CHARACTER_LISTENING:"CHARACTER_LISTENING"};function gt(D){var M=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var A,$=wt(D);if(M){var X=wt(this).constructor;A=Reflect.construct($,arguments,X)}else A=$.apply(this,arguments);return oi(this,A)}}function Qe(D,M,A){lt(D,M),M.set(D,A)}function lt(D,M){if(M.has(D))throw new TypeError("Cannot initialize the same private elements twice on an object")}var st="stream-enabled",ye="stream-disabled",ir="character-joined",kr="character-left",Cr="media-status-changed",Dr="video-quality-changed",sn="character-state-changed",Ie="character-message",Ot="user-message",bt="data",kt=new WeakMap,Lr=new WeakMap,Ir=new WeakMap,Ur=new WeakMap,sr=new WeakMap,ar=new WeakMap,Mr=new WeakMap,Dn=new WeakSet,Ar=function(D){Ca(pe,D);var M,A,$,X,ce,ae,le=gt(pe);function pe(G){var Z,te,Y;return(0,u.Z)(this,pe),Z=le.call(this,{id:G.id,displayName:G.displayName,mode:"CONFERENCE",metaData:G.metaData}),lt(te=an(Z),Y=Dn),Y.add(te),Qe(an(Z),kt,{writable:!0,value:void 0}),Qe(an(Z),Lr,{writable:!0,value:void 0}),Qe(an(Z),Ir,{writable:!0,value:void 0}),Qe(an(Z),Ur,{writable:!0,value:void 0}),Qe(an(Z),sr,{writable:!0,value:void 0}),Qe(an(Z),ar,{writable:!0,value:void 0}),Qe(an(Z),Mr,{writable:!0,value:void 0}),(0,E.Z)(an(Z),"captureImage",(0,b.Z)(_().mark(function ve(){var Be,Me=arguments;return _().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:throw Be=Me.length>0&&Me[0]!==void 0?Me[0]:{},Be.height,Be.width,new Error("captureImage method is not supported on character");case 2:case"end":return ke.stop()}},ve)}))),_t(an(Z),sr,G.interactionId||null),Z.id=G.id||null,_t(an(Z),kt,G.characterRole),_t(an(Z),Lr,G.characterMode),_t(an(Z),Ir,G.knowledgeBases||[]),Z.displayName=G.displayName,_t(an(Z),Ur,G.language),_t(an(Z),ar,G.state||Fe.CHARACTER_LISTENING),_t(an(Z),Mr,G.roomClient),Z}return(0,P.Z)(pe,[{key:"join",value:(ae=(0,b.Z)(_().mark(function G(){var Z;return _().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,ut(this,Mr).joinCharacter({interactionId:ut(this,sr),characterId:this.id,characterRole:ut(this,kt),displayName:this.displayName,characterMode:ut(this,Lr),knowledgeBases:ut(this,Ir),language:ut(this,Ur),metaData:this.metaData});case 2:(Z=te.sent)&&(this.id=Z.characterId,this.displayName=Z.displayName,_t(this,Lr,Z.characterMode),_t(this,kt,Z.characterRole),_t(this,sr,Z.interactionId),_t(this,Ir,Z.knowledgeBases),_t(this,Ur,Z.language),ut(this,Mr)._eventEmitter.emit("INIT_CHARACTER",this));case 4:case"end":return te.stop()}},G,this)})),function(){return ae.apply(this,arguments)})},{key:"leave",value:(ce=(0,b.Z)(_().mark(function G(){return _().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,ut(this,Mr).removeCharacter();case 2:case"end":return Z.stop()}},G,this)})),function(){return ce.apply(this,arguments)})},{key:"remove",value:(X=(0,b.Z)(_().mark(function G(){return _().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:throw new Error("remove method is not supported on character");case 1:case"end":return Z.stop()}},G)})),function(){return X.apply(this,arguments)})},{key:"sendMessage",value:($=(0,b.Z)(_().mark(function G(Z){return _().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,ut(this,Mr).sendCharacterMessage({interactionId:ut(this,sr),text:Z});case 2:case"end":return te.stop()}},G,this)})),function(G){return $.apply(this,arguments)})},{key:"handleCharacterStateChanged",value:function(G){Object.keys(Fe).includes(G.status)&&(function(Z,te,Y){if(!te.has(Z))throw new TypeError("attempted to get private field on non-instance");return Y}(this,Dn,Pe).call(this,G.status),this.eventEmitter.emit(sn,G))}},{key:"handleCharacterMessage",value:function(G){this.eventEmitter.emit(Ie,G)}},{key:"interrupt",value:(A=(0,b.Z)(_().mark(function G(){return _().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,ut(this,Mr).interruptCharacter({interactionId:ut(this,sr)});case 2:case"end":return Z.stop()}},G,this)})),function(){return A.apply(this,arguments)})},{key:"handleUserMessage",value:function(G){this.eventEmitter.emit(Ot,G)}},{key:"handleCharacterData",value:function(G){var Z=G.topic,te=G.data;this.eventEmitter.emit(bt,Z,te)}},{key:"enableMic",value:function(){ut(this,Mr).enablePeerMic(this.id)}},{key:"disableMic",value:function(){ut(this,Mr).disablePeerMic(this.id)}},{key:"enableWebcam",value:function(){ut(this,Mr).enablePeerWebcam(this.id)}},{key:"disableWebcam",value:function(){ut(this,Mr).disablePeerWebcam(this.id)}},{key:"updateStream",value:function(G){throw new Error("updateStream method is not supported on character")}},{key:"switchTo",value:(M=(0,b.Z)(_().mark(function G(Z){return _().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:throw Z.meetingId,Z.payload,Z.token,new Error("switchTo method is not supported on character");case 2:case"end":return te.stop()}},G)})),function(G){return M.apply(this,arguments)})},{key:"pin",value:function(G){throw new Error("pin method is not supported on character")}},{key:"on",value:function(G,Z){switch(G){case st:case ye:case ir:case kr:case Cr:case Dr:case sn:case Ie:case Ot:case bt:this.eventEmitter.on(G,Z);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(G,Z){switch(G){case st:case ye:case ir:case kr:case Cr:case Dr:case sn:case Ie:case Ot:case bt:this.eventEmitter.off(G,Z);break;default:throw new Error("Invalid event type")}}},{key:"state",get:function(){return ut(this,ar)}},{key:"knowledgeBases",get:function(){return ut(this,Ir)}},{key:"characterMode",get:function(){return ut(this,Lr)}},{key:"characterRole",get:function(){return ut(this,kt)}},{key:"interactionId",get:function(){return ut(this,sr)}},{key:"language",get:function(){return ut(this,Ur)}}]),pe}(Nr);function Pe(D){_t(this,ar,D)}function bi(D,M,A){(function($,X){if(X.has($))throw new TypeError("Cannot initialize the same private elements twice on an object")})(D,M),M.set(D,A)}var Ka=new WeakMap,Bs=function(){function D(A,$){var X=A.id,ce=A.displayName;(0,u.Z)(this,D),bi(this,Ka,{writable:!0,value:void 0}),this.id=X,this.displayName=ce,_t(this,Ka,$)}var M;return(0,P.Z)(D,[{key:"switchTo",value:(M=(0,b.Z)(_().mark(function A($){var X,ce,ae;return _().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:return X=$.meetingId,ce=$.payload,ae=$.token,le.next=3,xe.roomClient.connectionSwitchPeerRoom({roomId:X,connectionRoomId:ut(this,Ka),payload:ce,peerId:this.id,token:ae});case 3:case"end":return le.stop()}},A,this)})),function(A){return M.apply(this,arguments)})}]),D}(),xi="participant-joined",qi="participant-left",Oi="chat-message",_e=function(){function D(A,$){var X=this;(0,u.Z)(this,D),this.eventEmitter=new fr.EventEmitter,this.id=A,this.participants=new Map,$.forEach(function(ce){X.participants.set(ce.id,new Bs(ce,X.id))})}var M;return(0,P.Z)(D,[{key:"participantJoin",value:function(A){var $=new Bs(A,this.id);this.participants.set(A.id,$),this.eventEmitter.emit(xi,$)}},{key:"participantLeft",value:function(A){this.participants.delete(A),this.eventEmitter.emit(qi,A)}},{key:"sendChatMessage",value:function(A){xe.roomClient.connectionSendChatMessage({roomId:this.id,message:A})}},{key:"sendChatMessageEvent",value:function(A){var $=A.participantId,X=A.message;this.eventEmitter.emit(Oi,{participantId:$,message:X})}},{key:"end",value:(M=(0,b.Z)(_().mark(function A(){return _().wrap(function($){for(;;)switch($.prev=$.next){case 0:return $.next=2,xe.roomClient.connectionEndMeeting({roomId:this.id});case 2:case"end":return $.stop()}},A,this)})),function(){return M.apply(this,arguments)})},{key:"on",value:function(A,$){switch(A){case xi:case qi:case Oi:this.eventEmitter.on(A,$);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(A,$){switch(A){case xi:case qi:case Oi:this.eventEmitter.off(A,$);break;default:throw new Error("Invalid event type")}}}]),D}(),mo=function(){function D(M){var A=M.roomId,$=M.peers,X=M.payload;(0,u.Z)(this,D),this.id=A,this.payload=X,this.meeting=new _e(A,$)}return(0,P.Z)(D,[{key:"close",value:function(){xe.roomClient.closeConnection(this.id)}}]),D}();function be(D,M){var A=Object.keys(D);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(D);M&&($=$.filter(function(X){return Object.getOwnPropertyDescriptor(D,X).enumerable})),A.push.apply(A,$)}return A}function Oe(D){for(var M=1;M<arguments.length;M++){var A=arguments[M]!=null?arguments[M]:{};M%2?be(Object(A),!0).forEach(function($){(0,E.Z)(D,$,A[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(A)):be(Object(A)).forEach(function($){Object.defineProperty(D,$,Object.getOwnPropertyDescriptor(A,$))})}return D}function $e(D,M){at(D,M),M.add(D)}function at(D,M){if(M.has(D))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Bt(D,M,A){if(!M.has(D))throw new TypeError("attempted to get private field on non-instance");return A}var At="error",or="meeting-joined",lr="meeting-left",It="participant-mode-changed",mr="participant-joined",Ut="participant-left",dr="speaker-changed",pr="presenter-changed",jr="main-participant-changed",on="chat-message",mn="entry-requested",En="entry-responded",$n="recording-state-changed",Jn="recording-started",sa="recording-stopped",Ma="livestream-state-changed",La="livestream-started",_a="livestream-stopped",Qa="hls-state-changed",ci="hls-started",Ki="hls-stopped",Qi="whiteboard-started",Ji="whiteboard-stopped",Yi="video-state-changed",Xi="video-seeked",es="mic-requested",ts="webcam-requested",rs="stream-enabled",ns="stream-disabled",as="pin-state-changed",is="connection-open",ss="connection-close",os="switch-meeting",cs="meeting-state-changed",ls="transcription-state-changed",us="transcription-text",Di="character-joined",wi="character-left",dt=new WeakMap,K=new WeakSet,Ke=new WeakSet,qt=function(){function D(G,Z,te){var Y,ve,Be,Me,ke,Ne,de=this;(0,u.Z)(this,D),$e(this,Ke),$e(this,K),Be={writable:!0,value:void 0},at(Y=this,ve=dt),ve.set(Y,Be),(0,E.Z)(this,"pubSub",{publish:(Ne=(0,b.Z)(_().mark(function ge(Ve,Ge,ot,pt){return _().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:if(pt==null){ht.next=3;break}if((0,L.Z)(pt)=="object"){ht.next=3;break}throw new Error('"payload" can only be object.');case 3:return ht.next=5,de.roomClient.pubsubPublish(Ve,Ge,ot,pt);case 5:case"end":return ht.stop()}},ge)})),function(ge,Ve,Ge,ot){return Ne.apply(this,arguments)}),subscribe:(ke=(0,b.Z)(_().mark(function ge(Ve,Ge){var ot;return _().wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:if(!ut(de,dt).listeners(Ve).includes(Ge)){pt.next=2;break}return pt.abrupt("return");case 2:return pt.next=4,de.roomClient.pubsubSubscribe(Ve);case 4:return ot=pt.sent,ut(de,dt).on(Ve,Ge),pt.abrupt("return",ot);case 7:case"end":return pt.stop()}},ge)})),function(ge,Ve){return ke.apply(this,arguments)}),unsubscribe:(Me=(0,b.Z)(_().mark(function ge(Ve,Ge){return _().wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:if(ut(de,dt).off(Ve,Ge),ut(de,dt).listeners(Ve).length!=0){ot.next=4;break}return ot.next=4,de.roomClient.pubsubUnsubscribe(Ve);case 4:case"end":return ot.stop()}},ge)})),function(ge,Ve){return Me.apply(this,arguments)})}),(0,E.Z)(this,"uploadBase64File",function(){var ge=(0,b.Z)(_().mark(function Ve(Ge){var ot,pt,ht,Ct,je,jt,Pn;return _().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:if(ot=Ge.base64Data,pt=Ge.token,ht=Ge.fileName,mt.prev=1,ot&&pt&&ht){mt.next=4;break}throw new Error("please provide base64Data, token and fileName");case 4:return Ct="https://".concat(de.baseUrl,"/base64-upload?roomId=").concat(de.id),je={fileName:ht,base64Data:ot},mt.next=8,fetch(Ct,{method:"POST",body:JSON.stringify(je),headers:{"Content-Type":"application/json",Authorization:pt}});case 8:return jt=mt.sent,mt.next=11,jt.json();case 11:return Pn=mt.sent,mt.abrupt("return",Pn.url);case 15:mt.prev=15,mt.t0=mt.catch(1),console.error("Error while Uploading Base64 File::",mt.t0),de.roomClient._videosdkLogs&&de.roomClient._videosdkLogs.pushLogs({logText:"Error while Uploading Base64 File",logType:"ERROR",attributes:{error:mt.t0.message}});case 19:case"end":return mt.stop()}},Ve,null,[[1,15]])}));return function(Ve){return ge.apply(this,arguments)}}()),(0,E.Z)(this,"fetchBase64File",function(){var ge=(0,b.Z)(_().mark(function Ve(Ge){var ot,pt,ht,Ct,je;return _().wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:if(ot=Ge.url,pt=Ge.token,jt.prev=1,ot&&pt){jt.next=4;break}throw new Error("please provide url and token");case 4:return jt.next=6,fetch(ot,{headers:{Authorization:pt}});case 6:return ht=jt.sent,jt.next=9,ht.arrayBuffer();case 9:return Ct=jt.sent,je=window.btoa(new Uint8Array(Ct).reduce(function(Pn,mt){return Pn+String.fromCharCode(mt)},"")),jt.abrupt("return",je);case 14:jt.prev=14,jt.t0=jt.catch(1),console.error("Error while fetching Base64 File::",jt.t0),de.roomClient._videosdkLogs&&de.roomClient._videosdkLogs.pushLogs({logText:"Error while fetching Base64 File",logType:"ERROR",attributes:{error:jt.t0.message}});case 18:case"end":return jt.stop()}},Ve,null,[[1,14]])}));return function(Ve){return ge.apply(this,arguments)}}()),this.id=G,this.roomClient=te,this.activeSpeakerId=null,this.activePresenterId=null,this.mainParticipantId=null,this.connections=new Map,this.localParticipant=Z,this.participants=new Map,this.characters=new Map,this.baseUrl=null,this.livestreamState="LIVESTREAM_STOPPED",this.recordingState="RECORDING_STOPPED",this.hlsState="HLS_STOPPED",this.transcriptionState="TRANSCRIPTION_STOPPED",this.hlsUrls={downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null},this.messages=[],this.eventEmitter=new fr.EventEmitter,_t(this,dt,new fr.EventEmitter),this.eventEmitter.setMaxListeners(9999),ut(this,dt).setMaxListeners(9999),this.roomClient.on("ERROR",function(ge){return de.handleError(ge)}),this.roomClient.on("ADD_PEER",function(ge){return de.handlePeerAdd(ge)}),this.roomClient.on("REMOVE_PEER",function(ge){return de.handlePeerRemove(ge)}),this.roomClient.on("ADD_PRODUCER",function(ge){return de.handleProducerAdd(ge)}),this.roomClient.on("UPDATE_PRODUCER",function(ge){return de.handleUpdateProducer(ge)}),this.roomClient.on("REMOVE_PRODUCER",function(ge){return de.handleProducerRemove(ge)}),this.roomClient.on("ADD_CONSUMER",function(ge){return de.handleConsumerAdd(ge)}),this.roomClient.on("REMOVE_CONSUMER",function(ge){return de.handleConsumerRemove(ge)}),this.roomClient.on("PARTICIPANT_MEDIA_STATE_CHANGED",function(ge){return de.handleParticipantMediaStateChanged(ge)}),this.roomClient.on("CHAT_MESSAGE",function(ge){return de.handleNewChatMessage(ge)}),this.roomClient.on("SET_ROOM_ACTIVE_SPEAKER",function(ge){return de.handleSpeakerChange(ge)}),this.roomClient.on("ENTRY_REQUESTED",function(ge){return de.handleEntryRequested(ge)}),this.roomClient.on("ENTRY_RESPONDED",function(ge){return de.handleEntryResponded(ge)}),this.roomClient.on("MEETING_JOINED",function(ge){return de.handleMeetingJoined(ge)}),this.roomClient.on("MEETING_LEFT",function(ge){return de.handleMeetingLeft(ge)}),this.roomClient.on("RECORDING_STATE_CHANGED",function(ge){de.handleRecordingStateChanged(ge)}),this.roomClient.on("RECORDING_STARTED",function(ge){return de.handleRecordingStarted(ge)}),this.roomClient.on("RECORDING_STOPPED",function(ge){return de.handleRecordingStopped(ge)}),this.roomClient.on("LIVESTREAM_STATE_CHANGED",function(ge){de.handleLivestreamStateChanged(ge)}),this.roomClient.on("LIVESTREAM_STARTED",function(ge){return de.handleLivestreamStarted(ge)}),this.roomClient.on("LIVESTREAM_STOPPED",function(ge){return de.handleLivestreamStopped(ge)}),this.roomClient.on("HLS_STATE_CHANGED",function(ge){de.handleHlsStateChanged(ge)}),this.roomClient.on("HLS_STARTED",function(ge){de.handleHlsStarted(ge)}),this.roomClient.on("HLS_STOPPED",function(ge){de.handleHlsStopped(ge)}),this.roomClient.on("TRANSCRIPTION_STATE_CHANGED",function(ge){de.handleTranscriptionStateChanged(ge)}),this.roomClient.on("TRANSCRIPTION_TEXT",function(ge){de.handleTranscriptionText(ge)}),this.roomClient.on("WHITEBOARD_STARTED",function(ge){return de.handleWhiteboardStarted(ge)}),this.roomClient.on("WHITEBOARD_STOPPED",function(ge){return de.handleWhiteboardStopped(ge)}),this.roomClient.on("VIDEO_STATE_CHANGED",function(ge){return de.handleVideoStateChanged(ge)}),this.roomClient.on("VIDEO_SEEKED",function(ge){return de.handleVideoSeeked(ge)}),this.roomClient.on("PIN_STATE_CHANGED",function(ge){de.handlePinStateChanged(ge)}),this.roomClient.on("MIC_REQUESTED",function(ge){return de.handleMicRequested(ge)}),this.roomClient.on("WEBCAM_REQUESTED",function(ge){return de.handleWebcamRequested(ge)}),this.roomClient.on("CONNECTION_OPEN",function(ge){return de.handleConnectionOpen(ge)}),this.roomClient.on("CONNECTION_CLOSE",function(ge){return de.handleConnectionClose(ge)}),this.roomClient.on("CONNECTION_PARTICIPANT_JOIN",function(ge){return de.handleConnectionParticipantJoin(ge)}),this.roomClient.on("SWITCH_ROOM",function(ge){return de.handleSwitchMeeting(ge)}),this.roomClient.on("CONNECTION_CHAT_MESSAGE",function(ge){return de.handleConnectionChatMessage(ge)}),this.roomClient.on("CONNECTION_PARTICIPANT_LEFT",function(ge){de.handleConnectionParticipantLeft(ge)}),this.roomClient.on("PUBSUB_MESSAGE",function(ge){return Bt(de,K,Fn).call(de,ge)}),this.roomClient.on("PEER_MODE_CHANGED",function(ge){return Bt(de,Ke,Gn).call(de,ge)}),this.updateMainParticipant(this.localParticipant.id),this.roomClient.on("MEETING_STATE_CHANGED",function(ge){return de.handleMeetingStateChanged(ge)}),this.roomClient.on("VIDEO_QUALITY_CHANGED",function(ge){return de.handleVideoQualityChanged(ge)}),this.roomClient.on("ADD_CHARACTER",function(ge){return de.handleAddCharacter(ge)}),this.roomClient.on("INIT_CHARACTER",function(ge){return de.handleInitCharacter(ge)}),this.roomClient.on("REMOVE_CHARACTER",function(ge){return de.handleRemoveCharacter(ge)}),this.roomClient.on("CHARACTER_STATE_CHANGED",function(ge){return de.handleCharacterStateChanged(ge)}),this.roomClient.on("CHARACTER_MESSAGE",function(ge){return de.handleCharacterMessage(ge)}),this.roomClient.on("USER_MESSAGE",function(ge){return de.handleUserMessage(ge)}),this.roomClient.on("CHARACTER_DATA",function(ge){return de.handleOnCharacterData(ge)})}var M,A,$,X,ce,ae,le,pe;return(0,P.Z)(D,[{key:"handleError",value:function(G){this.eventEmitter.listenerCount(At)>0&&this.eventEmitter.emit(At,G)}},{key:"join",value:function(){this.roomClient.join()}},{key:"changeMode",value:function(G){this.roomClient.changeMode(G)}},{key:"leave",value:function(){this.roomClient.close({sendLeft:!0})}},{key:"end",value:function(){this.roomClient.closeRoom()}},{key:"respondEntry",value:function(G,Z){this.roomClient.respondEntry(G,Z)}},{key:"pinnedParticipants",get:function(){return this.roomClient._pinnedParticipants}},{key:"muteMic",value:function(){this.roomClient.disableMic()}},{key:"unmuteMic",value:function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableMic(G)}},{key:"publishAudio",value:(pe=(0,b.Z)(_().mark(function G(){var Z,te=arguments;return _().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Z=te.length>0&&te[0]!==void 0?te[0]:void 0,Y.next=3,this.roomClient.enableMic(Z);case 3:return Y.abrupt("return");case 4:case"end":return Y.stop()}},G,this)})),function(){return pe.apply(this,arguments)})},{key:"unpublishAudio",value:(le=(0,b.Z)(_().mark(function G(){return _().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,this.roomClient.disableMic();case 2:return Z.abrupt("return");case 3:case"end":return Z.stop()}},G,this)})),function(){return le.apply(this,arguments)})},{key:"disableWebcam",value:function(){this.roomClient.disableWebcam()}},{key:"enableWebcam",value:function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableWebcam(G)}},{key:"publishVideo",value:(ae=(0,b.Z)(_().mark(function G(){var Z,te=arguments;return _().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Z=te.length>0&&te[0]!==void 0?te[0]:void 0,this.roomClient.enableWebcam(Z),Y.abrupt("return");case 3:case"end":return Y.stop()}},G,this)})),function(){return ae.apply(this,arguments)})},{key:"unpublishVideo",value:(ce=(0,b.Z)(_().mark(function G(){return _().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return this.roomClient.disableWebcam(),Z.abrupt("return");case 2:case"end":return Z.stop()}},G,this)})),function(){return ce.apply(this,arguments)})},{key:"disableScreenShare",value:function(){this.roomClient.disableShare()}},{key:"enableScreenShare",value:function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableShare(G)}},{key:"pubblishScreenShare",value:function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableShare(G)}},{key:"unpublishScreenShare",value:function(){this.roomClient.disableShare()}},{key:"sendChatMessage",value:function(G){this.roomClient.sendChatMessage(G);var Z={text:G,timestamp:new Date().getTime(),senderId:this.localParticipant.id,senderName:this.localParticipant.displayName};this.handleNewChatMessage(Z)}},{key:"startRecording",value:function(G,Z,te,Y){this.roomClient.startRecording(G,Z,te,Y)}},{key:"stopRecording",value:function(){this.roomClient.stopRecording()}},{key:"startTranscription",value:function(G){this.roomClient.startTranscription(G)}},{key:"stopTranscription",value:function(){this.roomClient.stopTranscription()}},{key:"startLivestream",value:function(G,Z){this.roomClient.startLivestream(G,Z)}},{key:"stopLivestream",value:function(){this.roomClient.stopLivestream()}},{key:"startHls",value:(X=(0,b.Z)(_().mark(function G(Z,te){return _().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,this.roomClient.startHls(Z,te);case 2:case"end":return Y.stop()}},G,this)})),function(G,Z){return X.apply(this,arguments)})},{key:"stopHls",value:function(){this.roomClient.stopHls()}},{key:"createCharacter",value:function(G){if(!G.interactionId&&!G.id)throw new Error("InteractionId or id is required");return new Ar(Oe(Oe({},G),{},{roomClient:this.roomClient}))}},{key:"getMics",value:($=(0,b.Z)(_().mark(function G(){return _().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,this.roomClient.getMics();case 2:return Z.abrupt("return",Z.sent);case 3:case"end":return Z.stop()}},G,this)})),function(){return $.apply(this,arguments)})},{key:"getWebcams",value:(A=(0,b.Z)(_().mark(function G(){return _().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return Z.next=2,this.roomClient.getWebcams();case 2:return Z.abrupt("return",Z.sent);case 3:case"end":return Z.stop()}},G,this)})),function(){return A.apply(this,arguments)})},{key:"changeMic",value:function(G){this.roomClient.changeMic(G)}},{key:"changeWebcam",value:function(G){this.roomClient.changeWebcam(G)}},{key:"replaceWebcamStream",value:function(G){this.roomClient.replaceWebcamStream(G)}},{key:"setWebcamQuality",value:function(G){this.roomClient.setWebcamQuality(G)}},{key:"startWhiteboard",value:function(){this.roomClient.startWhiteboard()}},{key:"stopWhiteboard",value:function(){this.roomClient.stopWhiteboard()}},{key:"startVideo",value:function(G){var Z=G.link;this.roomClient.startVideo({link:Z})}},{key:"stopVideo",value:function(){this.roomClient.stopVideo()}},{key:"resumeVideo",value:function(){this.roomClient.resumeVideo()}},{key:"refreshConnection",value:function(){this.roomClient.restartIce()}},{key:"pauseVideo",value:function(G){var Z=G.currentTime;this.roomClient.pauseVideo(Z)}},{key:"seekVideo",value:function(G){var Z=G.currentTime;this.roomClient.seekVideo(Z)}},{key:"handlePeerAdd",value:function(G){var Z=G.peer,te=new Nr(Z);this.participants.set(te.id,te),this.eventEmitter.emit(mr,te),this.participants.size===1&&this.updateMainParticipant(te.id)}},{key:"handlePeerRemove",value:function(G){var Z=G.peerId,te=this.participants.get(Z);te!=null&&(this.participants.delete(Z),this.eventEmitter.emit(Ut,te),this.activePresenterId===te.id&&(this.activePresenterId=null,this.eventEmitter.emit(pr,this.activePresenterId)),this.mainParticipantId===te.id&&(this.participants.size>0?this.updateMainParticipant(this.participants.entries().next().value[1].id):this.updateMainParticipant(this.localParticipant.id)))}},{key:"handleProducerAdd",value:function(G){var Z=G.producer,te=new De(Z);this.localParticipant.addStream(te),te.kind==="share"&&(this.activePresenterId=this.localParticipant.id,this.eventEmitter.emit(pr,this.activePresenterId),this.updateMainParticipant(this.localParticipant.id))}},{key:"handleUpdateProducer",value:function(G){var Z=G.producer,te=new De(Z);this.localParticipant.updateStream(te)}},{key:"handleProducerRemove",value:function(G){var Z=G.producerId,te=this.localParticipant.deleteStream(Z);if(te&&te.kind==="share"){this.activePresenterId=null,this.eventEmitter.emit(pr,this.activePresenterId);var Y=this.participants.size>0?this.participants.entries().next().value[1].id:null;this.updateMainParticipant(this.activeSpeakerId||Y||this.localParticipant.id)}}},{key:"handleConsumerAdd",value:function(G){var Z=G.consumer,te=G.peerId,Y=this.participants.get(te)||this.characters.get(te);if(Y){var ve=new De(Z);Y.addStream(ve),this.eventEmitter.emit(rs,ve),ve.kind==="share"&&(this.activePresenterId=Y.id,this.eventEmitter.emit(pr,this.activePresenterId),this.updateMainParticipant(Y.id))}}},{key:"handleConsumerRemove",value:function(G){var Z=G.consumerId,te=G.peerId,Y=this.participants.get(te)||this.characters.get(te);if(Y!=null&&Y){var ve=Y.deleteStream(Z);if(this.eventEmitter.emit(ns,ve),ve&&ve.kind==="share"){this.activePresenterId=null,this.eventEmitter.emit(pr,this.activePresenterId);var Be=this.participants.size>0?this.participants.entries().next().value[1].id:null;this.updateMainParticipant(this.activeSpeakerId||Be||this.localParticipant.id)}}}},{key:"handleParticipantMediaStateChanged",value:function(G){var Z=G.peerId,te=G.kind,Y=G.newState,ve=this.participants.get(Z)||this.characters.get(Z);this.localParticipant.id==Z&&(ve=this.localParticipant),ve&&ve&&(te=="audio"?ve.micOn=Y:te=="video"&&(ve.webcamOn=Y),ve.updateParticipantMediaState(te,Y))}},{key:"handleSpeakerChange",value:function(G){var Z=G.peerId;this.activeSpeakerId!==Z&&(this.activeSpeakerId=Z,this.eventEmitter.emit(dr,Z),Z&&Z!==this.localParticipant.id&&this.activePresenterId!==this.mainParticipantId&&Z!==this.mainParticipantId&&this.updateMainParticipant(Z))}},{key:"handleNewChatMessage",value:function(G){var Z=G.senderId,te={senderId:Z,text:G.text,timestamp:G.timestamp};if(this.localParticipant.id===Z)te.senderName=this.localParticipant.displayName;else{var Y=this.participants.get(Z);Y&&(te.senderName=Y.displayName)}this.messages.push(te),this.eventEmitter.emit(on,te)}},{key:"updateMainParticipant",value:function(G){this.mainParticipantId=G;var Z=null;Z=G===this.localParticipant.id?this.localParticipant:this.participants.get(this.mainParticipantId),this.eventEmitter.emit(jr,Z)}},{key:"handleEntryRequested",value:function(G){var Z=this,te=G.id,Y=G.name;this.eventEmitter.emit(mn,{participantId:te,name:Y,allow:function(){Z.roomClient.respondEntry(te,"allowed")},deny:function(){Z.roomClient.respondEntry(te,"denied")}})}},{key:"handleEntryResponded",value:function(G){var Z=G.id,te=G.decision;this.eventEmitter.emit(En,Z,te)}},{key:"handleMeetingJoined",value:function(G){var Z=G.peers,te=G.poll,Y=G.messages,ve=G.baseUrl;this.baseUrl=ve,Y.length>0&&(this.messages=Y),this.eventEmitter.emit(or,{peers:Z,poll:te,messages:Y})}},{key:"handleMeetingLeft",value:function(G){this.eventEmitter.emit(lr,G)}},{key:"handleRecordingStateChanged",value:function(G){this.recordingState=G.status,this.eventEmitter.emit($n,G)}},{key:"handleLivestreamStateChanged",value:function(G){this.livestreamState=G.status,this.eventEmitter.emit(Ma,G)}},{key:"handleHlsStateChanged",value:function(G){this.hlsState=G.status,G.status=="HLS_PLAYABLE"?this.hlsUrls={downstreamUrl:G.downstreamUrl,playbackHlsUrl:G.playbackHlsUrl,livestreamUrl:G.livestreamUrl}:G.status=="HLS_STOPPED"&&(this.hlsUrls={downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),this.eventEmitter.emit(Qa,G)}},{key:"handleTranscriptionStateChanged",value:function(G){this.transcriptionState=G.status,this.eventEmitter.emit(ls,G)}},{key:"handleTranscriptionText",value:function(G){this.eventEmitter.emit(us,G)}},{key:"handleRecordingStarted",value:function(){this.eventEmitter.emit(Jn)}},{key:"handleRecordingStopped",value:function(){this.eventEmitter.emit(sa)}},{key:"handleLivestreamStarted",value:function(){this.eventEmitter.emit(La)}},{key:"handleLivestreamStopped",value:function(){this.eventEmitter.emit(_a)}},{key:"handleHlsStarted",value:function(G){this.eventEmitter.emit(ci,G)}},{key:"handleHlsStopped",value:function(){this.eventEmitter.emit(Ki)}},{key:"handleWhiteboardStarted",value:function(G){this.eventEmitter.emit(Qi,G)}},{key:"handleWhiteboardStopped",value:function(G){(function(Z){if(Z==null)throw new TypeError("Cannot destructure undefined")})(G),this.eventEmitter.emit(Ji)}},{key:"handleAddCharacter",value:function(G){var Z,te=G.id,Y=(Z=this.characters.get(te))!==null&&Z!==void 0?Z:new Ar(Oe(Oe({},G),{},{state:Fe.CHARACTER_LISTENING,roomClient:this.roomClient}));this.characters.set(te,Y),this.eventEmitter.emit(Di,Y),Y.eventEmitter.emit(Di)}},{key:"handleInitCharacter",value:function(G){this.characters.set(G.id,G)}},{key:"handleRemoveCharacter",value:function(G){var Z=G.id;if(this.characters.has(Z)){var te=this.characters.get(Z);this.eventEmitter.emit(wi,te),te.eventEmitter.emit(wi),this.characters.delete(Z)}}},{key:"handleCharacterStateChanged",value:function(G){var Z=G.id;this.characters.has(Z)&&this.characters.get(Z).handleCharacterStateChanged(G)}},{key:"handleCharacterMessage",value:function(G){var Z=G.id;this.characters.has(Z)&&this.characters.get(Z).handleCharacterMessage(G)}},{key:"handleUserMessage",value:function(G){var Z=G.id;this.characters.has(Z)&&this.characters.get(Z).handleUserMessage(G)}},{key:"handleOnCharacterData",value:function(G){var Z=G.id;this.characters.has(Z)&&this.characters.get(Z).handleCharacterData(G)}},{key:"handleVideoStateChanged",value:function(G){this.eventEmitter.emit(Yi,G)}},{key:"handleVideoSeeked",value:function(G){var Z=G.currentTime;this.eventEmitter.emit(Xi,{currentTime:Z})}},{key:"handlePinStateChanged",value:function(G){var Z=G.peerId,te=G.state,Y=G.pinnedBy;this.eventEmitter.emit(as,{participantId:Z,state:te,pinnedBy:Y})}},{key:"handleMeetingStateChanged",value:function(G){var Z=G.state;this.eventEmitter.emit(cs,{state:Z})}},{key:"handleVideoQualityChanged",value:function(G){var Z=G.peerId,te=G.prevQuality,Y=G.currentQuality,ve=this.participants.get(Z)||this.characters.get(Z);ve&&ve&&ve.videoQualityChanged(te,Y)}},{key:"handleMicRequested",value:function(G){var Z=this,te=G.peerId;this.eventEmitter.emit(es,{participantId:te,accept:function(){return Z.unmuteMic()},reject:function(){}})}},{key:"handleWebcamRequested",value:function(G){var Z=this,te=G.peerId;this.eventEmitter.emit(ts,{participantId:te,accept:function(){return Z.enableWebcam()},reject:function(){}})}},{key:"handleConnectionParticipantJoin",value:function(G){var Z=G.roomId,te=G.peer,Y=this.connections.get(Z);Y!=null&&Y.meeting.participantJoin(te)}},{key:"handleConnectionParticipantLeft",value:function(G){var Z=G.roomId,te=G.peerId,Y=this.connections.get(Z);Y!=null&&Y.meeting.participantLeft(te)}},{key:"handleConnectionOpen",value:function(G){var Z=G.peers,te=G.roomId,Y=G.payload,ve=new mo({roomId:te,peers:Z,payload:Y});this.connections.set(ve.id,ve),this.eventEmitter.emit(is,ve)}},{key:"handleConnectionClose",value:function(G){var Z=G.roomId;this.connections.get(Z)!=null&&(this.connections.delete(Z),this.eventEmitter.emit(ss,Z))}},{key:"handleSwitchMeeting",value:function(G){var Z=G.roomId,te=G.token,Y=G.payload,ve=G.peerId,Be=G.connectionPeerId,Me=G.connectionRoomId,ke=ve?{meetingId:Z,payload:Y,token:te,participantId:ve}:{meetingId:Z,payload:Y,token:te,connectionParticipantId:Be,connectionMeetingId:Me};this.eventEmitter.emit(os,ke)}},{key:"handleConnectionChatMessage",value:function(G){var Z=G.roomId,te=G.peerId,Y=G.message,ve=this.connections.get(Z);ve!=null&&ve.meeting.sendChatMessageEvent({participantId:te,message:Y})}},{key:"connectTo",value:(M=(0,b.Z)(_().mark(function G(Z){var te,Y;return _().wrap(function(ve){for(;;)switch(ve.prev=ve.next){case 0:return te=Z.meetingId,Y=Z.payload,ve.next=3,this.roomClient.openConnection({roomId:te,payload:Y});case 3:case"end":return ve.stop()}},G,this)})),function(G){return M.apply(this,arguments)})},{key:"selectedCameraDevice",get:function(){var G;return(G=this.roomClient._webcam)===null||G===void 0?void 0:G.device}},{key:"selectedMicrophoneDevice",get:function(){var G;return(G=this.roomClient._mic)===null||G===void 0?void 0:G.device}},{key:"on",value:function(G,Z){switch(G){case mr:case Ut:case dr:case pr:case jr:case on:case mn:case En:case $n:case Jn:case sa:case Ma:case La:case _a:case ci:case Ki:case Qa:case ls:case us:case rs:case ns:case Qi:case Ji:case Di:case wi:case or:case lr:case Yi:case Xi:case es:case ts:case as:case is:case ss:case os:case cs:case It:case At:this.eventEmitter.on(G,Z);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(G,Z){switch(G){case mr:case Ut:case dr:case pr:case jr:case on:case mn:case En:case $n:case Jn:case sa:case Ma:case La:case _a:case Qa:case ci:case Ki:case ls:case us:case rs:case ns:case Qi:case Ji:case Di:case wi:case or:case lr:case Yi:case Xi:case es:case ts:case as:case is:case ss:case os:case cs:case At:case It:this.eventEmitter.off(G,Z);break;default:throw new Error("Invalid event type")}}}]),D}();function Fn(D){var M=D.topic,A=D.message,$=D.senderId,X=D.timestamp,ce=D.senderName,ae=D.id,le=D.payload;M&&A&&ut(this,dt).emit(M,{message:A,senderId:$,timestamp:X,topic:M,senderName:ce,id:ae,payload:le})}function Gn(D){var M=D.peerId,A=D.mode;M===this.localParticipant.id?this.localParticipant.mode=A:this.participants.get(M).mode=A,this.eventEmitter.emit(It,{participantId:M,mode:A})}var ur=y(6900),Sl=y(6380),Ii=y(3430),go=y(7393),Mi=y(8962);function Us(D){var M=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var A,$=wt(D);if(M){var X=wt(this).constructor;A=Reflect.construct($,arguments,X)}else A=$.apply(this,arguments);return oi(this,A)}}var ds=function(D){Ca(A,D);var M=Us(A);function A($,X,ce,ae){return(0,u.Z)(this,A),M.call(this,$,X,ce,ae)}return(0,P.Z)(A)}((0,P.Z)(function D(M,A,$,X){(0,u.Z)(this,D),this.deviceId=M,this.groupId=A,this.kind=$,this.label=X})),vo=function(D){Ca(A,D);var M=Us(A);function A($,X,ce,ae){return(0,u.Z)(this,A),M.call(this,$,X,ce,ae)}return(0,P.Z)(A)}(ds),_o=function(D){Ca(A,D);var M=Us(A);function A($,X,ce,ae){return(0,u.Z)(this,A),M.call(this,$,X,ce,ae)}return(0,P.Z)(A)}(ds),sc=function(D){Ca(A,D);var M=Us(A);function A($,X,ce,ae){return(0,u.Z)(this,A),M.call(this,$,X,ce,ae)}return(0,P.Z)(A)}(ds),Yn={AUDIO:"audio",VIDEO:"video",AUDIO_AND_VIDEO:"audio_video"},Rl=(y(4301),y(773));function Ws(D,M){return D==null||M==null?NaN:D<M?-1:D>M?1:D>=M?0:NaN}function El(D,M){return D==null||M==null?NaN:M<D?-1:M>D?1:M>=D?0:NaN}function oc(D){let M,A,$;function X(ce,ae,le=0,pe=ce.length){if(le<pe){if(M(ae,ae)!==0)return pe;do{const G=le+pe>>>1;A(ce[G],ae)<0?le=G+1:pe=G}while(le<pe)}return le}return D.length!==2?(M=Ws,A=(ce,ae)=>Ws(D(ce),ae),$=(ce,ae)=>D(ce)-ae):(M=D===Ws||D===El?D:kl,A=D,$=D),{left:X,center:function(ce,ae,le=0,pe=ce.length){const G=X(ce,ae,le,pe-1);return G>le&&$(ce[G-1],ae)>-$(ce[G],ae)?G-1:G},right:function(ce,ae,le=0,pe=ce.length){if(le<pe){if(M(ae,ae)!==0)return pe;do{const G=le+pe>>>1;A(ce[G],ae)<=0?le=G+1:pe=G}while(le<pe)}return le}}}function kl(){return 0}const Cl=oc(Ws),Tl=Cl.right,Pl=(oc(function(D){return D===null?NaN:+D}).center,Tl);function xl(D,M){switch(arguments.length){case 0:break;case 1:this.range(D);break;default:this.range(M).domain(D)}return this}function li(){var D,M=[.5],A=[0,1],$=1;function X(ce){return ce!=null&&ce<=ce?A[Pl(M,ce,0,$)]:D}return X.domain=function(ce){return arguments.length?(M=Array.from(ce),$=Math.min(M.length,A.length-1),X):M.slice()},X.range=function(ce){return arguments.length?(A=Array.from(ce),$=Math.min(M.length,A.length-1),X):A.slice()},X.invertExtent=function(ce){var ae=A.indexOf(ce);return[M[ae-1],M[ae]]},X.unknown=function(ce){return arguments.length?(D=ce,X):D},X.copy=function(){return li().domain(M).range(A).unknown(D)},xl.apply(X,arguments)}function cc(D,M){var A=Object.keys(D);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(D);M&&($=$.filter(function(X){return Object.getOwnPropertyDescriptor(D,X).enumerable})),A.push.apply(A,$)}return A}function Na(D){for(var M=1;M<arguments.length;M++){var A=arguments[M]!=null?arguments[M]:{};M%2?cc(Object(A),!0).forEach(function($){Jt(D,$,A[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(D,Object.getOwnPropertyDescriptors(A)):cc(Object(A)).forEach(function($){Object.defineProperty(D,$,Object.getOwnPropertyDescriptor(A,$))})}return D}function oa(D,M){if(!(D instanceof M))throw new TypeError("Cannot call a class as a function")}function Ol(D,M){for(var A=0;A<M.length;A++){var $=M[A];$.enumerable=$.enumerable||!1,$.configurable=!0,"value"in $&&($.writable=!0),Object.defineProperty(D,dc($.key),$)}}function ca(D,M,A){return M&&Ol(D.prototype,M),Object.defineProperty(D,"prototype",{writable:!1}),D}function Jt(D,M,A){return(M=dc(M))in D?Object.defineProperty(D,M,{value:A,enumerable:!0,configurable:!0,writable:!0}):D[M]=A,D}function Hs(D,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");D.prototype=Object.create(M&&M.prototype,{constructor:{value:D,writable:!0,configurable:!0}}),Object.defineProperty(D,"prototype",{writable:!1}),M&&yo(D,M)}function Jr(D){return Jr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(M){return M.__proto__||Object.getPrototypeOf(M)},Jr(D)}function yo(D,M){return yo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(A,$){return A.__proto__=$,A},yo(D,M)}function ui(D,M){if(D==null)return{};var A,$,X=function(ae,le){if(ae==null)return{};var pe,G,Z={},te=Object.keys(ae);for(G=0;G<te.length;G++)pe=te[G],le.indexOf(pe)>=0||(Z[pe]=ae[pe]);return Z}(D,M);if(Object.getOwnPropertySymbols){var ce=Object.getOwnPropertySymbols(D);for($=0;$<ce.length;$++)A=ce[$],M.indexOf(A)>=0||Object.prototype.propertyIsEnumerable.call(D,A)&&(X[A]=D[A])}return X}function vr(D){if(D===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D}function Dl(D,M){if(M&&(typeof M=="object"||typeof M=="function"))return M;if(M!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vr(D)}function zs(D){var M=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var A,$=Jr(D);if(M){var X=Jr(this).constructor;A=Reflect.construct($,arguments,X)}else A=$.apply(this,arguments);return Dl(this,A)}}function lc(D,M){for(;!Object.prototype.hasOwnProperty.call(D,M)&&(D=Jr(D))!==null;);return D}function bo(){return bo=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(D,M,A){var $=lc(D,M);if($){var X=Object.getOwnPropertyDescriptor($,M);return X.get?X.get.call(arguments.length<3?D:A):X.value}},bo.apply(this,arguments)}function wo(D,M,A,$){return wo=typeof Reflect<"u"&&Reflect.set?Reflect.set:function(X,ce,ae,le){var pe,G=lc(X,ce);if(G){if((pe=Object.getOwnPropertyDescriptor(G,ce)).set)return pe.set.call(le,ae),!0;if(!pe.writable)return!1}if(pe=Object.getOwnPropertyDescriptor(le,ce)){if(!pe.writable)return!1;pe.value=ae,Object.defineProperty(le,ce,pe)}else Jt(le,ce,ae);return!0},wo(D,M,A,$)}function kn(D,M,A,$,X){if(!wo(D,M,A,$||D)&&X)throw new TypeError("failed to set property");return A}function la(D,M){return function(A){if(Array.isArray(A))return A}(D)||function(A,$){var X=A==null?null:typeof Symbol<"u"&&A[Symbol.iterator]||A["@@iterator"];if(X!=null){var ce,ae,le,pe,G=[],Z=!0,te=!1;try{if(le=(X=X.call(A)).next,$===0){if(Object(X)!==X)return;Z=!1}else for(;!(Z=(ce=le.call(X)).done)&&(G.push(ce.value),G.length!==$);Z=!0);}catch(Y){te=!0,ae=Y}finally{try{if(!Z&&X.return!=null&&(pe=X.return(),Object(pe)!==pe))return}finally{if(te)throw ae}}return G}}(D,M)||uc(D,M)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function di(D){return function(M){if(Array.isArray(M))return So(M)}(D)||function(M){if(typeof Symbol<"u"&&M[Symbol.iterator]!=null||M["@@iterator"]!=null)return Array.from(M)}(D)||uc(D)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function uc(D,M){if(D){if(typeof D=="string")return So(D,M);var A=Object.prototype.toString.call(D).slice(8,-1);return A==="Object"&&D.constructor&&(A=D.constructor.name),A==="Map"||A==="Set"?Array.from(D):A==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A)?So(D,M):void 0}}function So(D,M){(M==null||M>D.length)&&(M=D.length);for(var A=0,$=new Array(M);A<M;A++)$[A]=D[A];return $}function dc(D){var M=function(A,$){if(typeof A!="object"||A===null)return A;var X=A[Symbol.toPrimitive];if(X!==void 0){var ce=X.call(A,$||"default");if(typeof ce!="object")return ce;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(A)}(D,"string");return typeof M=="symbol"?M:String(M)}function ue(D,M){return function(A,$){return $.get?$.get.call(A):$.value}(D,pc(D,M,"get"))}function St(D,M,A){return function($,X,ce){if(X.set)X.set.call($,ce);else{if(!X.writable)throw new TypeError("attempted to set read only private field");X.value=ce}}(D,pc(D,M,"set"),A),A}function pc(D,M,A){if(!M.has(D))throw new TypeError("attempted to "+A+" private field on non-instance");return M.get(D)}function Vt(D,M,A){if(!M.has(D))throw new TypeError("attempted to get private field on non-instance");return A}function hc(D,M){if(M.has(D))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Rt(D,M,A){hc(D,M),M.set(D,A)}function Bn(D,M){hc(D,M),M.add(D)}var Vs="https://speed.cloudflare.com",fc={autoStart:!0,downloadApiUrl:"".concat(Vs,"/__down"),uploadApiUrl:"".concat(Vs,"/__up"),logMeasurementApiUrl:null,logAimApiUrl:"https://aim.cloudflare.com/__log",turnServerUri:"turn.speed.cloudflare.com:50000",turnServerCredsApiUrl:"".concat(Vs,"/turn-creds"),turnServerUser:null,turnServerPass:null,rpkiInvalidHost:"invalid.rpki.cloudflare.com",cfTraceUrl:"".concat(Vs,"/cdn-cgi/trace"),includeCredentials:!1,measurements:[{type:"latency",numPackets:1},{type:"download",bytes:1e5,count:1,bypassMinDuration:!0},{type:"latency",numPackets:20},{type:"download",bytes:1e5,count:9},{type:"download",bytes:1e6,count:8},{type:"upload",bytes:1e5,count:8},{type:"packetLoss",numPackets:1e3,batchSize:10,batchWaitTime:10,responsesWaitTime:3e3},{type:"upload",bytes:1e6,count:6},{type:"download",bytes:1e7,count:6},{type:"upload",bytes:1e7,count:4},{type:"download",bytes:25e6,count:4},{type:"upload",bytes:25e6,count:4},{type:"download",bytes:1e8,count:3},{type:"upload",bytes:5e7,count:3},{type:"download",bytes:25e7,count:2}],measureDownloadLoadedLatency:!0,measureUploadLoadedLatency:!0,loadedLatencyThrottle:400,bandwidthFinishRequestDuration:1e3,estimatedServerTime:10,latencyPercentile:.5,bandwidthPercentile:.9,bandwidthMinRequestDuration:10,loadedRequestMinDuration:250,loadedLatencyMaxPoints:20},mc={aimMeasurementScoring:{packetLoss:li([.01,.05,.25,.5],[10,5,0,-10,-20]),latency:li([10,20,50,100,500],[20,10,5,0,-10,-20]),loadedLatencyIncrease:li([10,20,50,100,500],[20,10,5,0,-10,-20]),jitter:li([10,20,100,500],[10,5,0,-10,-20]),download:li([1e6,1e7,5e7,1e8],[0,5,10,20,30]),upload:li([1e6,1e7,5e7,1e8],[0,5,10,20,30])},aimExperiencesDefs:{streaming:{input:["latency","packetLoss","download","loadedLatencyIncrease"],pointThresholds:[15,20,40,60]},gaming:{input:["latency","packetLoss","loadedLatencyIncrease"],pointThresholds:[5,15,25,30]},rtc:{input:["latency","jitter","packetLoss","loadedLatencyIncrease"],pointThresholds:[5,15,25,40]}}},Il=function(D){var M=D.headers.get("server-timing");if(M){var A=M.match(/dur=([0-9.]+)/);if(A)return+A[1]}},Ml=function(D){return D.responseStart-D.requestStart},Ll=function(D){return D.responseEnd-D.responseStart},Nl=function(D){return D.ping+D.payloadDownloadTime},Al=function(D){return D.ttfb},q=function(D,M){var A=D.duration,$=D.transferSize,X=A/1e3;return X?8*($||1.005*+M)/X:void 0},W=function(D,M){var A=D.duration/1e3;return A?8*M*1.005/A:void 0},B=Rl(function(D){return"0".repeat(D)}),U=new WeakMap,H=new WeakMap,re=new WeakMap,ie=new WeakMap,we=new WeakMap,me=new WeakMap,it=new WeakMap,Ue=new WeakMap,rt=new WeakMap,se=new WeakMap,Ye=new WeakMap,He=new WeakMap,Je=new WeakMap,fe=new WeakMap,Ae=new WeakMap,Mt=new WeakMap,Wt=new WeakMap,Ht=new WeakMap,$t=new WeakMap,zt=new WeakMap,Xt=new WeakMap,Lt=new WeakMap,Et=new WeakSet,br=new WeakSet,Nt=new WeakSet,er=new WeakSet;function Rr(D){var M=this;D!==ue(this,He)&&(St(this,He,D),setTimeout(function(){return ue(M,ie).call(M,ue(M,He))}))}function Yr(D,M){var A=this,$=ue(this,rt)[D],X=$.bytes,ce=$.dir,ae=ue(this,fe),le=ae[ce].hasOwnProperty(X)?ae[ce][X]:{timings:[],numMeasurements:ue(this,rt).filter(function(pe){var G=pe.bytes,Z=pe.dir;return X===G&&ce===Z}).map(function(pe){return pe.count}).reduce(function(pe,G){return pe+G},0)};M&&le.timings.push(M),le.timings=le.timings.slice(-le.numMeasurements),ae[ce][X]=le,M?setTimeout(function(){ue(A,me).call(A,Na({type:ce,bytes:X},M),ae)}):ue(this,we).call(this,ue(this,rt)[D],ae)}function Wr(){var D=this,M=ue(this,rt),A=M[ue(this,Ae)];if(ue(this,Mt)>=A.count){var $=ue(this,Je);if(ue(this,Ht)>this.finishRequestDuration&&!A.bypassMinDuration){var X=A.dir;ue(this,Je)[X]=!0,Object.values(ue(this,Je)).every(function(Me){return Me})&&ue(this,it).call(this,ue(this,fe))}St(this,Mt,0),St(this,Ht,-1/0),performance.clearResourceTimings();do St(this,Ae,ue(this,Ae)+1);while(ue(this,Ae)<M.length&&$[M[ue(this,Ae)].dir]);if(ue(this,Ae)>=M.length)return St(this,Je,{down:!0,up:!0}),Vt(this,Et,Rr).call(this,!1),void ue(this,it).call(this,ue(this,fe));A=M[ue(this,Ae)]}var ce=ue(this,Ae);ue(this,Mt)===0&&Vt(this,br,Yr).call(this,ce);var ae=A,le=ae.bytes,pe=ae.dir==="down",G=ue(this,pe?se:Ye),Z=Object.assign({},ue(this,U));pe&&(Z.bytes="".concat(le));var te,Y="".concat(G.startsWith("http")||G.startsWith("//")?"":window.location.origin).concat(G,"?").concat(Object.entries(Z).map(function(Me){var ke=la(Me,2),Ne=ke[0],de=ke[1];return"".concat(Ne,"=").concat(de)}).join("&")),ve=Object.assign({},pe?{}:{method:"POST",body:B(le)},ue(this,H)),Be=St(this,Xt,fetch(Y,ve).then(function(Me){if(Me.ok)return Me;throw Error(Me.statusText)}).then(function(Me){return D.getServerTime&&(te=D.getServerTime(Me)),Me}).then(function(Me){return Me.text().then(function(ke){return ue(D,re)&&ue(D,re).call(D,{url:Y,headers:Me.headers,body:ke}),ke})}).then(function(Me,ke){if(Be._cancel)ke("cancelled");else{var Ne=performance.getEntriesByName(Y).slice(-1)[0],de={transferSize:Ne.transferSize,ttfb:Ml(Ne),payloadDownloadTime:Ll(Ne),serverTime:te||-1,measTime:new Date};if(de.ping=Math.max(.01,de.ttfb-(te||ue(D,zt))),de.duration=(pe?Nl:Al)(de),de.bps=(pe?q:W)(de,le),pe&&le){var ge=+le;de.transferSize&&(de.transferSize<ge||de.transferSize/ge>1.05)&&console.warn("Requested ".concat(ge,"B but received ").concat(de.transferSize,"B (").concat(Math.round(de.transferSize/ge*1e4)/100,"%)."))}Vt(D,br,Yr).call(D,ce,de);var Ve=de.duration;St(D,Ht,ue(D,Ht)<0?Ve:Math.min(ue(D,Ht),Ve)),St(D,Mt,ue(D,Mt)+1),St(D,Wt,0),ue(D,$t)?St(D,Lt,setTimeout(function(){return Vt(D,Nt,Wr).call(D)},ue(D,$t))):Vt(D,Nt,Wr).call(D)}}).catch(function(Me){var ke,Ne;Be._cancel||(console.warn("Error fetching ".concat(Y,": ").concat(Me)),St(D,Wt,(ke=ue(D,Wt),Ne=ke++,ke)),Ne<20?Vt(D,Nt,Wr).call(D):(St(D,Wt,0),Vt(D,Et,Rr).call(D,!1),ue(D,Ue).call(D,"Connection failed to ".concat(Y,". Gave up after ").concat(20," retries."))))}))}function tr(){var D=ue(this,Xt);D&&(D._cancel=!0)}var Xr=function(){function D(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},$=A.downloadApiUrl,X=A.uploadApiUrl,ce=A.throttleMs,ae=ce===void 0?0:ce,le=A.estimatedServerTime,pe=le===void 0?0:le;if(oa(this,D),Bn(this,er),Bn(this,Nt),Bn(this,br),Bn(this,Et),Rt(this,U,{writable:!0,value:{}}),Rt(this,H,{writable:!0,value:{}}),Jt(this,"finishRequestDuration",1e3),Jt(this,"getServerTime",Il),Rt(this,re,{writable:!0,value:function(G){return G}}),Rt(this,ie,{writable:!0,value:function(){}}),Rt(this,we,{writable:!0,value:function(){}}),Rt(this,me,{writable:!0,value:function(){}}),Rt(this,it,{writable:!0,value:function(){}}),Rt(this,Ue,{writable:!0,value:function(){}}),Rt(this,rt,{writable:!0,value:void 0}),Rt(this,se,{writable:!0,value:void 0}),Rt(this,Ye,{writable:!0,value:void 0}),Rt(this,He,{writable:!0,value:!1}),Rt(this,Je,{writable:!0,value:{down:!1,up:!1}}),Rt(this,fe,{writable:!0,value:{down:{},up:{}}}),Rt(this,Ae,{writable:!0,value:0}),Rt(this,Mt,{writable:!0,value:0}),Rt(this,Wt,{writable:!0,value:0}),Rt(this,Ht,{writable:!0,value:-1/0}),Rt(this,$t,{writable:!0,value:0}),Rt(this,zt,{writable:!0,value:0}),Rt(this,Xt,{writable:!0,value:void 0}),Rt(this,Lt,{writable:!0,value:void 0}),!M)throw new Error("Missing measurements argument");if(!$)throw new Error("Missing downloadApiUrl argument");if(!X)throw new Error("Missing uploadApiUrl argument");St(this,rt,M),St(this,se,$),St(this,Ye,X),St(this,$t,ae),St(this,zt,Math.max(0,pe))}return ca(D,[{key:"results",get:function(){return ue(this,fe)}},{key:"qsParams",get:function(){return ue(this,U)},set:function(M){St(this,U,M)}},{key:"fetchOptions",get:function(){return ue(this,H)},set:function(M){St(this,H,M)}},{key:"responseHook",set:function(M){St(this,re,M)}},{key:"onRunningChange",set:function(M){St(this,ie,M)}},{key:"onNewMeasurementStarted",set:function(M){St(this,we,M)}},{key:"onMeasurementResult",set:function(M){St(this,me,M)}},{key:"onFinished",set:function(M){St(this,it,M)}},{key:"onConnectionError",set:function(M){St(this,Ue,M)}},{key:"pause",value:function(){clearTimeout(ue(this,Lt)),Vt(this,er,tr).call(this),Vt(this,Et,Rr).call(this,!1)}},{key:"play",value:function(){ue(this,He)||(Vt(this,Et,Rr).call(this,!0),Vt(this,Nt,Wr).call(this))}}]),D}(),vn=["measureParallelLatency","parallelLatencyThrottleMs","downloadApiUrl","uploadApiUrl","estimatedServerTime"],Pr=new WeakMap,cn=new WeakSet;function _r(D){var M=this;ue(this,Pr)&&(D?setTimeout(function(){return ue(M,Pr).play()},20):ue(this,Pr).pause())}var _n=function(D){Hs(A,D);var M=zs(A);function A($){var X,ce,ae,le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pe=le.measureParallelLatency,G=pe!==void 0&&pe,Z=le.parallelLatencyThrottleMs,te=Z===void 0?100:Z,Y=le.downloadApiUrl,ve=le.uploadApiUrl,Be=le.estimatedServerTime,Me=Be===void 0?0:Be,ke=ui(le,vn);return oa(this,A),Bn(vr(ae=M.call(this,$,Na({downloadApiUrl:Y,uploadApiUrl:ve,estimatedServerTime:Me},ke))),cn),Rt(vr(ae),Pr,{writable:!0,value:void 0}),G&&(St(vr(ae),Pr,new Xr([{dir:"down",bytes:0,count:1/0,bypassMinDuration:!0}],{downloadApiUrl:Y,uploadApiUrl:ve,estimatedServerTime:Me,throttleMs:te})),ue(vr(ae),Pr).qsParams={during:"".concat($[0].dir,"load")},kn((X=vr(ae),Jr(A.prototype)),"onRunningChange",Vt(vr(ae),cn,_r),X,!0),kn((ce=vr(ae),Jr(A.prototype)),"onConnectionError",function(){return ue(vr(ae),Pr).pause()},ce,!0)),ae}return ca(A,[{key:"latencyResults",get:function(){return ue(this,Pr)&&ue(this,Pr).results.down[0].timings}},{key:"onParallelLatencyResult",set:function($){ue(this,Pr)&&(ue(this,Pr).onMeasurementResult=function(X){return $(X)})}},{key:"fetchOptions",get:function(){return bo(Jr(A.prototype),"fetchOptions",this)},set:function($){kn(Jr(A.prototype),"fetchOptions",$,this,!0),ue(this,Pr)&&(ue(this,Pr).fetchOptions=$)}},{key:"onRunningChange",set:function($){var X=this;kn(Jr(A.prototype),"onRunningChange",function(ce){Vt(X,cn,_r).call(X,ce),$(ce)},this,!0)}},{key:"onConnectionError",set:function($){var X=this;kn(Jr(A.prototype),"onConnectionError",function(){ue(X,Pr)&&ue(X,Pr).pause(),$.apply(void 0,arguments)},this,!0)}}]),A}(Xr),Pt=["measurementId","logApiUrl"],en=new WeakMap,vt=new WeakMap,cr=new WeakMap,Er=new WeakMap,qr=new WeakSet,Zr=new WeakSet;function Hr(D){ue(this,Er)&&(St(this,cr,+D.headers.get("cf-meta-request-time")),St(this,vt,D.body.slice(-300).split("___").pop()))}function Xn(D){if(ue(this,Er)){var M={type:D.type,bytes:D.bytes,ping:Math.round(D.ping),ttfb:Math.round(D.ttfb),payloadDownloadTime:Math.round(D.payloadDownloadTime),duration:Math.round(D.duration),transferSize:Math.round(D.transferSize),serverTime:Math.round(D.serverTime),token:ue(this,vt),requestTime:ue(this,cr),measId:ue(this,en)};St(this,vt,null),St(this,cr,null),fetch(ue(this,Er),Na({method:"POST",body:JSON.stringify(M)},this.fetchOptions))}}var ua=function(D){Hs(A,D);var M=zs(A);function A($){var X,ce,ae,le,pe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},G=pe.measurementId,Z=pe.logApiUrl,te=ui(pe,Pt);return oa(this,A),Bn(vr(le=M.call(this,$,te)),Zr),Bn(vr(le),qr),Rt(vr(le),en,{writable:!0,value:void 0}),Rt(vr(le),vt,{writable:!0,value:void 0}),Rt(vr(le),cr,{writable:!0,value:void 0}),Rt(vr(le),Er,{writable:!0,value:void 0}),St(vr(le),en,G),St(vr(le),Er,Z),kn((X=vr(le),Jr(A.prototype)),"qsParams",Z?{measId:ue(vr(le),en)}:{},X,!0),kn((ce=vr(le),Jr(A.prototype)),"responseHook",function(Y){return Vt(vr(le),qr,Hr).call(vr(le),Y)},ce,!0),kn((ae=vr(le),Jr(A.prototype)),"onMeasurementResult",function(Y){return Vt(vr(le),Zr,Xn).call(vr(le),Y)},ae,!0),le}return ca(A,[{key:"qsParams",set:function($){kn(Jr(A.prototype),"qsParams",ue(this,Er)?Na({measId:ue(this,en)},$):$,this,!0)}},{key:"responseHook",set:function($){var X=this;kn(Jr(A.prototype),"responseHook",function(ce){$(ce),Vt(X,qr,Hr).call(X,ce)},this,!0)}},{key:"onMeasurementResult",set:function($){var X=this;kn(Jr(A.prototype),"onMeasurementResult",function(ce){for(var ae=arguments.length,le=new Array(ae>1?ae-1:0),pe=1;pe<ae;pe++)le[pe-1]=arguments[pe];$.apply(void 0,[ce].concat(le)),Vt(X,Zr,Xn).call(X,ce)},this,!0)}}]),A}(_n),da=new WeakMap,Un=new WeakMap,In=new WeakMap,ea=new WeakSet,pa=new WeakSet,zr=new WeakSet,ya=function(){function D(M){if(oa(this,D),Bn(this,zr),Bn(this,pa),Bn(this,ea),Rt(this,da,{writable:!0,value:!1}),Rt(this,Un,{writable:!0,value:void 0}),Rt(this,In,{writable:!0,value:void 0}),!M)throw new Error("Missing operation to perform");St(this,In,M),this.play()}return ca(D,[{key:"pause",value:function(){Vt(this,zr,ta).call(this),Vt(this,ea,Wn).call(this,!1)}},{key:"stop",value:function(){this.pause()}},{key:"play",value:function(){ue(this,da)||(Vt(this,ea,Wn).call(this,!0),Vt(this,pa,ha).call(this))}}]),D}();function Wn(D){D!==ue(this,da)&&St(this,da,D)}function ha(){var D=this,M=St(this,Un,ue(this,In).call(this).then(function(){!M._cancel&&Vt(D,pa,ha).call(D)}))}function ta(){var D=ue(this,Un);D&&(D._cancel=!0)}var tn=new WeakMap,fa=function(){function D(){var M=this,A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},$=A.download,X=A.upload;if(oa(this,D),Jt(this,"qsParams",{}),Jt(this,"fetchOptions",{}),Rt(this,tn,{writable:!0,value:[]}),!$&&!X)throw new Error("Missing at least one of download/upload config");[[$,"download"],[X,"upload"]].filter(function(ae){return la(ae,1)[0]}).forEach(function(ae){var le=la(ae,2),pe=le[0],G=le[1],Z=pe.apiUrl,te=pe.chunkSize;if(!Z)throw new Error("Missing ".concat(G," apiUrl argument"));if(!te)throw new Error("Missing ".concat(G," chunkSize argument"))});var ce=function(ae){var le=ae.apiUrl,pe=ae.qsParams,G=pe===void 0?{}:pe,Z=ae.fetchOptions,te=Z===void 0?{}:Z;return new ya(function(){var Y=Object.assign({},G,M.qsParams),ve="".concat(le.startsWith("http")||le.startsWith("//")?"":window.location.origin).concat(le,"?").concat(Object.entries(Y).map(function(Me){var ke=la(Me,2),Ne=ke[0],de=ke[1];return"".concat(Ne,"=").concat(de)}).join("&")),Be=Object.assign({},te,M.fetchOptions);return fetch(ve,Be).then(function(Me){if(Me.ok)return Me;throw Error(Me.statusText)}).then(function(Me){return Me.text()})})};$&&ue(this,tn).push(ce({apiUrl:$.apiUrl,qsParams:{bytes:"".concat($.chunkSize)}})),X&&ue(this,tn).push(ce({apiUrl:X.apiUrl,fetchOptions:{method:"POST",body:"0".repeat(X.chunkSize)}}))}return ca(D,[{key:"pause",value:function(){ue(this,tn).forEach(function(M){return M.pause()})}},{key:"stop",value:function(){this.pause()}},{key:"play",value:function(){ue(this,tn).forEach(function(M){return M.play()})}}]),D}(),ba=["iceServers","acceptIceCandidate","dataChannelCfg"],Mn=new WeakMap,Zn=new WeakMap,Hn=new WeakMap,Cn=new WeakMap,rn=new WeakMap,qn=function(){function D(){var M=this,A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},$=A.iceServers,X=$===void 0?[]:$,ce=A.acceptIceCandidate,ae=ce===void 0?function(ve){var Be=ve.protocol||"";if(!Be&&ve.candidate){var Me=ve.candidate.split(" ");Me.length>=3&&(Be=Me[2])}return Be.toLowerCase()==="udp"}:ce,le=A.dataChannelCfg,pe=le===void 0?{ordered:!1,maxRetransmits:0}:le,G=ui(A,ba);oa(this,D),Jt(this,"onOpen",function(){}),Jt(this,"onClose",function(){}),Jt(this,"onMessageReceived",function(){}),Rt(this,Mn,{writable:!0,value:!1}),Rt(this,Zn,{writable:!0,value:void 0}),Rt(this,Hn,{writable:!0,value:void 0}),Rt(this,Cn,{writable:!0,value:void 0}),Rt(this,rn,{writable:!0,value:void 0});var Z=new RTCPeerConnection(Na({iceServers:X},G)),te=new RTCPeerConnection(Na({iceServers:X},G)),Y=Z.createDataChannel("channel",pe);Y.onopen=function(){St(M,Mn,!0),M.onOpen()},Y.onclose=function(){return M.close()},te.ondatachannel=function(ve){var Be=ve.channel;Be.onclose=function(){return M.close()},Be.onmessage=function(Me){return M.onMessageReceived(Me.data)},St(M,rn,Be)},Z.onicecandidate=function(ve){ve.candidate&&ae(ve.candidate)&&te.addIceCandidate(ve.candidate)},te.onicecandidate=function(ve){ve.candidate&&ae(ve.candidate)&&Z.addIceCandidate(ve.candidate)},Z.createOffer().then(function(ve){return Z.setLocalDescription(ve)}).then(function(){return te.setRemoteDescription(Z.localDescription)}).then(function(){return te.createAnswer()}).then(function(ve){return te.setLocalDescription(ve)}).then(function(){return Z.setRemoteDescription(te.localDescription)}),St(this,Zn,Z),St(this,Hn,te),St(this,Cn,Y),St(this,Mn,!1)}return ca(D,[{key:"send",value:function(M){return ue(this,Cn).send(M)}},{key:"close",value:function(){return ue(this,Zn)&&ue(this,Zn).close(),ue(this,Hn)&&ue(this,Hn).close(),ue(this,Cn)&&ue(this,Cn).close(),ue(this,rn)&&ue(this,rn).close(),ue(this,Mn)&&this.onClose(),St(this,Mn,!1),this}}]),D}(),dn=new WeakMap,Ln=new WeakMap,Tr=new WeakMap,Tn=new WeakMap,ra=new WeakMap,wr=new WeakMap,Sr=function(){function D(){var M=this,A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},$=A.turnServerUri,X=A.turnServerCredsApi,ce=A.turnServerCredsApiParser,ae=ce===void 0?function(Ge){return{turnServerUser:Ge.username,turnServerPass:Ge.credential}}:ce,le=A.turnServerCredsApiIncludeCredentials,pe=le!==void 0&&le,G=A.turnServerUser,Z=A.turnServerPass,te=A.numMsgs,Y=te===void 0?100:te,ve=A.batchSize,Be=ve===void 0?10:ve,Me=A.batchWaitTime,ke=Me===void 0?10:Me,Ne=A.responsesWaitTime,de=Ne===void 0?5e3:Ne,ge=A.connectionTimeout,Ve=ge===void 0?5e3:ge;if(oa(this,D),Rt(this,dn,{writable:!0,value:function(){}}),Rt(this,Ln,{writable:!0,value:function(){}}),Rt(this,Tr,{writable:!0,value:function(){}}),Jt(this,"onMsgSent",function(){}),Jt(this,"onAllMsgsSent",function(){}),Jt(this,"onMsgReceived",function(){}),Rt(this,Tn,{writable:!0,value:{}}),Rt(this,ra,{writable:!0,value:void 0}),Rt(this,wr,{writable:!0,value:void 0}),!$)throw new Error("Missing turnServerUri argument");if(!(G&&Z||X))throw new Error("Missing either turnServerCredsApi or turnServerUser+turnServerPass arguments");St(this,wr,Y),(G&&Z?Promise.resolve({turnServerUser:G,turnServerPass:Z}):fetch(X,{credentials:pe?"include":void 0}).then(function(Ge){return Ge.json()}).then(function(Ge){if(Ge.error)throw Ge.error;return Ge}).then(ae)).catch(function(Ge){return ue(M,dn).call(M,Ge)}).then(function(Ge){var ot=Ge.turnServerUser,pt=Ge.turnServerPass,ht=St(M,ra,new qn({iceServers:[{urls:"turn:".concat($,"?transport=udp"),username:ot,credential:pt}],iceTransportPolicy:"relay"})),Ct=!1;setTimeout(function(){Ct||(ht.close(),ue(M,Ln).call(M,"ICE connection timeout!"))},Ve);var je=ue(M,Tn);ht.onOpen=function(){Ct=!0;var jt=M;(function Pn(mt){if(mt<=Y){for(var bn=mt;bn<=Math.min(Y,mt+Be-1);)je[bn]=!1,ht.send(bn),jt.onMsgSent(bn),bn++;setTimeout(function(){return Pn(bn)},ke)}else{jt.onAllMsgsSent(Object.keys(je).length);var Ya=function(){ht.close(),ue(jt,Tr).call(jt,jt.results)},Xa=setTimeout(Ya,de),Ta=Object.values(ue(jt,Tn)).filter(function(pn){return!pn}).length;ht.onMessageReceived=function(pn){clearTimeout(Xa),je[pn]=!0,jt.onMsgReceived(pn),--Ta<=0&&Object.values(ue(jt,Tn)).every(function(gs){return gs})?Ya():Xa=setTimeout(Ya,de)}}})(1)},ht.onMessageReceived=function(jt){je[jt]=!0,M.onMsgReceived(jt)}}).catch(function(Ge){return ue(M,Ln).call(M,Ge.toString())})}return ca(D,[{key:"onCredentialsFailure",set:function(M){St(this,dn,M)}},{key:"onConnectionError",set:function(M){St(this,Ln,M)}},{key:"onFinished",set:function(M){St(this,Tr,M)}},{key:"results",get:function(){var M=ue(this,wr),A=Object.keys(ue(this,Tn)).length,$=Object.entries(ue(this,Tn)).filter(function(X){return!la(X,2)[1]}).map(function(X){return+la(X,1)[0]});return{totalMessages:M,numMessagesSent:A,packetLoss:$.length/A,lostMessages:$}}}]),D}(),Xe=["downloadChunkSize","uploadChunkSize","downloadApiUrl","uploadApiUrl"],Le=new WeakMap,hr=function(D){Hs(A,D);var M=zs(A);function A(){var $,X,ce,ae,le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},pe=le.downloadChunkSize,G=le.uploadChunkSize,Z=le.downloadApiUrl,te=le.uploadApiUrl,Y=ui(le,Xe);return oa(this,A),Rt(vr(ae=M.call(this,Y)),Le,{writable:!0,value:void 0}),(pe||G)&&(St(vr(ae),Le,new fa({download:pe?{apiUrl:Z,chunkSize:pe}:null,upload:G?{apiUrl:te,chunkSize:G}:null})),kn(($=vr(ae),Jr(A.prototype)),"onCredentialsFailure",kn((ce=vr(ae),Jr(A.prototype)),"onConnectionError",kn((X=vr(ae),Jr(A.prototype)),"onFinished",function(){return ue(vr(ae),Le).stop()},X,!0),ce,!0),$,!0)),ae}return ca(A,[{key:"qsParams",set:function($){ue(this,Le)&&(ue(this,Le).qsParams=$)}},{key:"fetchOptions",set:function($){ue(this,Le)&&(ue(this,Le).fetchOptions=$)}},{key:"onCredentialsFailure",set:function($){var X=this;kn(Jr(A.prototype),"onCredentialsFailure",function(){$.apply(void 0,arguments),ue(X,Le)&&ue(X,Le).stop()},this,!0)}},{key:"onConnectionError",set:function($){var X=this;kn(Jr(A.prototype),"onConnectionError",function(){$.apply(void 0,arguments),ue(X,Le)&&ue(X,Le).stop()},this,!0)}},{key:"onFinished",set:function($){var X=this;kn(Jr(A.prototype),"onFinished",function(){$.apply(void 0,arguments),ue(X,Le)&&ue(X,Le).stop()},this,!0)}}]),A}(Sr),Vr=["reachable"],zn=ca(function D(M){var A=this,$=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},X=$.timeout,ce=X===void 0?-1:X,ae=$.fetchOptions,le=ae===void 0?{}:ae;oa(this,D),Jt(this,"onFinished",function(){});var pe=!1,G=function(Z){var te=Z.reachable,Y=ui(Z,Vr);pe||(pe=!0,A.onFinished(Na({targetUrl:M,reachable:te},Y)))};fetch(M,le).then(function(Z){G({reachable:!0,response:Z})}).catch(function(Z){G({reachable:!1,error:Z})}),ce>0&&setTimeout(function(){return G({reachable:!1,error:"Request timeout"})},ce)}),wa=function(D){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;if(!D.length)return 0;var A=D.slice().sort(function(ae,le){return ae-le}),$=(D.length-1)*M,X=$%1;if(X===0)return A[Math.round($)];var ce=[Math.floor,Math.ceil].map(function(ae){return A[ae($)]});return ce[0]+(ce[1]-ce[0])*X},et=new WeakMap,$r=new WeakMap,Si=function(){function D(M){var A=this;oa(this,D),Jt(this,"getLatencyPoints",function($){return $.timings.map(function(X){return X.ping})}),Jt(this,"getLatency",function($){return wa(A.getLatencyPoints($),ue(A,et).latencyPercentile)}),Jt(this,"getBandwidthPoints",function($){return Object.entries($).map(function(X){var ce=la(X,2),ae=ce[0];return ce[1].timings.map(function(le){var pe=le.bps,G=le.duration,Z=le.ping,te=le.measTime,Y=le.serverTime,ve=le.transferSize;return{bytes:+ae,bps:pe,duration:G,ping:Z,measTime:te,serverTime:Y,transferSize:ve}})}).flat()}),Jt(this,"getBandwidth",function($){return wa(A.getBandwidthPoints($).filter(function(X){return X.duration>=ue(A,et).bandwidthMinRequestDuration}).map(function(X){return X.bps}).filter(function(X){return X}),ue(A,et).bandwidthPercentile)}),Jt(this,"getLoadedLatency",function($){return A.getLatency({timings:ue(A,$r).call(A,$)})}),Jt(this,"getLoadedJitter",function($){return A.getJitter({timings:ue(A,$r).call(A,$)})}),Jt(this,"getLoadedLatencyPoints",function($){return A.getLatencyPoints({timings:ue(A,$r).call(A,$)})}),Jt(this,"getPacketLoss",function($){return $.packetLoss}),Jt(this,"getPacketLossDetails",function($){return $}),Jt(this,"getReachability",function($){return!!$.reachable}),Jt(this,"getReachabilityDetails",function($){return{host:$.host,reachable:$.reachable}}),Rt(this,et,{writable:!0,value:void 0}),Rt(this,$r,{writable:!0,value:function($){return Object.values($).filter(function(X){return X.timings.length&&Math.min.apply(Math,di(X.timings.map(function(ce){return ce.duration})))>=ue(A,et).loadedRequestMinDuration}).map(function(X){return X.sideLatency||[]}).flat().slice(-ue(A,et).loadedLatencyMaxPoints)}}),St(this,et,M)}return ca(D,[{key:"getJitter",value:function(M){var A=this.getLatencyPoints(M);return A.length<2?null:A.reduce(function($,X){var ce=$.sumDeltas,ae=ce===void 0?0:ce,le=$.prevLatency;return{sumDeltas:ae+(le!==void 0?Math.abs(le-X):0),prevLatency:X}},{}).sumDeltas/(A.length-1)}}]),D}(),ps=Si,Li=["bad","poor","average","good","great"],Ni={loadedLatencyIncrease:function(D){return D.latency&&(D.downLoadedLatency||D.upLoadedLatency)?Math.max(D.downLoadedLatency,D.upLoadedLatency)-D.latency:void 0}},Ro={packetLoss:0},hs=new WeakMap,gc=function(){function D(M){oa(this,D),Rt(this,hs,{writable:!0,value:void 0}),St(this,hs,M)}return ca(D,[{key:"getScores",value:function(M){var A=Object.assign.apply(Object,di(Object.entries(ue(this,hs).aimMeasurementScoring).map(function($){var X=la($,2),ce=X[0],ae=X[1],le=Ni.hasOwnProperty(ce)?Ni[ce](M):M[ce];return le===void 0?Ro.hasOwnProperty(ce)?Jt({},ce,Ro[ce]):{}:Jt({},ce,le===void 0?0:+ae(le))})));return Object.assign.apply(Object,[{}].concat(di(Object.entries(ue(this,hs).aimExperiencesDefs).filter(function($){return la($,2)[1].input.every(function(X){return A.hasOwnProperty(X)})}).map(function($){var X,ce=la($,2),ae=ce[0],le=ce[1],pe=le.input,G=le.pointThresholds,Z=Math.max(0,(X=pe.map(function(Y){return A[Y]}),X.reduce(function(Y,ve){return Y+ve},0))),te=li(G,[0,1,2,3,4])(Z);return Jt({},ae,{points:Z,classificationIdx:te,classificationName:Li[te]})}))))}}]),D}(),vc=gc,fs=new WeakMap,Eo=new WeakMap,$s=new WeakMap,yn=new WeakMap,_c=new WeakMap,yc=new WeakMap,bc=new WeakMap,wc=new WeakMap,Sc=function(){function D(M){var A=this;oa(this,D),Jt(this,"raw",void 0),Jt(this,"getUnloadedLatency",function(){return ue(A,yn).call(A,"getLatency","latency")}),Jt(this,"getUnloadedJitter",function(){return ue(A,yn).call(A,"getJitter","latency")}),Jt(this,"getUnloadedLatencyPoints",function(){return ue(A,yn).call(A,"getLatencyPoints","latency",[])}),Jt(this,"getDownLoadedLatency",function(){return ue(A,yn).call(A,"getLoadedLatency","download")}),Jt(this,"getDownLoadedJitter",function(){return ue(A,yn).call(A,"getLoadedJitter","download")}),Jt(this,"getDownLoadedLatencyPoints",function(){return ue(A,yn).call(A,"getLoadedLatencyPoints","download",[])}),Jt(this,"getUpLoadedLatency",function(){return ue(A,yn).call(A,"getLoadedLatency","upload")}),Jt(this,"getUpLoadedJitter",function(){return ue(A,yn).call(A,"getLoadedJitter","upload")}),Jt(this,"getUpLoadedLatencyPoints",function(){return ue(A,yn).call(A,"getLoadedLatencyPoints","upload",[])}),Jt(this,"getDownloadBandwidth",function(){return ue(A,yn).call(A,"getBandwidth","download")}),Jt(this,"getDownloadBandwidthPoints",function(){return ue(A,yn).call(A,"getBandwidthPoints","download",[])}),Jt(this,"getUploadBandwidth",function(){return ue(A,yn).call(A,"getBandwidth","upload")}),Jt(this,"getUploadBandwidthPoints",function(){return ue(A,yn).call(A,"getBandwidthPoints","upload",[])}),Jt(this,"getPacketLoss",function(){return ue(A,yn).call(A,"getPacketLoss","packetLoss")}),Jt(this,"getPacketLossDetails",function(){return ue(A,yn).call(A,"getPacketLossDetails","packetLoss",void 0,!0)}),Jt(this,"getScores",function(){return ue(A,$s).getScores(A.getSummary())}),Rt(this,fs,{writable:!0,value:void 0}),Rt(this,Eo,{writable:!0,value:void 0}),Rt(this,$s,{writable:!0,value:void 0}),Rt(this,yn,{writable:!0,value:function($,X){var ce=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,ae=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return A.raw.hasOwnProperty(X)&&A.raw[X].started?ae&&A.raw[X].error?{error:A.raw[X].error}:ue(A,Eo)[$](A.raw[X].results):ce}}),Rt(this,_c,{writable:!0,value:function(){return ue(A,yn).call(A,"getReachability","v4Reachability")}}),Rt(this,yc,{writable:!0,value:function(){return ue(A,yn).call(A,"getReachabilityDetails","v4Reachability")}}),Rt(this,bc,{writable:!0,value:function(){return ue(A,yn).call(A,"getReachability","v6Reachability")}}),Rt(this,wc,{writable:!0,value:function(){return ue(A,yn).call(A,"getReachabilityDetails","v6Reachability")}}),St(this,fs,M),this.clear(),St(this,Eo,new ps(ue(this,fs))),St(this,$s,new vc(ue(this,fs)))}return ca(D,[{key:"isFinished",get:function(){return Object.values(this.raw).every(function(M){return M.finished})}},{key:"clear",value:function(){this.raw=Object.assign.apply(Object,[{}].concat(di(di(new Set(ue(this,fs).measurements.map(function(M){return M.type}))).map(function(M){return Jt({},M,{started:!1,finished:!1,results:{}})}))))}},{key:"getSummary",value:function(){var M={download:this.getDownloadBandwidth,upload:this.getUploadBandwidth,latency:this.getUnloadedLatency,jitter:this.getUnloadedJitter,downLoadedLatency:this.getDownLoadedLatency,downLoadedJitter:this.getDownLoadedJitter,upLoadedLatency:this.getUpLoadedLatency,upLoadedJitter:this.getUpLoadedJitter,packetLoss:this.getPacketLoss,v4Reachability:ue(this,_c),v6Reachability:ue(this,bc)};return Object.assign.apply(Object,di(Object.entries(M).map(function(A){var $=la(A,2),X=$[0],ce=(0,$[1])();return ce===void 0?{}:Jt({},X,ce)})))}}]),D}(),Rc=Sc,Gs=function(D){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return D&&Math.round(D*Math.pow(10,M))/Math.pow(10,M)},Zs=function(D){return D.map(function(M){return Gs(M,2)})},Ec=function(D){return D.map(function(M){return{bytes:+M.bytes,bps:Gs(M.bps)}})},ze={latencyMs:["getUnloadedLatencyPoints",Zs],download:["getDownloadBandwidthPoints",Ec],upload:["getUploadBandwidthPoints",Ec],downLoadedLatencyMs:["getDownLoadedLatencyPoints",Zs],upLoadedLatencyMs:["getUpLoadedLatencyPoints",Zs],packetLoss:["getPacketLossDetails",function(D){return D.error?void 0:{numMessages:D.numMessagesSent,lossRatio:Gs(D.packetLoss,4)}}]},qs=function(D,M){var A=M.apiUrl,$={};Object.entries(ze).forEach(function(ce){var ae=la(ce,2),le=ae[0],pe=la(ae[1],2),G=pe[0],Z=pe[1],te=Z===void 0?function(ve){return ve}:Z,Y=D[G]();Y&&($[le]=te(Y))});var X=D.getScores();X&&($.scores=Object.assign.apply(Object,[{}].concat(di(Object.entries(X).map(function(ce){var ae,le=la(ce,2),pe=le[0],G=le[1];return Jt({},pe,{points:(ae=G).points,classification:ae.classificationName})}))))),fetch(A,{method:"POST",body:JSON.stringify($)})},Qv=["type"],Jv=["numPackets"],Yv=["bytes"],Xv=1e6,e_=1e6,vd=["latency","latencyUnderLoad","download","upload"],Uh=function(){return"".concat(Math.round(1e16*Math.random()))},_d=new WeakMap,ko=new WeakMap,Nn=new WeakMap,kc=new WeakMap,jl=new WeakMap,Ri=new WeakMap,Co=new WeakMap,Fl=new WeakMap,Bl=new WeakMap,ms=new WeakMap,Ul=new WeakMap,Cc=new WeakSet,yd=new WeakSet,Tc=new WeakSet,Ks=new WeakSet,Wh=new WeakSet,Hh=new WeakSet,Ha=new WeakSet,t_=function(){function D(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};oa(this,D),Bn(this,Ha),Bn(this,Hh),Bn(this,Wh),Bn(this,Ks),Bn(this,Tc),Bn(this,yd),Bn(this,Cc),Jt(this,"onRunningChange",function(){}),Jt(this,"onResultsChange",function(){}),Rt(this,_d,{writable:!0,value:function(){}}),Rt(this,ko,{writable:!0,value:function(){}}),Rt(this,Nn,{writable:!0,value:void 0}),Rt(this,kc,{writable:!0,value:void 0}),Rt(this,jl,{writable:!0,value:Uh()}),Rt(this,Ri,{writable:!0,value:-1}),Rt(this,Co,{writable:!0,value:void 0}),Rt(this,Fl,{writable:!0,value:Xv}),Rt(this,Bl,{writable:!0,value:e_}),Rt(this,ms,{writable:!0,value:!1}),Rt(this,Ul,{writable:!0,value:!1}),St(this,Nn,Object.assign({},fc,M,mc)),St(this,kc,new Rc(ue(this,Nn))),ue(this,Nn).autoStart&&this.play()}return ca(D,[{key:"results",get:function(){return ue(this,kc)}},{key:"isRunning",get:function(){return ue(this,ms)}},{key:"isFinished",get:function(){return ue(this,Ul)}},{key:"onFinish",set:function(M){St(this,_d,M)}},{key:"onError",set:function(M){St(this,ko,M)}},{key:"pause",value:function(){vd.includes(Vt(this,Tc,Hl).call(this))&&ue(this,Co).pause(),Vt(this,Cc,Wl).call(this,!1)}},{key:"play",value:function(){ue(this,ms)||(Vt(this,Cc,Wl).call(this,!0),Vt(this,Ha,Ja).call(this))}},{key:"restart",value:function(){Vt(this,Wh,r_).call(this),this.play()}}]),D}();function Wl(D){D!==ue(this,ms)&&(St(this,ms,D),this.onRunningChange(ue(this,ms)))}function zh(D){var M=this;D!==ue(this,Ul)&&(St(this,Ul,D),D&&setTimeout(function(){return ue(M,_d).call(M,M.results)}))}function Hl(){return ue(this,Ri)<0||ue(this,Ri)>=ue(this,Nn).measurements.length?null:ue(this,Nn).measurements[ue(this,Ri)].type}function To(){return ue(this,kc).raw[Vt(this,Tc,Hl).call(this)]||void 0}function r_(){Vt(this,Hh,n_).call(this),St(this,jl,Uh()),St(this,Ri,-1),St(this,Co,void 0),Vt(this,Cc,Wl).call(this,!1),Vt(this,yd,zh).call(this,!1),ue(this,kc).clear()}function n_(){var D=ue(this,Co);D&&(D.onFinished=D.onConnectionError=D.onFail=D.onMsgReceived=D.onCredentialsFailure=D.onMeasurementResult=function(){},vd.includes(Vt(this,Tc,Hl).call(this))&&D.pause())}function Ja(){var D,M=this;if(!(vd.includes(Vt(this,Tc,Hl).call(this))&&Vt(this,Ks,To).call(this)&&Vt(this,Ks,To).call(this).started)||Vt(this,Ks,To).call(this).finished||Vt(this,Ks,To).call(this).finishedCurrentRound||Vt(this,Ks,To).call(this).error){if(St(this,Ri,(D=ue(this,Ri),++D)),ue(this,Ri)>=ue(this,Nn).measurements.length)return Vt(this,Cc,Wl).call(this,!1),void Vt(this,yd,zh).call(this,!0);var A,$=ue(this,Nn).measurements[ue(this,Ri)],X=$.type,ce=ui($,Qv),ae=Vt(this,Ks,To).call(this),le=ue(this,Nn),pe=le.downloadApiUrl,G=le.uploadApiUrl,Z=le.estimatedServerTime;switch(X){case"v4Reachability":case"v6Reachability":(A=new zn("https://".concat(ce.host),{fetchOptions:{method:"GET",mode:"no-cors"}})).onFinished=function(Ve){ae.finished=!0,ae.results=Na({host:ce.host},Ve),M.onResultsChange({type:X}),Vt(M,Ha,Ja).call(M)};break;case"rpki":(A=new zn("https://".concat(ue(this,Nn).rpkiInvalidHost),{timeout:5e3})).onFinished=function(Ve){(Ve.response?Ve.response.json():Promise.resolve()).then(function(Ge){ae.finished=!0,ae.results=Na({host:ue(M,Nn).rpkiInvalidHost,filteringInvalids:!Ve.reachable},Ge?{asn:Ge.asn,name:Ge.name}:{}),M.onResultsChange({type:X}),Vt(M,Ha,Ja).call(M)})};break;case"nxdomain":(A=new zn("https://".concat(ce.nxhost),{fetchOptions:{mode:"no-cors"}})).onFinished=function(Ve){ae.finished=!0,ae.results={host:ce.nxhost,reachable:Ve.reachable},M.onResultsChange({type:X}),Vt(M,Ha,Ja).call(M)};break;case"packetLoss":case"packetLossUnderLoad":ae.finished=!1;var te=ce.numPackets,Y=ui(ce,Jv),ve=ue(this,Nn),Be=ve.turnServerUri,Me=ve.turnServerCredsApiUrl,ke=ve.turnServerUser,Ne=ve.turnServerPass,de=ve.includeCredentials;(A=new hr(Na({turnServerUri:Be,turnServerCredsApi:Me,turnServerCredsApiIncludeCredentials:de,turnServerUser:ke,turnServerPass:Ne,numMsgs:te,downloadChunkSize:ce.loadDown?ue(this,Fl):void 0,uploadChunkSize:ce.loadUp?ue(this,Bl):void 0,downloadApiUrl:pe,uploadApiUrl:G},Y))).onMsgReceived=function(){ae.results=Object.assign({},A.results),M.onResultsChange({type:X})},A.onFinished=function(){ae.finished=!0,M.onResultsChange({type:X}),Vt(M,Ha,Ja).call(M)},A.onConnectionError=function(Ve){ae.error=Ve,M.onResultsChange({type:X}),ue(M,ko).call(M,"Connection error while measuring packet loss: ".concat(Ve)),Vt(M,Ha,Ja).call(M)},A.onCredentialsFailure=function(){ae.error="unable to get turn server credentials",M.onResultsChange({type:X}),ue(M,ko).call(M,"Error while measuring packet loss: unable to get turn server credentials."),Vt(M,Ha,Ja).call(M)};break;case"latency":case"latencyUnderLoad":ae.finished=!1,(A=new ua([{dir:"down",bytes:0,count:ce.numPackets,bypassMinDuration:!0}],{downloadApiUrl:pe,uploadApiUrl:G,estimatedServerTime:Z,logApiUrl:ue(this,Nn).logMeasurementApiUrl,measurementId:ue(this,jl),downloadChunkSize:ce.loadDown?ue(this,Fl):void 0,uploadChunkSize:ce.loadUp?ue(this,Bl):void 0})).fetchOptions={credentials:ue(this,Nn).includeCredentials?"include":void 0},A.onMeasurementResult=A.onNewMeasurementStarted=function(Ve,Ge){ae.results=Object.assign({},Ge.down[0]),M.onResultsChange({type:X})},A.onFinished=function(){ae.finished=!0,M.onResultsChange({type:X}),ue(M,ms)&&Vt(M,Ha,Ja).call(M)},A.onConnectionError=function(Ve){ae.error=Ve,M.onResultsChange({type:X}),ue(M,ko).call(M,"Connection error while measuring latency: ".concat(Ve)),Vt(M,Ha,Ja).call(M)},A.play();break;case"download":case"upload":if(ae.finished||ae.error)Vt(this,Ha,Ja).call(this);else{delete ae.finishedCurrentRound;var ge=ue(this,Nn)["measure".concat(X==="download"?"Down":"Up","loadLoadedLatency")];(A=new ua([Na({dir:X==="download"?"down":"up"},ce)],{downloadApiUrl:pe,uploadApiUrl:G,estimatedServerTime:Z,logApiUrl:ue(this,Nn).logMeasurementApiUrl,measurementId:ue(this,jl),measureParallelLatency:ge,parallelLatencyThrottleMs:ue(this,Nn).loadedLatencyThrottle})).fetchOptions={credentials:ue(this,Nn).includeCredentials?"include":void 0},A.finishRequestDuration=ue(this,Nn).bandwidthFinishRequestDuration,A.onNewMeasurementStarted=function(Ve){var Ge=Ve.count,ot=Ve.bytes,pt=ae.results=Object.assign({},ae.results);!pt.hasOwnProperty(ot)&&(pt[ot]={timings:[],numMeasurements:0,sideLatency:ge?[]:void 0}),pt[ot].numMeasurements-pt[ot].timings.length!==Ge&&(pt[ot].numMeasurements+=Ge,M.onResultsChange({type:X}))},A.onMeasurementResult=function(Ve){var Ge=Ve.bytes,ot=ui(Ve,Yv);ae.results[Ge].timings.push(ot),ae.results=Object.assign({},ae.results),M.onResultsChange({type:X})},A.onParallelLatencyResult=function(Ve){ae.results[ce.bytes].sideLatency.push(Ve),ae.results=Object.assign({},ae.results),M.onResultsChange({type:X})},A.onFinished=function(Ve){var Ge=!ue(M,Nn).measurements.slice(ue(M,Ri)+1).map(function(ht){return ht.type}).includes(X),ot=Math.min.apply(Math,di(Object.values(X==="download"?Ve.down:Ve.up).slice(-1)[0].timings.map(function(ht){return ht.duration})));if(Ge||!ce.bypassMinDuration&&ot>ue(M,Nn).bandwidthFinishRequestDuration){ae.finished=!0,M.onResultsChange({type:X});var pt=.5*Object.keys(ae.results).map(function(ht){return+ht}).sort(function(ht,Ct){return Ct-ht})[0];X==="download"&&St(M,Fl,pt),X==="upload"&&St(M,Bl,pt)}else ae.finishedCurrentRound=!0;ue(M,ms)&&Vt(M,Ha,Ja).call(M)},A.onConnectionError=function(Ve){ae.error=Ve,M.onResultsChange({type:X}),ue(M,ko).call(M,"Connection error while measuring ".concat(X,": ").concat(Ve)),Vt(M,Ha,Ja).call(M)},A.play()}}St(this,Co,A),ae.started=!0,this.onResultsChange({type:X})}else ue(this,Co).play()}var zl=new WeakMap,bd=new WeakMap,a_=function(D){Hs(A,D);var M=zs(A);function A($){var X,ce;oa(this,A);for(var ae=arguments.length,le=new Array(ae>1?ae-1:0),pe=1;pe<ae;pe++)le[pe-1]=arguments[pe];return Rt(vr(ce=M.call.apply(M,[this,$].concat(le))),zl,{writable:!0,value:void 0}),Rt(vr(ce),bd,{writable:!0,value:function(G){ue(vr(ce),zl)&&qs(G,{apiUrl:ue(vr(ce),zl)})}}),kn((X=vr(ce),Jr(A.prototype)),"onFinish",ue(vr(ce),bd),X,!0),St(vr(ce),zl,Object.assign({},fc,$,mc).logAimApiUrl),ce}return ca(A,[{key:"onFinish",set:function($){var X=this;kn(Jr(A.prototype),"onFinish",function(ce){$(ce),ue(X,bd).call(X,ce)},this,!0)}}]),A}(t_);function Vh(D,M){var A=typeof Symbol<"u"&&D[Symbol.iterator]||D["@@iterator"];if(!A){if(Array.isArray(D)||(A=function(pe,G){if(pe){if(typeof pe=="string")return $h(pe,G);var Z=Object.prototype.toString.call(pe).slice(8,-1);if(Z==="Object"&&pe.constructor&&(Z=pe.constructor.name),Z==="Map"||Z==="Set")return Array.from(pe);if(Z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Z))return $h(pe,G)}}(D))||M){A&&(D=A);var $=0,X=function(){};return{s:X,n:function(){return $>=D.length?{done:!0}:{done:!1,value:D[$++]}},e:function(pe){throw pe},f:X}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ce,ae=!0,le=!1;return{s:function(){A=A.call(D)},n:function(){var pe=A.next();return ae=pe.done,pe},e:function(pe){le=!0,ce=pe},f:function(){try{ae||A.return==null||A.return()}finally{if(le)throw ce}}}}function $h(D,M){(M==null||M>D.length)&&(M=D.length);for(var A=0,$=new Array(M);A<M;A++)$[A]=D[A];return $}var i_=[i],Gh=!1,Pc=function(){function D(){(0,u.Z)(this,D)}var M,A,$,X,ce,ae,le,pe,G,Z;return(0,P.Z)(D,null,[{key:"config",value:function(te){if(!te)throw new Error("'token' is empty, please provide it in config");this.apiKey=te;var Y=S(Dt,void 0,I.apply(void 0,i_));window.STORE=Y,Qr.default.init({store:Y})}},{key:"getCameras",value:(Z=(0,b.Z)(_().mark(function te(){var Y,ve,Be,Me;return _().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:if(ke.prev=0,Y=navigator.userAgent.includes("Firefox"),ve=[],!Y){ke.next=8;break}return ke.next=6,new Promise(function(Ne,de){navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then(function(){var ge=(0,b.Z)(_().mark(function Ve(Ge){var ot;return _().wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:return pt.next=2,navigator.mediaDevices.enumerateDevices();case 2:ot=pt.sent,ve=ot.filter(function(ht){return ht.kind==="videoinput"}).map(function(ht){return new vo(ht.deviceId,ht.groupId,ht.kind,ht.label)}),Ne(ve),Ge.getTracks().forEach(function(ht){return ht.stop()});case 6:case"end":return pt.stop()}},Ve)}));return function(Ve){return ge.apply(this,arguments)}}()).catch(function(ge){console.error("Error in getCameras()",ge),de(ge)})});case 6:ke.next=12;break;case 8:return ke.next=10,navigator.mediaDevices.enumerateDevices();case 10:Be=ke.sent,ve=Be.filter(function(Ne){return Ne.kind==="videoinput"}).map(function(Ne){return new vo(Ne.deviceId,Ne.groupId,Ne.kind,Ne.label)});case 12:return ke.abrupt("return",ve);case 15:ke.prev=15,ke.t0=ke.catch(0),Me=ke.t0.message,ke.t0 instanceof TypeError&&ke.t0.name==="TypeError"&&(Me=ur.H.ERROR_CAMERA_ACCESS_UNAVAILABLE.message),console.error("An error occurred in getCameras(), ".concat(Me));case 20:case"end":return ke.stop()}},te,null,[[0,15]])})),function(){return Z.apply(this,arguments)})},{key:"getMicrophones",value:(G=(0,b.Z)(_().mark(function te(){var Y,ve,Be,Me;return _().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:if(ke.prev=0,Y=navigator.userAgent.includes("Firefox"),ve=[],!Y){ke.next=8;break}return ke.next=6,new Promise(function(Ne,de){navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(){var ge=(0,b.Z)(_().mark(function Ve(Ge){var ot;return _().wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:return pt.next=2,navigator.mediaDevices.enumerateDevices();case 2:ot=pt.sent,ve=ot.filter(function(ht){return ht.kind==="audioinput"}).map(function(ht){return new _o(ht.deviceId,ht.groupId,ht.kind,ht.label)}),Ne(ve),Ge.getTracks().forEach(function(ht){return ht.stop()});case 6:case"end":return pt.stop()}},Ve)}));return function(Ve){return ge.apply(this,arguments)}}()).catch(function(ge){console.error("Error in getMicrophones()",ge),de(ge)})});case 6:ke.next=12;break;case 8:return ke.next=10,navigator.mediaDevices.enumerateDevices();case 10:Be=ke.sent,ve=Be.filter(function(Ne){return Ne.kind==="audioinput"}).map(function(Ne){return new _o(Ne.deviceId,Ne.groupId,Ne.kind,Ne.label)});case 12:return ke.abrupt("return",ve);case 15:ke.prev=15,ke.t0=ke.catch(0),Me=ke.t0.message,ke.t0 instanceof TypeError&&ke.t0.name==="TypeError"&&(Me=ur.H.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message),console.error("An error occurred in getMicrophones(), ".concat(Me));case 20:case"end":return ke.stop()}},te,null,[[0,15]])})),function(){return G.apply(this,arguments)})},{key:"getPlaybackDevices",value:(pe=(0,b.Z)(_().mark(function te(){var Y,ve,Be,Me;return _().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:if(ke.prev=0,Y=navigator.userAgent.includes("Firefox"),ve=[],!Y){ke.next=8;break}return ke.next=6,new Promise(function(Ne,de){navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(){var ge=(0,b.Z)(_().mark(function Ve(Ge){var ot;return _().wrap(function(pt){for(;;)switch(pt.prev=pt.next){case 0:return pt.next=2,navigator.mediaDevices.enumerateDevices();case 2:ot=pt.sent,ve=ot.filter(function(ht){return ht.kind==="audiooutput"}).map(function(ht){return new sc(ht.deviceId,ht.groupId,ht.kind,ht.label)}),Ne(ve),Ge.getTracks().forEach(function(ht){return ht.stop()});case 6:case"end":return pt.stop()}},Ve)}));return function(Ve){return ge.apply(this,arguments)}}()).catch(function(ge){console.error("Error in getPlaybackDevices()",ge),de(ge)})});case 6:ke.next=12;break;case 8:return ke.next=10,navigator.mediaDevices.enumerateDevices();case 10:Be=ke.sent,ve=Be.filter(function(Ne){return Ne.kind==="audiooutput"}).map(function(Ne){return new sc(Ne.deviceId,Ne.groupId,Ne.kind,Ne.label)});case 12:return ke.abrupt("return",ve);case 15:ke.prev=15,ke.t0=ke.catch(0),Me=ke.t0.message,ke.t0 instanceof TypeError&&ke.t0.name==="TypeError"&&(Me="Playback device access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)"),console.error("An error occurred in getPlaybackDevices(), ".concat(Me));case 20:case"end":return ke.stop()}},te,null,[[0,15]])})),function(){return pe.apply(this,arguments)})},{key:"getDevices",value:(le=(0,b.Z)(_().mark(function te(){var Y,ve,Be,Me,ke,Ne;return _().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:return de.prev=0,de.next=3,navigator.mediaDevices.enumerateDevices();case 3:Y=de.sent,ve=[],Be=Vh(Y);try{for(Be.s();!(Me=Be.n()).done;)ke=Me.value,ve.push(new ds(ke.deviceId,ke.groupId,ke.kind,ke.label))}catch(ge){Be.e(ge)}finally{Be.f()}return de.abrupt("return",ve);case 10:de.prev=10,de.t0=de.catch(0),Ne=de.t0.message,de.t0 instanceof TypeError&&(Ne=de.t0.name==="TypeError"?"Could not access devices : Please ensure your devices is compatible and that you're on a secure website (https://)":de.t0.message),console.error("An error occurred in getDevices(), ".concat(Ne));case 15:case"end":return de.stop()}},te,null,[[0,10]])})),function(){return le.apply(this,arguments)})},{key:"on",value:function(te,Y){if(te!=="device-changed")throw new Error("Unsupported event type");this.addDeviceChangeEvent(),this.eventEmitter.on(te,Y)}},{key:"addDeviceChangeEvent",value:function(){var te=this;if(!Gh){this.getDevices().then(function(ve){te.devices=ve});try{navigator.mediaDevices.addEventListener("devicechange",function(){var ve=(0,b.Z)(_().mark(function Be(Me){var ke,Ne,de,ge,Ve;return _().wrap(function(Ge){for(;;)switch(Ge.prev=Ge.next){case 0:return ke=te.devices,Ge.next=3,te.getDevices();case 3:te.devices=Ge.sent,Ne=new Array,de=Vh(te.devices);try{for(Ve=function(){var ot=ge.value;ke.filter(function(pt){return pt.deviceId==ot.deviceId&&pt.kind==ot.kind}).length==0?Ne.push(ot):ke=ke.filter(function(pt){return!(pt.deviceId==ot.deviceId&&pt.kind==ot.kind)})},de.s();!(ge=de.n()).done;)Ve()}catch(ot){de.e(ot)}finally{de.f()}Ne.length!=0&&te.eventEmitter.emit("device-changed",{devices:te.devices}),ke.length!=0&&te.eventEmitter.emit("device-changed",{devices:te.devices});case 9:case"end":return Ge.stop()}},Be)}));return function(Be){return ve.apply(this,arguments)}}()),Gh=!0}catch(ve){var Y=ve.message;ve instanceof TypeError&&(Y=ve.name==="TypeError"?"Could not access devices : Please ensure your devices is compatible and that you're on a secure website (https://)":ve.message),console.error("An error occurred in device-change event, ".concat(Y))}}}},{key:"off",value:function(te,Y){if(te!=="device-changed")throw new Error("Unsupported event type");this.eventEmitter.off(te,Y)}},{key:"checkPermissions",value:(ae=(0,b.Z)(_().mark(function te(Y){var ve,Be,Me,ke,Ne;return _().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:if(Y||(Y=Yn.AUDIO_AND_VIDEO),ve=new Map,!Y.includes(Yn.AUDIO)&&!Y.includes(Yn.AUDIO_AND_VIDEO)){de.next=15;break}return Be=!0,de.prev=4,de.next=7,navigator.permissions.query({name:"microphone"});case 7:(Me=de.sent).state!="prompt"&&Me.state!="denied"||(Be=!1),de.next=14;break;case 11:throw de.prev=11,de.t0=de.catch(4),Error("Browser does not support microphone permission check");case 14:ve.set(Yn.AUDIO,Be);case 15:if(!Y.includes(Yn.VIDEO)&&!Y.includes(Yn.AUDIO_AND_VIDEO)){de.next=28;break}return ke=!0,de.prev=17,de.next=20,navigator.permissions.query({name:"camera"});case 20:(Ne=de.sent).state!="prompt"&&Ne.state!="denied"||(ke=!1),de.next=27;break;case 24:throw de.prev=24,de.t1=de.catch(17),Error("Browser does not support camera permission check");case 27:ve.set(Yn.VIDEO,ke);case 28:return de.abrupt("return",ve);case 29:case"end":return de.stop()}},te,null,[[4,11],[17,24]])})),function(te){return ae.apply(this,arguments)})},{key:"requestPermission",value:(ce=(0,b.Z)(_().mark(function te(Y){var ve,Be,Me,ke,Ne,de,ge,Ve,Ge,ot,pt,ht,Ct;return _().wrap(function(je){for(;;)switch(je.prev=je.next){case 0:if(Y||(Y=Yn.AUDIO_AND_VIDEO),ve=new Map,!Y.includes(Yn.AUDIO_AND_VIDEO)){je.next=32;break}return Me={audio:!0,video:!0},ke=!0,je.prev=5,je.next=8,navigator.mediaDevices.getUserMedia(Me);case 8:Be=je.sent,je.next=30;break;case 11:if(je.prev=11,je.t0=je.catch(5),!(je.t0 instanceof DOMException)){je.next=27;break}je.t1=je.t0.name,je.next=je.t1==="NotAllowedError"?17:je.t1==="NotReadableError"?19:je.t1==="NotFoundError"?21:24;break;case 17:return je.t0.message==="Permission denied by system"&&(Ne=ur.H.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),je.abrupt("break",25);case 19:return Ne=xc(je.t0,"video"),je.abrupt("break",25);case 21:return Ne=ur.H.ERROR_CAMERA_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Ne=ur.H.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),je.abrupt("break",25);case 24:Ne=je.t0.message;case 25:je.next=28;break;case 27:Ne=je.t0 instanceof TypeError&&je.t0.name==="TypeError"?ur.H.ERROR_CAMERA_ACCESS_UNAVAILABLE.message:je.t0.message;case 28:ke=!1,Ne&&console.error("An error occurred in request permission, ".concat(Ne));case 30:Be&&setTimeout(function(){Be.getTracks().forEach(function(jt){jt.stop()})},100),ve.set(Yn.AUDIO_AND_VIDEO,ke);case 32:if(!Y.includes(Yn.VIDEO)){je.next=62;break}return ge={audio:!1,video:!0},Ve=!0,je.prev=35,je.next=38,navigator.mediaDevices.getUserMedia(ge);case 38:de=je.sent,je.next=60;break;case 41:if(je.prev=41,je.t2=je.catch(35),!(je.t2 instanceof DOMException)){je.next=57;break}je.t3=je.t2.name,je.next=je.t3==="NotAllowedError"?47:je.t3==="NotReadableError"?49:je.t3==="NotFoundError"?51:54;break;case 47:return je.t2.message==="Permission denied by system"&&(Ge=ur.H.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),je.abrupt("break",55);case 49:return Ge=xc(je.t2,"video"),je.abrupt("break",55);case 51:return Ge=ur.H.ERROR_CAMERA_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Ge=ur.H.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),je.abrupt("break",55);case 54:Ge=je.t2.message;case 55:je.next=58;break;case 57:Ge=je.t2 instanceof TypeError&&je.t2.name==="TypeError"?ur.H.ERROR_CAMERA_ACCESS_UNAVAILABLE.message:je.t2.message;case 58:Ve=!1,Ge&&console.error("An error occurred in request permission, ".concat(Ge));case 60:de&&de.getTracks().forEach(function(jt){jt.stop()}),ve.set(Yn.VIDEO,Ve);case 62:if(!Y.includes(Yn.AUDIO)){je.next=92;break}return pt={audio:!0,video:!1},ht=!0,je.prev=65,je.next=68,navigator.mediaDevices.getUserMedia(pt);case 68:ot=je.sent,je.next=90;break;case 71:if(je.prev=71,je.t4=je.catch(65),!(je.t4 instanceof DOMException)){je.next=87;break}je.t5=je.t4.name,je.next=je.t5==="NotAllowedError"?77:je.t5==="NotReadableError"?79:je.t5==="NotFoundError"?81:84;break;case 77:return je.t4.message==="Permission denied by system"&&(Ct=ur.H.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message),je.abrupt("break",85);case 79:return Ct=xc(je.t4,"audio"),je.abrupt("break",85);case 81:return Ct=ur.H.ERROR_MICROPHONE_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Ct=ur.H.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message),je.abrupt("break",85);case 84:Ct=je.t4.message;case 85:je.next=88;break;case 87:Ct=je.t4 instanceof TypeError&&je.t4.name==="TypeError"?ur.H.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message:je.t4.message;case 88:ht=!1,Ct&&console.error("An error occurred in request permission, ".concat(Ct));case 90:ot&&ot.getTracks().forEach(function(jt){jt.stop()}),ve.set(Yn.AUDIO,ht);case 92:return je.abrupt("return",ve);case 93:case"end":return je.stop()}},te,null,[[5,11],[35,41],[65,71]])})),function(te){return ce.apply(this,arguments)})},{key:"isInt",value:function(te){return typeof te=="number"&&te%1==0}},{key:"getNetworkStats",value:(X=(0,b.Z)(_().mark(function te(){var Y,ve,Be,Me,ke=arguments;return _().wrap(function(Ne){for(;;)switch(Ne.prev=Ne.next){case 0:return Y=ke.length>0&&ke[0]!==void 0?ke[0]:{},(ve=Y.timeoutDuration)&&this.isInt(ve)||(ve=6e4),Be=new Promise(function(de,ge){setTimeout(function(){ge("Not able to get NetworkStats due to timeout")},ve)}),Me=new Promise(function(de,ge){if(navigator.onLine){var Ve=new a_({measureDownloadLoadedLatency:!1,measureUploadLoadedLatency:!1,measurements:[{type:"upload",bytes:3e6,count:1,bypassMinDuration:!0},{type:"download",bytes:3e6,count:1,bypassMinDuration:!0}]});Ve.isRunning?(Ve.onFinish=function(Ge){de({downloadSpeed:parseFloat(Number(Ge.getDownloadBandwidth()/1048576).toFixed(2)),uploadSpeed:parseFloat(Number(Ge.getUploadBandwidth()/1048576).toFixed(2))})},Ve.onError=function(Ge){ge("Not able to get NetworkStats")}):ge("Not able to get NetworkStats")}else ge("Not able to get NetworkStats due to no Network")}),Ne.abrupt("return",Promise.race([Me,Be]));case 5:case"end":return Ne.stop()}},te,this)})),function(){return X.apply(this,arguments)})},{key:"analytics",value:function(te){var Y,ve,Be,Me;!te&&navigator&&navigator.userAgent&&(Be=navigator.userAgent,delete(Me=d().parse(Be)).engine);try{var ke;(ke=te)!==null&&ke!==void 0&&ke.browserUserAgent||(Be=navigator.userAgent,delete(Me=d().parse(Be)).engine)}catch{}te&&te.rawUserAgent&&(Be=te.rawUserAgent,delete(Me=d().parse(Be)).engine),te||(te={});var Ne={};Ne.sdkType=te.sdkType||"javascript",Ne.sdkVersion=te.sdkVersion||"0.0.101",Ne.platform=te.platform||((Y=Me)===null||Y===void 0||(ve=Y.platform)===null||ve===void 0?void 0:ve.type)||"",te.browserUserAgent=="null"?Ne.browserUserAgent=void 0:Ne.browserUserAgent=Me,te.deviceUserAgent&&(Ne.deviceUserAgent=te.deviceUserAgent),this._deviceInfo=Ne}},{key:"initMeeting",value:function(te){var Y,ve=te.meetingId,Be=te.customCameraVideoTrack,Me=Be===void 0?void 0:Be,ke=te.customMicrophoneAudioTrack,Ne=ke===void 0?void 0:ke,de=te.autoConsume,ge=de===void 0||de,Ve=te.preferredProtocol,Ge=te.mode,ot=te.multiStream,pt=ot===void 0||ot,ht=te.participantId,Ct=te.name,je=te.micEnabled,jt=te.webcamEnabled,Pn=te.maxResolution,mt=te.metaData,bn=te.chatEnabled,Ya=te.useSpartialLayerAnalytics,Xa=te.signalingBaseUrl,Ta=te.defaultCamera,pn=te.debugMode,gs=pn===void 0||pn;if(!ve)throw new Error("'meetingId' is empty, please verify it or generate new meetingId using the API.");var Qs=ht?ht.toString():l()({length:8}).toLowerCase(),Vl=Ct||l()({length:6}).toLowerCase();switch(this._deviceInfo||this.analytics(),typeof Ve!="string"&&(Ve="UDP_OVER_TCP"),(Y=Ve)===null||Y===void 0?void 0:Y.toUpperCase()){case"UDP_ONLY":case"UDP_OVER_TCP":case"TCP_ONLY":Ve=Ve.toUpperCase();break;default:Ve="UDP_OVER_TCP"}if(Ge||(Ge=Ii.S.CONFERENCE),Ge!==Ii.S.CONFERENCE&&Ge!==Ii.S.VIEWER)throw new Error('"mode" can only be either '.concat(Ii.S.CONFERENCE," or ").concat(Ii.S.VIEWER));if(mt!=null&&(0,L.Z)(mt)!="object")throw new Error('"metaData" can only be object.');var Oc=this._deviceInfo.sdkType==="react-native",$l=Oc?Ta?Ta==="front"?1:0:Me?Me.getVideoTracks()[0].getConstraints().facingMode==="user"?1:0:Oc?1:0:0,Gl=new Qr.default({roomId:ve,peerId:Qs,secret:this.apiKey,device:"unknown",displayName:Vl,mode:Ge,useSimulcast:pt,produce:!0,consume:!0,useSharingSimulcast:!0,datachannel:bn!==!1,micEnabled:je!==!1,webcamEnabled:jt!==!1,maxResolution:Pn||"hd",useSpartialLayerAnalytics:Ya,_deviceInfo:this._deviceInfo,customCameraVideoTrack:Me,customMicrophoneAudioTrack:Ne,autoConsume:ge,preferredProtocol:Ve,signalingBaseUrl:Xa,metaData:mt,defaultCameraIndex:$l,debugMode:gs});xe.roomClient=Gl;var Zl=new Nr({id:Qs,displayName:Vl,local:!0,mode:Ge,metaData:mt});return new qt(ve,Zl,Gl)}},{key:"createCameraVideoTrack",value:($=(0,b.Z)(_().mark(function te(Y){var ve,Be,Me,ke,Ne,de,ge,Ve,Ge,ot,pt,ht,Ct,je,jt,Pn;return _().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:if(ve=Y.cameraId,Be=ve===void 0?void 0:ve,Me=Y.encoderConfig,ke=Me===void 0?void 0:Me,Ne=Y.facingMode,de=Ne===void 0?void 0:Ne,ge=Y.optimizationMode,Ve=ge===void 0?void 0:ge,Ge=Y.multiStream,ot=Ge===void 0||Ge,!Be){mt.next=6;break}return mt.next=4,this.getCameras();case 4:(pt=mt.sent)&&pt.some(function(bn){return bn.deviceId})&&(pt.some(function(bn){return bn.deviceId===Be})||console.error("No camera device found for the given cameraId, please check the passed cameraId. The default camera will be used instead."));case 6:return mt.prev=6,ht=ke?Mi.v.videoProfiles[ke]:Mi.v.videoProfiles.h360p_w640p,Ct={video:{deviceId:Be||void 0,facingMode:de||void 0,width:ht.width,height:ht.height,frameRate:ht.frameRate}},mt.next=11,(0,go.y)(Ct);case 11:return je=mt.sent,Ve&&(je.contentHint=Ve),je.encoderConfig=ke||"h360p_w640p",je.contentHint=Ve||"",je.multiStream=ot,je.cameraId=Be,mt.abrupt("return",je);case 20:if(mt.prev=20,mt.t0=mt.catch(6),mt.t0.name!=="SecurityError"){mt.next=26;break}jt=ur.H.ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED.message,mt.next=46;break;case 26:if(mt.t0.name!=="DOMException"){mt.next=30;break}jt=ur.H.ERROR_RN_CAMERA_NOT_FOUND.message,mt.next=46;break;case 30:if(!(mt.t0 instanceof DOMException)){mt.next=45;break}mt.t1=mt.t0.name,mt.next=mt.t1==="NotAllowedError"?34:mt.t1==="NotReadableError"?36:mt.t1==="NotFoundError"?38:41;break;case 34:return jt=Zh(mt.t0,"video"),mt.abrupt("break",43);case 36:return jt=xc(mt.t0,"video"),mt.abrupt("break",43);case 38:return jt=ur.H.ERROR_CAMERA_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(jt=ur.H.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),mt.abrupt("break",43);case 41:return jt=mt.t0.message,mt.abrupt("break",43);case 43:mt.next=46;break;case 45:mt.t0.message=="getUserMedia is not implemented in this browser"?(Pn=ur.H.ERROR_CAMERA_ACCESS_UNAVAILABLE,jt=Pn.message):jt=mt.t0.message;case 46:console.error("An error occurred in creating video track, ".concat(jt));case 47:case"end":return mt.stop()}},te,this,[[6,20]])})),function(te){return $.apply(this,arguments)})},{key:"createScreenShareVideoTrack",value:(A=(0,b.Z)(_().mark(function te(Y){var ve,Be,Me,ke,Ne,de,ge,Ve,Ge;return _().wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:return ve=Y.encoderConfig,Be=ve===void 0?void 0:ve,Me=Y.optimizationMode,ke=Me===void 0?void 0:Me,Ne=Y.withAudio,de=Ne===void 0?"enable":Ne,ge=Be?Mi.v.screenShareProfiles[Be]:Mi.v.screenShareProfiles.h720p_15fps,Ve={audio:de==="enable",video:{width:ge.width,height:ge.height,frameRate:ge.frameRate}},ot.next=5,(0,go.xb)(Ve);case 5:return Ge=ot.sent,ke&&(Ge.contentHint=ke),ot.abrupt("return",Ge);case 8:case"end":return ot.stop()}},te)})),function(te){return A.apply(this,arguments)})},{key:"createMicrophoneAudioTrack",value:(M=(0,b.Z)(_().mark(function te(Y){var ve,Be,Me,ke,Ne,de,ge,Ve,Ge,ot,pt,ht;return _().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:if(ve=Y.noiseConfig,Be=ve===void 0?void 0:ve,Me=Y.encoderConfig,ke=Me===void 0?void 0:Me,Ne=Y.microphoneId,!(de=Ne===void 0?void 0:Ne)){Ct.next=6;break}return Ct.next=4,this.getMicrophones();case 4:(ge=Ct.sent)&&ge.some(function(je){return je.deviceId})&&(ge.some(function(je){return je.deviceId===de})||console.error("No microphone device found for the given microphoneId, please check the passed microphoneId. The default microphone will be used instead."));case 6:return Ct.prev=6,Ve=ke?Mi.v.audioProfiles[ke]:Mi.v.audioProfiles.speech_standard,Ge={audio:{deviceId:de,sampleRate:Ve.sampleRate,echoCancellation:Be?Be&&Be.acousticEchoCancellation:Ve.echoCancellation,autoGainControl:Be?Be&&Be.autoGainControl:Ve.autoGainControl,noiseSuppression:Be?Be&&Be.noiseSuppression:Ve.noiseSuppression,channelCount:Ve.channelCount}},Ct.next=11,(0,go.y)(Ge);case 11:return(ot=Ct.sent).encoderConfig=ke||"speech_standard",ot.microphoneId=de,Ct.abrupt("return",ot);case 17:if(Ct.prev=17,Ct.t0=Ct.catch(6),Ct.t0.name!=="SecurityError"){Ct.next=23;break}pt=ur.H.ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED.message,Ct.next=43;break;case 23:if(Ct.t0.name!=="DOMException"){Ct.next=27;break}pt=ur.H.ERROR_RN_MIC_NOT_FOUND.message,Ct.next=43;break;case 27:if(!(Ct.t0 instanceof DOMException)){Ct.next=42;break}Ct.t1=Ct.t0.name,Ct.next=Ct.t1==="NotAllowedError"?31:Ct.t1==="NotReadableError"?33:Ct.t1==="NotFoundError"?35:38;break;case 31:return pt=Zh(Ct.t0,"audio"),Ct.abrupt("break",40);case 33:return pt=xc(Ct.t0,"audio"),Ct.abrupt("break",40);case 35:return pt=ur.H.ERROR_MICROPHONE_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(pt=ur.H.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message),Ct.abrupt("break",40);case 38:return pt=Ct.t0.message,Ct.abrupt("break",40);case 40:Ct.next=43;break;case 42:Ct.t0.message=="getUserMedia is not implemented in this browser"?(ht=ur.H.ERROR_MICROPHONE_ACCESS_UNAVAILABLE,pt=ht.message):pt=Ct.t0.message;case 43:console.error("An error occurred in creating audio track, ".concat(pt));case 44:case"end":return Ct.stop()}},te,this,[[6,17]])})),function(te){return M.apply(this,arguments)})}]),D}();function Zh(D,M){return(D.message==="Permission denied"||D.message==="Permission dismissed"?M==="video"?ur.H.ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:ur.H.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:D.message.includes("The request is not allowed by the user agent")?M==="video"?ur.H.ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:ur.H.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:D.message==="Permission denied by system"?M==="video"?ur.H.ERROR_CAMERA_PERMISSION_DENIED_BY_OS:ur.H.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:M==="video"?ur.H.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:ur.H.ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED).message}function xc(D,M){return(D.message==="Device in use"?M==="video"?ur.H.ERROR_CAMERA_IN_USE:ur.H.ERROR_MICROPHONE_IN_USE:M==="video"?ur.H.ERROR_VIDEO_SOURCE_INITIATION_FAILED:ur.H.ERROR_MICROPHONE_IN_USE).message}(0,E.Z)(Pc,"devices",[]),(0,E.Z)(Pc,"eventEmitter",new fr),(0,E.Z)(Pc,"Constants",{errors:ur.R,recordingEvents:{RECORDING_STARTING:"RECORDING_STARTING",RECORDING_STARTED:"RECORDING_STARTED",RECORDING_STOPPING:"RECORDING_STOPPING",RECORDING_STOPPED:"RECORDING_STOPPED"},livestreamEvents:{LIVESTREAM_STARTING:"LIVESTREAM_STARTING",LIVESTREAM_STARTED:"LIVESTREAM_STARTED",LIVESTREAM_STOPPING:"LIVESTREAM_STOPPING",LIVESTREAM_STOPPED:"LIVESTREAM_STOPPED"},characterState:Fe,characterMode:{TEXT:"text",CO_PILOT:"co_pilot",AUTO_PILOT:"auto_pilot",VISION_PILOT:"vision_pilot"},hlsEvents:Sl.o,transcriptionEvents:{TRANSCRIPTION_STARTING:"TRANSCRIPTION_STARTING",TRANSCRIPTION_STARTED:"TRANSCRIPTION_STARTED",TRANSCRIPTION_STOPPING:"TRANSCRIPTION_STOPPING",TRANSCRIPTION_STOPPED:"TRANSCRIPTION_STOPPED"},modes:Ii.S,permission:Yn});var s_=Pc})(),j})())})(Av);var xo=Av.exports,xr="videosdk-live-react-sdk",qe={"participant-joined":xr+"-participant-joined","participant-left":xr+"-participant-left","speaker-changed":xr+"-speaker-changed","presenter-changed":xr+"-presenter-changed","main-participant-changed":xr+"-main-participant-changed","entry-requested":xr+"-entry-requested","entry-responded":xr+"-entry-responded","recording-started":xr+"-recording-started","recording-stopped":xr+"-recording-stopped","chat-message":xr+"-chat-message","meeting-joined":xr+"-meeting-joined","meeting-left":xr+"-meeting-left","live-stream-started":xr+"-live-stream-started","live-stream-stopped":xr+"-live-stream-stopped","video-state-changed":xr+"-video-state-changed","video-seeked":xr+"-video-seeked","webcam-requested":xr+"-webcam-requested","mic-requested":xr+"-mic-requested","pin-state-changed":xr+"-pin-state-changed","connection-open":xr+"-connection-open","connection-close":xr+"-connection-close","switch-meeting":xr+"-switch-meeting",error:xr+"-error","hls-started":xr+"-hls-started","hls-stopped":xr+"-hls-stopped","hls-state-changed":xr+"-hls-state-changed","hls-playable-state-changed":xr+"-hls-playable-state-changed","recording-state-changed":xr+"-recording-state-changed","livestream-state-changed":xr+"-livestream-state-changed","meeting-state-changed":xr+"-meeting-state-changed","participant-mode-changed":xr+"-participant-mode-changed","transcription-state-changed":xr+"-transcription-state-changed","transcription-text":xr+"-transcription-text","character-joined":xr+"-character-joined","character-left":xr+"-character-left","whiteboard-started":xr+"-whiteboard-started","whiteboard-stopped":xr+"-whiteboard-stopped"},Ze=new Wy;Ze.setMaxListeners(9999);var jv=ct.createContext(),fd=function(t){var r={},a=r.onParticipantJoined,h=a===void 0?function(){}:a,y=r.onParticipantLeft,j=y===void 0?function(){}:y,L=r.onSpeakerChanged,b=L===void 0?function(){}:L,u=r.onPresenterChanged,P=u===void 0?function(){}:u,E=r.onMainParticipantChanged,c=E===void 0?function(){}:E,_=r.onEntryRequested,w=_===void 0?function(){}:_,d=r.onEntryResponded,g=d===void 0?function(){}:d,n=r.onRecordingStarted,m=n===void 0?function(){}:n,v=r.onRecordingStopped,R=v===void 0?function(){}:v,k=r.onChatMessage,T=k===void 0?function(){}:k,S=r.onMeetingJoined,C=S===void 0?function(){}:S,I=r.onMeetingLeft,o=I===void 0?function(){}:I,p=r.onLiveStreamStarted,i=p===void 0?function(){}:p,s=r.onLiveStreamStopped,l=s===void 0?function(){}:s,f=r.onVideoStateChanged,O=f===void 0?function(){}:f,F=r.onVideoSeeked,x=F===void 0?function(){}:F,N=r.onWebcamRequested,z=N===void 0?function(){}:N,V=r.onMicRequested,J=V===void 0?function(){}:V,ne=r.onPinStateChanged,ee=ne===void 0?function(){}:ne,Q=r.onConnectionOpen,oe=Q===void 0?function(){}:Q,he=r.onConnetionClose,Te=he===void 0?function(){}:he,Se=r.onSwitchMeeting,Ce=Se===void 0?function(){}:Se,Re=r.onError,Ee=Re===void 0?function(){}:Re,We=r.onHlsStarted,Yt=We===void 0?function(){}:We,rr=r.onHlsStopped,yt=rr===void 0?function(){}:rr,yr=r.onHlsStateChanged,Kt=yr===void 0?function(){}:yr,Tt=r.onRecordingStateChanged,Gr=Tt===void 0?function(){}:Tt,ft=r.onLivestreamStateChanged,Dt=ft===void 0?function(){}:ft,Qr=r.onMeetingStateChanged,Gt=Qr===void 0?function(){}:Qr,ut=r.onParticipantModeChanged,_t=ut===void 0?function(){}:ut,fr=r.onCharacterJoined,Ft=fr===void 0?function(){}:fr,Qt=r.onCharacterLeft,Br=Qt===void 0?function(){}:Qt;return ct.useEffect(function(){return Ze.on(qe["participant-joined"],h),Ze.on(qe["participant-left"],j),Ze.on(qe["speaker-changed"],b),Ze.on(qe["presenter-changed"],P),Ze.on(qe["main-participant-changed"],c),Ze.on(qe["entry-requested"],w),Ze.on(qe["entry-responded"],g),Ze.on(qe["recording-started"],m),Ze.on(qe["recording-stopped"],R),Ze.on(qe["chat-message"],T),Ze.on(qe["meeting-joined"],C),Ze.on(qe["meeting-left"],o),Ze.on(qe["live-stream-started"],i),Ze.on(qe["live-stream-stopped"],l),Ze.on(qe["video-state-changed"],O),Ze.on(qe["video-seeked"],x),Ze.on(qe["webcam-requested"],z),Ze.on(qe["mic-requested"],J),Ze.on(qe["pin-state-changed"],ee),Ze.on(qe["connection-open"],oe),Ze.on(qe["connection-close"],Te),Ze.on(qe["switch-meeting"],Ce),Ze.on(qe.error,Ee),Ze.on(qe["hls-started"],Yt),Ze.on(qe["hls-stopped"],yt),Ze.on(qe["hls-state-changed"],Kt),Ze.on(qe["recording-state-changed"],Gr),Ze.on(qe["livestream-state-changed"],Dt),Ze.on(qe["meeting-state-changed"],Gt),Ze.on(qe["participant-mode-changed"],_t),Ze.on(qe["character-joined"],Ft),Ze.on(qe["character-left"],Br),function(){Ze.off(qe["meeting-state-changed"],Gt),Ze.off(qe["participant-joined"],h),Ze.off(qe["participant-left"],j),Ze.off(qe["speaker-changed"],b),Ze.off(qe["presenter-changed"],P),Ze.off(qe["main-participant-changed"],c),Ze.off(qe["entry-requested"],w),Ze.off(qe["entry-responded"],g),Ze.off(qe["recording-started"],m),Ze.off(qe["recording-stopped"],R),Ze.off(qe["chat-message"],T),Ze.off(qe["meeting-joined"],C),Ze.off(qe["meeting-left"],o),Ze.off(qe["live-stream-started"],i),Ze.off(qe["live-stream-stopped"],l),Ze.off(qe["video-state-changed"],O),Ze.off(qe["video-seeked"],x),Ze.off(qe["webcam-requested"],z),Ze.off(qe["mic-requested"],J),Ze.off(qe["pin-state-changed"],ee),Ze.off(qe["connection-open"],oe),Ze.off(qe["connection-close"],Te),Ze.off(qe["switch-meeting"],Ce),Ze.off(qe.error,Ee),Ze.off(qe["hls-started"],Yt),Ze.off(qe["hls-stopped"],yt),Ze.off(qe["hls-state-changed"],Kt),Ze.off(qe["recording-state-changed"],Gr),Ze.off(qe["livestream-state-changed"],Dt),Ze.off(qe["participant-mode-changed"],_t),Ze.off(qe["character-joined"],Ft),Ze.off(qe["character-left"],Br)}},[]),ct.useContext(jv)},Hy="0.1.105",zy=function(t){var r=t.children,a=t.config,h=t.token,y=t.joinWithoutUserInteraction,j=t.reinitialiseMeetingOnConfigChange,L=t.deviceInfo,b=ct.useState(null),u=b[0],P=b[1],E=ct.useState(null),c=E[0],_=E[1],w=ct.useState(null),d=w[0],g=w[1],n=ct.useState(null),m=n[0],v=n[1],R=ct.useState(null),k=R[0],T=R[1],S=ct.useState(!1),C=S[0],I=S[1],o=ct.useState(!1),p=o[0],i=o[1],s=ct.useState(!1),l=s[0],f=s[1],O=ct.useState(!1),F=O[0],x=O[1],N=ct.useState([]),z=N[0],V=N[1],J=ct.useState(new Map),ne=J[0],ee=J[1],Q=ct.useState(new Map),oe=Q[0],he=Q[1],Te=ct.useState(new Map),Se=Te[0],Ce=Te[1],Re=ct.useState(!1),Ee=Re[0],We=Re[1],Yt=ct.useState(new Map),rr=Yt[0],yt=Yt[1],yr=ct.useState(!1),Kt=yr[0],Tt=yr[1],Gr=ct.useState(!1),ft=Gr[0],Dt=Gr[1],Qr=ct.useState("RECORDING_STOPPED"),Gt=Qr[0],ut=Qr[1],_t=ct.useState("LIVESTREAM_STOPPED"),fr=_t[0],Ft=_t[1],Qt=ct.useState("HLS_STOPPED"),Br=Qt[0],xe=Qt[1],De=ct.useState({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),gr=De[0],nr=De[1],un=ct.useState("TRANSCRIPTION_STOPPED"),On=un[0],jn=un[1],Zt=ct.useRef(),Nr=ct.useRef(),an=ct.useRef(),Wa=ct.useRef(),Ca=ct.useRef(),oi=ct.useRef(a),wt=ct.useRef(h),Fe=ct.useRef(!1),gt=ct.useRef(),Qe=ct.useMemo(function(){return j},[]);ct.useEffect(function(){Zt.current=u},[u]),ct.useEffect(function(){Nr.current=C},[C]),ct.useEffect(function(){an.current=p},[p]),ct.useEffect(function(){Wa.current=l},[l]),ct.useEffect(function(){Ca.current=F},[F]),ct.useEffect(function(){oi.current=a},[a]),ct.useEffect(function(){wt.current=h},[h]),ct.useEffect(function(){gt.current=ft},[ft]);var lt=function(){P(null),_(null),g(null),v(null),T(null),I(!1),i(!1),f(!1),x(!1),V([]),We(!1),ee(new Map),he(new Map),Ce(new Map),yt(new Map),Tt(!1),Dt(!1),ut("RECORDING_STOPPED"),Ft("LIVESTREAM_STOPPED"),xe("HLS_STOPPED"),jn("TRANSCRIPTION_STOPPED"),nr({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null})},st=function(K){ee(function(Ke){Ke.set(K.id,K);var qt=new Map(Ke);return qt}),Ze.emit(qe["participant-joined"],K)},ye=function(K){ee(function(Ke){Ke.delete(K.id);var qt=new Map(Ke);return qt}),Ze.emit(qe["participant-left"],K)},ir=function(K){var Ke,qt;T(K),f(K===(Zt==null||(Ke=Zt.current)===null||Ke===void 0||(qt=Ke.localParticipant)===null||qt===void 0?void 0:qt.id)),Ze.emit(qe["presenter-changed"],K)},kr=function(K){g(K),Ze.emit(qe["main-participant-changed"],K)},Cr=function(K){v(K),Ze.emit(qe["speaker-changed"],K)},Dr=function(K){V(function(Ke){return[].concat(Ke,[K])}),Ze.emit(qe["chat-message"],K)},sn=function(K){Ze.emit(qe["entry-requested"],K)},Ie=function(K,Ke){Ze.emit(qe["entry-responded"],K,Ke)},Ot=function(){x(!0),Ze.emit(qe["recording-started"])},bt=function(){x(!1),Ze.emit(qe["recording-stopped"])},kt=function(K){K.track.readyState==="live"&&(K.kind==="video"?i(!0):K.kind==="audio"&&I(!0))},Lr=function(K){K.kind==="video"?i(!1):K.kind==="audio"&&I(!1)},Ir=function(K){We(!0),Ze.emit(qe["live-stream-started"],K)},Ur=function(){We(!1),Ze.emit(qe["live-stream-stopped"])},sr=function(K){Dt(!0),Ze.emit(qe["hls-started"],K)},ar=function(){Dt(!1),Ze.emit(qe["hls-stopped"])},Mr=function(K){Ze.emit(qe["video-state-changed"],K)},Dn=function(K){Ze.emit(qe["video-seeked"],K)},Ar=function(K){Ze.emit(qe["webcam-requested"],K)},Pe=function(K){Ze.emit(qe["mic-requested"],K)},bi=function(K){Fe.current=!0,V(function(Ke){return[].concat(Ke,K.messages)}),Ze.emit(qe["meeting-joined"],K),Tt(!0)},Ka=function dt(){Ze.emit(qe["meeting-left"]);var K=Zt.current;if(K){var Ke;typeof(K==null?void 0:K.off)=="function"&&(K.off("meeting-state-changed",$e),K.off("participant-joined",st),K.off("participant-left",ye),K.off("presenter-changed",ir),K.off("main-participant-changed",kr),K.off("speaker-changed",Cr),K.off("entry-requested",sn),K.off("entry-responded",Ie),K.off("chat-message",Dr),K.off("recording-started",Ot),K.off("recording-stopped",bt),K.off("meeting-joined",bi),K.off("meeting-left",dt),K.off("livestream-started",Ir),K.off("livestream-stopped",Ur),K.off("video-state-changed",Mr),K.off("video-seeked",Dn),K.off("webcam-requested",Ar),K.off("mic-requested",Pe),K.off("pin-state-changed",Bs),K.off("connection-open",xi),K.off("connection-close",qi),K.off("switch-meeting",Oi),K.off("error",_e),K.off("hls-started",sr),K.off("hls-stopped",ar),K.off("recording-state-changed",mo),K.off("livestream-state-changed",be),K.off("hls-state-changed",Oe),K.off("participant-mode-changed",mr),K.off("whiteboard-stopped",or),K.off("whiteboard-started",At),K.off("transcription-state-changed",at),K.off("character-joined",lr),K.off("character-left",It)),typeof(K==null||(Ke=K.localParticipant)===null||Ke===void 0?void 0:Ke.off)=="function"&&(K.localParticipant.off("stream-enabled",kt),K.localParticipant.off("stream-disabled",Lr)),lt()}},Bs=function(K){var Ke=K.participantId,qt=K.state,Fn=K.pinnedBy;Ce(function(Gn){!qt.cam&&!qt.share?Gn.delete(Ke):Gn.set(Ke,qt);var ur=new Map(Gn);return ur}),Ze.emit(qe["pin-state-changed"],{participantId:Ke,state:qt,pinnedBy:Fn})},xi=function(K){yt(function(Ke){Ke.set(K.id,K);var qt=new Map(Ke);return qt}),Ze.emit(qe["connection-open"],K)},qi=function(K){yt(function(Ke){Ke.delete(K);var qt=new Map(Ke);return qt}),Ze.emit(qe["connection-close"],K)},Oi=function(K){Ze.emit(qe["switch-meeting"],K)},_e=function(K){Ze.emit(qe.error,K)},mo=function(K){ut(K==null?void 0:K.status),Ze.emit(qe["recording-state-changed"],K)},be=function(K){Ft(K==null?void 0:K.status),Ze.emit(qe["livestream-state-changed"],K)},Oe=function(K){xe(K==null?void 0:K.status),(K==null?void 0:K.status)=="HLS_PLAYABLE"?nr({downstreamUrl:K==null?void 0:K.downstreamUrl,playbackHlsUrl:K==null?void 0:K.playbackHlsUrl,livestreamUrl:K==null?void 0:K.livestreamUrl}):(K==null?void 0:K.status)=="HLS_STOPPED"&&nr({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),Ze.emit(qe["hls-state-changed"],K)},$e=function(K){Ze.emit(qe["meeting-state-changed"],K)},at=function(K){jn(K==null?void 0:K.status),Ze.emit(qe["transcription-state-changed"],K)},Bt=function(K){Ze.emit(qe["transcription-text"],K)},At=function(K){Ze.emit(qe["whiteboard-started"],K)},or=function(K){Ze.emit(qe["whiteboard-stopped"],K)},lr=function(K){he(function(Ke){Ke.set(K.id,K);var qt=new Map(Ke);return qt}),Ze.emit(qe["character-joined"],K)},It=function(K){he(function(Ke){Ke.delete(K.id);var qt=new Map(Ke);return qt}),Ze.emit(qe["character-left"],K)},mr=function(K){var Ke,qt;ee(function(Fn){var Gn=Fn.get(K.participantId);Gn.mode=K.mode,Fn.set(Gn.id,Gn);var ur=new Map(Fn);return ur}),K.participantId===(Zt==null||(Ke=Zt.current)===null||Ke===void 0||(qt=Ke.localParticipant)===null||qt===void 0?void 0:qt.id)&&_(function(Fn){return Fn.mode=K.mode,Fn}),Ze.emit(qe["participant-mode-changed"],K)},Ut=function(){var K=xo.VideoSDK&&xo.VideoSDK.initMeeting(oi.current);P(K);var Ke=K.localParticipant,qt=K.participants,Fn=K.characters;qt.set(Ke.id,Ke),ee(qt),he(Fn),_(Ke),K.on("meeting-state-changed",$e),K.on("participant-joined",st),K.on("participant-left",ye),K.on("presenter-changed",ir),K.on("main-participant-changed",kr),K.on("speaker-changed",Cr),K.on("entry-requested",sn),K.on("entry-responded",Ie),K.on("chat-message",Dr),K.on("recording-started",Ot),K.on("recording-stopped",bt),K.on("meeting-joined",bi),K.on("meeting-left",Ka),K.on("livestream-started",Ir),K.on("livestream-stopped",Ur),K.on("video-state-changed",Mr),K.on("video-seeked",Dn),K.on("webcam-requested",Ar),K.on("mic-requested",Pe),K.on("pin-state-changed",Bs),K.on("connection-open",xi),K.on("connection-close",qi),K.on("switch-meeting",Oi),K.on("error",_e),K.on("hls-started",sr),K.on("hls-stopped",ar),K.on("recording-state-changed",mo),K.on("livestream-state-changed",be),K.on("hls-state-changed",Oe),K.on("participant-mode-changed",mr),K.on("transcription-state-changed",at),K.on("transcription-text",Bt),K.on("whiteboard-started",At),K.on("whiteboard-stopped",or),K.on("character-joined",lr),K.on("character-left",It),K.localParticipant.on("stream-enabled",kt),K.localParticipant.on("stream-disabled",Lr),K.join()},dr=function(){var K=Zt.current;K&&K.leave()},pr=function(){var K=Zt.current;K&&K.end()},jr=function(K,Ke,qt,Fn){var Gn=Zt.current;Gn&&Gn.startRecording(K,Ke,qt,Fn)},on=function(){var K=Zt.current;if(K){var Ke=Ca.current;Ke&&K.stopRecording()}},mn=function(K){K===void 0&&(K=void 0);var Ke=Zt.current;Ke&&Ke.unmuteMic(K)},En=function(){var K=Zt.current;K&&K.muteMic()},$n=function(K){K===void 0&&(K=void 0);var Ke=Nr.current;Ke?En():mn(K)},Jn=function(){var K=Zt.current;K&&K.disableWebcam()},sa=function(K){K===void 0&&(K=void 0);var Ke=Zt.current;Ke&&Ke.enableWebcam(K)},Ma=function(K){K===void 0&&(K=void 0);var Ke=an.current;Ke?Jn():sa(K)},La=function(){var K=Zt.current;K&&K.disableScreenShare()},_a=function(K){K===void 0&&(K=void 0);var Ke=Zt.current;Ke&&Ke.enableScreenShare(K)},Qa=function(K){K===void 0&&(K=void 0);var Ke=Wa.current;Ke?La():_a(K)},ci=function(K){var Ke=Zt.current;Ke&&Ke.changeMode(K)},Ki=function(K){var Ke=Zt.current;Ke&&Ke.sendChatMessage(K)},Qi=function(K,Ke){var qt=Zt.current;qt&&qt.respondEntry(K,Ke)},Ji=function(){try{var K=Zt.current;return Promise.resolve(function(){if(K)return Promise.resolve(K.getMics())}())}catch(Ke){return Promise.reject(Ke)}},Yi=function(){try{var K=Zt.current;return Promise.resolve(function(){if(K)return Promise.resolve(K.getWebcams())}())}catch(Ke){return Promise.reject(Ke)}},Xi=function(K){var Ke=Zt.current;Ke&&Ke.changeWebcam(K)},es=function(K){var Ke=Zt.current;Ke&&Ke.replaceWebcamStream(K)},ts=function(K){var Ke=Zt.current;Ke&&Ke.changeMic(K)},rs=function(K){var Ke=K.link,qt=Zt.current;qt&&qt.startVideo({link:Ke})},ns=function(){var K=Zt.current;K&&K.stopVideo()},as=function(){var K=Zt.current;K&&K.resumeVideo()},is=function(K){var Ke=K.currentTime,qt=Zt.current;qt&&qt.pauseVideo({currentTime:Ke})},ss=function(K){var Ke=K.currentTime,qt=Zt.current;qt&&qt.seekVideo({currentTime:Ke})},os=function(K,Ke){var qt=Zt.current;qt&&qt.startLivestream(K,Ke)},cs=function(){var K=Zt.current;K&&K.stopLivestream()},ls=function(K){var Ke=K.meetingId,qt=K.payload;try{var Fn=Zt.current,Gn=function(){if(Fn)return Promise.resolve(Fn.connectTo({meetingId:Ke,payload:qt})).then(function(){})}();return Promise.resolve(Gn&&Gn.then?Gn.then(function(){}):void 0)}catch(ur){return Promise.reject(ur)}},us=function(K,Ke){var qt=Zt.current;qt&&qt.startHls(K,Ke)},Di=function(){var K=Zt.current;K&&K.stopHls()},wi=function(){xo.VideoSDK.config(wt.current),L?xo.VideoSDK.analytics(L):xo.VideoSDK.analytics({sdkType:"react-web",sdkVersion:Hy}),y&&Ut()};return ct.useEffect(function(){wi()},[]),ct.useEffect(function(){Qe&&Fe.current&&(dr(),wi(),!y&&Ut())},[a.meetingId,h,Qe]),na.createElement(jv.Provider,{value:{meetingId:u==null?void 0:u.id,meeting:u,baseUrl:u==null?void 0:u.baseUrl,localParticipant:c,mainParticipant:d,activeSpeakerId:m,participants:ne,characters:oe,presenterId:k,localMicOn:C,localWebcamOn:p,localScreenShareOn:l,messages:z,isRecording:F,isLiveStreaming:Ee,pinnedParticipants:Se,connections:rr,isHls:ft,recordingState:Gt,livestreamState:fr,hlsState:Br,hlsUrls:gr,transcriptionState:On,isMeetingJoined:Kt,selectedCameraDevice:u==null?void 0:u.selectedCameraDevice,selectedMicrophoneDevice:u==null?void 0:u.selectedMicrophoneDevice,join:Ut,leave:dr,end:pr,startRecording:jr,stopRecording:on,sendChatMessage:Ki,respondEntry:Qi,muteMic:En,unmuteMic:mn,toggleMic:$n,disableWebcam:Jn,enableWebcam:sa,toggleWebcam:Ma,disableScreenShare:La,enableScreenShare:_a,toggleScreenShare:Qa,getMics:Ji,getWebcams:Yi,changeWebcam:Xi,replaceWebcamStream:es,changeMic:ts,changeMode:ci,startVideo:rs,stopVideo:ns,resumeVideo:as,pauseVideo:is,seekVideo:ss,startLivestream:os,stopLivestream:cs,connectTo:ls,startHls:us,stopHls:Di}},r)},Vy=function(t,r){var a={},h=a.onStreamEnabled,y=h===void 0?function(){}:h,j=a.onStreamDisabled,L=j===void 0?function(){}:j,b=a.onMediaStatusChanged,u=b===void 0?function(){}:b,P=a.onVideoQualityChanged,E=P===void 0?function(){}:P,c=ct.useState(null),_=c[0],w=c[1],d=ct.useState(null),g=d[0],n=d[1],m=ct.useState(null),v=m[0],R=m[1],k=ct.useState(null),T=k[0],S=k[1],C=fd(),I=ct.useMemo(function(){var xe,De=C==null?void 0:C.participants,gr=C==null?void 0:C.localParticipant,nr=C==null?void 0:C.activeSpeakerId,un=C==null?void 0:C.mainParticipant,On=(C==null||(xe=C.pinnedParticipants)===null||xe===void 0?void 0:xe.get(t))||{cam:!1,share:!1};return{participants:De,localParticipant:gr,activeSpeakerId:nr,mainParticipant:un,pinState:On}},[C]),o=I.participants,p=I.localParticipant,i=I.activeSpeakerId,s=I.mainParticipant,l=I.pinState,f=o==null?void 0:o.get(t),O=ct.useState(f==null?void 0:f.webcamOn),F=O[0],x=O[1],N=ct.useState(f==null?void 0:f.micOn),z=N[0],V=N[1],J=ct.useState(f==null?void 0:f.mode),ne=J[0],ee=J[1],Q=function(De){if(De.track.readyState==="live")switch(De.kind){case"video":_!=null&&w(null),w(De);break;case"audio":g!=null&&n(null),n(De);break;case"share":v!=null&&R(null),R(De);break;case"shareAudio":T!=null&&S(null),S(De);break}},oe=function(De){switch(De.kind){case"video":w(null);break;case"audio":n(null);break;case"share":R(null);break;case"shareAudio":S(null);break}},he=function(De){Q(De),y(De)},Te=function(De){t===De.participantId&&ee(De.mode)},Se=function(De){oe(De),L(De)},Ce=function(De){var gr=De.peerId,nr=De.prevQuality,un=De.currentQuality;E({peerId:gr,prevQuality:nr,currentQuality:un})},Re=function(De){var gr=De.kind,nr=De.peerId,un=De.newStatus;gr=="audio"?V(un):gr=="video"&&x(un),u({kind:gr,peerId:nr,newStatus:un})},Ee=function(De){f==null||f.setQuality(De)},We=function(De,gr){f==null||f.setViewPort(De,gr)},Yt=function(){f==null||f.enableMic()},rr=function(){f==null||f.disableMic()},yt=function(){f==null||f.enableWebcam()},yr=function(){f==null||f.disableWebcam()},Kt=function(De){f==null||f.pin(De)},Tt=function(De){f==null||f.unpin(De)},Gr=function(){f==null||f.remove()},ft=function(De){var gr=De===void 0?{}:De,nr=gr.height,un=gr.width;return Promise.resolve(f==null?void 0:f.captureImage({height:nr,width:un}))},Dt=function(){return Promise.resolve(f==null?void 0:f.getAudioStats())},Qr=function(){return Promise.resolve(f==null?void 0:f.getVideoStats())},Gt=function(){return Promise.resolve(f==null?void 0:f.getShareStats())},ut=function(){return Promise.resolve(f==null?void 0:f.getShareAudioStats())},_t=function(){f==null||f.consumeWebcamStreams()},fr=function(){f==null||f.consumeMicStreams()},Ft=function(){f==null||f.stopConsumingWebcamStreams()},Qt=function(){f==null||f.stopConsumingMicStreams()},Br=function(De){return Promise.resolve(f==null?void 0:f.switchTo(De)).then(function(){})};return ct.useEffect(function(){var xe=f==null?void 0:f.streams;return xe&&xe.forEach(function(De){Q(De)}),f!=null&&f.micOn&&V(z),f!=null&&f.webcamOn&&x(F),f==null||f.on("stream-enabled",he),f==null||f.on("stream-disabled",Se),f==null||f.on("media-status-changed",Re),f==null||f.on("video-quality-changed",Ce),Ze.on(qe["participant-mode-changed"],Te),function(){f==null||f.off("stream-enabled",he),f==null||f.off("stream-disabled",Se),f==null||f.off("media-status-changed",Re),f==null||f.off("video-quality-changed",Ce),Ze.off(qe["participant-mode-changed"],Te)}},[f]),{displayName:f==null?void 0:f.displayName,participant:f,webcamStream:_,micStream:g,screenShareStream:v,screenShareAudioStream:T,webcamOn:F||!!_,micOn:z||!!g,mode:ne,metaData:f==null?void 0:f.metaData,screenShareOn:!!v,isLocal:(p==null?void 0:p.id)===t,isActiveSpeaker:i===t,isMainParticipant:(s==null?void 0:s.id)===t,pinState:l,consumeMicStreams:fr,consumeWebcamStreams:_t,stopConsumingMicStreams:Qt,stopConsumingWebcamStreams:Ft,setQuality:Ee,setViewPort:We,enableMic:Yt,disableMic:rr,enableWebcam:yt,disableWebcam:yr,captureImage:ft,pin:Kt,unpin:Tt,remove:Gr,switchTo:Br,getAudioStats:Dt,getVideoStats:Qr,getShareStats:Gt,getShareAudioStats:ut}};typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));xo.VideoSDK.Constants;let $y={data:""},Gy=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||$y,Zy=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,qy=/\/\*[^]*?\*\/|  +/g,sm=/\n+/g,Ss=(e,t)=>{let r="",a="",h="";for(let y in e){let j=e[y];y[0]=="@"?y[1]=="i"?r=y+" "+j+";":a+=y[1]=="f"?Ss(j,y):y+"{"+Ss(j,y[1]=="k"?"":t)+"}":typeof j=="object"?a+=Ss(j,t?t.replace(/([^,])+/g,L=>y.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,b=>/&/.test(b)?b.replace(/&/g,L):L?L+" "+b:b)):y):j!=null&&(y=/^--/.test(y)?y:y.replace(/[A-Z]/g,"-$&").toLowerCase(),h+=Ss.p?Ss.p(y,j):y+":"+j+";")}return r+(t&&h?t+"{"+h+"}":h)+a},Ai={},Fv=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+Fv(e[r]);return t}return e},Ky=(e,t,r,a,h)=>{let y=Fv(e),j=Ai[y]||(Ai[y]=(b=>{let u=0,P=11;for(;u<b.length;)P=101*P+b.charCodeAt(u++)>>>0;return"go"+P})(y));if(!Ai[j]){let b=y!==e?e:(u=>{let P,E,c=[{}];for(;P=Zy.exec(u.replace(qy,""));)P[4]?c.shift():P[3]?(E=P[3].replace(sm," ").trim(),c.unshift(c[0][E]=c[0][E]||{})):c[0][P[1]]=P[2].replace(sm," ").trim();return c[0]})(e);Ai[j]=Ss(h?{["@keyframes "+j]:b}:b,r?"":"."+j)}let L=r&&Ai.g?Ai.g:null;return r&&(Ai.g=Ai[j]),((b,u,P,E)=>{E?u.data=u.data.replace(E,b):u.data.indexOf(b)===-1&&(u.data=P?b+u.data:u.data+b)})(Ai[j],t,a,L),j},Qy=(e,t,r)=>e.reduce((a,h,y)=>{let j=t[y];if(j&&j.call){let L=j(r),b=L&&L.props&&L.props.className||/^go/.test(L)&&L;j=b?"."+b:L&&typeof L=="object"?L.props?"":Ss(L,""):L===!1?"":L}return a+h+(j??"")},"");function md(e){let t=this||{},r=e.call?e(t.p):e;return Ky(r.unshift?r.raw?Qy(r,[].slice.call(arguments,1),t.p):r.reduce((a,h)=>Object.assign(a,h&&h.call?h(t.p):h),{}):r,Gy(t.target),t.g,t.o,t.k)}let Bv,Up,Wp;md.bind({g:1});let Gi=md.bind({k:1});function Jy(e,t,r,a){Ss.p=t,Bv=e,Up=r,Wp=a}function Fs(e,t){let r=this||{};return function(){let a=arguments;function h(y,j){let L=Object.assign({},y),b=L.className||h.className;r.p=Object.assign({theme:Up&&Up()},L),r.o=/ *go\d+/.test(b),L.className=md.apply(r,a)+(b?" "+b:"");let u=e;return e[0]&&(u=L.as||e,delete L.as),Wp&&u[0]&&Wp(L),Bv(u,L)}return h}}var Yy=e=>typeof e=="function",Qu=(e,t)=>Yy(e)?e(t):e,Xy=(()=>{let e=0;return()=>(++e).toString()})(),Uv=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),eb=20,Wv=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,eb)};case 1:return{...e,toasts:e.toasts.map(y=>y.id===t.toast.id?{...y,...t.toast}:y)};case 2:let{toast:r}=t;return Wv(e,{type:e.toasts.find(y=>y.id===r.id)?1:0,toast:r});case 3:let{toastId:a}=t;return{...e,toasts:e.toasts.map(y=>y.id===a||a===void 0?{...y,dismissed:!0,visible:!1}:y)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(y=>y.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let h=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(y=>({...y,pauseDuration:y.pauseDuration+h}))}}},ku=[],no={toasts:[],pausedAt:void 0},fo=e=>{no=Wv(no,e),ku.forEach(t=>{t(no)})},tb={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},rb=(e={})=>{let[t,r]=ct.useState(no),a=ct.useRef(no);ct.useEffect(()=>(a.current!==no&&r(no),ku.push(r),()=>{let y=ku.indexOf(r);y>-1&&ku.splice(y,1)}),[]);let h=t.toasts.map(y=>{var j,L,b;return{...e,...e[y.type],...y,removeDelay:y.removeDelay||((j=e[y.type])==null?void 0:j.removeDelay)||(e==null?void 0:e.removeDelay),duration:y.duration||((L=e[y.type])==null?void 0:L.duration)||(e==null?void 0:e.duration)||tb[y.type],style:{...e.style,...(b=e[y.type])==null?void 0:b.style,...y.style}}});return{...t,toasts:h}},nb=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||Xy()}),wl=e=>(t,r)=>{let a=nb(t,e,r);return fo({type:2,toast:a}),a.id},xa=(e,t)=>wl("blank")(e,t);xa.error=wl("error");xa.success=wl("success");xa.loading=wl("loading");xa.custom=wl("custom");xa.dismiss=e=>{fo({type:3,toastId:e})};xa.remove=e=>fo({type:4,toastId:e});xa.promise=(e,t,r)=>{let a=xa.loading(t.loading,{...r,...r==null?void 0:r.loading});return typeof e=="function"&&(e=e()),e.then(h=>{let y=t.success?Qu(t.success,h):void 0;return y?xa.success(y,{id:a,...r,...r==null?void 0:r.success}):xa.dismiss(a),h}).catch(h=>{let y=t.error?Qu(t.error,h):void 0;y?xa.error(y,{id:a,...r,...r==null?void 0:r.error}):xa.dismiss(a)}),e};var ab=(e,t)=>{fo({type:1,toast:{id:e,height:t}})},ib=()=>{fo({type:5,time:Date.now()})},Yc=new Map,sb=1e3,ob=(e,t=sb)=>{if(Yc.has(e))return;let r=setTimeout(()=>{Yc.delete(e),fo({type:4,toastId:e})},t);Yc.set(e,r)},cb=e=>{let{toasts:t,pausedAt:r}=rb(e);ct.useEffect(()=>{if(r)return;let y=Date.now(),j=t.map(L=>{if(L.duration===1/0)return;let b=(L.duration||0)+L.pauseDuration-(y-L.createdAt);if(b<0){L.visible&&xa.dismiss(L.id);return}return setTimeout(()=>xa.dismiss(L.id),b)});return()=>{j.forEach(L=>L&&clearTimeout(L))}},[t,r]);let a=ct.useCallback(()=>{r&&fo({type:6,time:Date.now()})},[r]),h=ct.useCallback((y,j)=>{let{reverseOrder:L=!1,gutter:b=8,defaultPosition:u}=j||{},P=t.filter(_=>(_.position||u)===(y.position||u)&&_.height),E=P.findIndex(_=>_.id===y.id),c=P.filter((_,w)=>w<E&&_.visible).length;return P.filter(_=>_.visible).slice(...L?[c+1]:[0,c]).reduce((_,w)=>_+(w.height||0)+b,0)},[t]);return ct.useEffect(()=>{t.forEach(y=>{if(y.dismissed)ob(y.id,y.removeDelay);else{let j=Yc.get(y.id);j&&(clearTimeout(j),Yc.delete(y.id))}})},[t]),{toasts:t,handlers:{updateHeight:ab,startPause:ib,endPause:a,calculateOffset:h}}},lb=Gi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,ub=Gi`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,db=Gi`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,pb=Fs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${lb} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${ub} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${db} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,hb=Gi`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,fb=Fs("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${hb} 1s linear infinite;
`,mb=Gi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,gb=Gi`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,vb=Fs("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${mb} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${gb} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,_b=Fs("div")`
  position: absolute;
`,yb=Fs("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,bb=Gi`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,wb=Fs("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${bb} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Sb=({toast:e})=>{let{icon:t,type:r,iconTheme:a}=e;return t!==void 0?typeof t=="string"?ct.createElement(wb,null,t):t:r==="blank"?null:ct.createElement(yb,null,ct.createElement(fb,{...a}),r!=="loading"&&ct.createElement(_b,null,r==="error"?ct.createElement(pb,{...a}):ct.createElement(vb,{...a})))},Rb=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Eb=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,kb="0%{opacity:0;} 100%{opacity:1;}",Cb="0%{opacity:1;} 100%{opacity:0;}",Tb=Fs("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Pb=Fs("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,xb=(e,t)=>{let r=e.includes("top")?1:-1,[a,h]=Uv()?[kb,Cb]:[Rb(r),Eb(r)];return{animation:t?`${Gi(a)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Gi(h)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},Ob=ct.memo(({toast:e,position:t,style:r,children:a})=>{let h=e.height?xb(e.position||t||"top-center",e.visible):{opacity:0},y=ct.createElement(Sb,{toast:e}),j=ct.createElement(Pb,{...e.ariaProps},Qu(e.message,e));return ct.createElement(Tb,{className:e.className,style:{...h,...r,...e.style}},typeof a=="function"?a({icon:y,message:j}):ct.createElement(ct.Fragment,null,y,j))});Jy(ct.createElement);var Db=({id:e,className:t,style:r,onHeightUpdate:a,children:h})=>{let y=ct.useCallback(j=>{if(j){let L=()=>{let b=j.getBoundingClientRect().height;a(e,b)};L(),new MutationObserver(L).observe(j,{subtree:!0,childList:!0,characterData:!0})}},[e,a]);return ct.createElement("div",{ref:y,className:t,style:r},h)},Ib=(e,t)=>{let r=e.includes("top"),a=r?{top:0}:{bottom:0},h=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Uv()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...a,...h}},Mb=md`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,du=16,Hv=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:a,children:h,containerStyle:y,containerClassName:j})=>{let{toasts:L,handlers:b}=cb(r);return ct.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:du,left:du,right:du,bottom:du,pointerEvents:"none",...y},className:j,onMouseEnter:b.startPause,onMouseLeave:b.endPause},L.map(u=>{let P=u.position||t,E=b.calculateOffset(u,{reverseOrder:e,gutter:a,defaultPosition:t}),c=Ib(P,E);return ct.createElement(Db,{id:u.id,key:u.id,onHeightUpdate:b.updateHeight,className:u.visible?Mb:"",style:c},u.type==="custom"?Qu(u.message,u):h?h(u):ct.createElement(Ob,{toast:u,position:P}))}))},ei=xa;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Lb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nb=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),yi=(e,t)=>{const r=ct.forwardRef(({color:a="currentColor",size:h=24,strokeWidth:y=2,absoluteStrokeWidth:j,className:L="",children:b,...u},P)=>ct.createElement("svg",{ref:P,...Lb,width:h,height:h,stroke:a,strokeWidth:j?Number(y)*24/Number(h):y,className:["lucide",`lucide-${Nb(e)}`,L].join(" "),...u},[...t.map(([E,c])=>ct.createElement(E,c)),...Array.isArray(b)?b:[b]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const om=yi("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=yi("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jb=yi("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fb=yi("Earth",[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3v0a2 2 0 0 1 2 2v0c0 1.1.9 2 2 2v0a2 2 0 0 0 2-2v0c0-1.1.9-2 2-2h3.17",key:"1fi5u6"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2v0a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"xsiumc"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=yi("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bb=yi("MicOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ub=yi("Mic",[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wb=yi("PhoneOff",[["path",{d:"M10.68 13.31a16 16 0 0 0 3.41 2.6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7 2 2 0 0 1 1.72 2v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.42 19.42 0 0 1-3.33-2.67m-2.67-3.34a19.79 19.79 0 0 1-3.07-8.63A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91",key:"z86iuo"}],["line",{x1:"22",x2:"2",y1:"2",y2:"22",key:"11kh81"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hp=yi("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cm=yi("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lm=yi("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Hb={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VIDEOSDK_TOKEN:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcGlrZXkiOiIyNDM2OWI1MS05NDZkLTQ0OTItYjc3Yy05MjI0M2UzMGRjODciLCJwZXJtaXNzaW9ucyI6WyJhbGxvd19qb2luIl0sImlhdCI6MTc1NjEwNTM3NCwiZXhwIjoxNzU2NzEwMTc0fQ.h8qJDAGEGr-qgFRQk-7aVMFmn_sou_HyIRk5ul2RGtM"},um=e=>{let t;const r=new Set,a=(P,E)=>{const c=typeof P=="function"?P(t):P;if(!Object.is(c,t)){const _=t;t=E??(typeof c!="object"||c===null)?c:Object.assign({},t,c),r.forEach(w=>w(t,_))}},h=()=>t,b={setState:a,getState:h,getInitialState:()=>u,subscribe:P=>(r.add(P),()=>r.delete(P)),destroy:()=>{(Hb?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},u=t=e(a,h,b);return b},zb=e=>e?um(e):um;var Vv={exports:{}},$v={},Gv={exports:{}},Zv={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rc=ct;function Vb(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $b=typeof Object.is=="function"?Object.is:Vb,Gb=rc.useState,Zb=rc.useEffect,qb=rc.useLayoutEffect,Kb=rc.useDebugValue;function Qb(e,t){var r=t(),a=Gb({inst:{value:r,getSnapshot:t}}),h=a[0].inst,y=a[1];return qb(function(){h.value=r,h.getSnapshot=t,Zd(h)&&y({inst:h})},[e,r,t]),Zb(function(){return Zd(h)&&y({inst:h}),e(function(){Zd(h)&&y({inst:h})})},[e]),Kb(r),r}function Zd(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!$b(e,r)}catch{return!0}}function Jb(e,t){return t()}var Yb=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Jb:Qb;Zv.useSyncExternalStore=rc.useSyncExternalStore!==void 0?rc.useSyncExternalStore:Yb;Gv.exports=Zv;var Xb=Gv.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gd=ct,ew=Xb;function tw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var rw=typeof Object.is=="function"?Object.is:tw,nw=ew.useSyncExternalStore,aw=gd.useRef,iw=gd.useEffect,sw=gd.useMemo,ow=gd.useDebugValue;$v.useSyncExternalStoreWithSelector=function(e,t,r,a,h){var y=aw(null);if(y.current===null){var j={hasValue:!1,value:null};y.current=j}else j=y.current;y=sw(function(){function b(_){if(!u){if(u=!0,P=_,_=a(_),h!==void 0&&j.hasValue){var w=j.value;if(h(w,_))return E=w}return E=_}if(w=E,rw(P,_))return w;var d=a(_);return h!==void 0&&h(w,d)?(P=_,w):(P=_,E=d)}var u=!1,P,E,c=r===void 0?null:r;return[function(){return b(t())},c===null?void 0:function(){return b(c())}]},[t,r,a,h]);var L=nw(e,y[0],y[1]);return iw(function(){j.hasValue=!0,j.value=L},[L]),ow(L),L};Vv.exports=$v;var cw=Vv.exports;const lw=zp(cw),qv={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_VIDEOSDK_TOKEN:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcGlrZXkiOiIyNDM2OWI1MS05NDZkLTQ0OTItYjc3Yy05MjI0M2UzMGRjODciLCJwZXJtaXNzaW9ucyI6WyJhbGxvd19qb2luIl0sImlhdCI6MTc1NjEwNTM3NCwiZXhwIjoxNzU2NzEwMTc0fQ.h8qJDAGEGr-qgFRQk-7aVMFmn_sou_HyIRk5ul2RGtM"},{useDebugValue:uw}=na,{useSyncExternalStoreWithSelector:dw}=lw;let dm=!1;const pw=e=>e;function hw(e,t=pw,r){(qv?"production":void 0)!=="production"&&r&&!dm&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),dm=!0);const a=dw(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return uw(a),a}const pm=e=>{(qv?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?zb(e):e,r=(a,h)=>hw(t,a,h);return Object.assign(r,t),r},fw=e=>e?pm(e):pm,Bh=fw(e=>({token:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhcGlrZXkiOiIyNDM2OWI1MS05NDZkLTQ0OTItYjc3Yy05MjI0M2UzMGRjODciLCJwZXJtaXNzaW9ucyI6WyJhbGxvd19qb2luIl0sImlhdCI6MTc1NjEwNTM3NCwiZXhwIjoxNzU2NzEwMTc0fQ.h8qJDAGEGr-qgFRQk-7aVMFmn_sou_HyIRk5ul2RGtM",aiJoined:!1,setAiJoined:t=>e({aiJoined:t})}));function Kv(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var h=e.length;for(t=0;t<h;t++)e[t]&&(r=Kv(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function Js(){for(var e,t,r=0,a="",h=arguments.length;r<h;r++)(e=arguments[r])&&(t=Kv(e))&&(a&&(a+=" "),a+=t);return a}const hm=({participantId:e,isAI:t,size:r="normal"})=>{const a=na.useRef(null),h=na.useRef(null),[y,j]=na.useState(!1),{isLocal:L,webcamStream:b,micStream:u,webcamOn:P,micOn:E,isActiveSpeaker:c,displayName:_}=Vy(e),{muteMic:w,unmuteMic:d}=fd();na.useEffect(()=>{if(!L||t)return;const m=R=>{R.code==="Space"&&!y&&(R.preventDefault(),j(!0),d())},v=R=>{R.code==="Space"&&(R.preventDefault(),j(!1),w())};return window.addEventListener("keydown",m),window.addEventListener("keyup",v),()=>{window.removeEventListener("keydown",m),window.removeEventListener("keyup",v)}},[L,t,y,d,w]),na.useEffect(()=>{L&&!t&&c&&document.querySelectorAll('[data-ai-participant="true"]').forEach(v=>{v.getAttribute("data-is-speaking")==="true"&&(w(),j(!1))})},[L,t,c,w]),na.useEffect(()=>{if(a.current&&b&&P){const m=new MediaStream;m.addTrack(b.track),a.current.srcObject=m,a.current.play().catch(console.error)}return()=>{a.current&&(a.current.srcObject=null)}},[b,P]),na.useEffect(()=>{if(h.current&&u&&E){const m=new MediaStream;m.addTrack(u.track),h.current.srcObject=m,h.current.play().catch(console.error)}return()=>{h.current&&(h.current.srcObject=null)}},[u,E]);const g=t&&c,n=c||y;return nt.jsxs("div",{className:Js("relative rounded-xl overflow-hidden bg-gray-800/50 backdrop-blur-sm group",r==="large"?"aspect-[16/9]":"aspect-video",n&&"ring-2",t?"ring-blue-500":"ring-green-500",r==="large"&&"shadow-2xl"),"data-ai-participant":t,"data-is-speaking":c,children:[nt.jsxs("div",{className:Js("absolute top-4 left-4 z-20 transition-all duration-300","flex items-center gap-2 px-3 py-1.5 rounded-full",n?t?"bg-blue-500/90":"bg-green-500/90":"bg-gray-800/90 opacity-0 group-hover:opacity-100"),children:[n?nt.jsx(Ub,{className:"w-4 h-4 text-white animate-pulse"}):nt.jsx(Bb,{className:"w-4 h-4 text-gray-300"}),nt.jsx("span",{className:"text-white text-sm font-medium",children:n?"Speaking":"Not Speaking"})]}),nt.jsx("div",{className:"absolute inset-0",children:P&&b?nt.jsx("video",{ref:a,autoPlay:!0,playsInline:!0,muted:L,className:"w-full h-full object-cover"}):nt.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-gray-800 to-gray-900",children:nt.jsxs("div",{className:"relative",children:[nt.jsx("div",{className:Js("p-4 rounded-full relative z-10",t?"bg-blue-500/20":"bg-gray-600/20"),children:t?nt.jsx(om,{className:Js("text-blue-400",r==="large"?"w-24 h-24":"w-16 h-16")}):nt.jsx(cm,{className:Js("text-gray-400",r==="large"?"w-24 h-24":"w-16 h-16")})}),(g||y)&&nt.jsxs("div",{className:"absolute inset-0 -z-10",children:[nt.jsx("div",{className:"absolute inset-0 animate-wave-pulse-fast rounded-full bg-blue-400/30"}),nt.jsx("div",{className:"absolute -inset-4 animate-wave-pulse-medium rounded-full bg-blue-400/20"}),nt.jsx("div",{className:"absolute -inset-8 animate-wave-pulse-slow rounded-full bg-blue-400/10"})]})]})})}),nt.jsx("audio",{ref:h,autoPlay:!0,playsInline:!0,muted:L}),nt.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/80 to-transparent",children:nt.jsxs("div",{className:"flex items-center justify-between",children:[nt.jsxs("div",{className:"flex items-center space-x-3",children:[nt.jsx("div",{className:Js("p-2 rounded-full",t?"bg-blue-500/20":"bg-gray-500/20"),children:t?nt.jsx(om,{className:"w-5 h-5 text-blue-400"}):nt.jsx(cm,{className:"w-5 h-5 text-gray-400"})}),nt.jsxs("span",{className:"text-white font-medium text-lg",children:[_," ",L&&"(You)"]})]}),L&&!t&&nt.jsx("button",{onMouseDown:()=>{j(!0),d()},onMouseUp:()=>{j(!1),w()},onMouseLeave:()=>{y&&(j(!1),w())},className:Js("px-4 py-2 rounded-full transition-all duration-300",y?"bg-green-500 text-white scale-105":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:"Hold to Speak"})]})})]})},mw=({setMeetingId:e})=>{const{end:t,meetingId:r}=fd(),{token:a,aiJoined:h,setAiJoined:y}=Bh(),[j,L]=na.useState(!1),b=async()=>{try{if(!(await fetch("http://localhost:8000/join-player",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({meeting_id:r,token:a})})).ok)throw new Error("Failed to invite AI");ei.success("AI Translator joined successfully"),y(!0)}catch(P){ei.error("Failed to invite AI Translator"),console.error("Error inviting AI:",P)}},u=()=>{navigator.clipboard.writeText(r||""),L(!0),ei.success("Meeting ID copied to clipboard"),setTimeout(()=>L(!1),2e3)};return nt.jsx("div",{className:"fixed bottom-0 left-0 right-0 p-6 bg-gradient-to-t from-black/90 to-transparent",children:nt.jsxs("div",{className:"max-w-md mx-auto flex items-center justify-center space-x-4",children:[nt.jsx("button",{onClick:u,className:"p-4 rounded-full bg-gray-700 hover:bg-gray-600 transition-colors",title:"Copy Meeting ID",children:j?nt.jsx(Ab,{className:"w-6 h-6 text-green-400"}):nt.jsx(jb,{className:"w-6 h-6 text-white"})}),!h&&nt.jsx("button",{onClick:b,className:"p-4 bg-blue-600 rounded-full hover:bg-blue-700 transition-colors",title:"Invite AI Translator",children:nt.jsx(Hp,{className:"w-6 h-6 text-white"})}),nt.jsx("button",{onClick:()=>{t(),e(null)},className:"p-4 rounded-full bg-red-500 hover:bg-red-600 transition-colors",children:nt.jsx(Wb,{className:"w-6 h-6 text-white transform rotate-225"})})]})})},fm=[{code:"en",name:"English"},{code:"es",name:"Spanish"},{code:"fr",name:"French"},{code:"de",name:"German"},{code:"it",name:"Italian"},{code:"pt",name:"Portuguese"},{code:"ru",name:"Russian"},{code:"zh",name:"Chinese"},{code:"ja",name:"Japanese"},{code:"ko",name:"Korean"},{code:"hi",name:"Hindi"},{code:"ar",name:"Arabic"}],gw=({setMeetingId:e})=>{const{participants:t}=fd();Bh();const r=j=>{var u;const L=t.get(j),b=((u=L==null?void 0:L.displayName)==null?void 0:u.toLowerCase())||"";return b.includes("ai")||b.includes("bot")},a=[...t.keys()],h=a.find(j=>r(j)),y=a.filter(j=>!r(j));return nt.jsxs("div",{className:"min-h-screen w-full bg-gradient-to-br from-gray-900 to-black",children:[nt.jsx("div",{className:"container mx-auto px-4 py-8",children:nt.jsxs("div",{className:"flex flex-col gap-8",children:[h&&nt.jsxs("div",{className:"w-full max-w-3xl mx-auto",children:[nt.jsxs("h2",{className:"text-white text-xl font-semibold mb-4 flex items-center gap-2",children:[nt.jsx(zv,{className:"w-6 h-6 text-blue-400"}),"AI Translator"]}),nt.jsx(hm,{participantId:h,isAI:!0,size:"large"})]}),nt.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:y.map(j=>nt.jsx(hm,{participantId:j,isAI:!1,size:"normal"},j))})]})}),nt.jsx(mw,{setMeetingId:e}),nt.jsx(Hv,{position:"top-center"})]})};function vw(){const{token:e}=Bh(),[t,r]=na.useState(null),[a,h]=na.useState(""),[y,j]=na.useState(fm[0].name),[L,b]=na.useState(!1),[u,P]=na.useState(!1),[E,c]=na.useState(""),[_,w]=na.useState("select"),[d,g]=na.useState(!1),n=async()=>{try{return await navigator.mediaDevices.getUserMedia({audio:!0,video:!0}),g(!0),!0}catch(T){return console.error("Error getting permissions:",T),ei.error("Please allow camera and microphone access to join the meeting"),!1}},m=async T=>{try{return(await fetch(`https://api.videosdk.live/v2/rooms/validate/${T}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`${e}`}})).ok}catch(S){return console.error(S),!1}},v=async()=>{if(!a){ei.error("Please enter your name");return}if(await n()){b(!0);try{const S=await fetch("https://api.videosdk.live/v2/rooms",{method:"POST",headers:{Authorization:`${e}`,"Content-Type":"application/json"}});if(!S.ok)throw new Error("Failed to create meeting");const C=await S.json();r(C.roomId),ei.success("Meeting created successfully!")}catch(S){console.error("Error creating meeting:",S),ei.error("Failed to create meeting")}finally{b(!1)}}},R=async()=>{if(!a){ei.error("Please enter your name");return}if(!E){ei.error("Please enter a meeting ID");return}if(await n()){P(!0);try{if(!await m(E)){ei.error("Invalid meeting ID");return}r(E),ei.success("Joined meeting successfully!")}catch(S){console.error("Error joining meeting:",S),ei.error("Failed to join meeting")}finally{P(!1)}}},k=()=>_==="select"?nt.jsxs("div",{className:"space-y-6",children:[nt.jsxs("button",{onClick:()=>w("create"),className:"w-full px-6 py-4 bg-blue-600 hover:bg-blue-700 rounded-xl text-white font-medium transition-all duration-200 flex items-center justify-center space-x-3 hover:scale-[1.02]",children:[nt.jsx(Hp,{className:"w-6 h-6"}),nt.jsx("span",{children:"Create New Meeting"})]}),nt.jsxs("div",{className:"relative flex items-center gap-4",children:[nt.jsx("div",{className:"flex-1 h-px bg-gray-700"}),nt.jsx("span",{className:"text-gray-400 text-sm font-medium",children:"Or"}),nt.jsx("div",{className:"flex-1 h-px bg-gray-700"})]}),nt.jsxs("button",{onClick:()=>w("join"),className:"w-full px-6 py-4 bg-green-600 hover:bg-green-700 rounded-xl text-white font-medium transition-all duration-200 flex items-center justify-center space-x-3 hover:scale-[1.02]",children:[nt.jsx(lm,{className:"w-6 h-6"}),nt.jsx("span",{children:"Join Existing Meeting"})]})]}):nt.jsxs("div",{className:"space-y-6",children:[nt.jsxs("div",{children:[nt.jsx("label",{htmlFor:"userName",className:"block text-white text-sm font-medium mb-2",children:"Enter Your Name"}),nt.jsx("input",{type:"text",id:"userName",value:a,onChange:T=>h(T.target.value.trim()),placeholder:"Your name",className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),nt.jsxs("div",{children:[nt.jsxs("label",{htmlFor:"language",className:"text-white text-sm font-medium mb-2 flex items-center gap-2",children:[nt.jsx(Fb,{className:"w-4 h-4"}),"Select Your Language"]}),nt.jsx("select",{id:"language",value:y,onChange:T=>j(T.target.value),className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-xl text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200",children:fm.map(T=>nt.jsx("option",{value:T.name,children:T.name},T.name))})]}),_==="join"&&nt.jsxs("div",{children:[nt.jsx("label",{htmlFor:"meetingId",className:"block text-white text-sm font-medium mb-2",children:"Meeting ID"}),nt.jsx("input",{type:"text",id:"meetingId",value:E,onChange:T=>c(T.target.value.trim()),placeholder:"Enter Meeting ID",className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-xl text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"})]}),nt.jsxs("div",{className:"space-y-4",children:[_==="create"?nt.jsx("button",{onClick:v,disabled:!a||L,className:"w-full px-6 py-4 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-700 disabled:cursor-not-allowed rounded-xl text-white font-medium transition-all duration-200 flex items-center justify-center space-x-2 hover:scale-[1.02]",children:L?nt.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-white"}):nt.jsxs(nt.Fragment,{children:[nt.jsx(Hp,{className:"w-5 h-5"}),nt.jsx("span",{children:"Create Meeting"})]})}):nt.jsx("button",{onClick:R,disabled:!a||!E||u,className:"w-full px-6 py-4 bg-green-600 hover:bg-green-700 disabled:bg-gray-700 disabled:cursor-not-allowed rounded-xl text-white font-medium transition-all duration-200 flex items-center justify-center space-x-2 hover:scale-[1.02]",children:u?nt.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-white"}):nt.jsxs(nt.Fragment,{children:[nt.jsx(lm,{className:"w-5 h-5"}),nt.jsx("span",{children:"Join Meeting"})]})}),nt.jsx("button",{onClick:()=>w("select"),className:"w-full px-6 py-4 bg-gray-800/50 hover:bg-gray-700 rounded-xl text-white font-medium transition-all duration-200 hover:scale-[1.02]",children:"Back"})]})]});return t?nt.jsx(zy,{config:{meetingId:t,micEnabled:!1,webcamEnabled:!0,name:a,debugMode:!0,metaData:{preferredLanguage:y}},token:e,joinWithoutUserInteraction:!0,children:nt.jsx(gw,{setMeetingId:r})}):nt.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 to-black flex items-center justify-center p-4",children:[nt.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center",children:[nt.jsxs("h1",{className:"text-4xl font-bold text-white mb-6 flex items-center gap-3",children:[nt.jsx(zv,{className:"w-10 h-10 text-blue-400"}),"Real-Time Translator Meeting"]}),nt.jsx("p",{className:"text-gray-300 mb-8 max-w-md",children:"Connect with others and break language barriers with our real-time translation feature."}),nt.jsx("div",{className:"bg-gray-800/50 backdrop-blur-sm p-8 rounded-2xl shadow-xl max-w-md w-full border border-gray-700/50",children:k()})]}),nt.jsx(Hv,{position:"top-center"})]})}Tv(document.getElementById("root")).render(nt.jsx(vw,{}));
